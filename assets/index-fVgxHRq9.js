(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function Roe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var j7={exports:{}},ZT={},z7={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1=Symbol.for("react.element"),Noe=Symbol.for("react.portal"),Doe=Symbol.for("react.fragment"),Foe=Symbol.for("react.strict_mode"),joe=Symbol.for("react.profiler"),zoe=Symbol.for("react.provider"),Voe=Symbol.for("react.context"),Uoe=Symbol.for("react.forward_ref"),Boe=Symbol.for("react.suspense"),Goe=Symbol.for("react.memo"),Hoe=Symbol.for("react.lazy"),X4=Symbol.iterator;function qoe(t){return t===null||typeof t!="object"?null:(t=X4&&t[X4]||t["@@iterator"],typeof t=="function"?t:null)}var V7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U7=Object.assign,B7={};function o0(t,e,i){this.props=t,this.context=e,this.refs=B7,this.updater=i||V7}o0.prototype.isReactComponent={};o0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};o0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function G7(){}G7.prototype=o0.prototype;function ON(t,e,i){this.props=t,this.context=e,this.refs=B7,this.updater=i||V7}var AN=ON.prototype=new G7;AN.constructor=ON;U7(AN,o0.prototype);AN.isPureReactComponent=!0;var ej=Array.isArray,H7=Object.prototype.hasOwnProperty,PN={current:null},q7={key:!0,ref:!0,__self:!0,__source:!0};function W7(t,e,i){var r,n={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)H7.call(e,r)&&!q7.hasOwnProperty(r)&&(n[r]=e[r]);var a=arguments.length-2;if(a===1)n.children=i;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];n.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)n[r]===void 0&&(n[r]=a[r]);return{$$typeof:R1,type:t,key:s,ref:o,props:n,_owner:PN.current}}function Woe(t,e){return{$$typeof:R1,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function RN(t){return typeof t=="object"&&t!==null&&t.$$typeof===R1}function Joe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var tj=/\/+/g;function HI(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Joe(""+t.key):e.toString(36)}function P$(t,e,i,r,n){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case R1:case Noe:o=!0}}if(o)return o=t,n=n(o),t=r===""?"."+HI(o,0):r,ej(n)?(i="",t!=null&&(i=t.replace(tj,"$&/")+"/"),P$(n,e,i,"",function(u){return u})):n!=null&&(RN(n)&&(n=Woe(n,i+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(tj,"$&/")+"/")+t)),e.push(n)),1;if(o=0,r=r===""?".":r+":",ej(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+HI(s,a);o+=P$(s,e,i,l,n)}else if(l=qoe(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+HI(s,a++),o+=P$(s,e,i,l,n);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function G_(t,e,i){if(t==null)return t;var r=[],n=0;return P$(t,r,"","",function(s){return e.call(i,s,n++)}),r}function Zoe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},R$={transition:null},Yoe={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:R$,ReactCurrentOwner:PN};Ye.Children={map:G_,forEach:function(t,e,i){G_(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return G_(t,function(){e++}),e},toArray:function(t){return G_(t,function(e){return e})||[]},only:function(t){if(!RN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ye.Component=o0;Ye.Fragment=Doe;Ye.Profiler=joe;Ye.PureComponent=ON;Ye.StrictMode=Foe;Ye.Suspense=Boe;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yoe;Ye.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=U7({},t.props),n=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=PN.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)H7.call(e,l)&&!q7.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=i;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:R1,type:t.type,key:n,ref:s,props:r,_owner:o}};Ye.createContext=function(t){return t={$$typeof:Voe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zoe,_context:t},t.Consumer=t};Ye.createElement=W7;Ye.createFactory=function(t){var e=W7.bind(null,t);return e.type=t,e};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(t){return{$$typeof:Uoe,render:t}};Ye.isValidElement=RN;Ye.lazy=function(t){return{$$typeof:Hoe,_payload:{_status:-1,_result:t},_init:Zoe}};Ye.memo=function(t,e){return{$$typeof:Goe,type:t,compare:e===void 0?null:e}};Ye.startTransition=function(t){var e=R$.transition;R$.transition={};try{t()}finally{R$.transition=e}};Ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ye.useCallback=function(t,e){return fn.current.useCallback(t,e)};Ye.useContext=function(t){return fn.current.useContext(t)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};Ye.useEffect=function(t,e){return fn.current.useEffect(t,e)};Ye.useId=function(){return fn.current.useId()};Ye.useImperativeHandle=function(t,e,i){return fn.current.useImperativeHandle(t,e,i)};Ye.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};Ye.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};Ye.useMemo=function(t,e){return fn.current.useMemo(t,e)};Ye.useReducer=function(t,e,i){return fn.current.useReducer(t,e,i)};Ye.useRef=function(t){return fn.current.useRef(t)};Ye.useState=function(t){return fn.current.useState(t)};Ye.useSyncExternalStore=function(t,e,i){return fn.current.useSyncExternalStore(t,e,i)};Ye.useTransition=function(){return fn.current.useTransition()};Ye.version="18.2.0";z7.exports=Ye;var pd=z7.exports;const $2=Roe(pd);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Koe=pd,Qoe=Symbol.for("react.element"),Xoe=Symbol.for("react.fragment"),eae=Object.prototype.hasOwnProperty,tae=Koe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iae={key:!0,ref:!0,__self:!0,__source:!0};function J7(t,e,i){var r,n={},s=null,o=null;i!==void 0&&(s=""+i),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eae.call(e,r)&&!iae.hasOwnProperty(r)&&(n[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)n[r]===void 0&&(n[r]=e[r]);return{$$typeof:Qoe,type:t,key:s,ref:o,props:n,_owner:tae.current}}ZT.Fragment=Xoe;ZT.jsx=J7;ZT.jsxs=J7;j7.exports=ZT;var Bt=j7.exports,xL={},Z7={exports:{}},Cs={},Y7={exports:{}},K7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ne){var fe=H.length;H.push(ne);e:for(;0<fe;){var Fe=fe-1>>>1,Be=H[Fe];if(0<n(Be,ne))H[Fe]=ne,H[fe]=Be,fe=Fe;else break e}}function i(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ne=H[0],fe=H.pop();if(fe!==ne){H[0]=fe;e:for(var Fe=0,Be=H.length,yt=Be>>>1;Fe<yt;){var $t=2*(Fe+1)-1,ii=H[$t],Nt=$t+1,Dt=H[Nt];if(0>n(ii,fe))Nt<Be&&0>n(Dt,ii)?(H[Fe]=Dt,H[Nt]=fe,Fe=Nt):(H[Fe]=ii,H[$t]=fe,Fe=$t);else if(Nt<Be&&0>n(Dt,fe))H[Fe]=Dt,H[Nt]=fe,Fe=Nt;else break e}}return ne}function n(H,ne){var fe=H.sortIndex-ne.sortIndex;return fe!==0?fe:H.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],p=1,h=null,m=3,y=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var ne=i(u);ne!==null;){if(ne.callback===null)r(u);else if(ne.startTime<=H)r(u),ne.sortIndex=ne.expirationTime,e(l,ne);else break;ne=i(u)}}function $(H){if(v=!1,S(H),!g)if(i(l)!==null)g=!0,re(T);else{var ne=i(u);ne!==null&&Q($,ne.startTime-H)}}function T(H,ne){g=!1,v&&(v=!1,b(M),M=-1),y=!0;var fe=m;try{for(S(ne),h=i(l);h!==null&&(!(h.expirationTime>ne)||H&&!F());){var Fe=h.callback;if(typeof Fe=="function"){h.callback=null,m=h.priorityLevel;var Be=Fe(h.expirationTime<=ne);ne=t.unstable_now(),typeof Be=="function"?h.callback=Be:h===i(l)&&r(l),S(ne)}else r(l);h=i(l)}if(h!==null)var yt=!0;else{var $t=i(u);$t!==null&&Q($,$t.startTime-ne),yt=!1}return yt}finally{h=null,m=fe,y=!1}}var I=!1,C=null,M=-1,R=5,O=-1;function F(){return!(t.unstable_now()-O<R)}function A(){if(C!==null){var H=t.unstable_now();O=H;var ne=!0;try{ne=C(!0,H)}finally{ne?P():(I=!1,C=null)}}else I=!1}var P;if(typeof _=="function")P=function(){_(A)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,te=V.port2;V.port1.onmessage=A,P=function(){te.postMessage(null)}}else P=function(){w(A,0)};function re(H){C=H,I||(I=!0,P())}function Q(H,ne){M=w(function(){H(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){g||y||(g=!0,re(T))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var fe=m;m=ne;try{return H()}finally{m=fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ne){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var fe=m;m=H;try{return ne()}finally{m=fe}},t.unstable_scheduleCallback=function(H,ne,fe){var Fe=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Fe+fe:Fe):fe=Fe,H){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=fe+Be,H={id:p++,callback:ne,priorityLevel:H,startTime:fe,expirationTime:Be,sortIndex:-1},fe>Fe?(H.sortIndex=fe,e(u,H),i(l)===null&&H===i(u)&&(v?(b(M),M=-1):v=!0,Q($,fe-Fe))):(H.sortIndex=Be,e(l,H),g||y||(g=!0,re(T))),H},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(H){var ne=m;return function(){var fe=m;m=ne;try{return H.apply(this,arguments)}finally{m=fe}}}})(K7);Y7.exports=K7;var rae=Y7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q7=pd,$s=rae;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X7=new Set,Cw={};function Nf(t,e){kg(t,e),kg(t+"Capture",e)}function kg(t,e){for(Cw[t]=e,t=0;t<e.length;t++)X7.add(e[t])}var Ac=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),EL=Object.prototype.hasOwnProperty,nae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ij={},rj={};function sae(t){return EL.call(rj,t)?!0:EL.call(ij,t)?!1:nae.test(t)?rj[t]=!0:(ij[t]=!0,!1)}function oae(t,e,i,r){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aae(t,e,i,r){if(e===null||typeof e>"u"||oae(t,e,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,i,r,n,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Er={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Er[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Er[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Er[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Er[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Er[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Er[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Er[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Er[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Er[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var NN=/[\-:]([a-z])/g;function DN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(NN,DN);Er[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(NN,DN);Er[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(NN,DN);Er[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Er[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Er.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Er[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function FN(t,e,i,r){var n=Er.hasOwnProperty(e)?Er[e]:null;(n!==null?n.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aae(e,i,n,r)&&(i=null),r||n===null?sae(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):n.mustUseProperty?t[n.propertyName]=i===null?n.type===3?!1:"":i:(e=n.attributeName,r=n.attributeNamespace,i===null?t.removeAttribute(e):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?t.setAttributeNS(r,e,i):t.setAttribute(e,i))))}var Wc=Q7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H_=Symbol.for("react.element"),Ly=Symbol.for("react.portal"),Oy=Symbol.for("react.fragment"),jN=Symbol.for("react.strict_mode"),TL=Symbol.for("react.profiler"),eG=Symbol.for("react.provider"),tG=Symbol.for("react.context"),zN=Symbol.for("react.forward_ref"),kL=Symbol.for("react.suspense"),IL=Symbol.for("react.suspense_list"),VN=Symbol.for("react.memo"),Yu=Symbol.for("react.lazy"),iG=Symbol.for("react.offscreen"),nj=Symbol.iterator;function V0(t){return t===null||typeof t!="object"?null:(t=nj&&t[nj]||t["@@iterator"],typeof t=="function"?t:null)}var li=Object.assign,qI;function _v(t){if(qI===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);qI=e&&e[1]||""}return`
`+qI+t}var WI=!1;function JI(t,e){if(!t||WI)return"";WI=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),s=r.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{WI=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?_v(t):""}function lae(t){switch(t.tag){case 5:return _v(t.type);case 16:return _v("Lazy");case 13:return _v("Suspense");case 19:return _v("SuspenseList");case 0:case 2:case 15:return t=JI(t.type,!1),t;case 11:return t=JI(t.type.render,!1),t;case 1:return t=JI(t.type,!0),t;default:return""}}function CL(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oy:return"Fragment";case Ly:return"Portal";case TL:return"Profiler";case jN:return"StrictMode";case kL:return"Suspense";case IL:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tG:return(t.displayName||"Context")+".Consumer";case eG:return(t._context.displayName||"Context")+".Provider";case zN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case VN:return e=t.displayName||null,e!==null?e:CL(t.type)||"Memo";case Yu:e=t._payload,t=t._init;try{return CL(t(e))}catch{}}return null}function cae(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return CL(e);case 8:return e===jN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rG(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uae(t){var e=rG(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function q_(t){t._valueTracker||(t._valueTracker=uae(t))}function nG(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),r="";return t&&(r=rG(t)?t.checked?"true":"false":t.value),t=r,t!==i?(e.setValue(t),!0):!1}function x2(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ML(t,e){var i=e.checked;return li({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function sj(t,e){var i=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;i=Bd(e.value!=null?e.value:i),t._wrapperState={initialChecked:r,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sG(t,e){e=e.checked,e!=null&&FN(t,"checked",e,!1)}function LL(t,e){sG(t,e);var i=Bd(e.value),r=e.type;if(i!=null)r==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?OL(t,e.type,i):e.hasOwnProperty("defaultValue")&&OL(t,e.type,Bd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oj(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function OL(t,e,i){(e!=="number"||x2(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Sv=Array.isArray;function tg(t,e,i,r){if(t=t.options,e){e={};for(var n=0;n<i.length;n++)e["$"+i[n]]=!0;for(i=0;i<t.length;i++)n=e.hasOwnProperty("$"+t[i].value),t[i].selected!==n&&(t[i].selected=n),n&&r&&(t[i].defaultSelected=!0)}else{for(i=""+Bd(i),e=null,n=0;n<t.length;n++){if(t[n].value===i){t[n].selected=!0,r&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function AL(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return li({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function aj(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(ie(92));if(Sv(i)){if(1<i.length)throw Error(ie(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:Bd(i)}}function oG(t,e){var i=Bd(e.value),r=Bd(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),r!=null&&(t.defaultValue=""+r)}function lj(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aG(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function PL(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aG(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var W_,lG=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,r,n){MSApp.execUnsafeLocalFunction(function(){return t(e,i,r,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(W_=W_||document.createElement("div"),W_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=W_.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mw(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var Nb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dae=["Webkit","ms","Moz","O"];Object.keys(Nb).forEach(function(t){dae.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nb[e]=Nb[t]})});function cG(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||Nb.hasOwnProperty(t)&&Nb[t]?(""+e).trim():e+"px"}function uG(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=cG(i,e[i],r);i==="float"&&(i="cssFloat"),r?t.setProperty(i,n):t[i]=n}}var pae=li({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function RL(t,e){if(e){if(pae[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function NL(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DL=null;function UN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var FL=null,ig=null,rg=null;function cj(t){if(t=F1(t)){if(typeof FL!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=ek(e),FL(t.stateNode,t.type,e))}}function dG(t){ig?rg?rg.push(t):rg=[t]:ig=t}function pG(){if(ig){var t=ig,e=rg;if(rg=ig=null,cj(t),e)for(t=0;t<e.length;t++)cj(e[t])}}function hG(t,e){return t(e)}function fG(){}var ZI=!1;function mG(t,e,i){if(ZI)return t(e,i);ZI=!0;try{return hG(t,e,i)}finally{ZI=!1,(ig!==null||rg!==null)&&(fG(),pG())}}function Lw(t,e){var i=t.stateNode;if(i===null)return null;var r=ek(i);if(r===null)return null;i=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(ie(231,e,typeof i));return i}var jL=!1;if(Ac)try{var U0={};Object.defineProperty(U0,"passive",{get:function(){jL=!0}}),window.addEventListener("test",U0,U0),window.removeEventListener("test",U0,U0)}catch{jL=!1}function hae(t,e,i,r,n,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(i,u)}catch(p){this.onError(p)}}var Db=!1,E2=null,T2=!1,zL=null,fae={onError:function(t){Db=!0,E2=t}};function mae(t,e,i,r,n,s,o,a,l){Db=!1,E2=null,hae.apply(fae,arguments)}function yae(t,e,i,r,n,s,o,a,l){if(mae.apply(this,arguments),Db){if(Db){var u=E2;Db=!1,E2=null}else throw Error(ie(198));T2||(T2=!0,zL=u)}}function Df(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function yG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uj(t){if(Df(t)!==t)throw Error(ie(188))}function gae(t){var e=t.alternate;if(!e){if(e=Df(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var i=t,r=e;;){var n=i.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===i)return uj(n),t;if(s===r)return uj(n),e;s=s.sibling}throw Error(ie(188))}if(i.return!==r.return)i=n,r=s;else{for(var o=!1,a=n.child;a;){if(a===i){o=!0,i=n,r=s;break}if(a===r){o=!0,r=n,i=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===i){o=!0,i=s,r=n;break}if(a===r){o=!0,r=s,i=n;break}a=a.sibling}if(!o)throw Error(ie(189))}}if(i.alternate!==r)throw Error(ie(190))}if(i.tag!==3)throw Error(ie(188));return i.stateNode.current===i?t:e}function gG(t){return t=gae(t),t!==null?vG(t):null}function vG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vG(t);if(e!==null)return e;t=t.sibling}return null}var bG=$s.unstable_scheduleCallback,dj=$s.unstable_cancelCallback,vae=$s.unstable_shouldYield,bae=$s.unstable_requestPaint,Si=$s.unstable_now,wae=$s.unstable_getCurrentPriorityLevel,BN=$s.unstable_ImmediatePriority,wG=$s.unstable_UserBlockingPriority,k2=$s.unstable_NormalPriority,_ae=$s.unstable_LowPriority,_G=$s.unstable_IdlePriority,YT=null,dl=null;function Sae(t){if(dl&&typeof dl.onCommitFiberRoot=="function")try{dl.onCommitFiberRoot(YT,t,void 0,(t.current.flags&128)===128)}catch{}}var sa=Math.clz32?Math.clz32:Eae,$ae=Math.log,xae=Math.LN2;function Eae(t){return t>>>=0,t===0?32:31-($ae(t)/xae|0)|0}var J_=64,Z_=4194304;function $v(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function I2(t,e){var i=t.pendingLanes;if(i===0)return 0;var r=0,n=t.suspendedLanes,s=t.pingedLanes,o=i&268435455;if(o!==0){var a=o&~n;a!==0?r=$v(a):(s&=o,s!==0&&(r=$v(s)))}else o=i&~n,o!==0?r=$v(o):s!==0&&(r=$v(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&n)&&(n=r&-r,s=e&-e,n>=s||n===16&&(s&4194240)!==0))return e;if(r&4&&(r|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)i=31-sa(e),n=1<<i,r|=t[i],e&=~n;return r}function Tae(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kae(t,e){for(var i=t.suspendedLanes,r=t.pingedLanes,n=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-sa(s),a=1<<o,l=n[o];l===-1?(!(a&i)||a&r)&&(n[o]=Tae(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function VL(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function SG(){var t=J_;return J_<<=1,!(J_&4194240)&&(J_=64),t}function YI(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function N1(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sa(e),t[e]=i}function Iae(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<i;){var n=31-sa(i),s=1<<n;e[n]=0,r[n]=-1,t[n]=-1,i&=~s}}function GN(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var r=31-sa(i),n=1<<r;n&e|t[r]&e&&(t[r]|=e),i&=~n}}var St=0;function $G(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xG,HN,EG,TG,kG,UL=!1,Y_=[],Ed=null,Td=null,kd=null,Ow=new Map,Aw=new Map,sd=[],Cae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pj(t,e){switch(t){case"focusin":case"focusout":Ed=null;break;case"dragenter":case"dragleave":Td=null;break;case"mouseover":case"mouseout":kd=null;break;case"pointerover":case"pointerout":Ow.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Aw.delete(e.pointerId)}}function B0(t,e,i,r,n,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:i,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},e!==null&&(e=F1(e),e!==null&&HN(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function Mae(t,e,i,r,n){switch(e){case"focusin":return Ed=B0(Ed,t,e,i,r,n),!0;case"dragenter":return Td=B0(Td,t,e,i,r,n),!0;case"mouseover":return kd=B0(kd,t,e,i,r,n),!0;case"pointerover":var s=n.pointerId;return Ow.set(s,B0(Ow.get(s)||null,t,e,i,r,n)),!0;case"gotpointercapture":return s=n.pointerId,Aw.set(s,B0(Aw.get(s)||null,t,e,i,r,n)),!0}return!1}function IG(t){var e=Dh(t.target);if(e!==null){var i=Df(e);if(i!==null){if(e=i.tag,e===13){if(e=yG(i),e!==null){t.blockedOn=e,kG(t.priority,function(){EG(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function N$(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=BL(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var r=new i.constructor(i.type,i);DL=r,i.target.dispatchEvent(r),DL=null}else return e=F1(i),e!==null&&HN(e),t.blockedOn=i,!1;e.shift()}return!0}function hj(t,e,i){N$(t)&&i.delete(e)}function Lae(){UL=!1,Ed!==null&&N$(Ed)&&(Ed=null),Td!==null&&N$(Td)&&(Td=null),kd!==null&&N$(kd)&&(kd=null),Ow.forEach(hj),Aw.forEach(hj)}function G0(t,e){t.blockedOn===e&&(t.blockedOn=null,UL||(UL=!0,$s.unstable_scheduleCallback($s.unstable_NormalPriority,Lae)))}function Pw(t){function e(n){return G0(n,t)}if(0<Y_.length){G0(Y_[0],t);for(var i=1;i<Y_.length;i++){var r=Y_[i];r.blockedOn===t&&(r.blockedOn=null)}}for(Ed!==null&&G0(Ed,t),Td!==null&&G0(Td,t),kd!==null&&G0(kd,t),Ow.forEach(e),Aw.forEach(e),i=0;i<sd.length;i++)r=sd[i],r.blockedOn===t&&(r.blockedOn=null);for(;0<sd.length&&(i=sd[0],i.blockedOn===null);)IG(i),i.blockedOn===null&&sd.shift()}var ng=Wc.ReactCurrentBatchConfig,C2=!0;function Oae(t,e,i,r){var n=St,s=ng.transition;ng.transition=null;try{St=1,qN(t,e,i,r)}finally{St=n,ng.transition=s}}function Aae(t,e,i,r){var n=St,s=ng.transition;ng.transition=null;try{St=4,qN(t,e,i,r)}finally{St=n,ng.transition=s}}function qN(t,e,i,r){if(C2){var n=BL(t,e,i,r);if(n===null)oC(t,e,r,M2,i),pj(t,r);else if(Mae(n,t,e,i,r))r.stopPropagation();else if(pj(t,r),e&4&&-1<Cae.indexOf(t)){for(;n!==null;){var s=F1(n);if(s!==null&&xG(s),s=BL(t,e,i,r),s===null&&oC(t,e,r,M2,i),s===n)break;n=s}n!==null&&r.stopPropagation()}else oC(t,e,r,null,i)}}var M2=null;function BL(t,e,i,r){if(M2=null,t=UN(r),t=Dh(t),t!==null)if(e=Df(t),e===null)t=null;else if(i=e.tag,i===13){if(t=yG(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return M2=t,null}function CG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wae()){case BN:return 1;case wG:return 4;case k2:case _ae:return 16;case _G:return 536870912;default:return 16}default:return 16}}var hd=null,WN=null,D$=null;function MG(){if(D$)return D$;var t,e=WN,i=e.length,r,n="value"in hd?hd.value:hd.textContent,s=n.length;for(t=0;t<i&&e[t]===n[t];t++);var o=i-t;for(r=1;r<=o&&e[i-r]===n[s-r];r++);return D$=n.slice(t,1<r?1-r:void 0)}function F$(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function K_(){return!0}function fj(){return!1}function Ms(t){function e(i,r,n,s,o){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(i=t[a],this[a]=i?i(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?K_:fj,this.isPropagationStopped=fj,this}return li(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=K_)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=K_)},persist:function(){},isPersistent:K_}),e}var a0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JN=Ms(a0),D1=li({},a0,{view:0,detail:0}),Pae=Ms(D1),KI,QI,H0,KT=li({},D1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ZN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==H0&&(H0&&t.type==="mousemove"?(KI=t.screenX-H0.screenX,QI=t.screenY-H0.screenY):QI=KI=0,H0=t),KI)},movementY:function(t){return"movementY"in t?t.movementY:QI}}),mj=Ms(KT),Rae=li({},KT,{dataTransfer:0}),Nae=Ms(Rae),Dae=li({},D1,{relatedTarget:0}),XI=Ms(Dae),Fae=li({},a0,{animationName:0,elapsedTime:0,pseudoElement:0}),jae=Ms(Fae),zae=li({},a0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vae=Ms(zae),Uae=li({},a0,{data:0}),yj=Ms(Uae),Bae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qae(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hae[t])?!!e[t]:!1}function ZN(){return qae}var Wae=li({},D1,{key:function(t){if(t.key){var e=Bae[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=F$(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gae[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ZN,charCode:function(t){return t.type==="keypress"?F$(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?F$(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jae=Ms(Wae),Zae=li({},KT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gj=Ms(Zae),Yae=li({},D1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ZN}),Kae=Ms(Yae),Qae=li({},a0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xae=Ms(Qae),ele=li({},KT,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tle=Ms(ele),ile=[9,13,27,32],YN=Ac&&"CompositionEvent"in window,Fb=null;Ac&&"documentMode"in document&&(Fb=document.documentMode);var rle=Ac&&"TextEvent"in window&&!Fb,LG=Ac&&(!YN||Fb&&8<Fb&&11>=Fb),vj=" ",bj=!1;function OG(t,e){switch(t){case"keyup":return ile.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ay=!1;function nle(t,e){switch(t){case"compositionend":return AG(e);case"keypress":return e.which!==32?null:(bj=!0,vj);case"textInput":return t=e.data,t===vj&&bj?null:t;default:return null}}function sle(t,e){if(Ay)return t==="compositionend"||!YN&&OG(t,e)?(t=MG(),D$=WN=hd=null,Ay=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LG&&e.locale!=="ko"?null:e.data;default:return null}}var ole={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ole[t.type]:e==="textarea"}function PG(t,e,i,r){dG(r),e=L2(e,"onChange"),0<e.length&&(i=new JN("onChange","change",null,i,r),t.push({event:i,listeners:e}))}var jb=null,Rw=null;function ale(t){HG(t,0)}function QT(t){var e=Ny(t);if(nG(e))return t}function lle(t,e){if(t==="change")return e}var RG=!1;if(Ac){var eC;if(Ac){var tC="oninput"in document;if(!tC){var _j=document.createElement("div");_j.setAttribute("oninput","return;"),tC=typeof _j.oninput=="function"}eC=tC}else eC=!1;RG=eC&&(!document.documentMode||9<document.documentMode)}function Sj(){jb&&(jb.detachEvent("onpropertychange",NG),Rw=jb=null)}function NG(t){if(t.propertyName==="value"&&QT(Rw)){var e=[];PG(e,Rw,t,UN(t)),mG(ale,e)}}function cle(t,e,i){t==="focusin"?(Sj(),jb=e,Rw=i,jb.attachEvent("onpropertychange",NG)):t==="focusout"&&Sj()}function ule(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return QT(Rw)}function dle(t,e){if(t==="click")return QT(e)}function ple(t,e){if(t==="input"||t==="change")return QT(e)}function hle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var da=typeof Object.is=="function"?Object.is:hle;function Nw(t,e){if(da(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!EL.call(e,n)||!da(t[n],e[n]))return!1}return!0}function $j(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xj(t,e){var i=$j(t);t=0;for(var r;i;){if(i.nodeType===3){if(r=t+i.textContent.length,t<=e&&r>=e)return{node:i,offset:e-t};t=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=$j(i)}}function DG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FG(){for(var t=window,e=x2();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=x2(t.document)}return e}function KN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fle(t){var e=FG(),i=t.focusedElem,r=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&DG(i.ownerDocument.documentElement,i)){if(r!==null&&KN(i)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=i.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!t.extend&&s>r&&(n=r,r=s,s=n),n=xj(i,s);var o=xj(i,r);n&&o&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mle=Ac&&"documentMode"in document&&11>=document.documentMode,Py=null,GL=null,zb=null,HL=!1;function Ej(t,e,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;HL||Py==null||Py!==x2(r)||(r=Py,"selectionStart"in r&&KN(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zb&&Nw(zb,r)||(zb=r,r=L2(GL,"onSelect"),0<r.length&&(e=new JN("onSelect","select",null,e,i),t.push({event:e,listeners:r}),e.target=Py)))}function Q_(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Ry={animationend:Q_("Animation","AnimationEnd"),animationiteration:Q_("Animation","AnimationIteration"),animationstart:Q_("Animation","AnimationStart"),transitionend:Q_("Transition","TransitionEnd")},iC={},jG={};Ac&&(jG=document.createElement("div").style,"AnimationEvent"in window||(delete Ry.animationend.animation,delete Ry.animationiteration.animation,delete Ry.animationstart.animation),"TransitionEvent"in window||delete Ry.transitionend.transition);function XT(t){if(iC[t])return iC[t];if(!Ry[t])return t;var e=Ry[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in jG)return iC[t]=e[i];return t}var zG=XT("animationend"),VG=XT("animationiteration"),UG=XT("animationstart"),BG=XT("transitionend"),GG=new Map,Tj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tp(t,e){GG.set(t,e),Nf(e,[t])}for(var rC=0;rC<Tj.length;rC++){var nC=Tj[rC],yle=nC.toLowerCase(),gle=nC[0].toUpperCase()+nC.slice(1);tp(yle,"on"+gle)}tp(zG,"onAnimationEnd");tp(VG,"onAnimationIteration");tp(UG,"onAnimationStart");tp("dblclick","onDoubleClick");tp("focusin","onFocus");tp("focusout","onBlur");tp(BG,"onTransitionEnd");kg("onMouseEnter",["mouseout","mouseover"]);kg("onMouseLeave",["mouseout","mouseover"]);kg("onPointerEnter",["pointerout","pointerover"]);kg("onPointerLeave",["pointerout","pointerover"]);Nf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vle=new Set("cancel close invalid load scroll toggle".split(" ").concat(xv));function kj(t,e,i){var r=t.type||"unknown-event";t.currentTarget=i,yae(r,e,void 0,t),t.currentTarget=null}function HG(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var r=t[i],n=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;kj(n,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;kj(n,a,u),s=l}}}if(T2)throw t=zL,T2=!1,zL=null,t}function jt(t,e){var i=e[YL];i===void 0&&(i=e[YL]=new Set);var r=t+"__bubble";i.has(r)||(qG(e,t,2,!1),i.add(r))}function sC(t,e,i){var r=0;e&&(r|=4),qG(i,t,r,e)}var X_="_reactListening"+Math.random().toString(36).slice(2);function Dw(t){if(!t[X_]){t[X_]=!0,X7.forEach(function(i){i!=="selectionchange"&&(vle.has(i)||sC(i,!1,t),sC(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[X_]||(e[X_]=!0,sC("selectionchange",!1,e))}}function qG(t,e,i,r){switch(CG(e)){case 1:var n=Oae;break;case 4:n=Aae;break;default:n=qN}i=n.bind(null,e,i,t),n=void 0,!jL||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),r?n!==void 0?t.addEventListener(e,i,{capture:!0,passive:n}):t.addEventListener(e,i,!0):n!==void 0?t.addEventListener(e,i,{passive:n}):t.addEventListener(e,i,!1)}function oC(t,e,i,r,n){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=Dh(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}mG(function(){var u=s,p=UN(i),h=[];e:{var m=GG.get(t);if(m!==void 0){var y=JN,g=t;switch(t){case"keypress":if(F$(i)===0)break e;case"keydown":case"keyup":y=Jae;break;case"focusin":g="focus",y=XI;break;case"focusout":g="blur",y=XI;break;case"beforeblur":case"afterblur":y=XI;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=mj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Nae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Kae;break;case zG:case VG:case UG:y=jae;break;case BG:y=Xae;break;case"scroll":y=Pae;break;case"wheel":y=tle;break;case"copy":case"cut":case"paste":y=Vae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=gj}var v=(e&4)!==0,w=!v&&t==="scroll",b=v?m!==null?m+"Capture":null:m;v=[];for(var _=u,S;_!==null;){S=_;var $=S.stateNode;if(S.tag===5&&$!==null&&(S=$,b!==null&&($=Lw(_,b),$!=null&&v.push(Fw(_,$,S)))),w)break;_=_.return}0<v.length&&(m=new y(m,g,null,i,p),h.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&i!==DL&&(g=i.relatedTarget||i.fromElement)&&(Dh(g)||g[Pc]))break e;if((y||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=i.relatedTarget||i.toElement,y=u,g=g?Dh(g):null,g!==null&&(w=Df(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=u),y!==g)){if(v=mj,$="onMouseLeave",b="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=gj,$="onPointerLeave",b="onPointerEnter",_="pointer"),w=y==null?m:Ny(y),S=g==null?m:Ny(g),m=new v($,_+"leave",y,i,p),m.target=w,m.relatedTarget=S,$=null,Dh(p)===u&&(v=new v(b,_+"enter",g,i,p),v.target=S,v.relatedTarget=w,$=v),w=$,y&&g)t:{for(v=y,b=g,_=0,S=v;S;S=im(S))_++;for(S=0,$=b;$;$=im($))S++;for(;0<_-S;)v=im(v),_--;for(;0<S-_;)b=im(b),S--;for(;_--;){if(v===b||b!==null&&v===b.alternate)break t;v=im(v),b=im(b)}v=null}else v=null;y!==null&&Ij(h,m,y,v,!1),g!==null&&w!==null&&Ij(h,w,g,v,!0)}}e:{if(m=u?Ny(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var T=lle;else if(wj(m))if(RG)T=ple;else{T=ule;var I=cle}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(T=dle);if(T&&(T=T(t,u))){PG(h,T,i,p);break e}I&&I(t,m,u),t==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&OL(m,"number",m.value)}switch(I=u?Ny(u):window,t){case"focusin":(wj(I)||I.contentEditable==="true")&&(Py=I,GL=u,zb=null);break;case"focusout":zb=GL=Py=null;break;case"mousedown":HL=!0;break;case"contextmenu":case"mouseup":case"dragend":HL=!1,Ej(h,i,p);break;case"selectionchange":if(mle)break;case"keydown":case"keyup":Ej(h,i,p)}var C;if(YN)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Ay?OG(t,i)&&(M="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(M="onCompositionStart");M&&(LG&&i.locale!=="ko"&&(Ay||M!=="onCompositionStart"?M==="onCompositionEnd"&&Ay&&(C=MG()):(hd=p,WN="value"in hd?hd.value:hd.textContent,Ay=!0)),I=L2(u,M),0<I.length&&(M=new yj(M,t,null,i,p),h.push({event:M,listeners:I}),C?M.data=C:(C=AG(i),C!==null&&(M.data=C)))),(C=rle?nle(t,i):sle(t,i))&&(u=L2(u,"onBeforeInput"),0<u.length&&(p=new yj("onBeforeInput","beforeinput",null,i,p),h.push({event:p,listeners:u}),p.data=C))}HG(h,e)})}function Fw(t,e,i){return{instance:t,listener:e,currentTarget:i}}function L2(t,e){for(var i=e+"Capture",r=[];t!==null;){var n=t,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Lw(t,i),s!=null&&r.unshift(Fw(t,s,n)),s=Lw(t,e),s!=null&&r.push(Fw(t,s,n))),t=t.return}return r}function im(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ij(t,e,i,r,n){for(var s=e._reactName,o=[];i!==null&&i!==r;){var a=i,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,n?(l=Lw(i,s),l!=null&&o.unshift(Fw(i,l,a))):n||(l=Lw(i,s),l!=null&&o.push(Fw(i,l,a)))),i=i.return}o.length!==0&&t.push({event:e,listeners:o})}var ble=/\r\n?/g,wle=/\u0000|\uFFFD/g;function Cj(t){return(typeof t=="string"?t:""+t).replace(ble,`
`).replace(wle,"")}function eS(t,e,i){if(e=Cj(e),Cj(t)!==e&&i)throw Error(ie(425))}function O2(){}var qL=null,WL=null;function JL(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ZL=typeof setTimeout=="function"?setTimeout:void 0,_le=typeof clearTimeout=="function"?clearTimeout:void 0,Mj=typeof Promise=="function"?Promise:void 0,Sle=typeof queueMicrotask=="function"?queueMicrotask:typeof Mj<"u"?function(t){return Mj.resolve(null).then(t).catch($le)}:ZL;function $le(t){setTimeout(function(){throw t})}function aC(t,e){var i=e,r=0;do{var n=i.nextSibling;if(t.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){t.removeChild(n),Pw(e);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);Pw(e)}function Id(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lj(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var l0=Math.random().toString(36).slice(2),al="__reactFiber$"+l0,jw="__reactProps$"+l0,Pc="__reactContainer$"+l0,YL="__reactEvents$"+l0,xle="__reactListeners$"+l0,Ele="__reactHandles$"+l0;function Dh(t){var e=t[al];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Pc]||i[al]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=Lj(t);t!==null;){if(i=t[al])return i;t=Lj(t)}return e}t=i,i=t.parentNode}return null}function F1(t){return t=t[al]||t[Pc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ny(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function ek(t){return t[jw]||null}var KL=[],Dy=-1;function ip(t){return{current:t}}function Ht(t){0>Dy||(t.current=KL[Dy],KL[Dy]=null,Dy--)}function Rt(t,e){Dy++,KL[Dy]=t.current,t.current=e}var Gd={},Wr=ip(Gd),Rn=ip(!1),uf=Gd;function Ig(t,e){var i=t.type.contextTypes;if(!i)return Gd;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in i)n[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function Nn(t){return t=t.childContextTypes,t!=null}function A2(){Ht(Rn),Ht(Wr)}function Oj(t,e,i){if(Wr.current!==Gd)throw Error(ie(168));Rt(Wr,e),Rt(Rn,i)}function WG(t,e,i){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in e))throw Error(ie(108,cae(t)||"Unknown",n));return li({},i,r)}function P2(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gd,uf=Wr.current,Rt(Wr,t),Rt(Rn,Rn.current),!0}function Aj(t,e,i){var r=t.stateNode;if(!r)throw Error(ie(169));i?(t=WG(t,e,uf),r.__reactInternalMemoizedMergedChildContext=t,Ht(Rn),Ht(Wr),Rt(Wr,t)):Ht(Rn),Rt(Rn,i)}var vc=null,tk=!1,lC=!1;function JG(t){vc===null?vc=[t]:vc.push(t)}function Tle(t){tk=!0,JG(t)}function rp(){if(!lC&&vc!==null){lC=!0;var t=0,e=St;try{var i=vc;for(St=1;t<i.length;t++){var r=i[t];do r=r(!0);while(r!==null)}vc=null,tk=!1}catch(n){throw vc!==null&&(vc=vc.slice(t+1)),bG(BN,rp),n}finally{St=e,lC=!1}}return null}var Fy=[],jy=0,R2=null,N2=0,Ks=[],Qs=0,df=null,$c=1,xc="";function Op(t,e){Fy[jy++]=N2,Fy[jy++]=R2,R2=t,N2=e}function ZG(t,e,i){Ks[Qs++]=$c,Ks[Qs++]=xc,Ks[Qs++]=df,df=t;var r=$c;t=xc;var n=32-sa(r)-1;r&=~(1<<n),i+=1;var s=32-sa(e)+n;if(30<s){var o=n-n%5;s=(r&(1<<o)-1).toString(32),r>>=o,n-=o,$c=1<<32-sa(e)+n|i<<n|r,xc=s+t}else $c=1<<s|i<<n|r,xc=t}function QN(t){t.return!==null&&(Op(t,1),ZG(t,1,0))}function XN(t){for(;t===R2;)R2=Fy[--jy],Fy[jy]=null,N2=Fy[--jy],Fy[jy]=null;for(;t===df;)df=Ks[--Qs],Ks[Qs]=null,xc=Ks[--Qs],Ks[Qs]=null,$c=Ks[--Qs],Ks[Qs]=null}var fs=null,hs=null,Qt=!1,ea=null;function YG(t,e){var i=io(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function Pj(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fs=t,hs=Id(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fs=t,hs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=df!==null?{id:$c,overflow:xc}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=io(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,fs=t,hs=null,!0):!1;default:return!1}}function QL(t){return(t.mode&1)!==0&&(t.flags&128)===0}function XL(t){if(Qt){var e=hs;if(e){var i=e;if(!Pj(t,e)){if(QL(t))throw Error(ie(418));e=Id(i.nextSibling);var r=fs;e&&Pj(t,e)?YG(r,i):(t.flags=t.flags&-4097|2,Qt=!1,fs=t)}}else{if(QL(t))throw Error(ie(418));t.flags=t.flags&-4097|2,Qt=!1,fs=t}}}function Rj(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fs=t}function tS(t){if(t!==fs)return!1;if(!Qt)return Rj(t),Qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!JL(t.type,t.memoizedProps)),e&&(e=hs)){if(QL(t))throw KG(),Error(ie(418));for(;e;)YG(t,e),e=Id(e.nextSibling)}if(Rj(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){hs=Id(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}hs=null}}else hs=fs?Id(t.stateNode.nextSibling):null;return!0}function KG(){for(var t=hs;t;)t=Id(t.nextSibling)}function Cg(){hs=fs=null,Qt=!1}function eD(t){ea===null?ea=[t]:ea.push(t)}var kle=Wc.ReactCurrentBatchConfig;function Wo(t,e){if(t&&t.defaultProps){e=li({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}var D2=ip(null),F2=null,zy=null,tD=null;function iD(){tD=zy=F2=null}function rD(t){var e=D2.current;Ht(D2),t._currentValue=e}function eO(t,e,i){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===i)break;t=t.return}}function sg(t,e){F2=t,tD=zy=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(On=!0),t.firstContext=null)}function lo(t){var e=t._currentValue;if(tD!==t)if(t={context:t,memoizedValue:e,next:null},zy===null){if(F2===null)throw Error(ie(308));zy=t,F2.dependencies={lanes:0,firstContext:t}}else zy=zy.next=t;return e}var Fh=null;function nD(t){Fh===null?Fh=[t]:Fh.push(t)}function QG(t,e,i,r){var n=e.interleaved;return n===null?(i.next=i,nD(e)):(i.next=n.next,n.next=i),e.interleaved=i,Rc(t,r)}function Rc(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Ku=!1;function sD(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ec(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cd(t,e,i){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var n=r.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),r.pending=e,Rc(t,i)}return n=r.interleaved,n===null?(e.next=e,nD(r)):(e.next=n.next,n.next=e),r.interleaved=e,Rc(t,i)}function j$(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,i|=r,e.lanes=i,GN(t,i)}}function Nj(t,e){var i=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?n=s=o:s=s.next=o,i=i.next}while(i!==null);s===null?n=s=e:s=s.next=e}else n=s=e;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function j2(t,e,i,r){var n=t.updateQueue;Ku=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var p=t.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==o&&(a===null?p.firstBaseUpdate=u:a.next=u,p.lastBaseUpdate=l))}if(s!==null){var h=n.baseState;o=0,p=u=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){p!==null&&(p=p.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(m=e,y=i,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(y,h,m);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(y,h,m):g,m==null)break e;h=li({},h,m);break e;case 2:Ku=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=n.effects,m===null?n.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(u=p=y,l=h):p=p.next=y,o|=m;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;m=a,a=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);if(p===null&&(l=h),n.baseState=l,n.firstBaseUpdate=u,n.lastBaseUpdate=p,e=n.shared.interleaved,e!==null){n=e;do o|=n.lane,n=n.next;while(n!==e)}else s===null&&(n.shared.lanes=0);hf|=o,t.lanes=o,t.memoizedState=h}}function Dj(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(ie(191,n));n.call(r)}}}var eH=new Q7.Component().refs;function tO(t,e,i,r){e=t.memoizedState,i=i(r,e),i=i==null?e:li({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var ik={isMounted:function(t){return(t=t._reactInternals)?Df(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var r=cn(),n=Ld(t),s=Ec(r,n);s.payload=e,i!=null&&(s.callback=i),e=Cd(t,s,n),e!==null&&(oa(e,t,n,r),j$(e,t,n))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var r=cn(),n=Ld(t),s=Ec(r,n);s.tag=1,s.payload=e,i!=null&&(s.callback=i),e=Cd(t,s,n),e!==null&&(oa(e,t,n,r),j$(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=cn(),r=Ld(t),n=Ec(i,r);n.tag=2,e!=null&&(n.callback=e),e=Cd(t,n,r),e!==null&&(oa(e,t,r,i),j$(e,t,r))}};function Fj(t,e,i,r,n,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Nw(i,r)||!Nw(n,s):!0}function tH(t,e,i){var r=!1,n=Gd,s=e.contextType;return typeof s=="object"&&s!==null?s=lo(s):(n=Nn(e)?uf:Wr.current,r=e.contextTypes,s=(r=r!=null)?Ig(t,n):Gd),e=new e(i,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ik,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=s),e}function jj(t,e,i,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,r),e.state!==t&&ik.enqueueReplaceState(e,e.state,null)}function iO(t,e,i,r){var n=t.stateNode;n.props=i,n.state=t.memoizedState,n.refs=eH,sD(t);var s=e.contextType;typeof s=="object"&&s!==null?n.context=lo(s):(s=Nn(e)?uf:Wr.current,n.context=Ig(t,s)),n.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(tO(t,e,s,i),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&ik.enqueueReplaceState(n,n.state,null),j2(t,i,n,r),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function q0(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(ie(309));var r=i.stateNode}if(!r)throw Error(ie(147,t));var n=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=n.refs;a===eH&&(a=n.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ie(284));if(!i._owner)throw Error(ie(290,t))}return t}function iS(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zj(t){var e=t._init;return e(t._payload)}function iH(t){function e(b,_){if(t){var S=b.deletions;S===null?(b.deletions=[_],b.flags|=16):S.push(_)}}function i(b,_){if(!t)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function n(b,_){return b=Od(b,_),b.index=0,b.sibling=null,b}function s(b,_,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<_?(b.flags|=2,_):S):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,_,S,$){return _===null||_.tag!==6?(_=mC(S,b.mode,$),_.return=b,_):(_=n(_,S),_.return=b,_)}function l(b,_,S,$){var T=S.type;return T===Oy?p(b,_,S.props.children,$,S.key):_!==null&&(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Yu&&zj(T)===_.type)?($=n(_,S.props),$.ref=q0(b,_,S),$.return=b,$):($=H$(S.type,S.key,S.props,null,b.mode,$),$.ref=q0(b,_,S),$.return=b,$)}function u(b,_,S,$){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=yC(S,b.mode,$),_.return=b,_):(_=n(_,S.children||[]),_.return=b,_)}function p(b,_,S,$,T){return _===null||_.tag!==7?(_=Qh(S,b.mode,$,T),_.return=b,_):(_=n(_,S),_.return=b,_)}function h(b,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=mC(""+_,b.mode,S),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case H_:return S=H$(_.type,_.key,_.props,null,b.mode,S),S.ref=q0(b,null,_),S.return=b,S;case Ly:return _=yC(_,b.mode,S),_.return=b,_;case Yu:var $=_._init;return h(b,$(_._payload),S)}if(Sv(_)||V0(_))return _=Qh(_,b.mode,S,null),_.return=b,_;iS(b,_)}return null}function m(b,_,S,$){var T=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:a(b,_,""+S,$);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case H_:return S.key===T?l(b,_,S,$):null;case Ly:return S.key===T?u(b,_,S,$):null;case Yu:return T=S._init,m(b,_,T(S._payload),$)}if(Sv(S)||V0(S))return T!==null?null:p(b,_,S,$,null);iS(b,S)}return null}function y(b,_,S,$,T){if(typeof $=="string"&&$!==""||typeof $=="number")return b=b.get(S)||null,a(_,b,""+$,T);if(typeof $=="object"&&$!==null){switch($.$$typeof){case H_:return b=b.get($.key===null?S:$.key)||null,l(_,b,$,T);case Ly:return b=b.get($.key===null?S:$.key)||null,u(_,b,$,T);case Yu:var I=$._init;return y(b,_,S,I($._payload),T)}if(Sv($)||V0($))return b=b.get(S)||null,p(_,b,$,T,null);iS(_,$)}return null}function g(b,_,S,$){for(var T=null,I=null,C=_,M=_=0,R=null;C!==null&&M<S.length;M++){C.index>M?(R=C,C=null):R=C.sibling;var O=m(b,C,S[M],$);if(O===null){C===null&&(C=R);break}t&&C&&O.alternate===null&&e(b,C),_=s(O,_,M),I===null?T=O:I.sibling=O,I=O,C=R}if(M===S.length)return i(b,C),Qt&&Op(b,M),T;if(C===null){for(;M<S.length;M++)C=h(b,S[M],$),C!==null&&(_=s(C,_,M),I===null?T=C:I.sibling=C,I=C);return Qt&&Op(b,M),T}for(C=r(b,C);M<S.length;M++)R=y(C,b,M,S[M],$),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?M:R.key),_=s(R,_,M),I===null?T=R:I.sibling=R,I=R);return t&&C.forEach(function(F){return e(b,F)}),Qt&&Op(b,M),T}function v(b,_,S,$){var T=V0(S);if(typeof T!="function")throw Error(ie(150));if(S=T.call(S),S==null)throw Error(ie(151));for(var I=T=null,C=_,M=_=0,R=null,O=S.next();C!==null&&!O.done;M++,O=S.next()){C.index>M?(R=C,C=null):R=C.sibling;var F=m(b,C,O.value,$);if(F===null){C===null&&(C=R);break}t&&C&&F.alternate===null&&e(b,C),_=s(F,_,M),I===null?T=F:I.sibling=F,I=F,C=R}if(O.done)return i(b,C),Qt&&Op(b,M),T;if(C===null){for(;!O.done;M++,O=S.next())O=h(b,O.value,$),O!==null&&(_=s(O,_,M),I===null?T=O:I.sibling=O,I=O);return Qt&&Op(b,M),T}for(C=r(b,C);!O.done;M++,O=S.next())O=y(C,b,M,O.value,$),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?M:O.key),_=s(O,_,M),I===null?T=O:I.sibling=O,I=O);return t&&C.forEach(function(A){return e(b,A)}),Qt&&Op(b,M),T}function w(b,_,S,$){if(typeof S=="object"&&S!==null&&S.type===Oy&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case H_:e:{for(var T=S.key,I=_;I!==null;){if(I.key===T){if(T=S.type,T===Oy){if(I.tag===7){i(b,I.sibling),_=n(I,S.props.children),_.return=b,b=_;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Yu&&zj(T)===I.type){i(b,I.sibling),_=n(I,S.props),_.ref=q0(b,I,S),_.return=b,b=_;break e}i(b,I);break}else e(b,I);I=I.sibling}S.type===Oy?(_=Qh(S.props.children,b.mode,$,S.key),_.return=b,b=_):($=H$(S.type,S.key,S.props,null,b.mode,$),$.ref=q0(b,_,S),$.return=b,b=$)}return o(b);case Ly:e:{for(I=S.key;_!==null;){if(_.key===I)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){i(b,_.sibling),_=n(_,S.children||[]),_.return=b,b=_;break e}else{i(b,_);break}else e(b,_);_=_.sibling}_=yC(S,b.mode,$),_.return=b,b=_}return o(b);case Yu:return I=S._init,w(b,_,I(S._payload),$)}if(Sv(S))return g(b,_,S,$);if(V0(S))return v(b,_,S,$);iS(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(i(b,_.sibling),_=n(_,S),_.return=b,b=_):(i(b,_),_=mC(S,b.mode,$),_.return=b,b=_),o(b)):i(b,_)}return w}var Mg=iH(!0),rH=iH(!1),j1={},pl=ip(j1),zw=ip(j1),Vw=ip(j1);function jh(t){if(t===j1)throw Error(ie(174));return t}function oD(t,e){switch(Rt(Vw,e),Rt(zw,t),Rt(pl,j1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:PL(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=PL(e,t)}Ht(pl),Rt(pl,e)}function Lg(){Ht(pl),Ht(zw),Ht(Vw)}function nH(t){jh(Vw.current);var e=jh(pl.current),i=PL(e,t.type);e!==i&&(Rt(zw,t),Rt(pl,i))}function aD(t){zw.current===t&&(Ht(pl),Ht(zw))}var oi=ip(0);function z2(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cC=[];function lD(){for(var t=0;t<cC.length;t++)cC[t]._workInProgressVersionPrimary=null;cC.length=0}var z$=Wc.ReactCurrentDispatcher,uC=Wc.ReactCurrentBatchConfig,pf=0,ai=null,Gi=null,or=null,V2=!1,Vb=!1,Uw=0,Ile=0;function kr(){throw Error(ie(321))}function cD(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!da(t[i],e[i]))return!1;return!0}function uD(t,e,i,r,n,s){if(pf=s,ai=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,z$.current=t===null||t.memoizedState===null?Ole:Ale,t=i(r,n),Vb){s=0;do{if(Vb=!1,Uw=0,25<=s)throw Error(ie(301));s+=1,or=Gi=null,e.updateQueue=null,z$.current=Ple,t=i(r,n)}while(Vb)}if(z$.current=U2,e=Gi!==null&&Gi.next!==null,pf=0,or=Gi=ai=null,V2=!1,e)throw Error(ie(300));return t}function dD(){var t=Uw!==0;return Uw=0,t}function Xa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?ai.memoizedState=or=t:or=or.next=t,or}function co(){if(Gi===null){var t=ai.alternate;t=t!==null?t.memoizedState:null}else t=Gi.next;var e=or===null?ai.memoizedState:or.next;if(e!==null)or=e,Gi=t;else{if(t===null)throw Error(ie(310));Gi=t,t={memoizedState:Gi.memoizedState,baseState:Gi.baseState,baseQueue:Gi.baseQueue,queue:Gi.queue,next:null},or===null?ai.memoizedState=or=t:or=or.next=t}return or}function Bw(t,e){return typeof e=="function"?e(t):e}function dC(t){var e=co(),i=e.queue;if(i===null)throw Error(ie(311));i.lastRenderedReducer=t;var r=Gi,n=r.baseQueue,s=i.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}r.baseQueue=n=s,i.pending=null}if(n!==null){s=n.next,r=r.baseState;var a=o=null,l=null,u=s;do{var p=u.lane;if((pf&p)===p)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ai.lanes|=p,hf|=p}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,da(r,e.memoizedState)||(On=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,i.lastRenderedState=r}if(t=i.interleaved,t!==null){n=t;do s=n.lane,ai.lanes|=s,hf|=s,n=n.next;while(n!==t)}else n===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function pC(t){var e=co(),i=e.queue;if(i===null)throw Error(ie(311));i.lastRenderedReducer=t;var r=i.dispatch,n=i.pending,s=e.memoizedState;if(n!==null){i.pending=null;var o=n=n.next;do s=t(s,o.action),o=o.next;while(o!==n);da(s,e.memoizedState)||(On=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),i.lastRenderedState=s}return[s,r]}function sH(){}function oH(t,e){var i=ai,r=co(),n=e(),s=!da(r.memoizedState,n);if(s&&(r.memoizedState=n,On=!0),r=r.queue,pD(cH.bind(null,i,r,t),[t]),r.getSnapshot!==e||s||or!==null&&or.memoizedState.tag&1){if(i.flags|=2048,Gw(9,lH.bind(null,i,r,n,e),void 0,null),ur===null)throw Error(ie(349));pf&30||aH(i,e,n)}return n}function aH(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=ai.updateQueue,e===null?(e={lastEffect:null,stores:null},ai.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function lH(t,e,i,r){e.value=i,e.getSnapshot=r,uH(e)&&dH(t)}function cH(t,e,i){return i(function(){uH(e)&&dH(t)})}function uH(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!da(t,i)}catch{return!0}}function dH(t){var e=Rc(t,1);e!==null&&oa(e,t,1,-1)}function Vj(t){var e=Xa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bw,lastRenderedState:t},e.queue=t,t=t.dispatch=Lle.bind(null,ai,t),[e.memoizedState,t]}function Gw(t,e,i,r){return t={tag:t,create:e,destroy:i,deps:r,next:null},e=ai.updateQueue,e===null?(e={lastEffect:null,stores:null},ai.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(r=i.next,i.next=t,t.next=r,e.lastEffect=t)),t}function pH(){return co().memoizedState}function V$(t,e,i,r){var n=Xa();ai.flags|=t,n.memoizedState=Gw(1|e,i,void 0,r===void 0?null:r)}function rk(t,e,i,r){var n=co();r=r===void 0?null:r;var s=void 0;if(Gi!==null){var o=Gi.memoizedState;if(s=o.destroy,r!==null&&cD(r,o.deps)){n.memoizedState=Gw(e,i,s,r);return}}ai.flags|=t,n.memoizedState=Gw(1|e,i,s,r)}function Uj(t,e){return V$(8390656,8,t,e)}function pD(t,e){return rk(2048,8,t,e)}function hH(t,e){return rk(4,2,t,e)}function fH(t,e){return rk(4,4,t,e)}function mH(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yH(t,e,i){return i=i!=null?i.concat([t]):null,rk(4,4,mH.bind(null,e,t),i)}function hD(){}function gH(t,e){var i=co();e=e===void 0?null:e;var r=i.memoizedState;return r!==null&&e!==null&&cD(e,r[1])?r[0]:(i.memoizedState=[t,e],t)}function vH(t,e){var i=co();e=e===void 0?null:e;var r=i.memoizedState;return r!==null&&e!==null&&cD(e,r[1])?r[0]:(t=t(),i.memoizedState=[t,e],t)}function bH(t,e,i){return pf&21?(da(i,e)||(i=SG(),ai.lanes|=i,hf|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,On=!0),t.memoizedState=i)}function Cle(t,e){var i=St;St=i!==0&&4>i?i:4,t(!0);var r=uC.transition;uC.transition={};try{t(!1),e()}finally{St=i,uC.transition=r}}function wH(){return co().memoizedState}function Mle(t,e,i){var r=Ld(t);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},_H(t))SH(e,i);else if(i=QG(t,e,i,r),i!==null){var n=cn();oa(i,t,r,n),$H(i,e,r)}}function Lle(t,e,i){var r=Ld(t),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(_H(t))SH(e,n);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,i);if(n.hasEagerState=!0,n.eagerState=a,da(a,o)){var l=e.interleaved;l===null?(n.next=n,nD(e)):(n.next=l.next,l.next=n),e.interleaved=n;return}}catch{}finally{}i=QG(t,e,n,r),i!==null&&(n=cn(),oa(i,t,r,n),$H(i,e,r))}}function _H(t){var e=t.alternate;return t===ai||e!==null&&e===ai}function SH(t,e){Vb=V2=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function $H(t,e,i){if(i&4194240){var r=e.lanes;r&=t.pendingLanes,i|=r,e.lanes=i,GN(t,i)}}var U2={readContext:lo,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},Ole={readContext:lo,useCallback:function(t,e){return Xa().memoizedState=[t,e===void 0?null:e],t},useContext:lo,useEffect:Uj,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,V$(4194308,4,mH.bind(null,e,t),i)},useLayoutEffect:function(t,e){return V$(4194308,4,t,e)},useInsertionEffect:function(t,e){return V$(4,2,t,e)},useMemo:function(t,e){var i=Xa();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var r=Xa();return e=i!==void 0?i(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Mle.bind(null,ai,t),[r.memoizedState,t]},useRef:function(t){var e=Xa();return t={current:t},e.memoizedState=t},useState:Vj,useDebugValue:hD,useDeferredValue:function(t){return Xa().memoizedState=t},useTransition:function(){var t=Vj(!1),e=t[0];return t=Cle.bind(null,t[1]),Xa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var r=ai,n=Xa();if(Qt){if(i===void 0)throw Error(ie(407));i=i()}else{if(i=e(),ur===null)throw Error(ie(349));pf&30||aH(r,e,i)}n.memoizedState=i;var s={value:i,getSnapshot:e};return n.queue=s,Uj(cH.bind(null,r,s,t),[t]),r.flags|=2048,Gw(9,lH.bind(null,r,s,i,e),void 0,null),i},useId:function(){var t=Xa(),e=ur.identifierPrefix;if(Qt){var i=xc,r=$c;i=(r&~(1<<32-sa(r)-1)).toString(32)+i,e=":"+e+"R"+i,i=Uw++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=Ile++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ale={readContext:lo,useCallback:gH,useContext:lo,useEffect:pD,useImperativeHandle:yH,useInsertionEffect:hH,useLayoutEffect:fH,useMemo:vH,useReducer:dC,useRef:pH,useState:function(){return dC(Bw)},useDebugValue:hD,useDeferredValue:function(t){var e=co();return bH(e,Gi.memoizedState,t)},useTransition:function(){var t=dC(Bw)[0],e=co().memoizedState;return[t,e]},useMutableSource:sH,useSyncExternalStore:oH,useId:wH,unstable_isNewReconciler:!1},Ple={readContext:lo,useCallback:gH,useContext:lo,useEffect:pD,useImperativeHandle:yH,useInsertionEffect:hH,useLayoutEffect:fH,useMemo:vH,useReducer:pC,useRef:pH,useState:function(){return pC(Bw)},useDebugValue:hD,useDeferredValue:function(t){var e=co();return Gi===null?e.memoizedState=t:bH(e,Gi.memoizedState,t)},useTransition:function(){var t=pC(Bw)[0],e=co().memoizedState;return[t,e]},useMutableSource:sH,useSyncExternalStore:oH,useId:wH,unstable_isNewReconciler:!1};function Og(t,e){try{var i="",r=e;do i+=lae(r),r=r.return;while(r);var n=i}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:n,digest:null}}function hC(t,e,i){return{value:t,source:null,stack:i??null,digest:e??null}}function rO(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var Rle=typeof WeakMap=="function"?WeakMap:Map;function xH(t,e,i){i=Ec(-1,i),i.tag=3,i.payload={element:null};var r=e.value;return i.callback=function(){G2||(G2=!0,hO=r),rO(t,e)},i}function EH(t,e,i){i=Ec(-1,i),i.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var n=e.value;i.payload=function(){return r(n)},i.callback=function(){rO(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){rO(t,e),typeof r!="function"&&(Md===null?Md=new Set([this]):Md.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),i}function Bj(t,e,i){var r=t.pingCache;if(r===null){r=t.pingCache=new Rle;var n=new Set;r.set(e,n)}else n=r.get(e),n===void 0&&(n=new Set,r.set(e,n));n.has(i)||(n.add(i),t=Zle.bind(null,t,e,i),e.then(t,t))}function Gj(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hj(t,e,i,r,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=Ec(-1,1),e.tag=2,Cd(i,e,1))),i.lanes|=1),t)}var Nle=Wc.ReactCurrentOwner,On=!1;function an(t,e,i,r){e.child=t===null?rH(e,null,i,r):Mg(e,t.child,i,r)}function qj(t,e,i,r,n){i=i.render;var s=e.ref;return sg(e,n),r=uD(t,e,i,r,s,n),i=dD(),t!==null&&!On?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Nc(t,e,n)):(Qt&&i&&QN(e),e.flags|=1,an(t,e,r,n),e.child)}function Wj(t,e,i,r,n){if(t===null){var s=i.type;return typeof s=="function"&&!_D(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=s,TH(t,e,s,r,n)):(t=H$(i.type,null,r,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&n)){var o=s.memoizedProps;if(i=i.compare,i=i!==null?i:Nw,i(o,r)&&t.ref===e.ref)return Nc(t,e,n)}return e.flags|=1,t=Od(s,r),t.ref=e.ref,t.return=e,e.child=t}function TH(t,e,i,r,n){if(t!==null){var s=t.memoizedProps;if(Nw(s,r)&&t.ref===e.ref)if(On=!1,e.pendingProps=r=s,(t.lanes&n)!==0)t.flags&131072&&(On=!0);else return e.lanes=t.lanes,Nc(t,e,n)}return nO(t,e,i,r,n)}function kH(t,e,i){var r=e.pendingProps,n=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Uy,ls),ls|=i;else{if(!(i&1073741824))return t=s!==null?s.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rt(Uy,ls),ls|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:i,Rt(Uy,ls),ls|=r}else s!==null?(r=s.baseLanes|i,e.memoizedState=null):r=i,Rt(Uy,ls),ls|=r;return an(t,e,n,i),e.child}function IH(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function nO(t,e,i,r,n){var s=Nn(i)?uf:Wr.current;return s=Ig(e,s),sg(e,n),i=uD(t,e,i,r,s,n),r=dD(),t!==null&&!On?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Nc(t,e,n)):(Qt&&r&&QN(e),e.flags|=1,an(t,e,i,n),e.child)}function Jj(t,e,i,r,n){if(Nn(i)){var s=!0;P2(e)}else s=!1;if(sg(e,n),e.stateNode===null)U$(t,e),tH(e,i,r),iO(e,i,r,n),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=i.contextType;typeof u=="object"&&u!==null?u=lo(u):(u=Nn(i)?uf:Wr.current,u=Ig(e,u));var p=i.getDerivedStateFromProps,h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&jj(e,o,r,u),Ku=!1;var m=e.memoizedState;o.state=m,j2(e,r,o,n),l=e.memoizedState,a!==r||m!==l||Rn.current||Ku?(typeof p=="function"&&(tO(e,i,p,r),l=e.memoizedState),(a=Ku||Fj(e,i,a,r,m,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XG(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Wo(e.type,a),o.props=u,h=e.pendingProps,m=o.context,l=i.contextType,typeof l=="object"&&l!==null?l=lo(l):(l=Nn(i)?uf:Wr.current,l=Ig(e,l));var y=i.getDerivedStateFromProps;(p=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&jj(e,o,r,l),Ku=!1,m=e.memoizedState,o.state=m,j2(e,r,o,n);var g=e.memoizedState;a!==h||m!==g||Rn.current||Ku?(typeof y=="function"&&(tO(e,i,y,r),g=e.memoizedState),(u=Ku||Fj(e,i,u,r,m,g,l)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return sO(t,e,i,r,s,n)}function sO(t,e,i,r,n,s){IH(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return n&&Aj(e,i,!1),Nc(t,e,s);r=e.stateNode,Nle.current=e;var a=o&&typeof i.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Mg(e,t.child,null,s),e.child=Mg(e,null,a,s)):an(t,e,a,s),e.memoizedState=r.state,n&&Aj(e,i,!0),e.child}function CH(t){var e=t.stateNode;e.pendingContext?Oj(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Oj(t,e.context,!1),oD(t,e.containerInfo)}function Zj(t,e,i,r,n){return Cg(),eD(n),e.flags|=256,an(t,e,i,r),e.child}var oO={dehydrated:null,treeContext:null,retryLane:0};function aO(t){return{baseLanes:t,cachePool:null,transitions:null}}function MH(t,e,i){var r=e.pendingProps,n=oi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(n&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Rt(oi,n&1),t===null)return XL(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ok(o,r,0,null),t=Qh(t,r,i,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=aO(i),e.memoizedState=oO,t):fD(e,o));if(n=t.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return Dle(t,e,o,r,a,n,i);if(s){s=r.fallback,o=e.mode,n=t.child,a=n.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==n?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Od(n,l),r.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=Od(a,s):(s=Qh(s,o,i,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?aO(i):{baseLanes:o.baseLanes|i,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~i,e.memoizedState=oO,r}return s=t.child,t=s.sibling,r=Od(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=i),r.return=e,r.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=r,e.memoizedState=null,r}function fD(t,e){return e=ok({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rS(t,e,i,r){return r!==null&&eD(r),Mg(e,t.child,null,i),t=fD(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Dle(t,e,i,r,n,s,o){if(i)return e.flags&256?(e.flags&=-257,r=hC(Error(ie(422))),rS(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,n=e.mode,r=ok({mode:"visible",children:r.children},n,0,null),s=Qh(s,n,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Mg(e,t.child,null,o),e.child.memoizedState=aO(o),e.memoizedState=oO,s);if(!(e.mode&1))return rS(t,e,o,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ie(419)),r=hC(s,r,void 0),rS(t,e,o,r)}if(a=(o&t.childLanes)!==0,On||a){if(r=ur,r!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Rc(t,n),oa(r,t,n,-1))}return wD(),r=hC(Error(ie(421))),rS(t,e,o,r)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=Yle.bind(null,t),n._reactRetry=e,null):(t=s.treeContext,hs=Id(n.nextSibling),fs=e,Qt=!0,ea=null,t!==null&&(Ks[Qs++]=$c,Ks[Qs++]=xc,Ks[Qs++]=df,$c=t.id,xc=t.overflow,df=e),e=fD(e,r.children),e.flags|=4096,e)}function Yj(t,e,i){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),eO(t.return,e,i)}function fC(t,e,i,r,n){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=i,s.tailMode=n)}function LH(t,e,i){var r=e.pendingProps,n=r.revealOrder,s=r.tail;if(an(t,e,r.children,i),r=oi.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yj(t,i,e);else if(t.tag===19)Yj(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Rt(oi,r),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(i=e.child,n=null;i!==null;)t=i.alternate,t!==null&&z2(t)===null&&(n=i),i=i.sibling;i=n,i===null?(n=e.child,e.child=null):(n=i.sibling,i.sibling=null),fC(e,!1,n,i,s);break;case"backwards":for(i=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&z2(t)===null){e.child=n;break}t=n.sibling,n.sibling=i,i=n,n=t}fC(e,!0,i,null,s);break;case"together":fC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function U$(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nc(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),hf|=e.lanes,!(i&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,i=Od(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=Od(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function Fle(t,e,i){switch(e.tag){case 3:CH(e),Cg();break;case 5:nH(e);break;case 1:Nn(e.type)&&P2(e);break;case 4:oD(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,n=e.memoizedProps.value;Rt(D2,r._currentValue),r._currentValue=n;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Rt(oi,oi.current&1),e.flags|=128,null):i&e.child.childLanes?MH(t,e,i):(Rt(oi,oi.current&1),t=Nc(t,e,i),t!==null?t.sibling:null);Rt(oi,oi.current&1);break;case 19:if(r=(i&e.childLanes)!==0,t.flags&128){if(r)return LH(t,e,i);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Rt(oi,oi.current),r)break;return null;case 22:case 23:return e.lanes=0,kH(t,e,i)}return Nc(t,e,i)}var OH,lO,AH,PH;OH=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};lO=function(){};AH=function(t,e,i,r){var n=t.memoizedProps;if(n!==r){t=e.stateNode,jh(pl.current);var s=null;switch(i){case"input":n=ML(t,n),r=ML(t,r),s=[];break;case"select":n=li({},n,{value:void 0}),r=li({},r,{value:void 0}),s=[];break;case"textarea":n=AL(t,n),r=AL(t,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=O2)}RL(i,r);var o;i=null;for(u in n)if(!r.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var a=n[u];for(o in a)a.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cw.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=n!=null?n[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(i||(i={}),i[o]=l[o])}else i||(s||(s=[]),s.push(u,i)),i=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cw.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&jt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}i&&(s=s||[]).push("style",i);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};PH=function(t,e,i,r){i!==r&&(e.flags|=4)};function W0(t,e){if(!Qt)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ir(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,r=0;if(e)for(var n=t.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=r,t.childLanes=i,e}function jle(t,e,i){var r=e.pendingProps;switch(XN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(e),null;case 1:return Nn(e.type)&&A2(),Ir(e),null;case 3:return r=e.stateNode,Lg(),Ht(Rn),Ht(Wr),lD(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tS(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ea!==null&&(yO(ea),ea=null))),lO(t,e),Ir(e),null;case 5:aD(e);var n=jh(Vw.current);if(i=e.type,t!==null&&e.stateNode!=null)AH(t,e,i,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return Ir(e),null}if(t=jh(pl.current),tS(e)){r=e.stateNode,i=e.type;var s=e.memoizedProps;switch(r[al]=e,r[jw]=s,t=(e.mode&1)!==0,i){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(n=0;n<xv.length;n++)jt(xv[n],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":sj(r,s),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jt("invalid",r);break;case"textarea":aj(r,s),jt("invalid",r)}RL(i,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&eS(r.textContent,a,t),n=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&eS(r.textContent,a,t),n=["children",""+a]):Cw.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&jt("scroll",r)}switch(i){case"input":q_(r),oj(r,s,!0);break;case"textarea":q_(r),lj(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=O2)}r=n,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aG(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(i,{is:r.is}):(t=o.createElement(i),i==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,i),t[al]=e,t[jw]=r,OH(t,e,!1,!1),e.stateNode=t;e:{switch(o=NL(i,r),i){case"dialog":jt("cancel",t),jt("close",t),n=r;break;case"iframe":case"object":case"embed":jt("load",t),n=r;break;case"video":case"audio":for(n=0;n<xv.length;n++)jt(xv[n],t);n=r;break;case"source":jt("error",t),n=r;break;case"img":case"image":case"link":jt("error",t),jt("load",t),n=r;break;case"details":jt("toggle",t),n=r;break;case"input":sj(t,r),n=ML(t,r),jt("invalid",t);break;case"option":n=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},n=li({},r,{value:void 0}),jt("invalid",t);break;case"textarea":aj(t,r),n=AL(t,r),jt("invalid",t);break;default:n=r}RL(i,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?uG(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lG(t,l)):s==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&Mw(t,l):typeof l=="number"&&Mw(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cw.hasOwnProperty(s)?l!=null&&s==="onScroll"&&jt("scroll",t):l!=null&&FN(t,s,l,o))}switch(i){case"input":q_(t),oj(t,r,!1);break;case"textarea":q_(t),lj(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Bd(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?tg(t,!!r.multiple,s,!1):r.defaultValue!=null&&tg(t,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=O2)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ir(e),null;case 6:if(t&&e.stateNode!=null)PH(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(i=jh(Vw.current),jh(pl.current),tS(e)){if(r=e.stateNode,i=e.memoizedProps,r[al]=e,(s=r.nodeValue!==i)&&(t=fs,t!==null))switch(t.tag){case 3:eS(r.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&eS(r.nodeValue,i,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[al]=e,e.stateNode=r}return Ir(e),null;case 13:if(Ht(oi),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qt&&hs!==null&&e.mode&1&&!(e.flags&128))KG(),Cg(),e.flags|=98560,s=!1;else if(s=tS(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ie(317));s[al]=e}else Cg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ir(e),s=!1}else ea!==null&&(yO(ea),ea=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||oi.current&1?Wi===0&&(Wi=3):wD())),e.updateQueue!==null&&(e.flags|=4),Ir(e),null);case 4:return Lg(),lO(t,e),t===null&&Dw(e.stateNode.containerInfo),Ir(e),null;case 10:return rD(e.type._context),Ir(e),null;case 17:return Nn(e.type)&&A2(),Ir(e),null;case 19:if(Ht(oi),s=e.memoizedState,s===null)return Ir(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)W0(s,!1);else{if(Wi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=z2(t),o!==null){for(e.flags|=128,W0(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=i,i=e.child;i!==null;)s=i,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Rt(oi,oi.current&1|2),e.child}t=t.sibling}s.tail!==null&&Si()>Ag&&(e.flags|=128,r=!0,W0(s,!1),e.lanes=4194304)}else{if(!r)if(t=z2(o),t!==null){if(e.flags|=128,r=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),W0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Qt)return Ir(e),null}else 2*Si()-s.renderingStartTime>Ag&&i!==1073741824&&(e.flags|=128,r=!0,W0(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(i=s.last,i!==null?i.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Si(),e.sibling=null,i=oi.current,Rt(oi,r?i&1|2:i&1),e):(Ir(e),null);case 22:case 23:return bD(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ls&1073741824&&(Ir(e),e.subtreeFlags&6&&(e.flags|=8192)):Ir(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function zle(t,e){switch(XN(e),e.tag){case 1:return Nn(e.type)&&A2(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Lg(),Ht(Rn),Ht(Wr),lD(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return aD(e),null;case 13:if(Ht(oi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Cg()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ht(oi),null;case 4:return Lg(),null;case 10:return rD(e.type._context),null;case 22:case 23:return bD(),null;case 24:return null;default:return null}}var nS=!1,Ur=!1,Vle=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Vy(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){fi(t,e,r)}else i.current=null}function cO(t,e,i){try{i()}catch(r){fi(t,e,r)}}var Kj=!1;function Ule(t,e){if(qL=C2,t=FG(),KN(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var o=0,a=-1,l=-1,u=0,p=0,h=t,m=null;t:for(;;){for(var y;h!==i||n!==0&&h.nodeType!==3||(a=o+n),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===t)break t;if(m===i&&++u===n&&(a=o),m===s&&++p===r&&(l=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}i=a===-1||l===-1?null:{start:a,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(WL={focusedElem:t,selectionRange:i},C2=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,w=g.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?v:Wo(e.type,v),w);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch($){fi(e,e.return,$)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return g=Kj,Kj=!1,g}function Ub(t,e,i){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&t)===t){var s=n.destroy;n.destroy=void 0,s!==void 0&&cO(e,i,s)}n=n.next}while(n!==r)}}function nk(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var r=i.create;i.destroy=r()}i=i.next}while(i!==e)}}function uO(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function RH(t){var e=t.alternate;e!==null&&(t.alternate=null,RH(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[al],delete e[jw],delete e[YL],delete e[xle],delete e[Ele])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NH(t){return t.tag===5||t.tag===3||t.tag===4}function Qj(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NH(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dO(t,e,i){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=O2));else if(r!==4&&(t=t.child,t!==null))for(dO(t,e,i),t=t.sibling;t!==null;)dO(t,e,i),t=t.sibling}function pO(t,e,i){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pO(t,e,i),t=t.sibling;t!==null;)pO(t,e,i),t=t.sibling}var br=null,Zo=!1;function eu(t,e,i){for(i=i.child;i!==null;)DH(t,e,i),i=i.sibling}function DH(t,e,i){if(dl&&typeof dl.onCommitFiberUnmount=="function")try{dl.onCommitFiberUnmount(YT,i)}catch{}switch(i.tag){case 5:Ur||Vy(i,e);case 6:var r=br,n=Zo;br=null,eu(t,e,i),br=r,Zo=n,br!==null&&(Zo?(t=br,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):br.removeChild(i.stateNode));break;case 18:br!==null&&(Zo?(t=br,i=i.stateNode,t.nodeType===8?aC(t.parentNode,i):t.nodeType===1&&aC(t,i),Pw(t)):aC(br,i.stateNode));break;case 4:r=br,n=Zo,br=i.stateNode.containerInfo,Zo=!0,eu(t,e,i),br=r,Zo=n;break;case 0:case 11:case 14:case 15:if(!Ur&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cO(i,e,o),n=n.next}while(n!==r)}eu(t,e,i);break;case 1:if(!Ur&&(Vy(i,e),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(a){fi(i,e,a)}eu(t,e,i);break;case 21:eu(t,e,i);break;case 22:i.mode&1?(Ur=(r=Ur)||i.memoizedState!==null,eu(t,e,i),Ur=r):eu(t,e,i);break;default:eu(t,e,i)}}function Xj(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new Vle),e.forEach(function(r){var n=Kle.bind(null,t,r);i.has(r)||(i.add(r),r.then(n,n))})}}function vo(t,e){var i=e.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:br=a.stateNode,Zo=!1;break e;case 3:br=a.stateNode.containerInfo,Zo=!0;break e;case 4:br=a.stateNode.containerInfo,Zo=!0;break e}a=a.return}if(br===null)throw Error(ie(160));DH(s,o,n),br=null,Zo=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(u){fi(n,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FH(e,t),e=e.sibling}function FH(t,e){var i=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vo(e,t),ba(t),r&4){try{Ub(3,t,t.return),nk(3,t)}catch(v){fi(t,t.return,v)}try{Ub(5,t,t.return)}catch(v){fi(t,t.return,v)}}break;case 1:vo(e,t),ba(t),r&512&&i!==null&&Vy(i,i.return);break;case 5:if(vo(e,t),ba(t),r&512&&i!==null&&Vy(i,i.return),t.flags&32){var n=t.stateNode;try{Mw(n,"")}catch(v){fi(t,t.return,v)}}if(r&4&&(n=t.stateNode,n!=null)){var s=t.memoizedProps,o=i!==null?i.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&sG(n,s),NL(a,o);var u=NL(a,s);for(o=0;o<l.length;o+=2){var p=l[o],h=l[o+1];p==="style"?uG(n,h):p==="dangerouslySetInnerHTML"?lG(n,h):p==="children"?Mw(n,h):FN(n,p,h,u)}switch(a){case"input":LL(n,s);break;case"textarea":oG(n,s);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?tg(n,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?tg(n,!!s.multiple,s.defaultValue,!0):tg(n,!!s.multiple,s.multiple?[]:"",!1))}n[jw]=s}catch(v){fi(t,t.return,v)}}break;case 6:if(vo(e,t),ba(t),r&4){if(t.stateNode===null)throw Error(ie(162));n=t.stateNode,s=t.memoizedProps;try{n.nodeValue=s}catch(v){fi(t,t.return,v)}}break;case 3:if(vo(e,t),ba(t),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Pw(e.containerInfo)}catch(v){fi(t,t.return,v)}break;case 4:vo(e,t),ba(t);break;case 13:vo(e,t),ba(t),n=t.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(gD=Si())),r&4&&Xj(t);break;case 22:if(p=i!==null&&i.memoizedState!==null,t.mode&1?(Ur=(u=Ur)||p,vo(e,t),Ur=u):vo(e,t),ba(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!p&&t.mode&1)for(ye=t,p=t.child;p!==null;){for(h=ye=p;ye!==null;){switch(m=ye,y=m.child,m.tag){case 0:case 11:case 14:case 15:Ub(4,m,m.return);break;case 1:Vy(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,i=m.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){fi(r,i,v)}}break;case 5:Vy(m,m.return);break;case 22:if(m.memoizedState!==null){tz(h);continue}}y!==null?(y.return=m,ye=y):tz(h)}p=p.sibling}e:for(p=null,h=t;;){if(h.tag===5){if(p===null){p=h;try{n=h.stateNode,u?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=cG("display",o))}catch(v){fi(t,t.return,v)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){fi(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vo(e,t),ba(t),r&4&&Xj(t);break;case 21:break;default:vo(e,t),ba(t)}}function ba(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(NH(i)){var r=i;break e}i=i.return}throw Error(ie(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Mw(n,""),r.flags&=-33);var s=Qj(t);pO(t,s,n);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Qj(t);dO(t,a,o);break;default:throw Error(ie(161))}}catch(l){fi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ble(t,e,i){ye=t,jH(t)}function jH(t,e,i){for(var r=(t.mode&1)!==0;ye!==null;){var n=ye,s=n.child;if(n.tag===22&&r){var o=n.memoizedState!==null||nS;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||Ur;a=nS;var u=Ur;if(nS=o,(Ur=l)&&!u)for(ye=n;ye!==null;)o=ye,l=o.child,o.tag===22&&o.memoizedState!==null?iz(n):l!==null?(l.return=o,ye=l):iz(n);for(;s!==null;)ye=s,jH(s),s=s.sibling;ye=n,nS=a,Ur=u}ez(t)}else n.subtreeFlags&8772&&s!==null?(s.return=n,ye=s):ez(t)}}function ez(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ur||nk(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ur)if(i===null)r.componentDidMount();else{var n=e.elementType===e.type?i.memoizedProps:Wo(e.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Dj(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}Dj(e,o,i)}break;case 5:var a=e.stateNode;if(i===null&&e.flags&4){i=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&Pw(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Ur||e.flags&512&&uO(e)}catch(m){fi(e,e.return,m)}}if(e===t){ye=null;break}if(i=e.sibling,i!==null){i.return=e.return,ye=i;break}ye=e.return}}function tz(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var i=e.sibling;if(i!==null){i.return=e.return,ye=i;break}ye=e.return}}function iz(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{nk(4,e)}catch(l){fi(e,i,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var n=e.return;try{r.componentDidMount()}catch(l){fi(e,n,l)}}var s=e.return;try{uO(e)}catch(l){fi(e,s,l)}break;case 5:var o=e.return;try{uO(e)}catch(l){fi(e,o,l)}}}catch(l){fi(e,e.return,l)}if(e===t){ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ye=a;break}ye=e.return}}var Gle=Math.ceil,B2=Wc.ReactCurrentDispatcher,mD=Wc.ReactCurrentOwner,oo=Wc.ReactCurrentBatchConfig,st=0,ur=null,Pi=null,$r=0,ls=0,Uy=ip(0),Wi=0,Hw=null,hf=0,sk=0,yD=0,Bb=null,Cn=null,gD=0,Ag=1/0,mc=null,G2=!1,hO=null,Md=null,sS=!1,fd=null,H2=0,Gb=0,fO=null,B$=-1,G$=0;function cn(){return st&6?Si():B$!==-1?B$:B$=Si()}function Ld(t){return t.mode&1?st&2&&$r!==0?$r&-$r:kle.transition!==null?(G$===0&&(G$=SG()),G$):(t=St,t!==0||(t=window.event,t=t===void 0?16:CG(t.type)),t):1}function oa(t,e,i,r){if(50<Gb)throw Gb=0,fO=null,Error(ie(185));N1(t,i,r),(!(st&2)||t!==ur)&&(t===ur&&(!(st&2)&&(sk|=i),Wi===4&&od(t,$r)),Dn(t,r),i===1&&st===0&&!(e.mode&1)&&(Ag=Si()+500,tk&&rp()))}function Dn(t,e){var i=t.callbackNode;kae(t,e);var r=I2(t,t===ur?$r:0);if(r===0)i!==null&&dj(i),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(i!=null&&dj(i),e===1)t.tag===0?Tle(rz.bind(null,t)):JG(rz.bind(null,t)),Sle(function(){!(st&6)&&rp()}),i=null;else{switch($G(r)){case 1:i=BN;break;case 4:i=wG;break;case 16:i=k2;break;case 536870912:i=_G;break;default:i=k2}i=WH(i,zH.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function zH(t,e){if(B$=-1,G$=0,st&6)throw Error(ie(327));var i=t.callbackNode;if(og()&&t.callbackNode!==i)return null;var r=I2(t,t===ur?$r:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=q2(t,r);else{e=r;var n=st;st|=2;var s=UH();(ur!==t||$r!==e)&&(mc=null,Ag=Si()+500,Kh(t,e));do try{Wle();break}catch(a){VH(t,a)}while(!0);iD(),B2.current=s,st=n,Pi!==null?e=0:(ur=null,$r=0,e=Wi)}if(e!==0){if(e===2&&(n=VL(t),n!==0&&(r=n,e=mO(t,n))),e===1)throw i=Hw,Kh(t,0),od(t,r),Dn(t,Si()),i;if(e===6)od(t,r);else{if(n=t.current.alternate,!(r&30)&&!Hle(n)&&(e=q2(t,r),e===2&&(s=VL(t),s!==0&&(r=s,e=mO(t,s))),e===1))throw i=Hw,Kh(t,0),od(t,r),Dn(t,Si()),i;switch(t.finishedWork=n,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:Ap(t,Cn,mc);break;case 3:if(od(t,r),(r&130023424)===r&&(e=gD+500-Si(),10<e)){if(I2(t,0)!==0)break;if(n=t.suspendedLanes,(n&r)!==r){cn(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=ZL(Ap.bind(null,t,Cn,mc),e);break}Ap(t,Cn,mc);break;case 4:if(od(t,r),(r&4194240)===r)break;for(e=t.eventTimes,n=-1;0<r;){var o=31-sa(r);s=1<<o,o=e[o],o>n&&(n=o),r&=~s}if(r=n,r=Si()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gle(r/1960))-r,10<r){t.timeoutHandle=ZL(Ap.bind(null,t,Cn,mc),r);break}Ap(t,Cn,mc);break;case 5:Ap(t,Cn,mc);break;default:throw Error(ie(329))}}}return Dn(t,Si()),t.callbackNode===i?zH.bind(null,t):null}function mO(t,e){var i=Bb;return t.current.memoizedState.isDehydrated&&(Kh(t,e).flags|=256),t=q2(t,e),t!==2&&(e=Cn,Cn=i,e!==null&&yO(e)),t}function yO(t){Cn===null?Cn=t:Cn.push.apply(Cn,t)}function Hle(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],s=n.getSnapshot;n=n.value;try{if(!da(s(),n))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function od(t,e){for(e&=~yD,e&=~sk,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-sa(e),r=1<<i;t[i]=-1,e&=~r}}function rz(t){if(st&6)throw Error(ie(327));og();var e=I2(t,0);if(!(e&1))return Dn(t,Si()),null;var i=q2(t,e);if(t.tag!==0&&i===2){var r=VL(t);r!==0&&(e=r,i=mO(t,r))}if(i===1)throw i=Hw,Kh(t,0),od(t,e),Dn(t,Si()),i;if(i===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ap(t,Cn,mc),Dn(t,Si()),null}function vD(t,e){var i=st;st|=1;try{return t(e)}finally{st=i,st===0&&(Ag=Si()+500,tk&&rp())}}function ff(t){fd!==null&&fd.tag===0&&!(st&6)&&og();var e=st;st|=1;var i=oo.transition,r=St;try{if(oo.transition=null,St=1,t)return t()}finally{St=r,oo.transition=i,st=e,!(st&6)&&rp()}}function bD(){ls=Uy.current,Ht(Uy)}function Kh(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,_le(i)),Pi!==null)for(i=Pi.return;i!==null;){var r=i;switch(XN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&A2();break;case 3:Lg(),Ht(Rn),Ht(Wr),lD();break;case 5:aD(r);break;case 4:Lg();break;case 13:Ht(oi);break;case 19:Ht(oi);break;case 10:rD(r.type._context);break;case 22:case 23:bD()}i=i.return}if(ur=t,Pi=t=Od(t.current,null),$r=ls=e,Wi=0,Hw=null,yD=sk=hf=0,Cn=Bb=null,Fh!==null){for(e=0;e<Fh.length;e++)if(i=Fh[e],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,s=i.pending;if(s!==null){var o=s.next;s.next=n,r.next=o}i.pending=r}Fh=null}return t}function VH(t,e){do{var i=Pi;try{if(iD(),z$.current=U2,V2){for(var r=ai.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}V2=!1}if(pf=0,or=Gi=ai=null,Vb=!1,Uw=0,mD.current=null,i===null||i.return===null){Wi=1,Hw=e,Pi=null;break}e:{var s=t,o=i.return,a=i,l=e;if(e=$r,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,p=a,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var y=Gj(o);if(y!==null){y.flags&=-257,Hj(y,o,a,s,e),y.mode&1&&Bj(s,u,e),e=y,l=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){Bj(s,u,e),wD();break e}l=Error(ie(426))}}else if(Qt&&a.mode&1){var w=Gj(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Hj(w,o,a,s,e),eD(Og(l,a));break e}}s=l=Og(l,a),Wi!==4&&(Wi=2),Bb===null?Bb=[s]:Bb.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=xH(s,l,e);Nj(s,b);break e;case 1:a=l;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Md===null||!Md.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var $=EH(s,a,e);Nj(s,$);break e}}s=s.return}while(s!==null)}GH(i)}catch(T){e=T,Pi===i&&i!==null&&(Pi=i=i.return);continue}break}while(!0)}function UH(){var t=B2.current;return B2.current=U2,t===null?U2:t}function wD(){(Wi===0||Wi===3||Wi===2)&&(Wi=4),ur===null||!(hf&268435455)&&!(sk&268435455)||od(ur,$r)}function q2(t,e){var i=st;st|=2;var r=UH();(ur!==t||$r!==e)&&(mc=null,Kh(t,e));do try{qle();break}catch(n){VH(t,n)}while(!0);if(iD(),st=i,B2.current=r,Pi!==null)throw Error(ie(261));return ur=null,$r=0,Wi}function qle(){for(;Pi!==null;)BH(Pi)}function Wle(){for(;Pi!==null&&!vae();)BH(Pi)}function BH(t){var e=qH(t.alternate,t,ls);t.memoizedProps=t.pendingProps,e===null?GH(t):Pi=e,mD.current=null}function GH(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&32768){if(i=zle(i,e),i!==null){i.flags&=32767,Pi=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Wi=6,Pi=null;return}}else if(i=jle(i,e,ls),i!==null){Pi=i;return}if(e=e.sibling,e!==null){Pi=e;return}Pi=e=t}while(e!==null);Wi===0&&(Wi=5)}function Ap(t,e,i){var r=St,n=oo.transition;try{oo.transition=null,St=1,Jle(t,e,i,r)}finally{oo.transition=n,St=r}return null}function Jle(t,e,i,r){do og();while(fd!==null);if(st&6)throw Error(ie(327));i=t.finishedWork;var n=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var s=i.lanes|i.childLanes;if(Iae(t,s),t===ur&&(Pi=ur=null,$r=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||sS||(sS=!0,WH(k2,function(){return og(),null})),s=(i.flags&15990)!==0,i.subtreeFlags&15990||s){s=oo.transition,oo.transition=null;var o=St;St=1;var a=st;st|=4,mD.current=null,Ule(t,i),FH(i,t),fle(WL),C2=!!qL,WL=qL=null,t.current=i,Ble(i),bae(),st=a,St=o,oo.transition=s}else t.current=i;if(sS&&(sS=!1,fd=t,H2=n),s=t.pendingLanes,s===0&&(Md=null),Sae(i.stateNode),Dn(t,Si()),e!==null)for(r=t.onRecoverableError,i=0;i<e.length;i++)n=e[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(G2)throw G2=!1,t=hO,hO=null,t;return H2&1&&t.tag!==0&&og(),s=t.pendingLanes,s&1?t===fO?Gb++:(Gb=0,fO=t):Gb=0,rp(),null}function og(){if(fd!==null){var t=$G(H2),e=oo.transition,i=St;try{if(oo.transition=null,St=16>t?16:t,fd===null)var r=!1;else{if(t=fd,fd=null,H2=0,st&6)throw Error(ie(331));var n=st;for(st|=4,ye=t.current;ye!==null;){var s=ye,o=s.child;if(ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ye=u;ye!==null;){var p=ye;switch(p.tag){case 0:case 11:case 15:Ub(8,p,s)}var h=p.child;if(h!==null)h.return=p,ye=h;else for(;ye!==null;){p=ye;var m=p.sibling,y=p.return;if(RH(p),p===u){ye=null;break}if(m!==null){m.return=y,ye=m;break}ye=y}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ub(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,ye=b;break e}ye=s.return}}var _=t.current;for(ye=_;ye!==null;){o=ye;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ye=S;else e:for(o=_;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:nk(9,a)}}catch(T){fi(a,a.return,T)}if(a===o){ye=null;break e}var $=a.sibling;if($!==null){$.return=a.return,ye=$;break e}ye=a.return}}if(st=n,rp(),dl&&typeof dl.onPostCommitFiberRoot=="function")try{dl.onPostCommitFiberRoot(YT,t)}catch{}r=!0}return r}finally{St=i,oo.transition=e}}return!1}function nz(t,e,i){e=Og(i,e),e=xH(t,e,1),t=Cd(t,e,1),e=cn(),t!==null&&(N1(t,1,e),Dn(t,e))}function fi(t,e,i){if(t.tag===3)nz(t,t,i);else for(;e!==null;){if(e.tag===3){nz(e,t,i);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Md===null||!Md.has(r))){t=Og(i,t),t=EH(e,t,1),e=Cd(e,t,1),t=cn(),e!==null&&(N1(e,1,t),Dn(e,t));break}}e=e.return}}function Zle(t,e,i){var r=t.pingCache;r!==null&&r.delete(e),e=cn(),t.pingedLanes|=t.suspendedLanes&i,ur===t&&($r&i)===i&&(Wi===4||Wi===3&&($r&130023424)===$r&&500>Si()-gD?Kh(t,0):yD|=i),Dn(t,e)}function HH(t,e){e===0&&(t.mode&1?(e=Z_,Z_<<=1,!(Z_&130023424)&&(Z_=4194304)):e=1);var i=cn();t=Rc(t,e),t!==null&&(N1(t,e,i),Dn(t,i))}function Yle(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),HH(t,i)}function Kle(t,e){var i=0;switch(t.tag){case 13:var r=t.stateNode,n=t.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),HH(t,i)}var qH;qH=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rn.current)On=!0;else{if(!(t.lanes&i)&&!(e.flags&128))return On=!1,Fle(t,e,i);On=!!(t.flags&131072)}else On=!1,Qt&&e.flags&1048576&&ZG(e,N2,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;U$(t,e),t=e.pendingProps;var n=Ig(e,Wr.current);sg(e,i),n=uD(null,e,r,t,n,i);var s=dD();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(r)?(s=!0,P2(e)):s=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,sD(e),n.updater=ik,e.stateNode=n,n._reactInternals=e,iO(e,r,t,i),e=sO(null,e,r,!0,s,i)):(e.tag=0,Qt&&s&&QN(e),an(null,e,n,i),e=e.child),e;case 16:r=e.elementType;e:{switch(U$(t,e),t=e.pendingProps,n=r._init,r=n(r._payload),e.type=r,n=e.tag=Xle(r),t=Wo(r,t),n){case 0:e=nO(null,e,r,t,i);break e;case 1:e=Jj(null,e,r,t,i);break e;case 11:e=qj(null,e,r,t,i);break e;case 14:e=Wj(null,e,r,Wo(r.type,t),i);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Wo(r,n),nO(t,e,r,n,i);case 1:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Wo(r,n),Jj(t,e,r,n,i);case 3:e:{if(CH(e),t===null)throw Error(ie(387));r=e.pendingProps,s=e.memoizedState,n=s.element,XG(t,e),j2(e,r,null,i);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){n=Og(Error(ie(423)),e),e=Zj(t,e,r,i,n);break e}else if(r!==n){n=Og(Error(ie(424)),e),e=Zj(t,e,r,i,n);break e}else for(hs=Id(e.stateNode.containerInfo.firstChild),fs=e,Qt=!0,ea=null,i=rH(e,null,r,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Cg(),r===n){e=Nc(t,e,i);break e}an(t,e,r,i)}e=e.child}return e;case 5:return nH(e),t===null&&XL(e),r=e.type,n=e.pendingProps,s=t!==null?t.memoizedProps:null,o=n.children,JL(r,n)?o=null:s!==null&&JL(r,s)&&(e.flags|=32),IH(t,e),an(t,e,o,i),e.child;case 6:return t===null&&XL(e),null;case 13:return MH(t,e,i);case 4:return oD(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mg(e,null,r,i):an(t,e,r,i),e.child;case 11:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Wo(r,n),qj(t,e,r,n,i);case 7:return an(t,e,e.pendingProps,i),e.child;case 8:return an(t,e,e.pendingProps.children,i),e.child;case 12:return an(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(r=e.type._context,n=e.pendingProps,s=e.memoizedProps,o=n.value,Rt(D2,r._currentValue),r._currentValue=o,s!==null)if(da(s.value,o)){if(s.children===n.children&&!Rn.current){e=Nc(t,e,i);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ec(-1,i&-i),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?l.next=l:(l.next=p.next,p.next=l),u.pending=l}}s.lanes|=i,l=s.alternate,l!==null&&(l.lanes|=i),eO(s.return,i,e),a.lanes|=i;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ie(341));o.lanes|=i,a=o.alternate,a!==null&&(a.lanes|=i),eO(o,i,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}an(t,e,n.children,i),e=e.child}return e;case 9:return n=e.type,r=e.pendingProps.children,sg(e,i),n=lo(n),r=r(n),e.flags|=1,an(t,e,r,i),e.child;case 14:return r=e.type,n=Wo(r,e.pendingProps),n=Wo(r.type,n),Wj(t,e,r,n,i);case 15:return TH(t,e,e.type,e.pendingProps,i);case 17:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Wo(r,n),U$(t,e),e.tag=1,Nn(r)?(t=!0,P2(e)):t=!1,sg(e,i),tH(e,r,n),iO(e,r,n,i),sO(null,e,r,!0,t,i);case 19:return LH(t,e,i);case 22:return kH(t,e,i)}throw Error(ie(156,e.tag))};function WH(t,e){return bG(t,e)}function Qle(t,e,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(t,e,i,r){return new Qle(t,e,i,r)}function _D(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xle(t){if(typeof t=="function")return _D(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zN)return 11;if(t===VN)return 14}return 2}function Od(t,e){var i=t.alternate;return i===null?(i=io(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function H$(t,e,i,r,n,s){var o=2;if(r=t,typeof t=="function")_D(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oy:return Qh(i.children,n,s,e);case jN:o=8,n|=8;break;case TL:return t=io(12,i,e,n|2),t.elementType=TL,t.lanes=s,t;case kL:return t=io(13,i,e,n),t.elementType=kL,t.lanes=s,t;case IL:return t=io(19,i,e,n),t.elementType=IL,t.lanes=s,t;case iG:return ok(i,n,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eG:o=10;break e;case tG:o=9;break e;case zN:o=11;break e;case VN:o=14;break e;case Yu:o=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=io(o,i,e,n),e.elementType=t,e.type=r,e.lanes=s,e}function Qh(t,e,i,r){return t=io(7,t,r,e),t.lanes=i,t}function ok(t,e,i,r){return t=io(22,t,r,e),t.elementType=iG,t.lanes=i,t.stateNode={isHidden:!1},t}function mC(t,e,i){return t=io(6,t,null,e),t.lanes=i,t}function yC(t,e,i){return e=io(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ece(t,e,i,r,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=YI(0),this.expirationTimes=YI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=YI(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function SD(t,e,i,r,n,s,o,a,l){return t=new ece(t,e,i,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=io(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},sD(s),t}function tce(t,e,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ly,key:r==null?null:""+r,children:t,containerInfo:e,implementation:i}}function JH(t){if(!t)return Gd;t=t._reactInternals;e:{if(Df(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var i=t.type;if(Nn(i))return WG(t,i,e)}return e}function ZH(t,e,i,r,n,s,o,a,l){return t=SD(i,r,!0,t,n,s,o,a,l),t.context=JH(null),i=t.current,r=cn(),n=Ld(i),s=Ec(r,n),s.callback=e??null,Cd(i,s,n),t.current.lanes=n,N1(t,n,r),Dn(t,r),t}function ak(t,e,i,r){var n=e.current,s=cn(),o=Ld(n);return i=JH(i),e.context===null?e.context=i:e.pendingContext=i,e=Ec(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cd(n,e,o),t!==null&&(oa(t,n,o,s),j$(t,n,o)),o}function W2(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sz(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function $D(t,e){sz(t,e),(t=t.alternate)&&sz(t,e)}function ice(){return null}var YH=typeof reportError=="function"?reportError:function(t){console.error(t)};function xD(t){this._internalRoot=t}lk.prototype.render=xD.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));ak(t,e,null,null)};lk.prototype.unmount=xD.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ff(function(){ak(null,t,null,null)}),e[Pc]=null}};function lk(t){this._internalRoot=t}lk.prototype.unstable_scheduleHydration=function(t){if(t){var e=TG();t={blockedOn:null,target:t,priority:e};for(var i=0;i<sd.length&&e!==0&&e<sd[i].priority;i++);sd.splice(i,0,t),i===0&&IG(t)}};function ED(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ck(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oz(){}function rce(t,e,i,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var u=W2(o);s.call(u)}}var o=ZH(e,r,t,0,null,!1,!1,"",oz);return t._reactRootContainer=o,t[Pc]=o.current,Dw(t.nodeType===8?t.parentNode:t),ff(),o}for(;n=t.lastChild;)t.removeChild(n);if(typeof r=="function"){var a=r;r=function(){var u=W2(l);a.call(u)}}var l=SD(t,0,!1,null,null,!1,!1,"",oz);return t._reactRootContainer=l,t[Pc]=l.current,Dw(t.nodeType===8?t.parentNode:t),ff(function(){ak(e,l,i,r)}),l}function uk(t,e,i,r,n){var s=i._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=W2(o);a.call(l)}}ak(e,o,t,n)}else o=rce(i,e,t,n,r);return W2(o)}xG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=$v(e.pendingLanes);i!==0&&(GN(e,i|1),Dn(e,Si()),!(st&6)&&(Ag=Si()+500,rp()))}break;case 13:ff(function(){var r=Rc(t,1);if(r!==null){var n=cn();oa(r,t,1,n)}}),$D(t,1)}};HN=function(t){if(t.tag===13){var e=Rc(t,134217728);if(e!==null){var i=cn();oa(e,t,134217728,i)}$D(t,134217728)}};EG=function(t){if(t.tag===13){var e=Ld(t),i=Rc(t,e);if(i!==null){var r=cn();oa(i,t,e,r)}$D(t,e)}};TG=function(){return St};kG=function(t,e){var i=St;try{return St=t,e()}finally{St=i}};FL=function(t,e,i){switch(e){case"input":if(LL(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var n=ek(r);if(!n)throw Error(ie(90));nG(r),LL(r,n)}}}break;case"textarea":oG(t,i);break;case"select":e=i.value,e!=null&&tg(t,!!i.multiple,e,!1)}};hG=vD;fG=ff;var nce={usingClientEntryPoint:!1,Events:[F1,Ny,ek,dG,pG,vD]},J0={findFiberByHostInstance:Dh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},sce={bundleType:J0.bundleType,version:J0.version,rendererPackageName:J0.rendererPackageName,rendererConfig:J0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gG(t),t===null?null:t.stateNode},findFiberByHostInstance:J0.findFiberByHostInstance||ice,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oS.isDisabled&&oS.supportsFiber)try{YT=oS.inject(sce),dl=oS}catch{}}Cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nce;Cs.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ED(e))throw Error(ie(200));return tce(t,e,null,i)};Cs.createRoot=function(t,e){if(!ED(t))throw Error(ie(299));var i=!1,r="",n=YH;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=SD(t,1,!1,null,null,i,!1,r,n),t[Pc]=e.current,Dw(t.nodeType===8?t.parentNode:t),new xD(e)};Cs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=gG(e),t=t===null?null:t.stateNode,t};Cs.flushSync=function(t){return ff(t)};Cs.hydrate=function(t,e,i){if(!ck(e))throw Error(ie(200));return uk(null,t,e,!0,i)};Cs.hydrateRoot=function(t,e,i){if(!ED(t))throw Error(ie(405));var r=i!=null&&i.hydratedSources||null,n=!1,s="",o=YH;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),e=ZH(e,null,t,1,i??null,n,!1,s,o),t[Pc]=e.current,Dw(t),r)for(t=0;t<r.length;t++)i=r[t],n=i._getVersion,n=n(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,n]:e.mutableSourceEagerHydrationData.push(i,n);return new lk(e)};Cs.render=function(t,e,i){if(!ck(e))throw Error(ie(200));return uk(null,t,e,!1,i)};Cs.unmountComponentAtNode=function(t){if(!ck(t))throw Error(ie(40));return t._reactRootContainer?(ff(function(){uk(null,null,t,!1,function(){t._reactRootContainer=null,t[Pc]=null})}),!0):!1};Cs.unstable_batchedUpdates=vD;Cs.unstable_renderSubtreeIntoContainer=function(t,e,i,r){if(!ck(i))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return uk(t,e,i,!1,r)};Cs.version="18.2.0-next-9e3b772b8-20220608";function KH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KH)}catch(t){console.error(t)}}KH(),Z7.exports=Cs;var oce=Z7.exports,az=oce;xL.createRoot=az.createRoot,xL.hydrateRoot=az.hydrateRoot;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const QH="calcite-mode-auto",XH="calcite-mode-dark",ace="calcite-mode-light",rm={autoMode:QH,darkMode:XH,lightMode:ace,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},lce="modulepreload",cce=function(t){return"/"+t},lz={},Z=function(e,i,r){let n=Promise.resolve();if(i&&i.length>0){const s=document.getElementsByTagName("link");n=Promise.all(i.map(o=>{if(o=cce(o),o in lz)return;lz[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const m=s[h];if(m.href===o&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const p=document.createElement("link");if(p.rel=a?"stylesheet":lce,a||(p.as="script",p.crossOrigin=""),p.href=o,document.head.appendChild(p),a)return new Promise((h,m)=>{p.addEventListener("load",h),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}return n.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Eh={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1};let Im,eq,dk,tq=!1,J2=!1,TD=!1,cs=!1,cz=null,gO=!1;const iq=t=>{const e=new URL(t,pr.$resourcesUrl$);return e.origin!==V1.location.origin?e.href:e.pathname},uce=t=>pr.$resourcesUrl$=t,mf=(t,e="")=>()=>{},dce="slot-fb{display:contents}slot-fb[hidden]{display:none}",uz="http://www.w3.org/1999/xlink",dz={},pce="http://www.w3.org/2000/svg",hce="http://www.w3.org/1999/xhtml",fce=t=>t!=null,kD=t=>(t=typeof t,t==="object"||t==="function");function mce(t){var e,i,r;return(r=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&r!==void 0?r:void 0}const J=(t,e,...i)=>{let r=null,n=null,s=null,o=!1,a=!1;const l=[],u=h=>{for(let m=0;m<h.length;m++)r=h[m],Array.isArray(r)?u(r):r!=null&&typeof r!="boolean"&&((o=typeof t!="function"&&!kD(r))&&(r=String(r)),o&&a?l[l.length-1].$text$+=r:l.push(o?Z2(null,r):r),a=o)};if(u(i),e){e.key&&(n=e.key),e.name&&(s=e.name);{const h=e.className||e.class;h&&(e.class=typeof h!="object"?h:Object.keys(h).filter(m=>h[m]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,gce);const p=Z2(t,null);return p.$attrs$=e,l.length>0&&(p.$children$=l),p.$key$=n,p.$name$=s,p},Z2=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},c0={},yce=t=>t&&t.$tag$===c0,gce={forEach:(t,e)=>t.map(pz).forEach(e),map:(t,e)=>t.map(pz).map(e).map(vce)},pz=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),vce=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),J(t.vtag,i,...t.vchildren||[])}const e=Z2(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},bce=t=>Wce.map(e=>e(t)).find(e=>!!e),wce=(t,e)=>t!=null&&!kD(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,_ce=t=>t,ra=(t,e,i)=>{const r=_ce(t);return{emit:n=>Sce(r,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},Sce=(t,e,i)=>{const r=pr.ce(e,i);return t.dispatchEvent(r),r},hz=new WeakMap,$ce=(t,e,i)=>{let r=K2.get(t);Yce&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,K2.set(t,r)},xce=(t,e,i)=>{var r;const n=rq(e,i),s=K2.get(n);if(t=t.nodeType===11?t:aa,s)if(typeof s=="string"){t=t.head||t;let o=hz.get(t),a;if(o||hz.set(t,o=new Set),!o.has(n)){{a=aa.createElement("style"),a.innerHTML=s;const l=(r=pr.$nonce$)!==null&&r!==void 0?r:mce(aa);l!=null&&a.setAttribute("nonce",l),t.insertBefore(a,t.querySelector("link"))}e.$flags$&4&&(a.innerHTML+=dce),o&&o.add(n)}}else t.adoptedStyleSheets.includes(s)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,s]);return n},Ece=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,r=e.$flags$,n=mf("attachStyles",e.$tagName$),s=xce(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);r&10&&(i["s-sc"]=s,i.classList.add(s+"-h"),r&2&&i.classList.add(s+"-s")),n()},rq=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),fz=(t,e,i,r,n,s)=>{if(i!==r){let o=bz(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,u=mz(i),p=mz(r);l.remove(...u.filter(h=>h&&!p.includes(h))),l.add(...p.filter(h=>h&&!u.includes(h)))}else if(e==="style"){for(const l in i)(!r||r[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in r)(!i||r[l]!==i[l])&&(l.includes("-")?t.style.setProperty(l,r[l]):t.style[l]=r[l])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):bz(V1,a)?e=a.slice(2):e=a[2]+e.slice(3),i||r){const l=e.endsWith(nq);e=e.replace(kce,""),i&&pr.rel(t,e,i,l),r&&pr.ael(t,e,r,l)}}else{const l=kD(r);if((o||l&&r!==null)&&!n)try{if(t.tagName.includes("-"))t[e]=r;else{const p=r??"";e==="list"?o=!1:(i==null||t[e]!=p)&&(t[e]=p)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,u=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(u?t.removeAttributeNS(uz,e):t.removeAttribute(e)):(!o||s&4||n)&&!l&&(r=r===!0?"":r,u?t.setAttributeNS(uz,e,r):t.setAttribute(e,r))}}},Tce=/\s/,mz=t=>t?t.split(Tce):[],nq="Capture",kce=new RegExp(nq+"$"),sq=(t,e,i,r)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||dz,o=e.$attrs$||dz;for(r in s)r in o||fz(n,r,s[r],void 0,i,e.$flags$);for(r in o)fz(n,r,s[r],o[r],i,e.$flags$)},Y2=(t,e,i,r)=>{var n;const s=e.$children$[i];let o=0,a,l,u;if(tq||(TD=!0,s.$tag$==="slot"&&(Im&&r.classList.add(Im+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)a=s.$elm$=aa.createTextNode(s.$text$);else if(s.$flags$&1)a=s.$elm$=aa.createTextNode("");else{if(cs||(cs=s.$tag$==="svg"),a=s.$elm$=aa.createElementNS(cs?pce:hce,s.$flags$&2?"slot-fb":s.$tag$),cs&&s.$tag$==="foreignObject"&&(cs=!1),sq(null,s,cs),fce(Im)&&a["s-si"]!==Im&&a.classList.add(a["s-si"]=Im),s.$children$)for(o=0;o<s.$children$.length;++o)l=Y2(t,s,o,a),l&&a.appendChild(l);s.$tag$==="svg"?cs=!1:a.tagName==="foreignObject"&&(cs=!0)}return a["s-hn"]=dk,s.$flags$&3&&(a["s-sr"]=!0,a["s-fs"]=(n=s.$attrs$)===null||n===void 0?void 0:n.slot,a["s-cr"]=eq,a["s-sn"]=s.$name$||"",u=t&&t.$children$&&t.$children$[i],u&&u.$tag$===s.$tag$&&t.$elm$&&qw(t.$elm$,!1)),a},qw=(t,e)=>{var i;pr.$flags$|=1;const r=t.childNodes;for(let n=r.length-1;n>=0;n--){const s=r[n];s["s-hn"]!==dk&&s["s-ol"]&&(lq(s).insertBefore(s,ID(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,s.nodeType===1&&s.setAttribute("slot",(i=s["s-sn"])!==null&&i!==void 0?i:""),TD=!0),e&&qw(s,e)}pr.$flags$&=-2},oq=(t,e,i,r,n,s)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(o.shadowRoot&&o.tagName===dk&&(o=o.shadowRoot);n<=s;++n)r[n]&&(a=Y2(null,i,n,t),a&&(r[n].$elm$=a,o.insertBefore(a,ID(e))))},aq=(t,e,i)=>{for(let r=e;r<=i;++r){const n=t[r];if(n){const s=n.$elm$;dq(n),s&&(J2=!0,s["s-ol"]?s["s-ol"].remove():qw(s,!0),s.remove())}}},Ice=(t,e,i,r)=>{let n=0,s=0,o=0,a=0,l=e.length-1,u=e[0],p=e[l],h=r.length-1,m=r[0],y=r[h],g,v;for(;n<=l&&s<=h;)if(u==null)u=e[++n];else if(p==null)p=e[--l];else if(m==null)m=r[++s];else if(y==null)y=r[--h];else if(aS(u,m))Cm(u,m),u=e[++n],m=r[++s];else if(aS(p,y))Cm(p,y),p=e[--l],y=r[--h];else if(aS(u,y))(u.$tag$==="slot"||y.$tag$==="slot")&&qw(u.$elm$.parentNode,!1),Cm(u,y),t.insertBefore(u.$elm$,p.$elm$.nextSibling),u=e[++n],y=r[--h];else if(aS(p,m))(u.$tag$==="slot"||y.$tag$==="slot")&&qw(p.$elm$.parentNode,!1),Cm(p,m),t.insertBefore(p.$elm$,u.$elm$),p=e[--l],m=r[++s];else{for(o=-1,a=n;a<=l;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===m.$key$){o=a;break}o>=0?(v=e[o],v.$tag$!==m.$tag$?g=Y2(e&&e[s],i,o,t):(Cm(v,m),e[o]=void 0,g=v.$elm$),m=r[++s]):(g=Y2(e&&e[s],i,s,t),m=r[++s]),g&&lq(u.$elm$).insertBefore(g,ID(u.$elm$))}n>l?oq(t,r[h+1]==null?null:r[h+1].$elm$,i,r,s,h):s>h&&aq(e,n,l)},aS=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,ID=t=>t&&t["s-ol"]||t,lq=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Cm=(t,e)=>{const i=e.$elm$=t.$elm$,r=t.$children$,n=e.$children$,s=e.$tag$,o=e.$text$;let a;o===null?(cs=s==="svg"?!0:s==="foreignObject"?!1:cs,s==="slot"||sq(t,e,cs),r!==null&&n!==null?Ice(i,r,e,n):n!==null?(t.$text$!==null&&(i.textContent=""),oq(i,null,e,n,0,n.length-1)):r!==null&&aq(r,0,r.length-1),cs&&s==="svg"&&(cs=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:t.$text$!==o&&(i.data=o)},cq=t=>{const e=t.childNodes;for(const i of e)if(i.nodeType===1){if(i["s-sr"]){const r=i["s-sn"];i.hidden=!1;for(const n of e)if(n!==i){if(n["s-hn"]!==i["s-hn"]||r!==""){if(n.nodeType===1&&(r===n.getAttribute("slot")||r===n["s-sn"])){i.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){i.hidden=!0;break}}}cq(i)}},bc=[],uq=t=>{let e,i,r;for(const n of t.childNodes){if(n["s-sr"]&&(e=n["s-cr"])&&e.parentNode){i=e.parentNode.childNodes;const s=n["s-sn"];for(r=i.length-1;r>=0;r--)if(e=i[r],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==n["s-hn"]&&!Eh.experimentalSlotFixes)if(yz(e,s)){let o=bc.find(a=>a.$nodeToRelocate$===e);J2=!0,e["s-sn"]=e["s-sn"]||s,o?(o.$nodeToRelocate$["s-sh"]=n["s-hn"],o.$slotRefNode$=n):(e["s-sh"]=n["s-hn"],bc.push({$slotRefNode$:n,$nodeToRelocate$:e})),e["s-sr"]&&bc.map(a=>{yz(a.$nodeToRelocate$,e["s-sn"])&&(o=bc.find(l=>l.$nodeToRelocate$===e),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else bc.some(o=>o.$nodeToRelocate$===e)||bc.push({$nodeToRelocate$:e})}n.nodeType===1&&uq(n)}},yz=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",dq=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(dq)},Cce=(t,e,i=!1)=>{var r,n;const s=t.$hostElement$,o=t.$cmpMeta$,a=t.$vnode$||Z2(null,null),l=yce(e)?e:J(null,null,e);if(dk=s.tagName,o.$attrsToReflect$&&(l.$attrs$=l.$attrs$||{},o.$attrsToReflect$.map(([u,p])=>l.$attrs$[p]=s[u])),i&&l.$attrs$)for(const u of Object.keys(l.$attrs$))s.hasAttribute(u)&&!["key","ref","style","class"].includes(u)&&(l.$attrs$[u]=s[u]);l.$tag$=null,l.$flags$|=4,t.$vnode$=l,l.$elm$=a.$elm$=s.shadowRoot||s,Im=s["s-sc"],eq=s["s-cr"],tq=(o.$flags$&1)!==0,J2=!1,Cm(a,l);{if(pr.$flags$|=1,TD){uq(l.$elm$);for(const u of bc){const p=u.$nodeToRelocate$;if(!p["s-ol"]){const h=aa.createTextNode("");h["s-nr"]=p,p.parentNode.insertBefore(p["s-ol"]=h,p)}}for(const u of bc){const p=u.$nodeToRelocate$,h=u.$slotRefNode$;if(h){const m=h.parentNode;let y=h.nextSibling;{let g=(r=p["s-ol"])===null||r===void 0?void 0:r.previousSibling;for(;g;){let v=(n=g["s-nr"])!==null&&n!==void 0?n:null;if(v&&v["s-sn"]===p["s-sn"]&&m===v.parentNode&&(v=v.nextSibling,!v||!v["s-nr"])){y=v;break}g=g.previousSibling}}(!y&&m!==p.parentNode||p.nextSibling!==y)&&p!==y&&(!p["s-hn"]&&p["s-ol"]&&(p["s-hn"]=p["s-ol"].parentNode.nodeName),m.insertBefore(p,y))}else p.nodeType===1&&(p.hidden=!0)}}J2&&cq(l.$elm$),pr.$flags$&=-2,bc.length=0}},Mce=(t,e)=>{},CD=(t,e)=>(t.$flags$|=16,Mce(t,t.$ancestorComponent$),Xce(()=>Lce(t,e))),Lce=(t,e)=>{const i=t.$hostElement$,r=mf("scheduleUpdate",t.$cmpMeta$.$tagName$),n=i;let s;return e?s=ag(n,"componentWillLoad"):s=ag(n,"componentWillUpdate"),s=gz(s,()=>ag(n,"componentWillRender")),r(),gz(s,()=>Ace(t,n,e))},gz=(t,e)=>Oce(t)?t.then(e):e(),Oce=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",Ace=async(t,e,i)=>{const r=t.$hostElement$,n=mf("update",t.$cmpMeta$.$tagName$);r["s-rc"],i&&Ece(t);const s=mf("render",t.$cmpMeta$.$tagName$);Pce(t,e,r,i),s(),n(),Rce(t)},Pce=(t,e,i,r)=>{try{cz=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Eh.hasRenderFn||Eh.reflect)&&(Eh.vdomRender||Eh.reflect)&&(Eh.hydrateServerSide||Cce(t,e,r))}catch(l){z1(l,t.$hostElement$)}return cz=null,null},Rce=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,r=mf("postUpdate",e),n=i;t.$ancestorComponent$,ag(n,"componentDidRender"),t.$flags$&64?(ag(n,"componentDidUpdate"),r()):(t.$flags$|=64,ag(n,"componentDidLoad"),r())},u0=t=>{{const e=d0(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&CD(e,!1),i}},ag=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(r){z1(r)}},Nce=(t,e)=>d0(t).$instanceValues$.get(e),Dce=(t,e,i,r)=>{const n=d0(t),s=t,o=n.$instanceValues$.get(e),a=n.$flags$,l=s;i=wce(i,r.$members$[e][0]);const u=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!u){n.$instanceValues$.set(e,i);{if(r.$watchers$&&a&128){const h=r.$watchers$[e];h&&h.map(m=>{try{l[m](i,o,e)}catch(y){z1(y,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,e)===!1)return;CD(n,!1)}}}},Fce=(t,e,i)=>{var r;const n=t.prototype;if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const s=Object.entries(e.$members$);s.map(([o,[a]])=>{(a&31||a&32)&&Object.defineProperty(n,o,{get(){return Nce(this,o)},set(l){Dce(this,o,l,e)},configurable:!0,enumerable:!0})});{const o=new Map;n.attributeChangedCallback=function(a,l,u){pr.jmp(()=>{var p;const h=o.get(a);if(this.hasOwnProperty(h))u=this[h],delete this[h];else{if(n.hasOwnProperty(h)&&typeof this[h]=="number"&&this[h]==u)return;if(h==null){const m=d0(this),y=m==null?void 0:m.$flags$;if(y&&!(y&8)&&y&128&&u!==l){const v=this,w=(p=e.$watchers$)===null||p===void 0?void 0:p[a];w==null||w.forEach(b=>{v[b]!=null&&v[b].call(v,u,l,a)})}return}}this[h]=u===null&&typeof this[h]=="boolean"?!1:u})},t.observedAttributes=Array.from(new Set([...Object.keys((r=e.$watchers$)!==null&&r!==void 0?r:{}),...s.filter(([a,l])=>l[0]&15).map(([a,l])=>{var u;const p=l[1]||a;return o.set(p,a),l[0]&512&&((u=e.$attrsToReflect$)===null||u===void 0||u.push([a,p])),p})]))}}return t},jce=async(t,e,i,r)=>{let n;if(!(e.$flags$&32)&&(e.$flags$|=32,n=t.constructor,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),n.style)){let o=n.style;typeof o!="string"&&(o=o[e.$modeName$=bce(t)]);const a=rq(i,e.$modeName$);if(!K2.has(a)){const l=mf("registerStyles",i.$tagName$);$ce(a,o,!!(i.$flags$&1)),l()}}e.$ancestorComponent$,CD(e,!0)},vz=t=>{},zce=t=>{if(!(pr.$flags$&1)){const e=d0(t),i=e.$cmpMeta$,r=mf("connectedCallback",i.$tagName$);e.$flags$&1?(pq(t,e,i.$listeners$),e!=null&&e.$lazyInstance$?vz(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>vz(e.$lazyInstance$))):(e.$flags$|=1,i.$flags$&12&&Vce(t),i.$members$&&Object.entries(i.$members$).map(([n,[s]])=>{if(s&31&&t.hasOwnProperty(n)){const o=t[n];delete t[n],t[n]=o}}),jce(t,e,i)),r()}},Vce=t=>{const e=t["s-cr"]=aa.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},Uce=async t=>{if(!(pr.$flags$&1)){const e=d0(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},ma=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const r=t.prototype.connectedCallback,n=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){qce(this,i)},connectedCallback(){zce(this),r&&r.call(this)},disconnectedCallback(){Uce(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,Fce(t,i)},MD=(t,e)=>e,pq=(t,e,i,r)=>{i&&i.map(([n,s,o])=>{const a=Gce(t,n),l=Bce(e,o),u=Hce(n);pr.ael(a,s,l,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>pr.rel(a,s,l,u))})},Bce=(t,e)=>i=>{try{Eh.lazyLoad||t.$hostElement$[e](i)}catch(r){z1(r)}},Gce=(t,e)=>e&4?aa:e&8?V1:e&16?aa.body:t,Hce=t=>Jce?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,hq=new WeakMap,d0=t=>hq.get(t),qce=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return pq(t,i,e.$listeners$),hq.set(t,i)},bz=(t,e)=>e in t,z1=(t,e)=>(0,console.error)(t,e),K2=new Map,Wce=[],V1=typeof window<"u"?window:{},aa=V1.document||{head:{}},ya=V1.HTMLElement||class{},pr={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,r)=>t.addEventListener(e,i,r),rel:(t,e,i,r)=>t.removeEventListener(e,i,r),ce:(t,e)=>new CustomEvent(t,e)},Jce=(()=>{let t=!1;try{aa.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),Zce=t=>Promise.resolve(t),Yce=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),vO=[],fq=[],mq=(t,e)=>i=>{t.push(i),gO||(gO=!0,e&&pr.$flags$&4?Kce(bO):pr.raf(bO))},wz=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){z1(i)}t.length=0},bO=()=>{wz(vO),wz(fq),(gO=vO.length>0)&&pr.raf(bO)},Kce=t=>Zce().then(t),Qce=mq(vO,!1),Xce=mq(fq,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */function _z(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(XH)||t.contains(QH)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&r(o),s=o};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function eue(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?_z():document.addEventListener("DOMContentLoaded",()=>_z(),{once:!0}))}const tue=eue;tue();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */function Dc(t,e,i){const r=iue(t);return new r(e,i)}function iue(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(s=>s.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(s=>this.observe(s.target,s.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const Sz=new Set;let lg;const yq={childList:!0};function pk(t){lg||(lg=Dc("mutation",gq)),lg.observe(t.el,yq)}function hk(t){Sz.delete(t.el),gq(lg.takeRecords()),lg.disconnect();for(const[e]of Sz.entries())lg.observe(e,yq)}function gq(t){t.forEach(({target:e})=>{u0(e)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */function rue(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const fk=()=>rue([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var vq=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Q2=vq.join(","),bq=typeof Element>"u",yf=bq?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,X2=!bq&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},eE=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},nue=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},wq=function(e,i,r){if(eE(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(Q2));return i&&yf.call(e,Q2)&&n.unshift(e),n=n.filter(r),n},_q=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!eE(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,r);r.flatten?n.push.apply(n,u):n.push({scopeParent:o,candidates:u})}else{var p=yf.call(o,Q2);p&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!eE(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&m){var y=t(h===!0?o.children:h.children,!0,r);r.flatten?n.push.apply(n,y):n.push({scopeParent:o,candidates:y})}else s.unshift.apply(s,o.children)}}return n},Sq=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Th=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||nue(e))&&!Sq(e)?0:e.tabIndex},sue=function(e,i){var r=Th(e);return r<0&&i&&!Sq(e)?0:r},oue=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},$q=function(e){return e.tagName==="INPUT"},aue=function(e){return $q(e)&&e.type==="hidden"},lue=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},cue=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},uue=function(e){if(!e.name)return!0;var i=e.form||X2(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=cue(n,e.form);return!s||s===e},due=function(e){return $q(e)&&e.type==="radio"},pue=function(e){return due(e)&&!uue(e)},hue=function(e){var i,r=e&&X2(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var u,p,h;r=X2(n),n=(u=r)===null||u===void 0?void 0:u.host,s=!!((p=n)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(n))}}return s},$z=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},fue=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=yf.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(yf.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var l=e.parentElement,u=X2(e);if(l&&!l.shadowRoot&&n(l)===!0)return $z(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(hue(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return $z(e);return!1},mue=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return yf.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},tE=function(e,i){return!(i.disabled||eE(i)||aue(i)||fue(i,e)||lue(i)||mue(i))},wO=function(e,i){return!(pue(i)||Th(i)<0||!tE(e,i))},yue=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},gue=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=sue(a,o),u=o?t(n.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:u})}),r.sort(oue).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},xq=function(e,i){i=i||{};var r;return i.getShadowRoot?r=_q([e],i.includeContainer,{filter:wO.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:yue}):r=wq(e,i.includeContainer,wO.bind(null,i)),gue(r)},vue=function(e,i){i=i||{};var r;return i.getShadowRoot?r=_q([e],i.includeContainer,{filter:tE.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=wq(e,i.includeContainer,tE.bind(null,i)),r},nm=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return yf.call(e,Q2)===!1?!1:wO(i,e)},bue=vq.concat("iframe").join(","),gC=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return yf.call(e,bue)===!1?!1:tE(i,e)};const Eq={getShadowRoot:!0};function cg(t){const e="dir",i=`[${e}]`,r=LD(t,i);return r?r.getAttribute(e):"ltr"}function Tq(t){return t.getRootNode()}function kq(t){return t.host||null}function wue(t,{selector:e,id:i}){function r(n){if(!n)return null;n.assignedSlot&&(n=n.assignedSlot);const s=Tq(n),o=i?"getElementById"in s?s.getElementById(i):null:e?s.querySelector(e):null,a=kq(s);return o||(a?r(a):null)}return r(t)}function LD(t,e){function i(r){return r?r.closest(e)||i(kq(Tq(r))):null}return i(t)}function _ue(t,e){return Iq(t,e)}function Iq(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:r}=t;return Iq(r instanceof ShadowRoot?r.host:r,e)}function Sue(t,e){return!!_ue(e,i=>i===t?!0:void 0)}function $ue(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function Cq(t){if(t)return $ue(t)?t.setFocus():t.focus()}function xue(t){if(t)return xq(t,Eq)[0]??t}function OD(t){var e;(e=xue(t))==null||e.focus()}function Tc(t){return(!!t).toString()}function Eue(t){return wr(t)||kue(t)}function Tue(t){return Iue(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function kue(t){return!!Tue(t)}function Iue(t){return t.target.assignedNodes({flatten:!0})}function wr(t){return!!Ad(t).length}function Ad(t){return t.target.assignedElements({flatten:!0})}function iE(t){return!!(t.isPrimary&&t.button===0)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const tu={main:"main",content:"content",contentBehind:"content--behind",contentNonInteractive:"content--non-interactive",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",container:"container",contentBehindCenterContent:"center-content"},wa={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",panelTop:"panel-top",panelBottom:"panel-bottom",header:"header",footer:"footer",alerts:"alerts",sheets:"sheets",modals:"modals"},Cue=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content,.content--non-interactive{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap}.content{overflow:auto}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(var(--calcite-z-index) - 1);display:initial}.content--non-interactive{pointer-events:none}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-color-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-top]::slotted(calcite-shell-center-row:not([detached])),slot[name=panel-bottom]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-color-border-3)}.center-content{display:flex;flex-direction:column;justify-content:space-between;block-size:100%;inline-size:100%;min-inline-size:0}::slotted(calcite-shell-center-row){flex:none;align-self:stretch}::slotted(calcite-tip-manager){position:absolute;z-index:var(--calcite-z-index-toast);box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}slot[name=center-row]::slotted(calcite-shell-center-row),slot[name=panel-bottom]::slotted(calcite-shell-center-row){margin-block-start:auto}slot[name=panel-top]::slotted(calcite-shell-center-row){margin-block-end:auto}.position-wrapper{position:absolute;pointer-events:none;inset:0}:host([hidden]){display:none}[hidden]{display:none}",Mue=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=e=>{this.hasHeader=!!wr(e)},this.handleFooterSlotChange=e=>{this.hasFooter=!!wr(e)},this.handleAlertsSlotChange=e=>{var i;this.hasAlerts=!!wr(e),(i=Ad(e))==null||i.map(r=>{r.nodeName==="CALCITE-ALERT"&&(r.slottedInShell=!0)})},this.handleSheetsSlotChange=e=>{var i;this.hasSheets=!!wr(e),(i=Ad(e))==null||i.map(r=>{r.nodeName==="CALCITE-SHEET"&&(r.slottedInShell=!0)})},this.handleModalsSlotChange=e=>{var i;this.hasModals=!!wr(e),(i=Ad(e))==null||i.map(r=>{r.nodeName==="CALCITE-MODAL"&&(r.slottedInShell=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1,this.hasSheets=!1,this.panelIsResizing=!1}handleCalciteInternalShellPanelResizeStart(e){this.panelIsResizing=!0,e.stopPropagation()}handleCalciteInternalShellPanelResizeEnd(e){this.panelIsResizing=!1,e.stopPropagation()}connectedCallback(){pk(this)}disconnectedCallback(){hk(this)}renderHeader(){return J("div",{hidden:!this.hasHeader},J("slot",{key:"header",name:wa.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return J("div",{class:tu.footer,hidden:!this.hasFooter,key:"footer"},J("slot",{name:wa.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return J("div",{hidden:!this.hasAlerts},J("slot",{key:"alerts",name:wa.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderSheets(){return J("div",{hidden:!this.hasSheets},J("slot",{key:"sheets",name:wa.sheets,onSlotchange:this.handleSheetsSlotChange}))}renderModals(){return J("div",{hidden:!this.hasModals},J("slot",{key:"modals",name:wa.modals,onSlotchange:this.handleModalsSlotChange}))}renderContent(){const{panelIsResizing:e}=this,i=J("slot",{key:"default-slot"}),r=e?J("div",{class:tu.contentNonInteractive},i):i,n=J("slot",{key:"center-row-slot",name:wa.centerRow}),s=J("slot",{key:"panel-bottom-slot",name:wa.panelBottom}),o=J("slot",{key:"panel-top-slot",name:wa.panelTop}),a="content-container";return this.contentBehind?[J("div",{class:{[tu.content]:!0,[tu.contentBehind]:!0},key:a},r),J("div",{class:tu.contentBehindCenterContent},o,s,n)]:[J("div",{class:tu.content,key:a},o,r,s,n)]}renderMain(){return J("div",{class:tu.main},J("slot",{name:wa.panelStart}),this.renderContent(),J("slot",{name:wa.panelEnd}))}renderPositionedSlots(){return J("div",{class:tu.positionedSlotWrapper},this.renderAlerts(),this.renderModals(),this.renderSheets())}render(){return J(MD,null,this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get style(){return Cue}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32],hasSheets:[32],panelIsResizing:[32]},[[0,"calciteInternalShellPanelResizeStart","handleCalciteInternalShellPanelResizeStart"],[0,"calciteInternalShellPanelResizeEnd","handleCalciteInternalShellPanelResizeEnd"]]]);function Lue(){if(typeof customElements>"u")return;["calcite-shell"].forEach(e=>{switch(e){case"calcite-shell":customElements.get(e)||customElements.define(e,Mue);break}})}Lue();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */function Mq(t){return t==="Enter"||t===" "}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const Oue=new RegExp("\\.(0+)?$"),Aue=new RegExp("0+$");class Et{constructor(e){if(e instanceof Et)return e;const[i,r]=Rue(e).split(".").concat("");this.value=BigInt(i+r.padEnd(Et.DECIMALS,"0").slice(0,Et.DECIMALS))+BigInt(Et.ROUNDED&&r[Et.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(Et.DECIMALS+1,"0"),i=e.slice(0,-Et.DECIMALS),r=e.slice(-Et.DECIMALS).replace(Aue,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),r.length&&(n.push({type:"decimal",value:e.decimal}),r.split("").forEach(s=>n.push({type:"fraction",value:s}))),n}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=r.length?`${e.decimal}${r.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${n}${s}`}add(e){return Et.fromBigInt(this.value+new Et(e).value)}subtract(e){return Et.fromBigInt(this.value-new Et(e).value)}multiply(e){return Et._divRound(this.value*new Et(e).value,Et.SHIFT)}divide(e){return Et._divRound(this.value*Et.SHIFT,new Et(e).value)}}Et.DECIMALS=100;Et.ROUNDED=!0;Et.SHIFT=BigInt("1"+"0".repeat(Et.DECIMALS));Et._divRound=(t,e)=>Et.fromBigInt(t/e+(Et.ROUNDED?t*BigInt(2)/e%BigInt(2):BigInt(0)));Et.fromBigInt=t=>Object.assign(Object.create(Et.prototype),{value:t,isNegative:t<BigInt(0)});const Pue=/^([-0])0+(?=\d)/;function Rue(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",n=+e[1],s=e[0].split("."),o=(r?s[0].substring(1):s[0])||"",a=s[1]||"",l=(h,m)=>{const y=Math.abs(m)-h.length,g=y>0?`${"0".repeat(y)}${h}`:h;return`${g.slice(0,m)}.${g.slice(m)}`},u=(h,m)=>{const y=m>h.length?`${h}${"0".repeat(m-h.length)}`:h;return`${y.slice(0,m)}.${y.slice(m)}`},p=n>0?`${o}${u(a,n)}`:`${l(o,n)}${a}`;return`${r?"-":""}${p.charAt(0)==="."?"0":""}${p.replace(Oue,"").replace(Pue,"")}`}const gf="en",Nue=["ar","bg","bs","ca","cs","da","de","el",gf,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],Due=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",gf,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Intl.NumberFormat().resolvedOptions().numberingSystem;function Fue(t,e="cldr"){const i=e==="cldr"?Due:Nue;return t?i.includes(t)?t:(t=t.toLowerCase(),t==="nb"?"no":e==="t9n"&&t==="pt"?"pt-BR":(t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(r,n,s)=>`${n}-${s.toUpperCase()}`),i.includes(t)||(t=t.split("-")[0])),t==="zh"?"zh-CN":i.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),gf))):gf}const Ww=new Set;function Ff(t){jue(t),Ww.size===0&&(q$==null||q$.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),Ww.add(t)}function jue(t){t.effectiveLocale=zue(t)}function jf(t){Ww.delete(t),Ww.size===0&&q$.disconnect()}const q$=Dc("mutation",t=>{t.forEach(e=>{const i=e.target;Ww.forEach(r=>{if(!Sue(i,r.el))return;const s=LD(r.el,"[lang]");if(!s){r.effectiveLocale=gf;return}const o=s.lang;r.effectiveLocale=s.hasAttribute("lang")&&o===""?gf:o})})});function zue(t){var e;return t.el.lang||((e=LD(t.el,"[lang]"))==null?void 0:e.lang)||document.documentElement.lang||gf}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const xz=(t,e,i)=>Math.max(e,Math.min(t,i));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const lS={};async function Vue(t,e){const i=`${e}_${t}`;return lS[i]||(lS[i]=fetch(iq(`./assets/${e}/t9n/messages_${t}.json`)).then(r=>(r.ok||Ez(),r.json())).catch(()=>Ez())),lS[i]}function Ez(){throw new Error("could not fetch component message bundle")}function AD(t){t.messages={...t.defaultMessages,...t.messageOverrides}}async function zf(t){t.defaultMessages=await Lq(t,t.effectiveLocale),AD(t)}async function Lq(t,e){const{el:i}=t,n=i.tagName.toLowerCase().replace("calcite-","");return Vue(Fue(e,"t9n"),n)}async function Vf(t,e){t.defaultMessages=await Lq(t,e),AD(t)}function Uf(t){t.onMessagesChange=Uue}function Bf(t){t.onMessagesChange=void 0}function Uue(){AD(this)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const gp={container:"container",content:"content",contentHeader:"content__header",contentBody:"content__body",contentFloat:"content--float",contentOverlay:"content--overlay",separator:"separator"},Tz={actionBar:"action-bar",header:"header"},Bue=`:host{pointer-events:none;position:relative;display:flex;flex:0 1 auto;align-items:stretch;z-index:var(--calcite-shell-panel-z-index, var(--calcite-z-index));--calcite-shell-panel-detached-max-height:unset;--calcite-shell-panel-max-height:unset;--calcite-shell-panel-shadow-block-start-internal:0 4px 8px -1px rgba(0, 0, 0, 0.08),
    0 2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-block-end-internal:0 -4px 8px -1px rgba(0, 0, 0, 0.08),
    0 -2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-start-internal:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-end-internal:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04)}.calcite--rtl.content--overlay{--calcite-shell-panel-shadow-inline-start-internal:-4px 0 8px -1px rgba(0, 0, 0, 0.08),
    -2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-shell-panel-shadow-inline-end-internal:4px 0 8px -1px rgba(0, 0, 0, 0.08),
    2px 0 4px -1px rgba(0, 0, 0, 0.04)}:host([layout=vertical]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index) + 1))}:host([layout=vertical][display-mode=overlay]){z-index:var(--calcite-shell-panel-z-index, calc(var(--calcite-z-index-header) + 1))}:host([layout=vertical][width-scale=s]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 12vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 300px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 150px)}:host([layout=vertical][width-scale=m]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 20vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 420px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 240px)}:host([layout=vertical][width-scale=l]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 45vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 680px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 340px)}:host([layout=horizontal][height-scale=s]) .content{--calcite-shell-panel-max-height-internal:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 20vh)
  )}:host([layout=horizontal]) .content{--calcite-shell-panel-min-height-internal:var(--calcite-shell-panel-min-height, 5vh);--calcite-shell-panel-max-height-internal:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 30vh)
  )}:host([layout=horizontal][height-scale=l]) .content{--calcite-shell-panel-max-height-internal:var(
    --calcite-shell-panel-max-height,
    var(--calcite-shell-panel-detached-max-height, 40vh)
  )}.container{pointer-events:none;box-sizing:border-box;display:flex;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-color-text-2)}.container *{box-sizing:border-box}:host([layout=horizontal]) .container{flex-direction:column}:host(:hover) .separator:not(:hover):not(:focus),:host(:focus-within) .separator:not(:hover):not(:focus){opacity:1;background-color:var(--calcite-color-border-3)}.separator{pointer-events:auto;position:absolute;display:flex;background-color:transparent;opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;cursor:col-resize;outline:none}.separator:hover{opacity:1;background-color:var(--calcite-color-border-2)}.separator:focus{background-color:var(--calcite-color-brand);opacity:1}:host([layout=vertical]) .separator{inset-block:0px;block-size:100%;inline-size:0.125rem;cursor:col-resize}:host([layout=horizontal][position=start]) .separator{inset-block-end:0px}:host([layout=horizontal][position=end]) .separator{inset-block-start:0px}:host([layout=horizontal]) .separator{inset-inline-end:0px;block-size:0.125rem;inline-size:100%;cursor:row-resize}:host([layout=vertical][position=start]) .separator{inset-inline-end:-2px}:host([layout=horizontal][position=start]) .separator{inset-block-end:-2px}:host([layout=vertical][position=end]) .separator{inset-inline-start:-2px}:host([layout=horizontal][position=end]) .separator{inset-block-start:-2px}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.content{pointer-events:auto;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), max-inline-size var(--calcite-animation-timing)}:host([layout=vertical]) .content{inline-size:var(--calcite-shell-panel-width-internal);max-inline-size:var(--calcite-shell-panel-max-width-internal);min-inline-size:var(--calcite-shell-panel-min-width-internal)}:host([layout=horizontal]) .content{block-size:var(--calcite-shell-panel-height-internal);max-block-size:var(--calcite-shell-panel-max-height-internal);min-block-size:var(--calcite-shell-panel-min-height-internal)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--overlay{position:absolute;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([layout=vertical]) .content--overlay{inset-block-start:0px;block-size:100%}:host([layout=horizontal]) .content--overlay{inset-inline-start:0px;inline-size:100%}:host([layout=vertical][position=start]) .content--overlay{inset-inline-start:100%;box-shadow:var(--calcite-shell-panel-shadow-inline-start-internal)}:host([layout=vertical][position=end]) .content--overlay{inset-inline-end:100%;box-shadow:var(--calcite-shell-panel-shadow-inline-end-internal)}:host([layout=horizontal][position=start]) .content--overlay{inset-block-start:100%;box-shadow:var(--calcite-shell-panel-shadow-block-start-internal)}:host([layout=horizontal][position=end]) .content--overlay{inset-block-end:100%;box-shadow:var(--calcite-shell-panel-shadow-block-end-internal)}.content--float{margin-inline:0.5rem;margin-block:0.5rem auto;block-size:auto;overflow:hidden;border-radius:0.25rem;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);max-block-size:var(--calcite-shell-panel-max-height-internal, calc(100% - 1rem))}.content--float ::slotted(calcite-panel),.content--float ::slotted(calcite-flow){max-block-size:unset}:host([layout=horizontal]) .content--float{margin-block:0.5rem}:host([position=start]) .content--float ::slotted(calcite-panel),:host([position=start]) .content--float ::slotted(calcite-flow),:host([position=end]) .content--float ::slotted(calcite-panel),:host([position=end]) .content--float ::slotted(calcite-flow){border-style:none}.content[hidden]{display:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3)}:host([position=start]:not([slot=panel-end])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-flow),:host([position=start]:not([slot=panel-end])) .content ::slotted(calcite-panel),:host([position=end][slot=panel-start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end][slot=panel-start]) .content ::slotted(calcite-flow),:host([position=end][slot=panel-start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([position=end]:not([slot=panel-start])) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-flow),:host([position=end]:not([slot=panel-start])) .content ::slotted(calcite-panel),:host([position=start][slot=panel-end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start][slot=panel-end]) .content ::slotted(calcite-flow),:host([position=start][slot=panel-end]) .content ::slotted(calcite-panel){border-inline-end:none}:host([layout=horizontal]) slot[name=action-bar]::slotted(calcite-action-bar){border-inline:0}:host([layout=horizontal][position=start]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=start]) .content ::slotted(calcite-panel){border-inline:0;border-block-start:0}:host([layout=horizontal][position=end]) .content ::slotted(calcite-flow),:host([layout=horizontal][position=end]) .content ::slotted(calcite-panel){border-inline:0;border-block-end:0}:host([hidden]){display:none}[hidden]{display:none}`,Gue=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalShellPanelResizeStart=ra(this,"calciteInternalShellPanelResizeStart",6),this.calciteInternalShellPanelResizeEnd=ra(this,"calciteInternalShellPanelResizeEnd",6),this.initialContentWidth=null,this.initialContentHeight=null,this.initialClientX=null,this.initialClientY=null,this.contentWidthMax=null,this.contentWidthMin=null,this.contentHeightMax=null,this.contentHeightMin=null,this.step=1,this.stepMultiplier=10,this.actionBars=[],this.storeContentEl=e=>{this.contentEl=e},this.getKeyAdjustedSize=e=>{const{key:i}=e,{el:r,step:n,stepMultiplier:s,layout:o,contentWidthMin:a,contentWidthMax:l,initialContentWidth:u,initialContentHeight:p,contentHeightMin:h,contentHeightMax:m,position:y}=this,g=n*s;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(i)>-1&&e.preventDefault();const w=cg(r),b=["ArrowLeft","ArrowRight"],_=["ArrowDown","ArrowUp"],S=w==="rtl"&&b.includes(i)?-1:1;if(o==="horizontal"?y==="end"?i===_[1]||i===b[0]:i===_[0]||i===b[1]:i===_[1]||(y==="end"?i===b[0]:i===b[1])){const I=e.shiftKey?g:n;return o==="horizontal"?p+S*I:u+S*I}if(o==="horizontal"?y==="end"?i===_[0]||i===b[0]:i===_[1]||i===b[1]:i===_[0]||(y==="end"?i===b[1]:i===b[0])){const I=e.shiftKey?g:n;return o==="horizontal"?p-S*I:u-S*I}return i==="Home"&&o==="horizontal"&&typeof h=="number"?h:i==="Home"&&o==="vertical"&&typeof a=="number"?a:i==="End"&&o==="horizontal"&&typeof m=="number"?m:i==="End"&&o==="vertical"&&typeof l=="number"?l:i==="PageDown"?o==="horizontal"?p-g:u-g:i==="PageUp"?o==="horizontal"?p+g:u+g:null},this.initialKeydownWidth=e=>{this.setInitialContentWidth();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentWidth(i)},this.initialKeydownHeight=e=>{this.setInitialContentHeight();const i=this.getKeyAdjustedSize(e);typeof i=="number"&&this.setContentHeight(i)},this.separatorKeyDown=e=>{this.layout==="horizontal"?this.initialKeydownHeight(e):this.initialKeydownWidth(e)},this.separatorPointerMove=e=>{e.preventDefault();const{el:i,layout:r,initialContentWidth:n,initialContentHeight:s,position:o,initialClientX:a,initialClientY:l}=this,u=r==="horizontal"?e.clientY-l:e.clientX-a,p=r==="vertical"&&cg(i)==="rtl"?-1:1,h=o==="end"?-p*u:p*u;r==="horizontal"?this.setContentHeight(s+h):this.setContentWidth(n+h)},this.separatorPointerUp=e=>{iE(e)&&(this.calciteInternalShellPanelResizeEnd.emit(),e.preventDefault(),window.removeEventListener("pointerup",this.separatorPointerUp),window.removeEventListener("pointermove",this.separatorPointerMove))},this.setInitialContentHeight=()=>{var e;this.initialContentHeight=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().height},this.setInitialContentWidth=()=>{var e;this.initialContentWidth=(e=this.contentEl)==null?void 0:e.getBoundingClientRect().width},this.separatorPointerDown=e=>{if(!iE(e))return;this.calciteInternalShellPanelResizeStart.emit(),e.preventDefault();const{separatorEl:i}=this;i&&document.activeElement!==i&&i.focus(),this.layout==="horizontal"?(this.setInitialContentHeight(),this.initialClientY=e.clientY):(this.setInitialContentWidth(),this.initialClientX=e.clientX),window.addEventListener("pointerup",this.separatorPointerUp),window.addEventListener("pointermove",this.separatorPointerMove)},this.connectSeparator=e=>{this.disconnectSeparator(),this.separatorEl=e,e==null||e.addEventListener("pointerdown",this.separatorPointerDown)},this.disconnectSeparator=()=>{var e;(e=this.separatorEl)==null||e.removeEventListener("pointerdown",this.separatorPointerDown)},this.setActionBarsLayout=e=>{e.forEach(i=>i.layout=this.layout)},this.handleActionBarSlotChange=e=>{const i=Ad(e).filter(r=>r==null?void 0:r.matches("calcite-action-bar"));this.actionBars=i,this.setActionBarsLayout(i)},this.handleHeaderSlotChange=e=>{this.hasHeader=wr(e)},this.collapsed=!1,this.detached=!1,this.displayMode="dock",this.detachedHeightScale=void 0,this.heightScale=void 0,this.widthScale="m",this.layout="vertical",this.position="start",this.resizable=!1,this.messages=void 0,this.messageOverrides=void 0,this.contentWidth=null,this.contentHeight=null,this.defaultMessages=void 0,this.effectiveLocale="",this.hasHeader=!1}handleDetached(e){e?this.displayMode="float":this.displayMode==="float"&&(this.displayMode="dock")}handleDisplayMode(e){this.detached=e==="float"}handleDetachedHeightScale(e){this.heightScale=e}handleHeightScale(e){this.detachedHeightScale=e}layoutHandler(){this.setActionBarsLayout(this.actionBars)}onMessagesChange(){}connectedCallback(){pk(this),Ff(this),Uf(this)}async componentWillLoad(){await zf(this)}disconnectedCallback(){hk(this),this.disconnectSeparator(),jf(this),Bf(this)}componentDidLoad(){this.updateAriaValues()}effectiveLocaleChange(){Vf(this,this.effectiveLocale)}renderHeader(){return J("div",{class:gp.contentHeader,hidden:!this.hasHeader,key:"header"},J("slot",{name:Tz.header,onSlotchange:this.handleHeaderSlotChange}))}render(){const{collapsed:e,position:i,initialContentWidth:r,initialContentHeight:n,contentWidth:s,contentWidthMax:o,contentWidthMin:a,contentHeight:l,contentHeightMax:u,contentHeightMin:p,resizable:h,layout:m,displayMode:y}=this,g=cg(this.el),v=y!=="float"&&h,w=v?m==="horizontal"?l?{height:`${l}px`}:null:s?{width:`${s}px`}:null:null,b=!e&&v?J("div",{"aria-label":this.messages.resize,"aria-orientation":m==="horizontal"?"vertical":"horizontal","aria-valuemax":m=="horizontal"?u:o,"aria-valuemin":m=="horizontal"?p:a,"aria-valuenow":m=="horizontal"?l??n:s??r,class:gp.separator,key:"separator",onKeyDown:this.separatorKeyDown,role:"separator",tabIndex:0,"touch-action":"none",ref:this.connectSeparator}):null,_=()=>m==="horizontal"?i==="start"?rm.calciteAnimateInDown:rm.calciteAnimateInUp:g==="ltr"&&i==="end"||g==="rtl"&&i==="start"?rm.calciteAnimateInLeft:rm.calciteAnimateInRight,S=J("div",{class:{[rm.rtl]:g==="rtl",[gp.content]:!0,[gp.contentOverlay]:y==="overlay",[gp.contentFloat]:y==="float",[rm.calciteAnimate]:y==="overlay",[_()]:y==="overlay"},hidden:e,key:"content",style:w,ref:this.storeContentEl},this.renderHeader(),J("div",{class:gp.contentBody},J("slot",null)),b),T=[J("slot",{key:"action-bar",name:Tz.actionBar,onSlotchange:this.handleActionBarSlotChange}),S];return i==="end"&&T.reverse(),J("div",{class:{[gp.container]:!0}},T)}setContentWidth(e){const{contentWidthMax:i,contentWidthMin:r}=this,n=Math.round(e);this.contentWidth=typeof i=="number"&&typeof r=="number"?xz(n,r,i):n}updateAriaValues(){const{contentEl:e}=this,i=e&&getComputedStyle(e);i&&(this.layout==="horizontal"?this.updateHeights(i):this.updateWidths(i),u0(this))}setContentHeight(e){const{contentHeightMax:i,contentHeightMin:r}=this,n=Math.round(e);this.contentHeight=typeof i=="number"&&typeof r=="number"?xz(n,r,i):n}updateWidths(e){const i=parseInt(e.getPropertyValue("max-width"),10),r=parseInt(e.getPropertyValue("min-width"),10),n=parseInt(e.getPropertyValue("width"),10);typeof n=="number"&&!isNaN(n)&&(this.initialContentWidth=n),typeof i=="number"&&!isNaN(i)&&(this.contentWidthMax=i),typeof r=="number"&&!isNaN(r)&&(this.contentWidthMin=r)}updateHeights(e){const i=parseInt(e.getPropertyValue("max-height"),10),r=parseInt(e.getPropertyValue("min-height"),10),n=parseInt(e.getPropertyValue("height"),10);typeof n=="number"&&!isNaN(n)&&(this.initialContentHeight=n),typeof i=="number"&&!isNaN(i)&&(this.contentHeightMax=i),typeof r=="number"&&!isNaN(r)&&(this.contentHeightMin=r)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Bue}},[1,"calcite-shell-panel",{collapsed:[516],detached:[516],displayMode:[513,"display-mode"],detachedHeightScale:[513,"detached-height-scale"],heightScale:[513,"height-scale"],widthScale:[513,"width-scale"],layout:[513],position:[513],resizable:[516],messages:[1040],messageOverrides:[1040],contentWidth:[32],contentHeight:[32],defaultMessages:[32],effectiveLocale:[32],hasHeader:[32]},void 0,{detached:["handleDetached"],displayMode:["handleDisplayMode"],detachedHeightScale:["handleDetachedHeightScale"],heightScale:["handleHeightScale"],layout:["layoutHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function Hue(){if(typeof customElements>"u")return;["calcite-shell-panel"].forEach(e=>{switch(e){case"calcite-shell-panel":customElements.get(e)||customElements.define(e,Gue);break}})}Hue();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */function que(){return navigator.userAgentData}function Wue(){const t=que();return t!=null&&t.brands?t.brands.map(({brand:e,version:i})=>`${e}/${i}`).join(" "):navigator.userAgent}const Gf=/firefox/i.test(Wue()),U1=Gf?new WeakMap:null;function Jue(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function Oq(t){const e=t.target;if(Gf&&!U1.get(e))return;const{disabled:i}=e;i&&t.preventDefault()}const Aq=["mousedown","mouseup","click"];function Pq(t){if(Gf&&!U1.get(t.target))return;const{disabled:e}=t.target;e&&(t.stopImmediatePropagation(),t.preventDefault())}const rE={capture:!0};function Rq(t,e=!1){if(t.disabled){t.el.setAttribute("tabindex","-1"),t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),Nq(t);return}Fq(t),typeof e=="function"?t.el.setAttribute("tabindex",e.call(t)?"0":"-1"):e===!0?t.el.setAttribute("tabindex","0"):e===!1&&t.el.removeAttribute("tabindex"),t.el.removeAttribute("aria-disabled")}function Nq(t){t.el.click=Jue,Zue(Gf?Dq(t):t.el)}function Zue(t){t&&(t.addEventListener("pointerdown",Oq,rE),Aq.forEach(e=>t.addEventListener(e,Pq,rE)))}function Dq(t){return U1.get(t.el)}function Fq(t){delete t.el.click,Yue(Gf?Dq(t):t.el)}function Yue(t){t&&(t.removeEventListener("pointerdown",Oq,rE),Aq.forEach(e=>t.removeEventListener(e,Pq,rE)))}function jq(t){if(!t.disabled||!Gf)return;const e=t.el.parentElement||t.el;U1.set(t.el,e),Nq(t)}function zq(t){Gf&&(U1.delete(t.el),Fq(t))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const Vq=new WeakMap,Uq=new WeakMap;function p0(t){Uq.set(t,new Promise(e=>Vq.set(t,e)))}function h0(t){Vq.get(t)()}function Kue(t){return Uq.get(t)}async function f0(t){return await Kue(t),u0(t),new Promise(e=>requestAnimationFrame(()=>e()))}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */function Bq(t){return t==="l"?"m":"s"}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const Que={icon:"icon",flipRtl:"flip-rtl"},vC={},bC={},Gq={s:16,m:24,l:32};async function Xue({icon:t,scale:e}){const i=Gq[e],r=ede(t),n=r.charAt(r.length-1)==="F",o=`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`;if(vC[o])return vC[o];bC[o]||(bC[o]=fetch(iq(`./assets/icon/${o}.json`)).then(l=>l.json()).catch(()=>(console.error(`"${o}" is not a valid calcite-ui-icon name`),"")));const a=await bC[o];return vC[o]=a,a}function ede(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const n=/[a-z]/i;t=i.map((s,o)=>s.replace(n,function(l,u){return o===0&&u===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const tde=":host{display:inline-flex;color:var(--calcite-ui-icon-color)}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}",ide=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var e;(e=this.intersectionObserver)==null||e.disconnect(),this.intersectionObserver=null}async componentWillLoad(){this.loadIconPathData()}render(){const{el:e,flipRtl:i,pathData:r,scale:n,textLabel:s}=this,o=cg(e),a=Gq[n],l=!!s,u=[].concat(r||"");return J(c0,{"aria-hidden":Tc(!l),"aria-label":l?s:null,role:l?"img":null},J("svg",{"aria-hidden":"true",class:{[Que.flipRtl]:o==="rtl"&&i,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${a} ${a}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},u.map(p=>typeof p=="string"?J("path",{d:p}):J("path",{d:p.d,opacity:"opacity"in p?p.opacity:1}))))}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const n=await Xue({icon:e,scale:i});e===this.icon&&(this.pathData=n)}waitUntilVisible(e){if(this.intersectionObserver=Dc("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return tde}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]},void 0,{icon:["loadIconPathData"],scale:["loadIconPathData"]}]);function Hf(){if(typeof customElements>"u")return;["calcite-icon"].forEach(e=>{switch(e){case"calcite-icon":customElements.get(e)||customElements.define(e,ide);break}})}Hf();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const rde='@charset "UTF-8";@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{position:relative;margin-inline:auto;display:none;align-items:center;justify-content:center;opacity:1;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke:var(--calcite-color-brand);stroke-width:3;fill:none;transform:scale(1, 1);animation:loader-color-shift calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) alternate-reverse infinite linear;padding-block:var(--calcite-loader-padding, 4rem)}:host([scale=s]){--calcite-loader-font-size:var(--calcite-font-size--2);--calcite-loader-size:2rem;--calcite-loader-size-inline:0.75rem}:host([scale=m]){--calcite-loader-font-size:var(--calcite-font-size-0);--calcite-loader-size:4rem;--calcite-loader-size-inline:1rem}:host([scale=l]){--calcite-loader-font-size:var(--calcite-font-size-2);--calcite-loader-size:6rem;--calcite-loader-size-inline:1.5rem}:host([no-padding]){padding-block:0px}:host{display:flex}.loader__text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);margin-block-start:calc(var(--calcite-loader-size) + 1.5rem)}.loader__percentage{position:absolute;display:block;text-align:center;color:var(--calcite-color-text-1);font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);line-height:0.25;transform:scale(1, 1)}.loader__svgs{position:absolute;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);animation-iteration-count:infinite;animation-timing-function:linear;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.66 / var(--calcite-internal-duration-factor));animation-name:loader-clockwise}.loader__svg{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);animation-iteration-count:infinite;animation-timing-function:linear}@supports (display: grid){.loader__svg--1{animation-name:loader-offset-1}.loader__svg--2{animation-name:loader-offset-2}.loader__svg--3{animation-name:loader-offset-3}}:host([type=determinate]){animation:none;stroke:var(--calcite-color-border-3)}:host([type=determinate]) .loader__svgs{animation:none}:host([type=determinate]) .loader__svg--3{animation:none;stroke:var(--calcite-color-brand);stroke-dasharray:150.79632;transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([inline]){position:relative;margin:0px;animation:none;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size-inline);min-block-size:var(--calcite-loader-size-inline);inline-size:var(--calcite-loader-size-inline);margin-inline-end:calc(var(--calcite-loader-size-inline) * 0.5);vertical-align:calc(var(--calcite-loader-size-inline) * -1 * 0.2)}:host([inline]) .loader__svgs{inset-block-start:0px;margin:0px;inset-inline-start:0;inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([inline]) .loader__svg{inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([complete]){opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1000ms, transform var(--calcite-internal-animation-timing-medium) linear 1000ms}:host([complete]) .loader__svgs{opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms, transform calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms}:host([complete]) .loader__percentage{color:var(--calcite-color-brand);transform:scale(1.05, 1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear, transform var(--calcite-internal-animation-timing-medium) linear}.loader__svg--1{stroke-dasharray:27.9252444444 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 4.8 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-1{0%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-83.7757333333}100%{stroke-dasharray:27.9252444444 251.3272;stroke-dashoffset:-279.2524444444}}.loader__svg--2{stroke-dasharray:55.8504888889 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 6.4 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-2{0%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-97.7383555556}100%{stroke-dasharray:55.8504888889 223.4019555556;stroke-dashoffset:-279.2524444444}}.loader__svg--3{stroke-dasharray:13.9626222222 139.6262222222;animation-duration:calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 7.734 / var(--calcite-internal-duration-factor))}@keyframes loader-offset-3{0%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222 139.6262222222;stroke-dashoffset:-76.7944222222}100%{stroke-dasharray:13.9626222222 265.2898222222;stroke-dashoffset:-279.2524444444}}@keyframes loader-color-shift{0%{stroke:var(--calcite-color-brand)}33%{stroke:var(--calcite-color-brand-press)}66%{stroke:var(--calcite-color-brand-hover)}100%{stroke:var(--calcite-color-brand)}}@keyframes loader-clockwise{100%{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}',nde=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inline=!1,this.label=void 0,this.scale="m",this.type=void 0,this.value=0,this.text=""}render(){const{el:e,inline:i,label:r,scale:n,text:s,type:o,value:a}=this,l=e.id||fk(),u=.45,p=i?this.getInlineSize(n):this.getSize(n),h=p*u,m=`0 0 ${p} ${p}`,y=o==="determinate",g=2*h*Math.PI,v=a/100*g,w=g-v,b=Math.floor(a),_={"aria-valuenow":b,"aria-valuemin":0,"aria-valuemax":100,complete:b===100},S={r:h,cx:p/2,cy:p/2},$={"stroke-dasharray":`${v} ${w}`};return J(c0,{"aria-label":r,id:l,role:"progressbar",...y?_:{}},J("div",{class:"loader__svgs"},J("svg",{"aria-hidden":"true",class:"loader__svg loader__svg--1",viewBox:m},J("circle",{...S})),J("svg",{"aria-hidden":"true",class:"loader__svg loader__svg--2",viewBox:m},J("circle",{...S})),J("svg",{"aria-hidden":"true",class:"loader__svg loader__svg--3",viewBox:m,...y?{style:$}:{}},J("circle",{...S}))),s&&J("div",{class:"loader__text"},s),y&&J("div",{class:"loader__percentage"},a))}getSize(e){return{s:32,m:56,l:80}[e]}getInlineSize(e){return{s:12,m:16,l:20}[e]}get el(){return this}static get style(){return rde}},[1,"calcite-loader",{inline:[516],label:[1],scale:[513],type:[513],value:[2],text:[1]}]);function np(){if(typeof customElements>"u")return;["calcite-loader"].forEach(e=>{switch(e){case"calcite-loader":customElements.get(e)||customElements.define(e,nde);break}})}np();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const bo={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},sde={tooltip:"tooltip"},ode=`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;background-color:transparent;--calcite-action-indicator-color:var(--calcite-color-brand)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.button{position:relative;margin:0px;display:flex;inline-size:auto;cursor:pointer;align-items:center;justify-content:flex-start;border-style:none;background-color:var(--calcite-color-foreground-1);fill:var(--calcite-color-text-3);font-family:var(--calcite-sans-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-3);outline-color:transparent;text-align:unset;flex:1 0 auto}.button:hover{background-color:var(--calcite-color-foreground-2);fill:var(--calcite-color-text-1);color:var(--calcite-color-text-1)}.button:focus{background-color:var(--calcite-color-foreground-2);fill:var(--calcite-color-text-1);color:var(--calcite-color-text-1);outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}.button:active{background-color:var(--calcite-color-foreground-3)}.button .icon-container{pointer-events:none;margin:0px;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1rem}.button .text-container{margin:0px;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-property:margin;transition-property:inline-size}.button .text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([data-active]) .button{outline:2px solid var(--calcite-color-brand);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-offset-invert-focus),
                1
              )
            )
          )}:host([scale=s]) .button{padding-inline:0.5rem;padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:0.5rem}:host([scale=m]) .button{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:0.75rem}:host([scale=l]) .button{padding:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}:host([active]) .button,:host([active]) .button:hover,:host([active]) .button:focus,:host([active][loading]) .button{background-color:var(--calcite-color-foreground-3);fill:var(--calcite-color-text-1);color:var(--calcite-color-text-1)}:host([active]) .button:active{background-color:var(--calcite-color-foreground-1)}:host([appearance=transparent]) .button{background-color:transparent}:host([appearance=transparent][active]) .button,:host([appearance=transparent]) .button:hover,:host([appearance=transparent]) .button:focus{background-color:var(--calcite-button-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-button-transparent-press)}:host([appearance=transparent][disabled]) .button{background-color:transparent}:host([loading][appearance=solid]) .button,:host([loading][appearance=solid]) .button:hover,:host([loading][appearance=solid]) .button:focus{background-color:var(--calcite-color-foreground-1)}:host([loading][appearance=solid]) .button .text-container,:host([loading][appearance=solid]) .button:hover .text-container,:host([loading][appearance=solid]) .button:focus .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{color:var(--calcite-color-text-3);margin-inline-end:0px}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;background-color:var(--calcite-color-foreground-1);opacity:var(--calcite-opacity-disabled)}:host([disabled][active]) .button,:host([disabled][active]) .button:hover,:host([disabled][active]) .button:focus{background-color:var(--calcite-color-foreground-3);opacity:var(--calcite-opacity-disabled)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.indicator-with-icon{position:relative}.indicator-with-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color)}.indicator-without-icon{margin-inline:0.25rem;inline-size:1rem;position:relative}.indicator-without-icon::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;inset-block-end:-0.275rem;inset-inline-end:-0.275rem;background-color:var(--calcite-action-indicator-color)}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,ade=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=Dc("mutation",()=>u0(this)),this.guid=`calcite-action-${fk()}`,this.indicatorId=`${this.guid}-indicator`,this.buttonId=`${this.guid}-button`,this.handleTooltipSlotChange=e=>{const r=e.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"))[0];r&&(r.referenceElement=this.buttonEl)},this.active=!1,this.alignment=void 0,this.appearance="solid",this.compact=!1,this.disabled=!1,this.icon=void 0,this.iconFlipRtl=!1,this.indicator=!1,this.label=void 0,this.loading=!1,this.scale="m",this.text=void 0,this.textEnabled=!1,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0}onMessagesChange(){}effectiveLocaleChange(){Vf(this,this.effectiveLocale)}connectedCallback(){var e;jq(this),Ff(this),Uf(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0,subtree:!0})}async componentWillLoad(){p0(this),await zf(this)}componentDidLoad(){h0(this)}disconnectedCallback(){var e;zq(this),jf(this),Bf(this),(e=this.mutationObserver)==null||e.disconnect()}componentDidRender(){Rq(this)}async setFocus(){var e;await f0(this),(e=this.buttonEl)==null||e.focus()}renderTextContainer(){const{text:e,textEnabled:i}=this,r={[bo.textContainer]:!0,[bo.textContainerVisible]:i};return e?J("div",{class:r,key:"text-container"},e):null}renderIndicatorText(){const{indicator:e,messages:i,indicatorId:r,buttonId:n}=this;return J("div",{"aria-labelledby":n,"aria-live":"polite",class:bo.indicatorText,id:r,role:"region"},e?i.indicator:null)}renderIconContainer(){var y;const{loading:e,icon:i,scale:r,el:n,iconFlipRtl:s,indicator:o}=this,a=r==="l"?"l":"m",l=e?J("calcite-loader",{inline:!0,label:this.messages.loading,scale:a}):null,u=i?J("calcite-icon",{class:{[bo.indicatorWithIcon]:o},flipRtl:s,icon:i,scale:Bq(this.scale)}):null,p=l||u,h=p||((y=n.children)==null?void 0:y.length),m=J("div",{class:{[bo.slotContainer]:!0,[bo.slotContainerHidden]:e}},J("slot",null));return h?J("div",{"aria-hidden":"true",class:bo.iconContainer,key:"icon-container"},p,m):null}render(){const{active:e,compact:i,disabled:r,icon:n,loading:s,textEnabled:o,label:a,text:l,indicator:u,indicatorId:p,buttonId:h,messages:m}=this,y=`${a||l}${u?` (${m.indicator})`:""}`,g={[bo.button]:!0,[bo.buttonTextVisible]:o,[bo.buttonCompact]:i};return J(c0,null,J("button",{"aria-busy":Tc(s),"aria-controls":u?p:null,"aria-disabled":Tc(r),"aria-label":y,"aria-pressed":Tc(e),class:g,disabled:r,id:h,ref:v=>this.buttonEl=v},this.renderIconContainer(),this.renderTextContainer(),!n&&u&&J("div",{class:bo.indicatorWithoutIcon,key:"indicator-no-icon"})),J("slot",{name:sde.tooltip,onSlotchange:this.handleTooltipSlotChange}),this.renderIndicatorText())}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return ode}},[1,"calcite-action",{active:[516],alignment:[513],appearance:[513],compact:[516],disabled:[516],icon:[1],iconFlipRtl:[516,"icon-flip-rtl"],indicator:[516],label:[1],loading:[516],scale:[513],text:[1],textEnabled:[516,"text-enabled"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function m0(){if(typeof customElements>"u")return;["calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-action":customElements.get(e)||customElements.define(e,ade);break;case"calcite-icon":customElements.get(e)||Hf();break;case"calcite-loader":customElements.get(e)||np();break}})}m0();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */function kz(t,e){return(t+e)%e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */var lde=typeof global=="object"&&global&&global.Object===Object&&global,cde=typeof self=="object"&&self&&self.Object===Object&&self,Hq=lde||cde||Function("return this")(),nE=Hq.Symbol,qq=Object.prototype,ude=qq.hasOwnProperty,dde=qq.toString,Z0=nE?nE.toStringTag:void 0;function pde(t){var e=ude.call(t,Z0),i=t[Z0];try{t[Z0]=void 0;var r=!0}catch{}var n=dde.call(t);return r&&(e?t[Z0]=i:delete t[Z0]),n}var hde=Object.prototype,fde=hde.toString;function mde(t){return fde.call(t)}var yde="[object Null]",gde="[object Undefined]",Iz=nE?nE.toStringTag:void 0;function vde(t){return t==null?t===void 0?gde:yde:Iz&&Iz in Object(t)?pde(t):mde(t)}function bde(t){return t!=null&&typeof t=="object"}var wde="[object Symbol]";function _de(t){return typeof t=="symbol"||bde(t)&&vde(t)==wde}var Sde=/\s/;function $de(t){for(var e=t.length;e--&&Sde.test(t.charAt(e)););return e}var xde=/^\s+/;function Ede(t){return t&&t.slice(0,$de(t)+1).replace(xde,"")}function _O(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Cz=NaN,Tde=/^[-+]0x[0-9a-f]+$/i,kde=/^0b[01]+$/i,Ide=/^0o[0-7]+$/i,Cde=parseInt;function Mz(t){if(typeof t=="number")return t;if(_de(t))return Cz;if(_O(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=_O(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ede(t);var i=kde.test(t);return i||Ide.test(t)?Cde(t.slice(2),i?2:8):Tde.test(t)?Cz:+t}var wC=function(){return Hq.Date.now()},Mde="Expected a function",Lde=Math.max,Ode=Math.min;function Wq(t,e,i){var r,n,s,o,a,l,u=0,p=!1,h=!1,m=!0;if(typeof t!="function")throw new TypeError(Mde);e=Mz(e)||0,_O(i)&&(p=!!i.leading,h="maxWait"in i,s=h?Lde(Mz(i.maxWait)||0,e):s,m="trailing"in i?!!i.trailing:m);function y(I){var C=r,M=n;return r=n=void 0,u=I,o=t.apply(M,C),o}function g(I){return u=I,a=setTimeout(b,e),p?y(I):o}function v(I){var C=I-l,M=I-u,R=e-C;return h?Ode(R,s-M):R}function w(I){var C=I-l,M=I-u;return l===void 0||C>=e||C<0||h&&M>=s}function b(){var I=wC();if(w(I))return _(I);a=setTimeout(b,v(I))}function _(I){return a=void 0,m&&r?y(I):(r=n=void 0,o)}function S(){a!==void 0&&clearTimeout(a),u=0,r=l=n=a=void 0}function $(){return a===void 0?o:_(wC())}function T(){var I=wC(),C=w(I);if(r=arguments,n=this,l=I,C){if(a===void 0)return g(l);if(h)return clearTimeout(a),a=setTimeout(b,e),y(l)}return a===void 0&&(a=setTimeout(b,e)),o}return T.cancel=S,T.flush=$,T}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const Jq=["top","right","bottom","left"],Lz=["start","end"],Oz=Jq.reduce((t,e)=>t.concat(e,e+"-"+Lz[0],e+"-"+Lz[1]),[]),Pg=Math.min,Xh=Math.max,sE=Math.round,cS=Math.floor,Hd=t=>({x:t,y:t}),Ade={left:"right",right:"left",bottom:"top",top:"bottom"},Pde={start:"end",end:"start"};function SO(t,e,i){return Xh(t,Pg(e,i))}function qf(t,e){return typeof t=="function"?t(e):t}function Fc(t){return t.split("-")[0]}function hl(t){return t.split("-")[1]}function Zq(t){return t==="x"?"y":"x"}function PD(t){return t==="y"?"height":"width"}function mk(t){return["top","bottom"].includes(Fc(t))?"y":"x"}function RD(t){return Zq(mk(t))}function Yq(t,e,i){i===void 0&&(i=!1);const r=hl(t),n=RD(t),s=PD(n);let o=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=aE(o)),[o,aE(o)]}function Rde(t){const e=aE(t);return[oE(t),e,oE(e)]}function oE(t){return t.replace(/start|end/g,e=>Pde[e])}function Nde(t,e,i){const r=["left","right"],n=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return i?e?n:r:e?r:n;case"left":case"right":return e?s:o;default:return[]}}function Dde(t,e,i,r){const n=hl(t);let s=Nde(Fc(t),i==="start",r);return n&&(s=s.map(o=>o+"-"+n),e&&(s=s.concat(s.map(oE)))),s}function aE(t){return t.replace(/left|right|bottom|top/g,e=>Ade[e])}function Fde(t){return{top:0,right:0,bottom:0,left:0,...t}}function Kq(t){return typeof t!="number"?Fde(t):{top:t,right:t,bottom:t,left:t}}function lE(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function Az(t,e,i){let{reference:r,floating:n}=t;const s=mk(e),o=RD(e),a=PD(o),l=Fc(e),u=s==="y",p=r.x+r.width/2-n.width/2,h=r.y+r.height/2-n.height/2,m=r[a]/2-n[a]/2;let y;switch(l){case"top":y={x:p,y:r.y-n.height};break;case"bottom":y={x:p,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:h};break;case"left":y={x:r.x-n.width,y:h};break;default:y={x:r.x,y:r.y}}switch(hl(e)){case"start":y[o]-=m*(i&&u?-1:1);break;case"end":y[o]+=m*(i&&u?-1:1);break}return y}const jde=async(t,e,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:o}=i,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:n}),{x:p,y:h}=Az(u,r,l),m=r,y={},g=0;for(let v=0;v<a.length;v++){const{name:w,fn:b}=a[v],{x:_,y:S,data:$,reset:T}=await b({x:p,y:h,initialPlacement:r,placement:m,strategy:n,middlewareData:y,rects:u,platform:o,elements:{reference:t,floating:e}});if(p=_??p,h=S??h,y={...y,[w]:{...y[w],...$}},T&&g<=50){g++,typeof T=="object"&&(T.placement&&(m=T.placement),T.rects&&(u=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:n}):T.rects),{x:p,y:h}=Az(u,m,l)),v=-1;continue}}return{x:p,y:h,placement:m,strategy:n,middlewareData:y}};async function Jw(t,e){var i;e===void 0&&(e={});const{x:r,y:n,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:m=!1,padding:y=0}=qf(e,t),g=Kq(y),w=a[m?h==="floating"?"reference":"floating":h],b=lE(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(w)))==null||i?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:p,strategy:l})),_=h==="floating"?{...o.floating,x:r,y:n}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),$=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},T=lE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:S,strategy:l}):_);return{top:(b.top-T.top+g.top)/$.y,bottom:(T.bottom-b.bottom+g.bottom)/$.y,left:(b.left-T.left+g.left)/$.x,right:(T.right-b.right+g.right)/$.x}}const zde=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:r,placement:n,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:p=0}=qf(t,e)||{};if(u==null)return{};const h=Kq(p),m={x:i,y:r},y=RD(n),g=PD(y),v=await o.getDimensions(u),w=y==="y",b=w?"top":"left",_=w?"bottom":"right",S=w?"clientHeight":"clientWidth",$=s.reference[g]+s.reference[y]-m[y]-s.floating[g],T=m[y]-s.reference[y],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=I?I[S]:0;(!C||!await(o.isElement==null?void 0:o.isElement(I)))&&(C=a.floating[S]||s.floating[g]);const M=$/2-T/2,R=C/2-v[g]/2-1,O=Pg(h[b],R),F=Pg(h[_],R),A=O,P=C-v[g]-F,V=C/2-v[g]/2+M,te=SO(A,V,P),re=!l.arrow&&hl(n)!=null&&V!=te&&s.reference[g]/2-(V<A?O:F)-v[g]/2<0,Q=re?V<A?V-A:V-P:0;return{[y]:m[y]+Q,data:{[y]:te,centerOffset:V-te-Q,...re&&{alignmentOffset:Q}},reset:re}}});function Vde(t,e,i){return(t?[...i.filter(n=>hl(n)===t),...i.filter(n=>hl(n)!==t)]:i.filter(n=>Fc(n)===n)).filter(n=>t?hl(n)===t||(e?oE(n)!==n:!1):!0)}const Ude=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,r,n;const{rects:s,middlewareData:o,placement:a,platform:l,elements:u}=e,{crossAxis:p=!1,alignment:h,allowedPlacements:m=Oz,autoAlignment:y=!0,...g}=qf(t,e),v=h!==void 0||m===Oz?Vde(h||null,y,m):m,w=await Jw(e,g),b=((i=o.autoPlacement)==null?void 0:i.index)||0,_=v[b];if(_==null)return{};const S=Yq(_,s,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(a!==_)return{reset:{placement:v[0]}};const $=[w[Fc(_)],w[S[0]],w[S[1]]],T=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:_,overflows:$}],I=v[b+1];if(I)return{data:{index:b+1,overflows:T},reset:{placement:I}};const C=T.map(O=>{const F=hl(O.placement);return[O.placement,F&&p?O.overflows.slice(0,2).reduce((A,P)=>A+P,0):O.overflows[0],O.overflows]}).sort((O,F)=>O[1]-F[1]),R=((n=C.filter(O=>O[2].slice(0,hl(O[0])?2:3).every(F=>F<=0))[0])==null?void 0:n[0])||C[0][0];return R!==a?{data:{index:b+1,overflows:T},reset:{placement:R}}:{}}}},Pz=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,r;const{placement:n,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...w}=qf(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const b=Fc(n),_=Fc(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(u.floating)),$=m||(_||!v?[aE(a)]:Rde(a));!m&&g!=="none"&&$.push(...Dde(a,v,g,S));const T=[a,...$],I=await Jw(e,w),C=[];let M=((r=s.flip)==null?void 0:r.overflows)||[];if(p&&C.push(I[b]),h){const A=Yq(n,o,S);C.push(I[A[0]],I[A[1]])}if(M=[...M,{placement:n,overflows:C}],!C.every(A=>A<=0)){var R,O;const A=(((R=s.flip)==null?void 0:R.index)||0)+1,P=T[A];if(P)return{data:{index:A,overflows:M},reset:{placement:P}};let V=(O=M.filter(te=>te.overflows[0]<=0).sort((te,re)=>te.overflows[1]-re.overflows[1])[0])==null?void 0:O.placement;if(!V)switch(y){case"bestFit":{var F;const te=(F=M.map(re=>[re.placement,re.overflows.filter(Q=>Q>0).reduce((Q,H)=>Q+H,0)]).sort((re,Q)=>re[1]-Q[1])[0])==null?void 0:F[0];te&&(V=te);break}case"initialPlacement":V=a;break}if(n!==V)return{reset:{placement:V}}}return{}}}};function Rz(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Nz(t){return Jq.some(e=>t[e]>=0)}const Bde=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:r="referenceHidden",...n}=qf(t,e);switch(r){case"referenceHidden":{const s=await Jw(e,{...n,elementContext:"reference"}),o=Rz(s,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Nz(o)}}}case"escaped":{const s=await Jw(e,{...n,altBoundary:!0}),o=Rz(s,i.floating);return{data:{escapedOffsets:o,escaped:Nz(o)}}}default:return{}}}}};async function Gde(t,e){const{placement:i,platform:r,elements:n}=t,s=await(r.isRTL==null?void 0:r.isRTL(n.floating)),o=Fc(i),a=hl(i),l=mk(i)==="y",u=["left","top"].includes(o)?-1:1,p=s&&l?-1:1,h=qf(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof g=="number"&&(y=a==="end"?g*-1:g),l?{x:y*p,y:m*u}:{x:m*u,y:y*p}}const Hde=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,r;const{x:n,y:s,placement:o,middlewareData:a}=e,l=await Gde(e,t);return o===((i=a.offset)==null?void 0:i.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:n+l.x,y:s+l.y,data:{...l,placement:o}}}}},qde=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:n}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:b,y:_}=w;return{x:b,y:_}}},...l}=qf(t,e),u={x:i,y:r},p=await Jw(e,l),h=mk(Fc(n)),m=Zq(h);let y=u[m],g=u[h];if(s){const w=m==="y"?"top":"left",b=m==="y"?"bottom":"right",_=y+p[w],S=y-p[b];y=SO(_,y,S)}if(o){const w=h==="y"?"top":"left",b=h==="y"?"bottom":"right",_=g+p[w],S=g-p[b];g=SO(_,g,S)}const v=a.fn({...e,[m]:y,[h]:g});return{...v,data:{x:v.x-i,y:v.y-r}}}}};function qd(t){return Qq(t)?(t.nodeName||"").toLowerCase():"#document"}function ms(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Jc(t){var e;return(e=(Qq(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Qq(t){return t instanceof Node||t instanceof ms(t).Node}function jc(t){return t instanceof Element||t instanceof ms(t).Element}function vl(t){return t instanceof HTMLElement||t instanceof ms(t).HTMLElement}function Dz(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ms(t).ShadowRoot}function B1(t){const{overflow:e,overflowX:i,overflowY:r,display:n}=uo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!["inline","contents"].includes(n)}function Wde(t){return["table","td","th"].includes(qd(t))}function ND(t){const e=DD(),i=uo(t);return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(i.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(i.contain||"").includes(r))}function Jde(t){let e=Rg(t);for(;vl(e)&&!yk(e);){if(ND(e))return e;e=Rg(e)}return null}function DD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yk(t){return["html","body","#document"].includes(qd(t))}function uo(t){return ms(t).getComputedStyle(t)}function gk(t){return jc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Rg(t){if(qd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Dz(t)&&t.host||Jc(t);return Dz(e)?e.host:e}function Xq(t){const e=Rg(t);return yk(e)?t.ownerDocument?t.ownerDocument.body:t.body:vl(e)&&B1(e)?e:Xq(e)}function Zw(t,e,i){var r;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=Xq(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),o=ms(n);return s?e.concat(o,o.visualViewport||[],B1(n)?n:[],o.frameElement&&i?Zw(o.frameElement):[]):e.concat(n,Zw(n,[],i))}function eW(t){const e=uo(t);let i=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=vl(t),s=n?t.offsetWidth:i,o=n?t.offsetHeight:r,a=sE(i)!==s||sE(r)!==o;return a&&(i=s,r=o),{width:i,height:r,$:a}}function FD(t){return jc(t)?t:t.contextElement}function ug(t){const e=FD(t);if(!vl(e))return Hd(1);const i=e.getBoundingClientRect(),{width:r,height:n,$:s}=eW(e);let o=(s?sE(i.width):i.width)/r,a=(s?sE(i.height):i.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Zde=Hd(0);function tW(t){const e=ms(t);return!DD()||!e.visualViewport?Zde:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Yde(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==ms(t)?!1:e}function vf(t,e,i,r){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),s=FD(t);let o=Hd(1);e&&(r?jc(r)&&(o=ug(r)):o=ug(t));const a=Yde(s,i,r)?tW(s):Hd(0);let l=(n.left+a.x)/o.x,u=(n.top+a.y)/o.y,p=n.width/o.x,h=n.height/o.y;if(s){const m=ms(s),y=r&&jc(r)?ms(r):r;let g=m.frameElement;for(;g&&r&&y!==m;){const v=ug(g),w=g.getBoundingClientRect(),b=uo(g),_=w.left+(g.clientLeft+parseFloat(b.paddingLeft))*v.x,S=w.top+(g.clientTop+parseFloat(b.paddingTop))*v.y;l*=v.x,u*=v.y,p*=v.x,h*=v.y,l+=_,u+=S,g=ms(g).frameElement}}return lE({width:p,height:h,x:l,y:u})}function Kde(t){let{rect:e,offsetParent:i,strategy:r}=t;const n=vl(i),s=Jc(i);if(i===s)return e;let o={scrollLeft:0,scrollTop:0},a=Hd(1);const l=Hd(0);if((n||!n&&r!=="fixed")&&((qd(i)!=="body"||B1(s))&&(o=gk(i)),vl(i))){const u=vf(i);a=ug(i),l.x=u.x+i.clientLeft,l.y=u.y+i.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function Qde(t){return Array.from(t.getClientRects())}function iW(t){return vf(Jc(t)).left+gk(t).scrollLeft}function Xde(t){const e=Jc(t),i=gk(t),r=t.ownerDocument.body,n=Xh(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Xh(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-i.scrollLeft+iW(t);const a=-i.scrollTop;return uo(r).direction==="rtl"&&(o+=Xh(e.clientWidth,r.clientWidth)-n),{width:n,height:s,x:o,y:a}}function epe(t,e){const i=ms(t),r=Jc(t),n=i.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;const u=DD();(!u||u&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:s,height:o,x:a,y:l}}function tpe(t,e){const i=vf(t,!0,e==="fixed"),r=i.top+t.clientTop,n=i.left+t.clientLeft,s=vl(t)?ug(t):Hd(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=n*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function Fz(t,e,i){let r;if(e==="viewport")r=epe(t,i);else if(e==="document")r=Xde(Jc(t));else if(jc(e))r=tpe(e,i);else{const n=tW(t);r={...e,x:e.x-n.x,y:e.y-n.y}}return lE(r)}function rW(t,e){const i=Rg(t);return i===e||!jc(i)||yk(i)?!1:uo(i).position==="fixed"||rW(i,e)}function ipe(t,e){const i=e.get(t);if(i)return i;let r=Zw(t,[],!1).filter(a=>jc(a)&&qd(a)!=="body"),n=null;const s=uo(t).position==="fixed";let o=s?Rg(t):t;for(;jc(o)&&!yk(o);){const a=uo(o),l=ND(o);!l&&a.position==="fixed"&&(n=null),(s?!l&&!n:!l&&a.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||B1(o)&&!l&&rW(t,o))?r=r.filter(p=>p!==o):n=a,o=Rg(o)}return e.set(t,r),r}function rpe(t){let{element:e,boundary:i,rootBoundary:r,strategy:n}=t;const o=[...i==="clippingAncestors"?ipe(e,this._c):[].concat(i),r],a=o[0],l=o.reduce((u,p)=>{const h=Fz(e,p,n);return u.top=Xh(h.top,u.top),u.right=Pg(h.right,u.right),u.bottom=Pg(h.bottom,u.bottom),u.left=Xh(h.left,u.left),u},Fz(e,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function npe(t){return eW(t)}function spe(t,e,i){const r=vl(e),n=Jc(e),s=i==="fixed",o=vf(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Hd(0);if(r||!r&&!s)if((qd(e)!=="body"||B1(n))&&(a=gk(e)),r){const u=vf(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else n&&(l.x=iW(n));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function jz(t,e){return!vl(t)||uo(t).position==="fixed"?null:e?e(t):t.offsetParent}function nW(t,e){const i=ms(t);if(!vl(t))return i;let r=jz(t,e);for(;r&&Wde(r)&&uo(r).position==="static";)r=jz(r,e);return r&&(qd(r)==="html"||qd(r)==="body"&&uo(r).position==="static"&&!ND(r))?i:r||Jde(t)||i}const ope=async function(t){let{reference:e,floating:i,strategy:r}=t;const n=this.getOffsetParent||nW,s=this.getDimensions;return{reference:spe(e,await n(i),r),floating:{x:0,y:0,...await s(i)}}};function ape(t){return uo(t).direction==="rtl"}const $O={convertOffsetParentRelativeRectToViewportRelativeRect:Kde,getDocumentElement:Jc,getClippingRect:rpe,getOffsetParent:nW,getElementRects:ope,getClientRects:Qde,getDimensions:npe,getScale:ug,isElement:jc,isRTL:ape};function lpe(t,e){let i=null,r;const n=Jc(t);function s(){clearTimeout(r),i&&i.disconnect(),i=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:p,width:h,height:m}=t.getBoundingClientRect();if(a||e(),!h||!m)return;const y=cS(p),g=cS(n.clientWidth-(u+h)),v=cS(n.clientHeight-(p+m)),w=cS(u),_={rootMargin:-y+"px "+-g+"px "+-v+"px "+-w+"px",threshold:Xh(0,Pg(1,l))||1};let S=!0;function $(T){const I=T[0].intersectionRatio;if(I!==l){if(!S)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},100)}S=!1}try{i=new IntersectionObserver($,{..._,root:n.ownerDocument})}catch{i=new IntersectionObserver($,_)}i.observe(t)}return o(!0),s}function cpe(t,e,i,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=FD(t),p=n||s?[...u?Zw(u):[],...Zw(e)]:[];p.forEach(b=>{n&&b.addEventListener("scroll",i,{passive:!0}),s&&b.addEventListener("resize",i)});const h=u&&a?lpe(u,i):null;let m=-1,y=null;o&&(y=new ResizeObserver(b=>{let[_]=b;_&&_.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{y&&y.observe(e)})),i()}),u&&!l&&y.observe(u),y.observe(e));let g,v=l?vf(t):null;l&&w();function w(){const b=vf(t);v&&(b.x!==v.x||b.y!==v.y||b.width!==v.width||b.height!==v.height)&&i(),v=b,g=requestAnimationFrame(w)}return i(),()=>{p.forEach(b=>{n&&b.removeEventListener("scroll",i),s&&b.removeEventListener("resize",i)}),h&&h(),y&&y.disconnect(),y=null,l&&cancelAnimationFrame(g)}}const upe=(t,e,i)=>{const r=new Map,n={platform:$O,...i},s={...n.platform,_c:r};return jde(t,e,{...n,platform:s})};function dpe(t){return ppe(t)}function _C(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function ppe(t){for(let e=t;e;e=_C(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=_C(t);e;e=_C(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||i.filter!=="none"||e.tagName==="BODY"))return e}return null}(function(){{const e=$O.getOffsetParent;$O.getOffsetParent=i=>e(i,dpe)}})();function zz(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const sW=async(t,{referenceEl:e,floatingEl:i,overlayPositioning:r="absolute",placement:n,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:u,type:p})=>{var $;if(!e||!i)return null;const{x:h,y:m,placement:y,strategy:g,middlewareData:v}=await upe(e,i,{strategy:r,placement:n==="auto"||n==="auto-start"||n==="auto-end"?void 0:ype(i,n),middleware:fpe({placement:n,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:u,type:p})});if(u&&v.arrow){const{x:T,y:I}=v.arrow,C=y.split("-")[0],M=T!=null?"left":"top",R=bpe[C],O={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=C==="left"||C==="right"?"horizontal":"vertical"),Object.assign(u.style,{...O,[M]:`${M=="left"?T:I}px`,[C]:"100%",transform:R})}const b=(($=v.hide)==null?void 0:$.referenceHidden)?"hidden":null,_=b?"none":null;i.setAttribute(hpe,y);const{open:S}=t;Object.assign(i.style,{visibility:b,pointerEvents:_,position:g,transform:S?`translate(${zz(h)}px,${zz(m)}px)`:"",top:0,left:0})},hpe="data-placement",Vz=100,Uz=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end"],Bz={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function fpe({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:r,offsetSkidding:n,arrowEl:s,type:o}){const a=[qde(),Bde()];if(o==="menu")return[...a,Pz({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})];if(o==="popover"||o==="tooltip"){const l=[...a,Hde({mainAxis:typeof r=="number"?r:0,crossAxis:typeof n=="number"?n:0})];return t==="auto"||t==="auto-start"||t==="auto-end"?l.push(Ude({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||l.push(Pz(i?{fallbackPlacements:i}:{})),s&&l.push(zde({element:s})),l}return[]}function mpe(t,e){const i=t.filter(r=>Uz.includes(r));return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${Uz.map(r=>`"${r}"`).join(", ").trim()}`,{el:e}),i}function ype(t,e){const i=["left","right"];return cg(t)==="rtl"&&i.reverse(),e.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function gpe(t,e,i=!1){return t.open?(i?vpe(t):sW)(t,e):void 0}function vpe(t){let e=cE.get(t);return e||(e=Wq(sW,Vz,{leading:!0,maxWait:Vz}),cE.set(t,e),e)}const bpe={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},xO=new WeakMap,cE=new WeakMap;function Gz(t,e,i){if(!i||!e)return;oW(t,e,i),Object.assign(i.style,{visibility:"hidden",pointerEvents:"none",position:t.overlayPositioning});const r=cpe;xO.set(t,r(e,i,()=>t.reposition()))}function oW(t,e,i){var r,n;!i||!e||((r=xO.get(t))==null||r(),xO.delete(t),(n=cE.get(t))==null||n.cancel(),cE.delete(t))}const Hz=4,wpe=Math.ceil(Math.hypot(Hz,Hz));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 *//*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function qz(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Wz(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?qz(Object(i),!0).forEach(function(r){_pe(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qz(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function _pe(t,e,i){return e=$pe(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Spe(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $pe(t){var e=Spe(t,"string");return typeof e=="symbol"?e:String(e)}var Jz={activateTrap:function(e,i){if(e.length>0){var r=e[e.length-1];r!==i&&r.pause()}var n=e.indexOf(i);n===-1||e.splice(n,1),e.push(i)},deactivateTrap:function(e,i){var r=e.indexOf(i);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},xpe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Epe=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Hb=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Tpe=function(e){return Hb(e)&&!e.shiftKey},kpe=function(e){return Hb(e)&&e.shiftKey},Zz=function(e){return setTimeout(e,0)},Yz=function(e,i){var r=-1;return e.every(function(n,s){return i(n)?(r=s,!1):!0}),r},Y0=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,r):e},uS=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Ipe=[],Cpe=function(e,i){var r=(i==null?void 0:i.document)||document,n=(i==null?void 0:i.trapStack)||Ipe,s=Wz({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Tpe,isKeyBackward:kpe},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(A,P,V){return A&&A[P]!==void 0?A[P]:s[V||P]},u=function(A,P){var V=typeof(P==null?void 0:P.composedPath)=="function"?P.composedPath():void 0;return o.containerGroups.findIndex(function(te){var re=te.container,Q=te.tabbableNodes;return re.contains(A)||(V==null?void 0:V.includes(re))||Q.find(function(H){return H===A})})},p=function(A){var P=s[A];if(typeof P=="function"){for(var V=arguments.length,te=new Array(V>1?V-1:0),re=1;re<V;re++)te[re-1]=arguments[re];P=P.apply(void 0,te)}if(P===!0&&(P=void 0),!P){if(P===void 0||P===!1)return P;throw new Error("`".concat(A,"` was specified but was not a node, or did not return a node"))}var Q=P;if(typeof P=="string"&&(Q=r.querySelector(P),!Q))throw new Error("`".concat(A,"` as selector refers to no known node"));return Q},h=function(){var A=p("initialFocus");if(A===!1)return!1;if(A===void 0||!gC(A,s.tabbableOptions))if(u(r.activeElement)>=0)A=r.activeElement;else{var P=o.tabbableGroups[0],V=P&&P.firstTabbableNode;A=V||p("fallbackFocus")}if(!A)throw new Error("Your focus-trap needs to have at least one focusable element");return A},m=function(){if(o.containerGroups=o.containers.map(function(A){var P=xq(A,s.tabbableOptions),V=vue(A,s.tabbableOptions),te=P.length>0?P[0]:void 0,re=P.length>0?P[P.length-1]:void 0,Q=V.find(function(fe){return nm(fe)}),H=V.slice().reverse().find(function(fe){return nm(fe)}),ne=!!P.find(function(fe){return Th(fe)>0});return{container:A,tabbableNodes:P,focusableNodes:V,posTabIndexesFound:ne,firstTabbableNode:te,lastTabbableNode:re,firstDomTabbableNode:Q,lastDomTabbableNode:H,nextTabbableNode:function(Fe){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,yt=P.indexOf(Fe);return yt<0?Be?V.slice(V.indexOf(Fe)+1).find(function($t){return nm($t)}):V.slice(0,V.indexOf(Fe)).reverse().find(function($t){return nm($t)}):P[yt+(Be?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(A){return A.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!p("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(A){return A.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},y=function F(A){var P=A.activeElement;if(P)return P.shadowRoot&&P.shadowRoot.activeElement!==null?F(P.shadowRoot):P},g=function F(A){if(A!==!1&&A!==y(document)){if(!A||!A.focus){F(h());return}A.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=A,xpe(A)&&A.select()}},v=function(A){var P=p("setReturnFocus",A);return P||(P===!1?!1:A)},w=function(A){var P=A.target,V=A.event,te=A.isBackward,re=te===void 0?!1:te;P=P||uS(V),m();var Q=null;if(o.tabbableGroups.length>0){var H=u(P,V),ne=H>=0?o.containerGroups[H]:void 0;if(H<0)re?Q=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:Q=o.tabbableGroups[0].firstTabbableNode;else if(re){var fe=Yz(o.tabbableGroups,function(Nt){var Dt=Nt.firstTabbableNode;return P===Dt});if(fe<0&&(ne.container===P||gC(P,s.tabbableOptions)&&!nm(P,s.tabbableOptions)&&!ne.nextTabbableNode(P,!1))&&(fe=H),fe>=0){var Fe=fe===0?o.tabbableGroups.length-1:fe-1,Be=o.tabbableGroups[Fe];Q=Th(P)>=0?Be.lastTabbableNode:Be.lastDomTabbableNode}else Hb(V)||(Q=ne.nextTabbableNode(P,!1))}else{var yt=Yz(o.tabbableGroups,function(Nt){var Dt=Nt.lastTabbableNode;return P===Dt});if(yt<0&&(ne.container===P||gC(P,s.tabbableOptions)&&!nm(P,s.tabbableOptions)&&!ne.nextTabbableNode(P))&&(yt=H),yt>=0){var $t=yt===o.tabbableGroups.length-1?0:yt+1,ii=o.tabbableGroups[$t];Q=Th(P)>=0?ii.firstTabbableNode:ii.firstDomTabbableNode}else Hb(V)||(Q=ne.nextTabbableNode(P))}}else Q=p("fallbackFocus");return Q},b=function(A){var P=uS(A);if(!(u(P,A)>=0)){if(Y0(s.clickOutsideDeactivates,A)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Y0(s.allowOutsideClick,A)||A.preventDefault()}},_=function(A){var P=uS(A),V=u(P,A)>=0;if(V||P instanceof Document)V&&(o.mostRecentlyFocusedNode=P);else{A.stopImmediatePropagation();var te,re=!0;if(o.mostRecentlyFocusedNode)if(Th(o.mostRecentlyFocusedNode)>0){var Q=u(o.mostRecentlyFocusedNode),H=o.containerGroups[Q].tabbableNodes;if(H.length>0){var ne=H.findIndex(function(fe){return fe===o.mostRecentlyFocusedNode});ne>=0&&(s.isKeyForward(o.recentNavEvent)?ne+1<H.length&&(te=H[ne+1],re=!1):ne-1>=0&&(te=H[ne-1],re=!1))}}else o.containerGroups.some(function(fe){return fe.tabbableNodes.some(function(Fe){return Th(Fe)>0})})||(re=!1);else re=!1;re&&(te=w({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),g(te||o.mostRecentlyFocusedNode||h())}o.recentNavEvent=void 0},S=function(A){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=A;var V=w({event:A,isBackward:P});V&&(Hb(A)&&A.preventDefault(),g(V))},$=function(A){if(Epe(A)&&Y0(s.escapeDeactivates,A)!==!1){A.preventDefault(),a.deactivate();return}(s.isKeyForward(A)||s.isKeyBackward(A))&&S(A,s.isKeyBackward(A))},T=function(A){var P=uS(A);u(P,A)>=0||Y0(s.clickOutsideDeactivates,A)||Y0(s.allowOutsideClick,A)||(A.preventDefault(),A.stopImmediatePropagation())},I=function(){if(o.active)return Jz.activateTrap(n,a),o.delayInitialFocusTimer=s.delayInitialFocus?Zz(function(){g(h())}):g(h()),r.addEventListener("focusin",_,!0),r.addEventListener("mousedown",b,{capture:!0,passive:!1}),r.addEventListener("touchstart",b,{capture:!0,passive:!1}),r.addEventListener("click",T,{capture:!0,passive:!1}),r.addEventListener("keydown",$,{capture:!0,passive:!1}),a},C=function(){if(o.active)return r.removeEventListener("focusin",_,!0),r.removeEventListener("mousedown",b,!0),r.removeEventListener("touchstart",b,!0),r.removeEventListener("click",T,!0),r.removeEventListener("keydown",$,!0),a},M=function(A){var P=A.some(function(V){var te=Array.from(V.removedNodes);return te.some(function(re){return re===o.mostRecentlyFocusedNode})});P&&g(h())},R=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(M):void 0,O=function(){R&&(R.disconnect(),o.active&&!o.paused&&o.containers.map(function(A){R.observe(A,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(A){if(o.active)return this;var P=l(A,"onActivate"),V=l(A,"onPostActivate"),te=l(A,"checkCanFocusTrap");te||m(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,P==null||P();var re=function(){te&&m(),I(),O(),V==null||V()};return te?(te(o.containers.concat()).then(re,re),this):(re(),this)},deactivate:function(A){if(!o.active)return this;var P=Wz({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},A);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,C(),o.active=!1,o.paused=!1,O(),Jz.deactivateTrap(n,a);var V=l(P,"onDeactivate"),te=l(P,"onPostDeactivate"),re=l(P,"checkCanReturnFocus"),Q=l(P,"returnFocus","returnFocusOnDeactivate");V==null||V();var H=function(){Zz(function(){Q&&g(v(o.nodeFocusedBeforeActivation)),te==null||te()})};return Q&&re?(re(v(o.nodeFocusedBeforeActivation)).then(H,H),this):(H(),this)},pause:function(A){if(o.paused||!o.active)return this;var P=l(A,"onPause"),V=l(A,"onPostPause");return o.paused=!0,P==null||P(),C(),O(),V==null||V(),this},unpause:function(A){if(!o.paused||!o.active)return this;var P=l(A,"onUnpause"),V=l(A,"onPostUnpause");return o.paused=!1,P==null||P(),m(),I(),O(),V==null||V(),this},updateContainerElements:function(A){var P=[].concat(A).filter(Boolean);return o.containers=P.map(function(V){return typeof V=="string"?r.querySelector(V):V}),o.active&&m(),O(),this}},a.updateContainerElements(e),a};const SC=globalThis.calciteConfig,Mpe=(SC==null?void 0:SC.focusTrapStack)||[];function Lpe(t,e){const{el:i}=t,r=(e==null?void 0:e.focusTrapEl)||i;if(!r)return;const n={clickOutsideDeactivates:!0,escapeDeactivates:!1,fallbackFocus:r,setReturnFocus:s=>(Cq(s),!1),...e==null?void 0:e.focusTrapOptions,document:i.ownerDocument,tabbableOptions:Eq,trapStack:Mpe};t.focusTrap=Cpe(r,n)}function Kz(t,e){var i;t.focusTrapDisabled||(i=t.focusTrap)==null||i.activate(e)}function $C(t,e){var i;(i=t.focusTrap)==null||i.deactivate(e)}function Ope(t){var e;(e=t.focusTrap)==null||e.updateContainerElements(t.el)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */function uE(t){return"opened"in t?t.opened:t.open}function Qz(t,e=!1){(e?t[t.transitionProp]:uE(t))?t.onBeforeOpen():t.onBeforeClose(),(e?t[t.transitionProp]:uE(t))?t.onOpen():t.onClose()}function Xz(t,e=!1){Qce(()=>{if(t.transitionEl){let u=function(h){h.propertyName===t.openTransitionProp&&h.target===t.transitionEl&&(clearTimeout(l),t.transitionEl.removeEventListener("transitionstart",u),(e?t[t.transitionProp]:uE(t))?t.onBeforeOpen():t.onBeforeClose())},p=function(h){h.propertyName===t.openTransitionProp&&h.target===t.transitionEl&&((e?t[t.transitionProp]:uE(t))?t.onOpen():t.onClose(),t.transitionEl.removeEventListener("transitionend",p),t.transitionEl.removeEventListener("transitioncancel",p))};const{transitionDuration:i,transitionProperty:r}=getComputedStyle(t.transitionEl),n=i.split(","),o=r.split(",").indexOf(t.openTransitionProp),a=n[o]??n[0];if(a==="0s"){Qz(t,e);return}const l=setTimeout(()=>{t.transitionEl.removeEventListener("transitionstart",u),t.transitionEl.removeEventListener("transitionend",p),t.transitionEl.removeEventListener("transitioncancel",p),Qz(t,e)},parseFloat(a)*1e3);t.transitionEl.addEventListener("transitionstart",u),t.transitionEl.addEventListener("transitionend",p),t.transitionEl.addEventListener("transitioncancel",p)}})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const aW=(t,e)=>{const i=t.level?`h${t.level}`:"div";return delete t.level,J(i,{...t},e)};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const e6={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},Ape={width:12,height:6,strokeWidth:1},Ppe=({floatingLayout:t,key:e,ref:i})=>{const{width:r,height:n,strokeWidth:s}=Ape,o=r/2,a=t==="vertical",l=`M0,0 H${r} L${r-o},${n} Q${o},${n} ${o},${n} Z`;return J("svg",{"aria-hidden":"true",class:e6.arrow,height:r,key:e,viewBox:`0 0 ${r} ${r+(a?0:s)}`,width:r+(a?s:0),ref:i},s>0&&J("path",{class:e6.arrowStroke,d:l,fill:"none","stroke-width":s+1}),J("path",{d:l,stroke:"none"}))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const Al={container:"container",imageContainer:"image-container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContent:"header-content",heading:"heading"},Rpe="auto",t6="aria-controls",i6="aria-expanded";class Npe{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,r=e.find(n=>i.has(n));return i.get(r)},this.togglePopovers=e=>{const i=e.composedPath(),r=this.queryPopover(i);r&&!r.triggerDisabled&&(r.open=!r.open),Array.from(this.registeredElements.values()).filter(n=>n!==r&&n.autoClose&&n.open&&!i.includes(n)).forEach(n=>n.open=!1)},this.keyHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():Mq(e.key)&&this.togglePopovers(e))},this.clickHandler=e=>{iE(e)&&this.togglePopovers(e)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("pointerdown",this.clickHandler,{capture:!0}),window.addEventListener("keydown",this.keyHandler,{capture:!0})}removeListeners(){window.removeEventListener("pointerdown",this.clickHandler,{capture:!0}),window.removeEventListener("keydown",this.keyHandler,{capture:!0})}}const Dpe=":host{--calcite-floating-ui-z-index:var(--calcite-popover-z-index, var(--calcite-z-index-popup));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{transform:translateY(-5px)}:host([data-placement^=top]) .calcite-floating-ui-anim{transform:translateY(5px)}:host([data-placement^=left]) .calcite-floating-ui-anim{transform:translateX(5px)}:host([data-placement^=right]) .calcite-floating-ui-anim{transform:translateX(-5px)}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding-inline:1.25rem;padding-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.arrow::before{outline:1px solid var(--calcite-color-border-3)}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-block-end-width:1px;border-style:solid;border-block-end-color:var(--calcite-color-border-3)}.heading{margin:0px;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);word-wrap:break-word;word-break:break-word}.container{position:relative;display:flex;block-size:100%;flex-direction:row;flex-wrap:nowrap;border-radius:0.25rem;color:var(--calcite-color-text-1)}.container.has-header{flex-direction:column}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:0.25rem;border-end-end-radius:0.25rem}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%}:host([hidden]){display:none}[hidden]{display:none}",r6=new Npe,Fpe=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePopoverBeforeClose=ra(this,"calcitePopoverBeforeClose",6),this.calcitePopoverClose=ra(this,"calcitePopoverClose",6),this.calcitePopoverBeforeOpen=ra(this,"calcitePopoverBeforeOpen",6),this.calcitePopoverOpen=ra(this,"calcitePopoverOpen",6),this.mutationObserver=Dc("mutation",()=>this.updateFocusTrapElements()),this.guid=`calcite-popover-${fk()}`,this.openTransitionProp="opacity",this.hasLoaded=!1,this.setTransitionEl=e=>{this.transitionEl=e},this.setFilteredPlacements=()=>{const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?mpe(i,e):null},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=this.getReferenceElement(),Gz(this,this.effectiveReferenceElement,this.el);const{el:i,referenceElement:r,effectiveReferenceElement:n}=this;e&&r&&!n&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.setExpandedAttr=()=>{const{effectiveReferenceElement:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(i6,Tc(i))},this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(t6,i),r6.registerElement(e,this.el),this.setExpandedAttr()},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(t6),e.removeAttribute(i6)),r6.unregisterElement(e))},this.hide=()=>{this.open=!1},this.storeArrowEl=e=>{this.arrowEl=e,this.reposition(!0)},this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.pointerDisabled=!1,this.flipPlacements=void 0,this.heading=void 0,this.headingLevel=void 0,this.label=void 0,this.messageOverrides=void 0,this.messages=void 0,this.offsetDistance=wpe,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=Rpe,this.referenceElement=void 0,this.scale="m",this.triggerDisabled=!1,this.effectiveLocale="",this.floatingLayout="vertical",this.effectiveReferenceElement=void 0,this.defaultMessages=void 0}handleFocusTrapDisabled(e){this.open&&(e?$C(this):Kz(this))}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMessagesChange(){}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){Xz(this),this.reposition(!0),this.setExpandedAttr()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}effectiveLocaleChange(){Vf(this,this.effectiveLocale)}connectedCallback(){this.setFilteredPlacements(),Ff(this),Uf(this),this.setUpReferenceElement(this.hasLoaded),Lpe(this),this.open&&Xz(this),Gz(this,this.effectiveReferenceElement,this.el)}async componentWillLoad(){await zf(this),p0(this)}componentDidLoad(){h0(this),this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.reposition(),this.hasLoaded=!0}disconnectedCallback(){this.removeReferences(),jf(this),Bf(this),oW(this,this.effectiveReferenceElement,this.el),$C(this)}async reposition(e=!1){const{el:i,effectiveReferenceElement:r,placement:n,overlayPositioning:s,flipDisabled:o,filteredFlipPlacements:a,offsetDistance:l,offsetSkidding:u,arrowEl:p}=this;return gpe(this,{floatingEl:i,referenceEl:r,overlayPositioning:s,placement:n,flipDisabled:o,flipPlacements:a,offsetDistance:l,offsetSkidding:u,arrowEl:p,type:"popover"},e)}async setFocus(){await f0(this),u0(this.el),OD(this.el)}async updateFocusTrapElements(){Ope(this)}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?wue(i,{id:e}):e)||null}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),Kz(this)}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),$C(this)}renderCloseButton(){const{messages:e,closable:i}=this;return i?J("div",{class:Al.closeButtonContainer,key:Al.closeButtonContainer},J("calcite-action",{appearance:"transparent",class:Al.closeButton,onClick:this.hide,scale:this.scale,text:e.close,ref:r=>this.closeButtonEl=r},J("calcite-icon",{icon:"x",scale:Bq(this.scale)}))):null}renderHeader(){const{heading:e,headingLevel:i}=this,r=e?J(aW,{class:Al.heading,level:i},e):null;return r?J("div",{class:Al.header,key:Al.header},r,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:e,heading:i,label:r,open:n,pointerDisabled:s,floatingLayout:o}=this,a=e&&n,l=!a,u=s?null:J(Ppe,{floatingLayout:o,key:"floating-arrow",ref:this.storeArrowEl});return J(c0,{"aria-hidden":Tc(l),"aria-label":r,"aria-live":"polite","calcite-hydrated-hidden":l,id:this.getId(),role:"dialog"},J("div",{class:{[Bz.animation]:!0,[Bz.animationActive]:a},ref:this.setTransitionEl},u,J("div",{class:{[Al.hasHeader]:!!i,[Al.container]:!0}},this.renderHeader(),J("div",{class:Al.content},J("slot",null)),i?null:this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Dpe}},[1,"calcite-popover",{autoClose:[516,"auto-close"],closable:[516],flipDisabled:[516,"flip-disabled"],focusTrapDisabled:[516,"focus-trap-disabled"],pointerDisabled:[516,"pointer-disabled"],flipPlacements:[16],heading:[1],headingLevel:[514,"heading-level"],label:[1],messageOverrides:[1040],messages:[1040],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],scale:[513],triggerDisabled:[516,"trigger-disabled"],effectiveLocale:[32],floatingLayout:[32],effectiveReferenceElement:[32],defaultMessages:[32],reposition:[64],setFocus:[64],updateFocusTrapElements:[64]},void 0,{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function G1(){if(typeof customElements>"u")return;["calcite-popover","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-popover":customElements.get(e)||customElements.define(e,Fpe);break;case"calcite-action":customElements.get(e)||m0();break;case"calcite-icon":customElements.get(e)||Hf();break;case"calcite-loader":customElements.get(e)||np();break}})}G1();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const n6={menu:"menu",defaultTrigger:"default-trigger"},Ng={tooltip:"tooltip",trigger:"trigger"},jpe={menu:"ellipsis"},zpe="data-active",Vpe=":host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1);color:var(--calcite-color-text-2)}::slotted(calcite-action-group){border-block-end:1px solid var(--calcite-color-border-3)}::slotted(calcite-action-group:last-child){border-block-end:0}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px}:host([hidden]){display:none}[hidden]{display:none}",Upe=["ArrowUp","ArrowDown","End","Home"],Bpe=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionMenuOpen=ra(this,"calciteActionMenuOpen",6),this.actionElements=[],this.guid=`calcite-action-menu-${fk()}`,this.menuId=`${this.guid}-menu`,this.menuButtonId=`${this.guid}-menu-button`,this.connectMenuButtonEl=()=>{const{menuButtonId:e,menuId:i,open:r,label:n}=this,s=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==s&&(this.disconnectMenuButtonEl(),this.menuButtonEl=s,this.setTooltipReferenceElement(),s&&(s.active=r,s.setAttribute("aria-controls",i),s.setAttribute("aria-expanded",Tc(r)),s.setAttribute("aria-haspopup","true"),s.id||(s.id=e),s.label||(s.label=n),s.text||(s.text=n),s.addEventListener("pointerdown",this.menuButtonClick),s.addEventListener("keydown",this.menuButtonKeyDown)))},this.disconnectMenuButtonEl=()=>{const{menuButtonEl:e}=this;e&&(e.removeEventListener("pointerdown",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown))},this.setMenuButtonEl=e=>{const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()},this.setDefaultMenuButtonEl=e=>{this.defaultMenuButtonEl=e,this.connectMenuButtonEl()},this.handleCalciteActionClick=()=>{this.open=!1,this.setFocus()},this.menuButtonClick=e=>{iE(e)&&this.toggleOpen()},this.updateTooltip=e=>{const i=e.target.assignedElements({flatten:!0}).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()},this.setTooltipReferenceElement=()=>{const{tooltipEl:e,expanded:i,menuButtonEl:r,open:n}=this;e&&(e.referenceElement=!i&&!n?r:null)},this.updateAction=(e,i)=>{const{guid:r,activeMenuItemIndex:n}=this,s=`${r}-action-${i}`;e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=s),e.toggleAttribute(zpe,i===n)},this.updateActions=e=>{e==null||e.forEach(this.updateAction)},this.handleDefaultSlotChange=e=>{const i=e.target.assignedElements({flatten:!0}).reduce((r,n)=>n!=null&&n.matches("calcite-action")?(r.push(n),r):n!=null&&n.matches("calcite-action-group")?r.concat(Array.from(n.querySelectorAll("calcite-action"))):r,[]);this.actionElements=i.filter(r=>!r.disabled&&!r.hidden)},this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:r,activeMenuItemIndex:n,open:s}=this;if(r.length){if(Mq(i)){if(e.preventDefault(),!s){this.toggleOpen();return}const o=r[n];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,r)}},this.handleActionNavigation=(e,i,r)=>{if(!this.isValidKey(i,Upe))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=r.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=r.length-1);const n=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=kz(Math.max(n-1,-1),r.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=kz(n+1,r.length))},this.toggleOpenEnd=()=>{this.setFocus(),this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)},this.toggleOpen=(e=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd),this.open=e},this.handlePopoverOpen=()=>{this.open=!0},this.handlePopoverClose=()=>{this.open=!1},this.appearance="solid",this.expanded=!1,this.flipPlacements=void 0,this.label=void 0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale=void 0,this.menuButtonEl=void 0,this.activeMenuItemIndex=-1}connectedCallback(){this.connectMenuButtonEl()}componentWillLoad(){p0(this)}componentDidLoad(){h0(this)}disconnectedCallback(){this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.activeMenuItemIndex=this.open?0:-1,this.menuButtonEl&&(this.menuButtonEl.active=e),this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){return await f0(this),Cq(this.menuButtonEl)}renderMenuButton(){const{appearance:e,label:i,scale:r,expanded:n}=this;return J("slot",{name:Ng.trigger,onSlotchange:this.setMenuButtonEl},J("calcite-action",{appearance:e,class:n6.defaultTrigger,icon:jpe.menu,scale:r,text:i,textEnabled:n,ref:this.setDefaultMenuButtonEl}))}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,open:r,menuId:n,menuButtonEl:s,label:o,placement:a,overlayPositioning:l,flipPlacements:u}=this,p=e[i],h=(p==null?void 0:p.id)||null;return J("calcite-popover",{autoClose:!0,flipPlacements:u,focusTrapDisabled:!0,label:o,offsetDistance:0,onCalcitePopoverClose:this.handlePopoverClose,onCalcitePopoverOpen:this.handlePopoverOpen,open:r,overlayPositioning:l,placement:a,pointerDisabled:!0,referenceElement:s},J("div",{"aria-activedescendant":h,"aria-labelledby":s==null?void 0:s.id,class:n6.menu,id:n,onClick:this.handleCalciteActionClick,role:"menu",tabIndex:-1},J("slot",{onSlotchange:this.handleDefaultSlotChange})))}render(){return J(MD,null,this.renderMenuButton(),this.renderMenuItems(),J("slot",{name:Ng.tooltip,onSlotchange:this.updateTooltip}))}isValidKey(e,i){return!!i.find(r=>r===e)}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}static get style(){return Vpe}},[1,"calcite-action-menu",{appearance:[513],expanded:[516],flipPlacements:[16],label:[1],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],menuButtonEl:[32],activeMenuItemIndex:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}]);function vk(){if(typeof customElements>"u")return;["calcite-action-menu","calcite-action","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-menu":customElements.get(e)||customElements.define(e,Bpe);break;case"calcite-action":customElements.get(e)||m0();break;case"calcite-icon":customElements.get(e)||Hf();break;case"calcite-loader":customElements.get(e)||np();break;case"calcite-popover":customElements.get(e)||G1();break}})}vk();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const Dg={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},Gpe={menu:"ellipsis"},Hpe={container:"container"},qpe=':host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0px;--calcite-action-group-columns:3;--calcite-action-group-gap:1px;--calcite-action-group-padding:1px}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-action-group-columns:1}:host([columns="2"]){--calcite-action-group-columns:2}:host([columns="3"]){--calcite-action-group-columns:3}:host([columns="4"]){--calcite-action-group-columns:4}:host([columns="5"]){--calcite-action-group-columns:5}:host([columns="6"]){--calcite-action-group-columns:6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:var(--calcite-color-background);gap:var(--calcite-action-group-gap);padding:var(--calcite-action-group-gap);grid-template-columns:repeat(var(--calcite-action-group-columns), auto)}:host([hidden]){display:none}[hidden]{display:none}',Wpe=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.setMenuOpen=e=>{this.menuOpen=!!e.target.open},this.handleMenuActionsSlotChange=e=>{this.hasMenuActions=wr(e)},this.expanded=!1,this.label=void 0,this.layout="vertical",this.columns=void 0,this.menuOpen=!1,this.overlayPositioning="absolute",this.scale=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0,this.hasMenuActions=!1}expandedHandler(){this.menuOpen=!1}onMessagesChange(){}effectiveLocaleChange(){Vf(this,this.effectiveLocale)}async setFocus(){await f0(this),this.el.focus()}connectedCallback(){Ff(this),Uf(this),pk(this)}disconnectedCallback(){jf(this),Bf(this),hk(this)}async componentWillLoad(){p0(this),await zf(this)}componentDidLoad(){h0(this)}renderMenu(){const{expanded:e,menuOpen:i,scale:r,layout:n,messages:s,overlayPositioning:o,hasMenuActions:a}=this;return J("calcite-action-menu",{expanded:e,flipPlacements:["left","right"],hidden:!a,label:s.more,onCalciteActionMenuOpen:this.setMenuOpen,open:i,overlayPositioning:o,placement:n==="horizontal"?"bottom-start":"leading-start",scale:r},J("calcite-action",{icon:Gpe.menu,scale:r,slot:Ng.trigger,text:s.more,textEnabled:e}),J("slot",{name:Dg.menuActions,onSlotchange:this.handleMenuActionsSlotChange}),J("slot",{name:Dg.menuTooltip,slot:Ng.tooltip}))}render(){return J("div",{"aria-label":this.label,class:Hpe.container,role:"group"},J("slot",null),this.renderMenu())}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return qpe}},[17,"calcite-action-group",{expanded:[516],label:[1],layout:[513],columns:[514],menuOpen:[1540,"menu-open"],overlayPositioning:[513,"overlay-positioning"],scale:[513],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],hasMenuActions:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function lW(){if(typeof customElements>"u")return;["calcite-action-group","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-group":customElements.get(e)||customElements.define(e,Wpe);break;case"calcite-action":customElements.get(e)||m0();break;case"calcite-action-menu":customElements.get(e)||vk();break;case"calcite-icon":customElements.get(e)||Hf();break;case"calcite-loader":customElements.get(e)||np();break;case"calcite-popover":customElements.get(e)||G1();break}})}lW();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const Jpe=150,Zpe=2,s6=t=>t.reduce((e,i)=>e+i,0)/t.length,Ype=t=>{const e=t.filter(r=>r.slot!==Dg.menuActions),i=e==null?void 0:e.length;return{actionWidth:i?s6(e.map(r=>r.clientWidth||0)):0,actionHeight:i?s6(e.map(r=>r.clientHeight||0)):0}},Kpe=({width:t,actionWidth:e,layout:i,height:r,actionHeight:n,groupCount:s})=>{const o=i==="horizontal"?t:r,a=i==="horizontal"?e:n;return Math.floor((o-s*Zpe)/a)},Qpe=({layout:t,actionCount:e,actionWidth:i,width:r,actionHeight:n,height:s,groupCount:o})=>Math.max(e-Kpe({width:r,actionWidth:i,layout:t,height:s,actionHeight:n,groupCount:o}),0),jD=t=>Array.from(t.querySelectorAll("calcite-action")).filter(e=>e.closest("calcite-action-menu")?e.slot===Ng.trigger:!0),Xpe=({actionGroups:t,expanded:e,overflowCount:i})=>{let r=i;t.reverse().forEach(n=>{let s=0;const o=jD(n).reverse();o.forEach(a=>{a.slot===Dg.menuActions&&(a.removeAttribute("slot"),a.textEnabled=e)}),r>0&&o.some(a=>(o.filter(u=>!u.slot).length>1&&o.length>2&&!a.closest("calcite-action-menu")&&(a.textEnabled=!0,a.setAttribute("slot",Dg.menuActions),s++,s>1&&r--),r<1)),u0(n)})},o6={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function ehe(t,e){var i;return t||((i=e.closest("calcite-shell-panel"))==null?void 0:i.position)||"start"}function dS({el:t,expanded:e}){jD(t).filter(i=>i.slot!==Dg.menuActions).forEach(i=>i.textEnabled=e),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach(i=>i.expanded=e)}const the=({tooltip:t,referenceElement:e,expanded:i,ref:r})=>(t&&(t.referenceElement=!i&&e?e:null),r&&r(e),e),ihe=({expanded:t,expandText:e,collapseText:i,toggle:r,el:n,position:s,tooltip:o,ref:a,scale:l})=>{const u=cg(n)==="rtl",p=t?i:e,h=[o6.chevronsLeft,o6.chevronsRight];u&&h.reverse();const m=ehe(s,n)==="end",y=m?h[1]:h[0],g=m?h[0]:h[1];return J("calcite-action",{icon:t?y:g,onClick:r,scale:l,text:p,textEnabled:t,title:!t&&!o?p:null,ref:w=>the({tooltip:o,referenceElement:w,expanded:t,ref:a})})};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const rhe={actionGroupEnd:"action-group--end"},xC={actionsEnd:"actions-end",bottomActions:"bottom-actions",expandTooltip:"expand-tooltip"},nhe=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{pointer-events:auto;display:inline-flex;align-self:stretch;--calcite-action-bar-expanded-max-width:auto}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=vertical][overflow-actions-disabled]){overflow-y:auto}:host([layout=horizontal][overflow-actions-disabled]){overflow-x:auto}:host([layout=vertical][expanded]){max-inline-size:var(--calcite-action-bar-expanded-max-width)}::slotted(calcite-action-group){border-block-end:1px solid var(--calcite-color-border-3)}:host([layout=horizontal]) ::slotted(calcite-action-group){border-block-end:0;border-inline-end:1px solid var(--calcite-color-border-3)}:host([layout=horizontal][expand-disabled]) ::slotted(calcite-action-group:last-of-type){border-inline-end:0}::slotted(calcite-action-group:last-child){border-block-end:0;border-inline-end:0}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}",she=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionBarToggle=ra(this,"calciteActionBarToggle",6),this.mutationObserver=Dc("mutation",()=>{const{el:e,expanded:i}=this;dS({el:e,expanded:i}),this.overflowActions()}),this.resizeObserver=Dc("resize",e=>this.resizeHandlerEntries(e)),this.actionMenuOpenHandler=e=>{if(e.target.menuOpen){const i=e.composedPath();Array.from(this.el.querySelectorAll("calcite-action-group")).forEach(r=>{i.includes(r)||(r.menuOpen=!1)})}},this.resizeHandlerEntries=e=>{e.forEach(this.resizeHandler)},this.resizeHandler=e=>{const{width:i,height:r}=e.contentRect;this.resize({width:i,height:r})},this.resize=Wq(({width:e,height:i})=>{const{el:r,expanded:n,expandDisabled:s,layout:o,overflowActionsDisabled:a}=this;if(a||o==="vertical"&&!i||o==="horizontal"&&!e)return;const l=jD(r),u=s?l.length:l.length+1,p=Array.from(r.querySelectorAll("calcite-action-group"));this.setGroupLayout(p);const h=this.hasActionsEnd||this.hasBottomActions||!s?p.length+1:p.length,{actionHeight:m,actionWidth:y}=Ype(l),g=Qpe({layout:o,actionCount:u,actionHeight:m,actionWidth:y,height:i,width:e,groupCount:h});Xpe({actionGroups:p,expanded:n,overflowCount:g})},Jpe),this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionBarToggle.emit()},this.setExpandToggleRef=e=>{this.expandToggleEl=e},this.handleDefaultSlotChange=e=>{const i=Ad(e).filter(r=>r.matches("calcite-action-group"));this.setGroupLayout(i)},this.handleActionsEndSlotChange=e=>{this.hasActionsEnd=wr(e)},this.handleBottomActionsSlotChange=e=>{this.hasBottomActions=wr(e)},this.handleTooltipSlotChange=e=>{const i=Ad(e).filter(r=>r==null?void 0:r.matches("calcite-tooltip"));this.expandTooltip=i[0]},this.actionsEndGroupLabel=void 0,this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.overflowActionsDisabled=!1,this.position=void 0,this.scale=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale=void 0,this.hasActionsEnd=!1,this.hasBottomActions=!1,this.expandTooltip=void 0,this.defaultMessages=void 0}expandHandler(){this.overflowActions()}expandedHandler(){const{el:e,expanded:i}=this;dS({el:e,expanded:i}),this.overflowActions()}layoutHandler(){this.updateGroups()}overflowDisabledHandler(e){var i,r;if(e){(i=this.resizeObserver)==null||i.disconnect();return}(r=this.resizeObserver)==null||r.observe(this.el),this.overflowActions()}onMessagesChange(){}effectiveLocaleChange(){Vf(this,this.effectiveLocale)}componentDidLoad(){const{el:e,expanded:i}=this;h0(this),dS({el:e,expanded:i}),this.overflowActions()}connectedCallback(){var r,n;const{el:e,expanded:i}=this;Ff(this),Uf(this),dS({el:e,expanded:i}),(r=this.mutationObserver)==null||r.observe(e,{childList:!0,subtree:!0}),this.overflowActionsDisabled||(n=this.resizeObserver)==null||n.observe(e),this.overflowActions(),pk(this)}async componentWillLoad(){p0(this),await zf(this)}disconnectedCallback(){var e,i;(e=this.mutationObserver)==null||e.disconnect(),(i=this.resizeObserver)==null||i.disconnect(),hk(this),jf(this),Bf(this)}async overflowActions(){this.resize({width:this.el.clientWidth,height:this.el.clientHeight})}async setFocus(){await f0(this),OD(this.el)}updateGroups(){this.setGroupLayout(Array.from(this.el.querySelectorAll("calcite-action-group")))}setGroupLayout(e){e.forEach(i=>i.layout=this.layout)}renderBottomActionGroup(){const{expanded:e,expandDisabled:i,el:r,position:n,toggleExpand:s,scale:o,layout:a,messages:l,actionsEndGroupLabel:u}=this,p=i?null:J(ihe,{collapseText:l.collapse,el:r,expandText:l.expand,expanded:e,position:n,scale:o,toggle:s,tooltip:this.expandTooltip,ref:this.setExpandToggleRef});return J("calcite-action-group",{class:rhe.actionGroupEnd,hidden:this.expandDisabled&&!(this.hasActionsEnd||this.hasBottomActions),label:u,layout:a,scale:o},J("slot",{name:xC.actionsEnd,onSlotchange:this.handleActionsEndSlotChange}),J("slot",{name:xC.bottomActions,onSlotchange:this.handleBottomActionsSlotChange}),J("slot",{name:xC.expandTooltip,onSlotchange:this.handleTooltipSlotChange}),p)}render(){return J(c0,{onCalciteActionMenuOpen:this.actionMenuOpenHandler},J("slot",{onSlotchange:this.handleDefaultSlotChange}),this.renderBottomActionGroup())}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expandDisabled:["expandHandler"],expanded:["expandedHandler"],layout:["layoutHandler"],overflowActionsDisabled:["overflowDisabledHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return nhe}},[1,"calcite-action-bar",{actionsEndGroupLabel:[1,"actions-end-group-label"],expandDisabled:[516,"expand-disabled"],expanded:[1540],layout:[513],overflowActionsDisabled:[516,"overflow-actions-disabled"],position:[513],scale:[513],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],hasActionsEnd:[32],hasBottomActions:[32],expandTooltip:[32],defaultMessages:[32],overflowActions:[64],setFocus:[64]},void 0,{expandDisabled:["expandHandler"],expanded:["expandedHandler"],layout:["layoutHandler"],overflowActionsDisabled:["overflowDisabledHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function ohe(){if(typeof customElements>"u")return;["calcite-action-bar","calcite-action","calcite-action-group","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-bar":customElements.get(e)||customElements.define(e,she);break;case"calcite-action":customElements.get(e)||m0();break;case"calcite-action-group":customElements.get(e)||lW();break;case"calcite-action-menu":customElements.get(e)||vk();break;case"calcite-icon":customElements.get(e)||Hf();break;case"calcite-loader":customElements.get(e)||np();break;case"calcite-popover":customElements.get(e)||G1();break}})}ohe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const a6={scrim:"scrim",content:"content"},l6={s:72,l:480},ahe=":host{--calcite-scrim-background:var(--calcite-color-transparent-scrim);position:absolute;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}",lhe=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=Dc("resize",()=>this.handleResize()),this.handleDefaultSlotChange=e=>{this.hasContent=Eue(e)},this.storeLoaderEl=e=>{this.loaderEl=e,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){Vf(this,this.effectiveLocale)}connectedCallback(){var e;Ff(this),Uf(this),(e=this.resizeObserver)==null||e.observe(this.el)}async componentWillLoad(){await zf(this)}disconnectedCallback(){var e;jf(this),Bf(this),(e=this.resizeObserver)==null||e.disconnect()}render(){const{hasContent:e,loading:i,messages:r}=this;return J("div",{class:a6.scrim},i?J("calcite-loader",{label:r.loading,scale:this.loaderScale,ref:this.storeLoaderEl}):null,J("div",{class:a6.content,hidden:!e},J("slot",{onSlotchange:this.handleDefaultSlotChange})))}getScale(e){return e<l6.s?"s":e>=l6.l?"l":"m"}handleResize(){const{loaderEl:e,el:i}=this;e&&(this.loaderScale=this.getScale(Math.min(i.clientHeight,i.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return ahe}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function cW(){if(typeof customElements>"u")return;["calcite-scrim","calcite-loader"].forEach(e=>{switch(e){case"calcite-scrim":customElements.get(e)||customElements.define(e,lhe);break;case"calcite-loader":customElements.get(e)||np();break}})}cW();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */const Cr={actionBarContainer:"action-bar-container",backButton:"back-button",container:"container",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",heading:"heading",summary:"summary",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer"},pS={close:"x",menu:"ellipsis",backLeft:"chevron-left",backRight:"chevron-right",expand:"chevron-down",collapse:"chevron-up"},iu={actionBar:"action-bar",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerActions:"footer-actions"},che=":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;--calcite-min-header-height:calc(var(--calcite-icon-size) * 3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}.container{margin:0px;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;background-color:var(--calcite-color-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), inline-size var(--calcite-animation-timing)}.container[hidden]{display:none}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-color-foreground-1);border-block-end:var(--calcite-panel-header-border-block-end, 1px solid var(--calcite-color-border-3))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-color-border-3)}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:0.75rem;padding-block:0.875rem;margin-inline-end:auto}.header-content .heading,.header-content .description{display:block;overflow-wrap:break-word;padding:0px}.header-content .heading{margin-inline:0px;margin-block:0px 0.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-medium)}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-color-text-2)}.back-button{border-width:0px;border-style:solid;border-color:var(--calcite-color-border-3);border-inline-end-width:1px}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;background-color:var(--calcite-color-background)}.footer{display:flex;inline-size:100%;justify-content:space-evenly;background-color:var(--calcite-color-foreground-1);flex:0 0 auto;padding:var(--calcite-panel-footer-padding, 0.5rem);border-block-start:1px solid var(--calcite-color-border-3)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:0.5rem;inset-inline:0;inline-size:-moz-fit-content;inline-size:fit-content}:host([hidden]){display:none}[hidden]{display:none}",uhe=ma(class extends ya{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePanelClose=ra(this,"calcitePanelClose",6),this.calcitePanelToggle=ra(this,"calcitePanelToggle",6),this.calcitePanelScroll=ra(this,"calcitePanelScroll",6),this.resizeObserver=Dc("resize",()=>this.resizeHandler()),this.resizeHandler=()=>{const{panelScrollEl:e}=this;!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number"||(e.tabIndex=e.scrollHeight>e.offsetHeight?0:-1)},this.setContainerRef=e=>{this.containerEl=e},this.panelKeyDownHandler=e=>{this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.close(),e.preventDefault())},this.close=()=>{this.closed=!0,this.calcitePanelClose.emit()},this.collapse=()=>{this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()},this.panelScrollHandler=()=>{this.calcitePanelScroll.emit()},this.handleHeaderActionsStartSlotChange=e=>{this.hasStartActions=wr(e)},this.handleHeaderActionsEndSlotChange=e=>{this.hasEndActions=wr(e)},this.handleHeaderMenuActionsSlotChange=e=>{this.hasMenuItems=wr(e)},this.handleActionBarSlotChange=e=>{const i=Ad(e).filter(r=>r==null?void 0:r.matches("calcite-action-bar"));i.forEach(r=>r.layout="horizontal"),this.hasActionBar=!!i.length},this.handleHeaderContentSlotChange=e=>{this.hasHeaderContent=wr(e)},this.handleFooterSlotChange=e=>{this.hasFooterContent=wr(e)},this.handleFooterActionsSlotChange=e=>{this.hasFooterActions=wr(e)},this.handleFabSlotChange=e=>{this.hasFab=wr(e)},this.setPanelScrollEl=e=>{var i,r;this.panelScrollEl=e,(i=this.resizeObserver)==null||i.disconnect(),e&&((r=this.resizeObserver)==null||r.observe(e),this.resizeHandler())},this.closed=!1,this.disabled=!1,this.closable=!1,this.collapsed=!1,this.collapseDirection="down",this.collapsible=!1,this.headingLevel=void 0,this.loading=!1,this.heading=void 0,this.description=void 0,this.menuOpen=!1,this.messageOverrides=void 0,this.messages=void 0,this.hasStartActions=!1,this.hasEndActions=!1,this.hasMenuItems=!1,this.hasHeaderContent=!1,this.hasActionBar=!1,this.hasFooterContent=!1,this.hasFooterActions=!1,this.hasFab=!1,this.defaultMessages=void 0,this.effectiveLocale="",this.showHeaderContent=!1}onMessagesChange(){}connectedCallback(){jq(this),Ff(this),Uf(this)}async componentWillLoad(){p0(this),await zf(this)}componentDidLoad(){h0(this)}componentDidRender(){Rq(this)}disconnectedCallback(){var e;zq(this),jf(this),Bf(this),(e=this.resizeObserver)==null||e.disconnect()}effectiveLocaleChange(){Vf(this,this.effectiveLocale)}async setFocus(){await f0(this),OD(this.containerEl)}async scrollContentTo(e){var i;(i=this.panelScrollEl)==null||i.scrollTo(e)}renderHeaderContent(){const{heading:e,headingLevel:i,description:r,hasHeaderContent:n}=this,s=e?J(aW,{class:Cr.heading,level:i},e):null,o=r?J("span",{class:Cr.description},r):null;return!n&&(s||o)?J("div",{class:Cr.headerContent,key:"header-content"},s,o):null}renderActionBar(){return J("div",{class:Cr.actionBarContainer,hidden:!this.hasActionBar},J("slot",{name:iu.actionBar,onSlotchange:this.handleActionBarSlotChange}))}renderHeaderSlottedContent(){return J("div",{class:Cr.headerContent,hidden:!this.hasHeaderContent,key:"slotted-header-content"},J("slot",{name:iu.headerContent,onSlotchange:this.handleHeaderContentSlotChange}))}renderHeaderStartActions(){const{hasStartActions:e}=this;return J("div",{class:{[Cr.headerActionsStart]:!0,[Cr.headerActions]:!0},hidden:!e,key:"header-actions-start"},J("slot",{name:iu.headerActionsStart,onSlotchange:this.handleHeaderActionsStartSlotChange}))}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:r,collapsed:n,collapseDirection:s,collapsible:o,hasMenuItems:a}=this,{collapse:l,expand:u,close:p}=i,h=[pS.expand,pS.collapse];s==="up"&&h.reverse();const m=o?J("calcite-action",{"aria-expanded":Tc(!n),"aria-label":l,"data-test":"collapse",icon:n?h[0]:h[1],onClick:this.collapse,text:l,title:n?u:l}):null,y=r?J("calcite-action",{"aria-label":p,"data-test":"close",icon:pS.close,onClick:this.close,text:p,title:p}):null,g=J("slot",{name:iu.headerActionsEnd,onSlotchange:this.handleHeaderActionsEndSlotChange}),v=e||m||y||a;return J("div",{class:{[Cr.headerActionsEnd]:!0,[Cr.headerActions]:!0},hidden:!v,key:"header-actions-end"},g,this.renderMenu(),m,y)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:r}=this;return J("calcite-action-menu",{flipPlacements:["top","bottom"],hidden:!e,key:"menu",label:i.options,open:r,placement:"bottom-end"},J("calcite-action",{icon:pS.menu,slot:Ng.trigger,text:i.options}),J("slot",{name:iu.headerMenuActions,onSlotchange:this.handleHeaderMenuActionsSlotChange}))}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:r,closable:n,collapsible:s,hasMenuItems:o,hasActionBar:a}=this,l=this.renderHeaderContent(),u=e||!!l||i||r||s||n||o;return this.showHeaderContent=u,J("header",{class:Cr.header,hidden:!(u||a)},J("div",{class:{[Cr.headerContainer]:!0,[Cr.headerContainerBorderEnd]:a},hidden:!u},this.renderHeaderStartActions(),this.renderHeaderSlottedContent(),l,this.renderHeaderActionsEnd()),this.renderActionBar())}renderFooterNode(){const{hasFooterContent:e,hasFooterActions:i}=this,r=e||i;return J("footer",{class:Cr.footer,hidden:!r},J("slot",{key:"footer-slot",name:iu.footer,onSlotchange:this.handleFooterSlotChange}),J("slot",{key:"footer-actions-slot",name:iu.footerActions,onSlotchange:this.handleFooterActionsSlotChange}))}renderContent(){return J("div",{class:Cr.contentWrapper,hidden:this.collapsible&&this.collapsed,onScroll:this.panelScrollHandler,ref:this.setPanelScrollEl},J("slot",null),this.renderFab())}renderFab(){return J("div",{class:Cr.fabContainer,hidden:!this.hasFab},J("slot",{name:iu.fab,onSlotchange:this.handleFabSlotChange}))}render(){const{loading:e,panelKeyDownHandler:i,closed:r,closable:n}=this,s=J("article",{"aria-busy":Tc(e),class:Cr.container,hidden:r,onKeyDown:i,tabIndex:n?0:-1,ref:this.setContainerRef},this.renderHeaderNode(),this.renderContent(),this.renderFooterNode());return J(MD,null,e?J("calcite-scrim",{loading:e}):null,s)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return che}},[1,"calcite-panel",{closed:[1540],disabled:[516],closable:[516],collapsed:[516],collapseDirection:[1,"collapse-direction"],collapsible:[516],headingLevel:[514,"heading-level"],loading:[516],heading:[1],description:[1],menuOpen:[516,"menu-open"],messageOverrides:[1040],messages:[1040],hasStartActions:[32],hasEndActions:[32],hasMenuItems:[32],hasHeaderContent:[32],hasActionBar:[32],hasFooterContent:[32],hasFooterActions:[32],hasFab:[32],defaultMessages:[32],effectiveLocale:[32],showHeaderContent:[32],setFocus:[64],scrollContentTo:[64]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function dhe(){if(typeof customElements>"u")return;["calcite-panel","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-panel":customElements.get(e)||customElements.define(e,uhe);break;case"calcite-action":customElements.get(e)||m0();break;case"calcite-action-menu":customElements.get(e)||vk();break;case"calcite-icon":customElements.get(e)||Hf();break;case"calcite-loader":customElements.get(e)||np();break;case"calcite-popover":customElements.get(e)||G1();break;case"calcite-scrim":customElements.get(e)||cW();break}})}dhe();const phe=t=>t.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),uW=t=>t.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`),hhe=(t,e,i={})=>{if(t instanceof Element){const r=fhe(t.classList,e,i);r!==""&&(t.className=r),Object.keys(e).forEach(n=>{if(!(n==="children"||n==="style"||n==="ref"||n==="class"||n==="className"||n==="forwardedRef"))if(n.indexOf("on")===0&&n[2]===n[2].toUpperCase()){const s=n.substring(2),o=s[0].toLowerCase()+s.substring(1);dW(o)||yhe(t,o,e[n])}else t[n]=e[n],typeof e[n]==="string"&&t.setAttribute(uW(n),e[n])})}},fhe=(t,e,i)=>{const r=e.className||e.class,n=i.className||i.class,s=EC(t),o=EC(r?r.split(" "):[]),a=EC(n?n.split(" "):[]),l=[];return s.forEach(u=>{o.has(u)?(l.push(u),o.delete(u)):a.has(u)||l.push(u)}),o.forEach(u=>l.push(u)),l.join(" ")},mhe=t=>{switch(t){case"doubleclick":return"dblclick"}return t};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const dW=t=>{if(typeof document>"u")return!0;{const e="on"+mhe(t);let i=e in document;if(!i){const r=document.createElement("div");r.setAttribute(e,"return;"),i=typeof r[e]=="function"}return i}},yhe=(t,e,i)=>{const r=t.__events||(t.__events={}),n=r[e];n&&t.removeEventListener(e,n),t.addEventListener(e,r[e]=function(o){i&&i.call(this,o)})},EC=t=>{const e=new Map;return t.forEach(i=>e.set(i,i)),e},ghe=(t,e)=>{typeof t=="function"?t(e):t!=null&&(t.current=e)},vhe=(...t)=>e=>{t.forEach(i=>{ghe(i,e)})},bhe=(t,e)=>{const i=(r,n)=>$2.createElement(t,Object.assign({},r,{forwardedRef:n}));return i.displayName=e,$2.forwardRef(i)};var whe=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]]);return i};const H1=(t,e,i,r)=>{r!==void 0&&r();const n=phe(t),s=class extends $2.Component{constructor(o){super(o),this.setComponentElRef=a=>{this.componentEl=a}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(o){hhe(this.componentEl,this.props,o)}render(){const o=this.props,{children:a,forwardedRef:l,style:u,className:p,ref:h}=o,m=whe(o,["children","forwardedRef","style","className","ref"]);let y=Object.keys(m).reduce((v,w)=>{const b=m[w];if(w.indexOf("on")===0&&w[2]===w[2].toUpperCase()){const _=w.substring(2).toLowerCase();typeof document<"u"&&dW(_)&&(v[w]=b)}else{const _=typeof b;(_==="string"||_==="boolean"||_==="number")&&(v[uW(w)]=b)}return v},{});i&&(y=i(this.props,y));const g=Object.assign(Object.assign({},y),{ref:vhe(l,this.setComponentElRef),style:u});return pd.createElement(t,g,a)}static get displayName(){return n}};return e&&(s.contextType=e),bhe(s,n)},_he=H1("calcite-action"),She=H1("calcite-action-bar"),$he=H1("calcite-panel"),xhe=H1("calcite-shell"),Ehe=H1("calcite-shell-panel");function c(t,e,i,r){var n,s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,i,o):n(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}function R8e(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(p){try{u(r.next(p))}catch(h){o(h)}}function l(p){try{u(r.throw(p))}catch(h){o(h)}}function u(p){p.done?s(p.value):n(p.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}let md;function G(t){return typeof md[t]=="function"?md[t]=md[t](globalThis):md[t]}var L7,O7,A7,P7;md=(L7=globalThis.dojoConfig)!=null&&L7.has||(O7=globalThis.esriConfig)!=null&&O7.has?{...(A7=globalThis.dojoConfig)==null?void 0:A7.has,...(P7=globalThis.esriConfig)==null?void 0:P7.has}:{},G.add=(t,e,i,r)=>((r||md[t]===void 0)&&(md[t]=e),i&&G(t)),G.cache=md,G.add("big-integer-warning-enabled",!0),G.add("esri-deprecation-warnings",!0),G.add("esri-tests-disable-screenshots",!1),G.add("esri-tests-use-full-window",!1),G.add("esri-tests-post-to-influx",!0),(()=>{var e;G.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(G.add("host-browser",t),G.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),G.add("dom",t),G("host-browser")){const i=navigator,r=i.userAgent,n=i.appVersion,s=parseFloat(n);if(G.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),G.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),G.add("khtml",n.includes("Konqueror")?s:void 0),G.add("edge",parseFloat(r.split("Edge/")[1])||void 0),G.add("opr",parseFloat(r.split("OPR/")[1])||void 0),G.add("webkit",!G("wp")&&!G("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),G.add("chrome",!G("edge")&&!G("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),G.add("android",!G("wp")&&parseFloat(r.split("Android ")[1])||void 0),G.add("safari",!n.includes("Safari")||G("wp")||G("chrome")||G("android")||G("edge")||G("opr")?void 0:parseFloat(n.split("Version/")[1])),G.add("mac",n.includes("Macintosh")),!G("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));G.add(o,l),G.add("ios",l)}G("webkit")||(!r.includes("Gecko")||G("wp")||G("khtml")||G("edge")||G.add("mozilla",s),G("mozilla")&&G.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&G.add("esri-mobile",e),i&&G.add("esri-iPhone",i),G.add("esri-geolocation",!!navigator.geolocation)}G.add("esri-wasm","WebAssembly"in globalThis),G.add("esri-performance-mode-frames-between-render",20),G.add("esri-force-performance-mode",!1),G.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),G.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),G.add("esri-atomics","Atomics"in globalThis),G.add("esri-workers","Worker"in globalThis),G.add("web-feat:cache","caches"in globalThis),G.add("esri-workers-arraybuffer-transfer",!G("safari")||Number(G("safari"))>=12),G.add("workers-pool-size",8),G.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),G.add("featurelayer-simplify-payload-size-factors",[1,1,4]),G.add("featurelayer-animation-enabled",!0),G.add("featurelayer-snapshot-enabled",!0),G.add("featurelayer-snapshot-point-min-threshold",8e4),G.add("featurelayer-snapshot-point-max-threshold",4e5),G.add("featurelayer-snapshot-point-coverage",.1),G.add("featurelayer-advanced-symbols",!1),G.add("featurelayer-pbf",!0),G.add("featurelayer-pbf-statistics",!1),G.add("feature-layers-workers",!0),G.add("feature-polyline-generalization-factor",1),G.add("mapview-transitions-duration",200),G.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),G.add("mapserver-pbf-version-support",10.81),G.add("mapservice-popup-identify-max-tolerance",20),G.add("heatmap-allow-raster-fallback",!1),G.add("heatmap-force-raster",!1),G("host-webworker")||G("host-browser")&&(G.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),G.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{G.add("esri-image-decode",!0,!0,!0)}).catch(()=>{G.add("esri-image-decode",!1,!0,!0)})}return!1}),G.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();let TC=class Pp{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Pp._m}getInt(){return this._seed=(Pp._a*this._seed+Pp._c)%Pp._m,this._seed}getFloat(){return this.getInt()/(Pp._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/Pp._m*r}};TC._m=2147483647,TC._a=48271,TC._c=0;const N8e=1.5;function The(t,e){return e?t.filter((i,r,n)=>n.findIndex(e.bind(null,i))===r):Array.from(new Set(t))}function bk(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function D8e(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let r=0;r<e.length;++r)t[r]!==e[r]&&(t[r]=e[r],i=!0);return i}function F8e(t,e,i){let r,n;return i?(r=e.filter(s=>!t.some(o=>i(o,s))),n=t.filter(s=>!e.some(o=>i(o,s)))):(r=e.filter(s=>!t.includes(s)),n=t.filter(s=>!e.includes(s))),{added:r,removed:n}}function j8e(t){return t&&typeof t.length=="number"}const khe=!!Array.prototype.fill;function z8e(t,e){if(khe)return new Array(t).fill(e);const i=new Array(t);for(let r=0;r<t;r++)i[r]=e;return i}function V8e(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let r=t;r<e;r++)i[r-t]=r;return i}let pW=class{constructor(){this.last=0}};const hW=new pW;function EO(t,e,i,r){r=r||hW;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(n,i);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function fW(t,e,i,r){const n=i??t.length,s=EO(t,e,n,r);if(s!==-1)return t[s]=t[n-1],i==null&&t.pop(),e}const wo=new Set;function Ihe(t,e,i=t.length,r=e.length,n,s){if(r===0||i===0)return i;wo.clear();for(let a=0;a<r;++a)wo.add(e[a]);n=n||hW;const o=Math.max(0,n.last-10);for(let a=o;a<i;++a)if(wo.has(t[a])&&(s==null||s.push(t[a]),wo.delete(t[a]),t[a]=t[i-1],--i,--a,wo.size===0||i===0))return wo.clear(),i;for(let a=0;a<o;++a)if(wo.has(t[a])&&(s==null||s.push(t[a]),wo.delete(t[a]),t[a]=t[i-1],--i,--a,wo.size===0||i===0))return wo.clear(),i;return wo.clear(),i}function Che(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function An(t,e){return t!=null}function mW(t){return 32+t.length}function zD(){return 16}function B8e(t){if(!t)return 0;let e=gW;for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];switch(typeof r){case"string":e+=mW(r);break;case"number":e+=zD();break;case"boolean":e+=4}}return e}function Mhe(t){if(!t)return 0;if(Array.isArray(t))return Lhe(t);let e=gW;for(const i in t)t.hasOwnProperty(i)&&(e+=yW(t[i]));return e}function Lhe(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let i=vW;for(let r=0;r<e;r++)i+=yW(t[r]);return i}function yW(t){switch(typeof t){case"object":return Mhe(t);case"string":return mW(t);case"number":return zD();case"boolean":return 4;default:return 8}}function Ohe(t,e){return vW+t.length*e}const gW=32,vW=32;function G8e(t){return t instanceof ArrayBuffer}function VD(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function bW(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function wW(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function UD(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function _W(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function BD(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function SW(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function wk(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function _k(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function Ahe(t){return!("buffer"in t)}function H8e(...t){return t.reduce((e,i)=>e+(i?Ahe(i)?Ohe(i,zD()):i.byteLength+Phe:0),0)}const Phe=145,q8e=1024;function W8e(t){return _k(t)||wk(t)||BD(t)||UD(t)||VD(t)}function J8e(t){return _k(t)||wk(t)}function Z8e(t){return _k(t)?179769e303:wk(t)?3402823e32:SW(t)?4294967295:_W(t)?65535:bW(t)||wW(t)?255:BD(t)?2147483647:UD(t)?32767:VD(t)?127:256}function $W(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&$W(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function D(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=TW(t);if(e!=null)return e;if(dE(t))return t.clone();if(xW(t))return t.map(D);if(EW(t))return t.clone();const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=D(t[r]);return i}function TO(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=TW(t);if(e!=null)return e;if(xW(t)){let i=!0;const r=t.map(n=>{const s=TO(n);return n!=null&&s==null&&(i=!1),s});return i?r:null}if(dE(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!EW(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const n=t[r],s=TO(n);if(n!=null&&s==null)return null;i[r]=s}return i}return null}function dE(t){return typeof t.clone=="function"}function xW(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function EW(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function c6(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function TW(t){if(VD(t)||bW(t)||wW(t)||UD(t)||_W(t)||BD(t)||SW(t)||wk(t)||_k(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,D(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(D(i));return e}return null}function GD(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t==null?void 0:t.getTime)=="function"&&typeof(e==null?void 0:e.getTime)=="function"&&t.getTime()===e.getTime()||!1}function kW(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&bk(t,e):t instanceof Set?e instanceof Set&&Nhe(t,e):t instanceof Map?e instanceof Map&&Dhe(t,e):!!c6(t)&&c6(e)&&Rhe(t,e))}function Rhe(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function Nhe(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function Dhe(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function HD(t,e,i=!1){return CW(t,e,i)}function q1(t,e){if(e!=null)return e[t]||IW(t.split("."),!1,e)}function Ji(t,e,i){const r=t.split("."),n=r.pop(),s=IW(r,!0,i);s&&n&&(s[n]=e)}function IW(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function CW(t,e,i){return e?Object.keys(e).reduce((r,n)=>{let s=r[n],o=e[n];return s===o?r:s===void 0?(r[n]=D(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.concat():r[n]=[s]:r[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{s.includes(a)||s.push(a)}):r[n]=o.concat())):o&&typeof o=="object"?r[n]=CW(s,o,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=o),r)},t||{}):t}var R7;const Ze={apiKey:void 0,applicationName:"",applicationUrl:(R7=globalThis.location)==null?void 0:R7.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(HD(Ze,globalThis.esriConfig,!0),delete Ze.has),!Ze.assetsPath){{const t="4.28";Ze.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}Ze.defaultAssetsPath=Ze.assetsPath}const Fhe=/\{([^\}]+)\}/g;function u6(t){return t??""}function Sk(t,e){return e?t.replaceAll(Fhe,typeof e=="object"?(i,r)=>u6(q1(r,e)):(i,r)=>u6(e(r))):t}function Y8e(t,e){return t.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function qD(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function jhe(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}function K8e(t,e){return new RegExp(`{${e}}`,"ig").test(t)}const d6={info:0,warn:1,error:2,none:3};let q=class Nr{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,Nr._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Nr.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const i=Nr._loggers;return Nr._loggers=e,i},set throttlingDisabled(e){Nr._throttlingDisabled=e}}}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,Nr._loggers.get(e)||new Nr({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!Nr._throttlingDisabled){const n=this._argsToKey(r),s=this._loggedMessages[e].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=Nr._tickCounter)return;this._loggedMessages[e].set(n,Nr._tickCounter),Nr._scheduleTickCounterIncrement()}for(const n of Ze.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...r){console[e](`[${i}]`,...r)}_matchLevel(e){const i=Ze.log.level||"warn";return d6[this._parentWithMember("level",i)]<=d6[e]}_argsToKey(...e){return qD(JSON.stringify(e,(r,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]"))}static _scheduleTickCounterIncrement(){Nr._tickCounterScheduled||(Nr._tickCounterScheduled=!0,Promise.resolve().then(()=>{Nr._tickCounter++,Nr._tickCounterScheduled=!1}))}};q._loggers=new Map,q._tickCounter=0,q._tickCounterScheduled=!1,q._throttlingDisabled=!1;function zhe(t,e){return t.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>r===""?"$":(q1(r,e)??"").toString())}let MW=class{constructor(e,i,r){this.name=e,this.details=r,this.message=(i&&zhe(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},j=class LW extends MW{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return D(i)}catch{return"[object]"}}))}}catch(e){throw q.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new LW(e.name,e.message,e.details)}};j.prototype.type="error";const p6=new Set;function Vhe(t,e,i=!1){i&&p6.has(e)||(i&&p6.add(e),t.warn(`🛑 DEPRECATED - ${e}`))}function OW(t,e,i={}){if(G("esri-deprecation-warnings")){const{moduleName:r}=i;Fg(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function Yw(t,e,i={}){if(G("esri-deprecation-warnings")){const{moduleName:r}=i;Fg(t,`Property: ${(r?r+"::":"")+e}`,i)}}function Fg(t,e,i={}){if(G("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:o}=i;let a=e;r&&(a+=`
	🛠️ Replacement: ${r}`),n&&(a+=`
	⚙️ Version: ${n}`),s&&(a+=`
	🔗 See ${s} for more details.`),Vhe(t,a,o)}}function X8e(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function Uhe(t,e){for(const i of t)if(i!=null&&e(i))return i}function pE(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let $k=class kO{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(pE(e)){const r=this._getOrCreateGroup(i);for(const n of e)this._isHandle(n)&&r.push(n)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&pE(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof kO)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof kO?i.removeAll():i.remove()}};function W1(t,e){if(t==null)throw new Error(e??"value is None")}function wt(t){return t==null||t.destroy(),null}function eUe(t){return t==null||t.dispose(),null}function Xt(t){return t==null||t.remove(),null}function jg(t){return t==null||t.abort(),null}function tUe(t){return t==null||t.release(),null}function Bhe(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function Ghe(t,e){let i;return t.some((r,n)=>(i=e(r,n),i!=null)),i??void 0}const AW=Symbol("Accessor-beforeDestroy"),Hhe={remove:()=>{}};function Mt(t){return t?{remove(){t&&(t(),t=void 0)}}:Hhe}function qhe(t){t.forEach(e=>e==null?void 0:e.remove())}function J1(t){return Mt(()=>qhe(t))}function un(t){return t.__accessor__??null}function Whe(t,e){var i;return((i=t==null?void 0:t.metadatas)==null?void 0:i[e])!=null}function W$(t,e,i){return i?hE(t,e,{policy:i,path:""}):hE(t,e,null)}function hE(t,e,i){return e?Object.keys(e).reduce((r,n)=>{const s=n;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=D(e[s]),r;let l=r[s],u=e[s];if(l===u)return r;if(Array.isArray(u)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.concat():r[s]=[l]:r[s]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(p=>{l.includes(p)||l.push(p)}));else if(u&&typeof u=="object")if(i){const p=i.path;i.path=o,r[s]=hE(l,u,i),i.path=p}else r[s]=hE(l,u,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[s]=u);return r},t||{}):t}function PW(t){return Array.isArray(t)?t:t.split(".")}function h6(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function Jhe(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...h6(i));return e}return h6(t)}function RW(t,e,i,r){const n=Jhe(e);if(n.length!==1){const s=n.map(o=>r(t,o,i));return J1(s)}return r(t,n[0],i)}function NW(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=un(e);return Whe(r,i)?r.get(i):e[i]}function DW(t,e,i){if(t==null)return t;const r=NW(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:DW(r,e,i+1)}function Z1(t,e,i=0){return typeof e!="string"||e.includes(".")?DW(t,PW(e),i):NW(e,t)}function Hr(t,e){return Z1(t,e)}function f6(t,e){return Z1(e,t)!==void 0}function Y1(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=D(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function xk(t,e){const i=Y1(t);let r=i[e];return r||(r=i[e]={}),r}function Zhe(t,e){return W$(t,e,Khe)}const Yhe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Khe(t){return Yhe.test(t)?"replace":"merge"}function Qhe(t){return(t==null?void 0:t.release)&&typeof t.release=="function"}function Xhe(t){return(t==null?void 0:t.acquire)&&typeof t.acquire=="function"}let Wf=class IO{constructor(e,i,r,n=1,s=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(IO.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):Xhe(i)&&i.acquire(...e),i}release(e){e&&!IO.test.disabled&&(this._releaseFunction?this._releaseFunction(e):Qhe(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};Wf.test={disabled:!1};var Sc;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(Sc||(Sc={}));let efe=class{constructor(e,i){this._observers=e,this._observer=i}remove(){Che(this._observers,this._observer)}},FW=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return tfe;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let o=0;o<s;++o){const a=i[o];if(a.destroyed)n=!0;else if(a===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new efe(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const tfe=Mt();var Ie;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Ie||(Ie={}));const CO=Ie.USER+1;function yd(t){switch(t){case"defaults":return Ie.DEFAULTS;case"service":return Ie.SERVICE;case"portal-item":return Ie.PORTAL_ITEM;case"web-scene":return Ie.WEB_SCENE;case"web-map":return Ie.WEB_MAP;case"link-chart":return Ie.LINK_CHART;case"user":return Ie.USER;default:return null}}function fE(t){switch(t){case Ie.DEFAULTS:return"defaults";case Ie.SERVICE:return"service";case Ie.PORTAL_ITEM:return"portal-item";case Ie.WEB_SCENE:return"web-scene";case Ie.WEB_MAP:return"web-map";case Ie.LINK_CHART:return"link-chart";case Ie.USER:return"user"}}function ife(t){return fE(t)}var pt;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(pt||(pt={}));const mE={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},Ev=[];let qb=mE;function Se(t){qb.onObservableAccessed(t)}let J$=!1,Z$=!1;function zc(t,e,i){if(J$)return WD(t,e,i);jW(t);const r=e.call(i);return zW(),r}function rfe(t,e){return zc(mE,t,e)}function WD(t,e,i){const r=J$;J$=!0,jW(t);let n=null;try{n=e.call(i)}catch(s){Z$&&q.getLogger("esri.core.accessorSupport.tracking").error(s)}return zW(),J$=r,n}function jW(t){qb=t,Ev.push(t)}function zW(){const t=Ev.length;if(t>1){const e=Ev.pop();qb=Ev[t-2],e.onTrackingEnd()}else if(t===1){const e=Ev.pop();qb=mE,e.onTrackingEnd()}else qb=mE}function VW(t,e){if(e.flags&pt.DepTrackingInitialized)return;const i=Z$;Z$=!1,e.flags&pt.AutoTracked?WD(e,e.metadata.get,t):UW(t,e),Z$=i}const nfe=[];function UW(t,e){e.flags&pt.ExplicitlyTracking||(e.flags|=pt.ExplicitlyTracking,WD(e,()=>{const i=e.metadata.dependsOn||nfe;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=PW(r);for(let s=0,o=t;s<n.length&&o!=null&&typeof o=="object";++s)o=m6(o,n[s],s!==n.length-1)}else m6(t,r,!1)}),e.flags&=~pt.ExplicitlyTracking)}function m6(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=un(t);if(n){const s=n.propertiesByName.get(r);s&&(Se(s),VW(t,s))}return i?t[r]:void 0}let y6=class extends FW{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this._accessed=null,this._handles=null,this.flags=0,this.flags=pt.Dirty|(i.nonNullable?pt.NonNullable:0)|(i.hasOwnProperty("value")?pt.HasDefaultValue:0)|(i.get===void 0?pt.DepTrackingInitialized:0)|(i.dependsOn===void 0?pt.AutoTracked:0)}destroy(){this.flags&pt.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){Se(this);const i=e.store,r=this.propertyName,n=this.flags,s=i.get(r);if(n&pt.Computing||~n&pt.Dirty&&i.has(r))return s;this.flags|=pt.Computing;const o=e.host;let a;n&pt.AutoTracked?a=zc(this,this.metadata.get,o):(UW(o,this),a=this.metadata.get.call(o)),i.set(r,a,Ie.COMPUTED);const l=i.get(r);return l===s?this.flags&=~pt.Dirty:rfe(this.commit,this),this.flags&=~pt.Computing,l}onObservableAccessed(e){if(e===this)return;let i=this._accessed;if(i==null)i=[],this._accessed=i;else if(i.includes(e))return;i.push(e)}onTrackingEnd(){this._clearObservationHandles(),this.flags|=pt.DepTrackingInitialized;const e=this._accessed;if(e==null||e.length===0)return;let i=this._handles;i==null&&(i=[],this._handles=i);for(let r=0;r<e.length;++r)i.push(e[r].observe(this));e.length=0}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~pt.Dirty,this.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}onInvalidated(){~this.flags&pt.Overriden&&(this.flags|=pt.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}},sfe=class BW{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new BW;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,D(r))}),i}get(e){return this._values.get(e)}originOf(){return Ie.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function hS(t,e,i){return t!==void 0}function g6(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&pt.NonNullable)||(r.lifecycle,Sc.INITIALIZING,!1))}function ofe(t){return t&&typeof t.destroy=="function"}q.getLogger("esri.core.accessorSupport.Properties");let afe=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Sc.INITIALIZING,this.store=new sfe,this._origin=Ie.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new y6(r,i[r]);this.propertiesByName.set(r,n)}this.metadatas=i}initialize(){this.lifecycle=Sc.CONSTRUCTING}constructed(){this.lifecycle=Sc.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.propertiesByName){if(i.metadata.autoDestroy){const r=this.internalGet(e);r&&ofe(r)&&(r.destroy(),~i.flags&pt.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==Sc.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);Se(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&pt.HasDefaultValue)return"defaults"}return fE(i)}has(e){return!!this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(hS(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);hS(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!hS(n))return"";const s=new Set,o=zc({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=n.metadata.get)==null?void 0:l.call(e)});let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;if(s.size===0)return a;r+="  ";for(const l of s)l instanceof y6&&(a+=`${r}${l.propertyName}: undefined
`);return a}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(hS(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&pt.Overriden)}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&pt.Overriden&&(i.flags&=~pt.Overriden,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!g6(r,e,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:o,value:a}=s;if(kC.release(s),!o)return;i=a}r.flags|=pt.Overriden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!g6(r,e,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:a,value:l}=o;if(kC.release(o),!a)return;i=l}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=yd(e)}getDefaultOrigin(){return fE(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==Sc.INITIALIZING?this._origin:Ie.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,s=e.propertyName;n.has(s,r)&&GD(i,n.get(s))&&~e.flags&pt.Overriden&&r===n.originOf(s)||(e.invalidate(),n.set(s,i,r),e.commit(),VW(this.host,e))}_cast(e,i){const r=kC.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},lfe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const kC=new Wf(lfe);function yE(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))yE(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(-1,1)[0];return void yE(Hr(t,n),s,i)}const r=t.__accessor__;r!=null&&cfe(e,r),t[e]=i}}function cfe(t,e){if(G("esri-unknown-property-errors")&&!ufe(t,e))throw new j("set:unknown-property",dfe(t,e))}function ufe(t,e){return e.metadatas[t]!=null}function dfe(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let pfe;function hfe(){return pfe}var v6;(function(t){t[t.Ignore=0]="Ignore",t[t.Destroy=1]="Destroy",t[t.ThrowError=2]="ThrowError"})(v6||(v6={}));function ffe(t){t.length=0}let ln=class{constructor(e=50,i=50){this._pool=new Wf(Array,void 0,ffe,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return IC.acquire()}static release(e){return IC.release(e)}static prune(){IC.prune()}};const IC=new ln(100);let GW=class extends Wf{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const fS=[];function gE(t){fS.push(t),fS.length===1&&queueMicrotask(()=>{const e=fS.slice();fS.length=0;for(const i of e)i()})}let Wb=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var MO;(function(t){const e=(s,o,a,l)=>{let u=o,p=o;const h=a>>>1,m=s[u-1];for(;p<=h;){p=u<<1,p<a&&l(s[p-1],s[p])<0&&++p;const y=s[p-1];if(l(y,m)<=0)break;s[u-1]=y,u=p}s[u-1]=m},i=(s,o)=>s<o?-1:s>o?1:0;function r(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let p=a>>>1;p>o;p--)e(s,p,a,l);const u=o+1;for(let p=a-1;p>o;p--){const h=s[o];s[o]=s[p],s[p]=h,e(s,u,p,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let p=a>>>1;p>o;p--)e(s,p,a,l),yield;const u=o+1;for(let p=a-1;p>o;p--){const h=s[o];s[o]=s[p],s[p]=h,e(s,u,p,l),yield}}t.sort=r,t.iterableSort=n})(MO||(MO={}));const b6=MO,mfe=1.5,yfe=1.1;let ef=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new pW,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>w6(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,w6(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=EO(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(EO(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=Ihe(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){b6.sort(this.data,0,this.length,e)}iterableSort(e){return b6.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){for(let r=0;r<this.length;++r){const n=this.data[r];if(e.call(i,n,r))return n}}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const r=this.length,n=this.data;for(let s=0;s<r;++s)e.call(i,n[s],s,n)}forEach(e,i){for(let r=0;r<this.length;++r)e.call(i,this.data[r],r,this.data)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}};function w6(t){t.data.length>mfe*t.length&&(t.data.length=Math.floor(t.length*yfe))}function gfe(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return Mt(()=>t.clearTimeout(r))}}}const y0=gfe(globalThis);function Ek(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function g0(t,e,i){if(!Ek(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const r=e.slice();for(const n of r)t.addEventListener(n,i);return Mt(()=>{for(const n of r)t.removeEventListener(n,i)})}return t.addEventListener(e,i),Mt(()=>t.removeEventListener(e,i))}function HW(t,e,i){if(!Ek(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=g0(t,e,n=>{r.remove(),i.call(t,n)});return r}const vfe={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function K1({key:t}){return vfe[t]||t}function mt(t="Aborted"){return new j("AbortError",t)}function kt(t,e="Aborted"){if(pa(t))throw mt(e)}function Tk(t){return t!=null?"aborted"in t?t:t.signal:t}function pa(t){const e=Tk(t);return e!=null&&e.aborted}function sl(t){if(hr(t))throw t}function _6(t){if(!hr(t))throw t}function ys(t,e){const i=Tk(t);if(i!=null){if(!i.aborted)return HW(i,"abort",()=>e());e()}}function JD(t,e){const i=Tk(t);if(i!=null)return kt(i),HW(i,"abort",()=>e(mt()))}function bfe(t,e){return Tk(e)==null?t:new Promise((i,r)=>{let n=ys(e,()=>r(mt()));const s=()=>{n=Xt(n)};t.then(s,s),t.then(i,r)})}function hr(t){return(t==null?void 0:t.name)==="AbortError"}async function LO(t){try{return await t}catch(e){if(!hr(e))throw e;return}}async function kk(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(o=>t[o]),n=await kk(r),s={};return i.map((o,a)=>s[o]=n[a]),s}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,n)=>{const s=i[n];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function wfe(t){return(await kk(t)).filter(e=>!!e.value).map(e=>e.value)}async function dUe(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function pUe(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function qW(t,e=void 0,i){const r=new AbortController;return ys(i,()=>r.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(e)},t);ys(r,()=>{o&&(clearTimeout(o),s(mt()))})})}function Zc(t){return t&&typeof t.then=="function"}function OO(t){return Zc(t)?t:Promise.resolve(t)}function Q1(t,e=-1){let i,r,n,s,o=null;const a=(...l)=>{if(i){r=l,s&&s.reject(mt()),s=xs();const m=s.promise;if(o){const y=o;o=null,y.abort()}return m}if(n=s||xs(),s=null,e>0){const m=new AbortController;i=OO(t(...l,m.signal));const y=i;qW(e).then(()=>{i===y&&(s?m.abort():o=m)})}else i=1,i=OO(t(...l));const u=()=>{const m=r;r=n=i=o=null,m!=null&&a(...m)},p=i,h=n;return p.then(u,u),p.then(h.resolve,h.reject),h.promise};return a}function xs(){let t,e;const i=new Promise((n,s)=>{t=n,e=s}),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,s)=>y0.setTimeout(()=>r.reject(s),n),r.promise=i,r}async function S6(t){await Promise.resolve(),kt(t)}function hUe(t){return t}function fUe(t){return 1e3*t}function mUe(t){return t}let _fe=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},Sfe=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},AO=0;const K0={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},PO=["prepare","preRender","render","postRender","update","finish"],RO=[],bf=new ef;let $fe=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const vE={frameTasks:bf,willDispatch:!1,clearFrameTasks:xfe,dispatch:ZW,executeFrameTasks:Efe};function v0(t){const e=new Sfe(t);return RO.push(e),vE.willDispatch||(vE.willDispatch=!0,gE(ZW)),e}function zg(t){const e=new _fe(t);return bf.push(e),bE==null&&(AO=performance.now(),bE=requestAnimationFrame(WW)),new $fe(e)}let bE=null;function xfe(t=!1){bf.forAll(e=>{e.removed=!0}),t&&JW()}function WW(){const t=performance.now();bE=null,bE=bf.length>0?requestAnimationFrame(WW):null,vE.executeFrameTasks(t)}function Efe(t){const e=t-AO;AO=t;const i=1e3/60,r=Math.max(0,e-i);K0.time=t,K0.frameDuration=i-r;for(let n=0;n<PO.length;n++){const s=performance.now(),o=PO[n];bf.forAll(a=>{var l;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(K0.elapsedFrameTime=performance.now()-t,K0.deltaTime=a.ticks===0?0:e,(l=a.phases[o])==null||l.call(a,K0)))}),Tfe[n].record(performance.now()-s)}JW(),kfe.record(performance.now()-t)}const mS=new ef;function JW(){bf.forAll(t=>{t.removed&&mS.push(t)}),bf.removeUnorderedMany(mS.data,mS.length),mS.clear()}function ZW(){for(;RO.length;){const t=RO.shift();t.isActive&&t.callback()}vE.willDispatch=!1}function bUe(t=1,e){const i=xs(),r=()=>{pa(e)?i.reject(mt()):t===0?i():(--t,gE(()=>r()))};return r(),i.promise}const Tfe=PO.map(t=>new Wb(t)),kfe=new Wb("total");function Ife(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}function $6(t,e){if(!e)return t;for(const i of e)t.add(i);return t}function Cfe(t,e){const i=new Set;return $6(i,t),$6(i,e),i}function wUe(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function _Ue(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function SUe(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function $Ue(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}let Mfe=0;function Jb(){return++Mfe}let Ik=class{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new Lfe(e),x6.register(this,new WeakRef(this._observerObject),this)}destroy(){var e;x6.unregister(this._observerObject),this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,r=this._observerObject;for(let n=0;n<i.length;++n)e.push(i[n].observe(r));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},Lfe=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Ofe}};const x6=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function Ofe(){}let dg=!1;const wE=[];function YW(t,e){let i=new Ik(s),r=null,n=!1;function s(){if(!i||n)return;if(dg)return void XW(s);const a=r;i.clear(),dg=!0,n=!0,r=zc(i,t),n=!1,dg=!1,e(r,a),eJ()}function o(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=zc(i,t),n=!1,Mt(o)}function KW(t,e){let i=new Ik(n),r=null;function n(){e(r,o)}function s(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=zc(i,t),r):null}return o(),Mt(s)}function QW(t){let e=new Ik(r),i=!1;function r(){e&&!i&&(dg?XW(r):(e.clear(),dg=!0,i=!0,zc(e,t),i=!1,dg=!1,eJ()))}function n(){e&&(e.destroy(),e=null)}return i=!0,zc(e,t),i=!1,Mt(n)}function XW(t){wE.includes(t)||wE.unshift(t)}function eJ(){for(;wE.length;)wE.pop()()}var Zb;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(Zb||(Zb={}));let Kw=class{constructor(){this.uid=Jb(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,s){return this.pool.acquire(Zb.Untracked,e,i,r,n,s,GD)}static acquireTracked(e,i,r,n){return this.pool.acquire(Zb.Tracked,e,i,r,null,null,n)}notify(e,i){this.type===Zb.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,s,o,a){this.uid=Jb(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Jb(),this.removed=!0}};Kw.pool=new GW(Kw);const Y$=new ln,kc=new Set;let _E;function SE(t){kc.delete(t),kc.add(t),_E||(_E=v0(Rfe))}function Afe(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function Pfe(t){for(const e of kc.values())e.target===t&&(e.removed=!0)}function Rfe(){let t=10;for(;_E&&t--;){_E=null;const e=Nfe(),i=Y$.acquire();for(const r of e){const n=r.uid;Afe(r),n===r.uid&&r.removed&&i.push(r)}for(const r of kc)r.removed&&(i.push(r),kc.delete(r));for(const r of i)Kw.pool.release(r);Y$.release(i),Y$.release(e),NO.forEach(r=>r())}}function Nfe(){const t=Y$.acquire();t.length=kc.size;let e=0;for(const i of kc)t[e]=i,++e;return kc.clear(),t}const NO=new Set;function Dfe(t){return NO.add(t),Mt(()=>NO.delete(t))}function Ffe(t,e,i){let r=RW(t,e,i,(n,s,o)=>{let a,l,u=KW(()=>Z1(n,s),(p,h)=>{n.__accessor__.destroyed||a&&a.uid!==l?r.remove():(a||(a=Kw.acquireUntracked(p,o,h,n,s),l=a.uid),SE(a))});return Mt(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,SE(a)),a=null),r=u=null})});return r}function jfe(t,e,i){const r=RW(t,e,i,(n,s,o)=>{let a=!1;return YW(()=>Z1(n,s),(l,u)=>{n.__accessor__.destroyed?r.remove():a||(a=!0,GD(u,l)||o.call(n,l,u,s,n),a=!1)})});return r}function zfe(t,e,i,r=!1){return!t.__accessor__||t.__accessor__.destroyed?Mt():r?jfe(t,e,i):Ffe(t,e,i)}function Vfe(t,e,i){let r,n,s=KW(t,(o,a)=>{r&&r.uid!==n?s.remove():(r||(r=Kw.acquireTracked(o,e,a,i),n=r.uid),SE(r))});return Mt(()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,SE(r)),r=null),s=null})}function Ufe(t,e,i){let r=!1;return YW(t,(n,s)=>{r||(r=!0,i(s,n)||e(n,s),r=!1)})}function Bfe(t,e,i=!1,r=kW){return i?Ufe(t,e,r):Vfe(t,e,r)}function E6(t){return Ife(kc,e=>e.oldValue===t)}function Ck(t,e){for(const[i,r]of t)if(e(r,i))return!0;return!1}function ZD(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}const pg=q.getLogger("esri.core.accessorSupport.ensureTypes");function Gfe(t){return t==null?t:new Date(t)}function Hfe(t){return t==null?t:!!t}function X1(t){return t==null?t:t.toString()}function Xs(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function YD(t){return t==null?t:Math.round(parseFloat(t))}function tJ(t){return(t==null?void 0:t.constructor)&&t.constructor.__accessorMetadata__!==void 0}function $E(t,e){return e!=null&&t&&!(e instanceof t)}function iJ(t){return t&&"isCollection"in t}function T6(t){return t!=null&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function qfe(t,e){if(!(e!=null&&e.constructor)||!iJ(e.constructor))return DO(t,e)?e:new t(e);const i=T6(t.prototype.itemType),r=T6(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(DO(t,e),e):new t(e):e}function DO(t,e){return!!tJ(e)&&(pg.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+Lk(t)+"'"),!0)}function Mk(t,e){return e==null?e:iJ(t)?qfe(t,e):$E(t,e)?DO(t,e)?e:new t(e):e}function Lk(t){var e;return((e=t==null?void 0:t.prototype)==null?void 0:e.declaredClass)||"unknown"}const Wfe=new WeakMap;function Jfe(t){switch(t){case Number:return Xs;case ft:return YD;case Boolean:return Hfe;case String:return X1;case Date:return Gfe;default:return ZD(Wfe,t,()=>Mk.bind(null,t))}}function ei(t,e){const i=Jfe(t);return arguments.length===1?i:i(e)}function Qw(t,e,i){return arguments.length===1?Qw.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function Zfe(t,e){return arguments.length===1?Qw(i=>ei(t,i)):Qw(i=>ei(t,i),e)}function rJ(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>rJ(t,e-1,r)):t(i)}function xE(t,e,i){if(arguments.length===2)return s=>xE(t,e,s);if(!i)return i;i=rJ(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function Yfe(t,e,i){return arguments.length===2?xE(r=>ei(t,r),e):xE(r=>ei(t,r),e,i)}function nJ(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function FO(t,e){if(arguments.length===2)return FO(t).call(null,e);const i=new Set,r=t.filter(a=>typeof a!="function"),n=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,p=u==="string"||u==="number";return p&&(i.has(a)||n.some(h=>u==="string"&&h===String||u==="number"&&h===Number))||u==="object"&&n.some(h=>!$E(a,h))?a:(p&&r.length?(s||(s=r.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),pg.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(h=>Lk(h)).join(", ")),pg.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):pg.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function bl(t,e){if(arguments.length===2)return bl(t).call(null,e);const i={},r=[],n=[];for(const l in t.typeMap){const u=t.typeMap[l];i[l]=ei(u),r.push(Lk(u)),n.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!$E(t.base,l)||l==null)return l;const u=a(l)||t.defaultKeyValue,p=i[u];if(!p)return pg.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!$E(t.typeMap[u],l))return l;if(typeof t.key=="string"&&!tJ(l)){const h={};for(const m in l)m!==t.key&&(h[m]=l[m]);return p(h)}return p(l)}}let ft=class{};const IUe={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function Kfe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function sJ(t){switch(t.type){case"native":return ei(t.value);case"array":return Qw(sJ(t.value));case"one-of":return Qfe(t);default:return null}}function Qfe(t){let e=null;return(i,r)=>zO(i,t)?i:(e==null&&(e=jO(t)),pg.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function jO(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case ft:return"integer";case Date:return"date";default:return Lk(t.value)}case"array":return`array of ${jO(t.value)}`;case"one-of":{const e=t.values.map(i=>jO(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function zO(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case ft:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!zO(i,e.value));case"one-of":return e.values.some(i=>zO(t,i))}}function d(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=xk(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&q.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,u=typeof s=="string"?null:s.overridable===!0;let p;n.dependsOn=[l],n.get=function(){let h=Hr(this,l);if(typeof h=="function"){p||(p=l.split(".").slice(0,-1).join("."));const m=Hr(this,p);m&&(h=h.bind(m))}return h},n.readOnly||(n.set=u?function(h){this._override(i,h)}:function(h){yE(this,l,h)})}const o=t.type,a=t.types;n.cast||(o?n.cast=Xfe(o):a&&(Array.isArray(a)?n.cast=Qw(bl(a[0])):n.cast=bl(a))),Zhe(n,t),t.range&&(n.cast=eme(n.cast,t.range))}}function oJ(t,e,i){const r=xk(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function Xfe(t){let e=0,i=t;if(Kfe(t))return sJ(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(nJ(r))return e===0?FO(r):xE(FO(r),e);if(e===1)return Zfe(r);if(e>1)return Yfe(r,e);const n=t;return n.from?n.from:ei(n)}function eme(t,e){return i=>{let r=+t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function tme(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach(s=>{e[s]=n}),delete e[r]}}}let po=class extends MW{constructor(e,i,r){super(e,i,r)}};po.prototype.type="warning";function aJ(t){var e;return!!t&&((e=t.prototype)==null?void 0:e.declaredClass)&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const VO=q.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function k6(t,e,i){var r,n;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((n=e.read)==null?void 0:n.enabled)===!1||nme(t)&&Ji("read.reader",b0(t),e))}function b0(t){var i,r;const e=t.ndimArray??0;if(e>1)return rme(t);if(e===1)return I6(t);if("type"in t&&cJ(t.type)){const n=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,s=I6(typeof n=="function"?{type:n}:{types:n});return(o,a,l)=>{const u=s(o,a,l);return u&&new t.type(u)}}return KD(t)}function KD(t){return"type"in t?ime(t.type):sme(t.types)}function ime(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void VO.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function lJ(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(n=>lJ(t,n,i,r-1)):t(e,void 0,i)}function rme(t){const e=KD(t),i=lJ.bind(null,e),r=t.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=i(n,o,r);let a=r,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)n=[n];return n}}function I6(t){const e=KD(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=e(i,void 0,n);return s!==void 0?[s]:void 0}}function cJ(t){if(!aJ(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?QD(e.Type):uJ(e.Type))}function nme(t){return"types"in t?uJ(t.types):QD(t.type)}function QD(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||cJ(t))}function uJ(t){for(const e in t.typeMap)if(!QD(t.typeMap[e]))return!1;return!0}function sme(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void VO.error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=ome(t));const l=t.key;if(typeof l!="string")return;const u=n[l],p=u?e[u]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!p){const m=`Type '${u||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new po(`${i}:unsupported`,m,{definition:n,context:o})),void VO.error(m)}const h=new p;return h.read(n,o),r?r(h):h}}function ome(t){var i,r;const e={};for(const n in t.typeMap){const s=t.typeMap[n],o=Y1(s.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;(i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(e[a.json.type[0]]=s);const l=(r=a.json)==null?void 0:r.write;if(!(l!=null&&l.writer)){e[n]=s;continue}const u=l.target,p=typeof u=="string"?u:t.key,h={};l.writer(n,h,p),h[p]&&(e[h[p]]=s)}return e}function ame(t){if(t.json||(t.json={}),M6(t.json),L6(t.json),C6(t.json),t.json.origins)for(const e in t.json.origins)M6(t.json.origins[e]),L6(t.json.origins[e]),C6(t.json.origins[e]);return!0}function C6(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function M6(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function L6(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function O6(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&aJ(t.type))?e.write.writer=ume:i>1?e.write.writer=dme(i):e.types?Array.isArray(e.types)?e.write.writer=cme(e.types[0]):e.write.writer=lme(e.types):e.write.writer=Xw}function lme(t){return(e,i,r,n)=>e?dJ(e,t,n)?Xw(e,i,r,n):void 0:Xw(e,i,r,n)}function dJ(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new j(`${r}:unsupported`,n,{definition:t,context:i})),q.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function cme(t){return(e,i,r,n)=>!e||!Array.isArray(e)?Xw(e,i,r,n):Xw(e.filter(s=>dJ(s,t,n)),i,r,n)}function Xw(t,e,i,r){Ji(i,EE(t,r),e)}function EE(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?TE(t):t}function TE(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function ume(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(s=>EE(s,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[EE(t,r)],Ji(i,n,e)}function pJ(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>pJ(r,e,i-1)):EE(t,e)}function dme(t){return(e,i,r,n)=>{let s;if(e===null)s=null;else{s=pJ(e,n,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}Ji(r,s,i)}}function pme(t,e){return XD(t,"any",e==null?void 0:e.origin)}function UO(t,e){return XD(t,"read",e==null?void 0:e.origin)}function hJ(t,e){return XD(t,"write",e==null?void 0:e.origin)}function XD(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}function hme(t){const e=fme(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],n=r.types?mme(r):e;k6(n,r,!1),r.types&&!r.write&&t.json.write&&t.json.write.enabled&&(r.write={...t.json.write}),O6(n,r)}k6(e,t.json,!0),O6(e,t.json)}function fme(t){return t.json.types?BO(t.json):t.type?fJ(t):BO(t)}function mme(t){return t.type?fJ(t):BO(t)}function fJ(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!nJ(i);)i=i[0],e++;return{type:i,ndimArray:e}}function BO(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function yme(t){ame(t)&&(tme(t),hme(t))}const CC=new Set,MC=new Set;function k(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,vme(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!CC.has(n.initialize)&&(CC.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!MC.has(n.destroy)&&(MC.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);CC.clear(),MC.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const u=this[AW];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,u.call(this);for(let p=0;p<r.length;p++)r[p].call(this)}}})}this.postscript(...a)}}};s.__accessorMetadata__=Y1(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function gme(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;Se(r);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function vme(t){const e=t.prototype,i=Y1(e),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];yme(s),r[n]={enumerable:!0,configurable:!0,get:gme(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(a.lifecycle===Sc.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);a.set(n,o)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}var mJ,yJ;function bme(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const yu=Symbol("Accessor-Handles"),GO=Symbol("Accessor-Initialized");let de=class gJ{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}Y1(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...u){const p=this.inherited;let h;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};try{h=l.apply(this,u)}catch(m){throw this.inherited=p,m}return this.inherited=p,h}:e[a]}for(const a in i){const l=bme(i[a]);d(l)(o.prototype,a)}return k(r)(o)}constructor(...e){if(this[mJ]=null,this[yJ]=!1,this.constructor===gJ)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new afe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&this.normalizeCtorArgs&&(i.ctorArgs=this.normalizeCtorArgs.apply(this,e))}postscript(e){const i=this.__accessor__,r=i.ctorArgs||e;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[GO]=!0}initialize(){}[AW](){this[yu]=wt(this[yu])}destroy(){var e;this.destroyed||(Pfe(this),this.__accessor__.destroy(),(e=hfe())==null||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[GO]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){Hr(this,e)}get(e){return OW(q.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Hr(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return yE(this,e,i),this}watch(e,i,r){return zfe(this,e,i,r)}addHandles(e,i){if(this.destroyed){const n=Array.isArray(e)?e:[e];for(const s of n)s.remove();return}let r=this[yu];r==null&&(r=this[yu]=new $k),r.add(e,i)}removeHandles(e){const i=this[yu];i!=null&&i.remove(e)}removeAllHandles(){const e=this[yu];e!=null&&e.removeAll()}hasHandles(e){const i=this[yu];return i!=null&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};mJ=yu,yJ=GO;let wme=class vJ{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new vJ;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,D(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Ie.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>{var n;return((n=this._values.get(r))==null?void 0:n.origin)===e})}set(e,i,r){if((r=this._normalizeOrigin(r))===Ie.DEFAULTS){const n=this._values.get(e);if((n==null?void 0:n.origin)!=null&&n.origin>r)return}this._values.set(e,new _me(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===Ie.DEFAULTS?e:Ie.USER}},_me=class{constructor(e,i){this.value=e,this.origin=i}};function bJ(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),Ie.DEFAULTS)});const r=t.metadatas;Object.keys(r).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),Ie.DEFAULTS)})}function Sme(t,e,i){if(!(t!=null&&t.read)||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&f6(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.indexOf(e)===0&&f6(n,i))return!0;return!1}function $me(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function xme(t,e,i,r,n){let s=UO(e[i],n);$me(s)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))s=UO(e[o],n),Sme(s,i,r)&&(t[o]=!0)}function Eme(t,e,i,r){const n=i.metadatas,s=pme(n[e],r),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const wJ={origin:"service"};function _J(t,e,i=wJ){if(!e||typeof e!="object")return;const r=un(t),n=r.metadatas,s={};for(const o of Object.getOwnPropertyNames(e))xme(s,n,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=UO(n[o],i).read,l=a==null?void 0:a.source;let u;u=l&&typeof l=="string"?Z1(e,l):e[o],a!=null&&a.reader&&(u=a.reader.call(t,u,e,i)),u!==void 0&&r.set(o,u)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||Eme(t,o,r,i)}r.setDefaultOrigin("user")}function SJ(t,e,i,r=wJ){var s;const n={...r,messages:[]};i(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||t.loaded?r!=null&&r.messages&&r.messages.push(o):t.loadWarnings.push(o)})}function Tme(t,e,i,r,n){var o,a;const s={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,r,s,i,n),s}function $J(t,e,i,r,n,s){if(!(r!=null&&r.write))return!1;const o=Hr(t,i);if(!n&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,s??void 0);a!==void 0&&(n=a)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new j("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&q.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Ie.DEFAULTS)&&kme(t,i,s,r,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&e.store.multipleOriginsSupported&&e.store.originOf(i)<yd(s.origin))}function kme(t,e,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(t,e,i??void 0);return bk(o,n)}return!1}return s===n}function Ime(t,e,i,r){const n=un(t),s=n.metadatas,o=hJ(s[e],r);return!!o&&$J(t,n,e,o,i,r)}function xJ(t,e,i){var s,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return W$(e,t.toJSON(i));const r=un(t),n=r.metadatas;for(const a in n){const l=hJ(n[a],i);if(!$J(t,r,a,l,void 0,i))continue;const u=Hr(t,a),p=Tme(t,l,l.write&&typeof l.write.target=="string"?l.write.target:a,u,i);Object.keys(p).length>0&&(e=W$(e,p),(o=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>W$(e,p,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:a,oldOrigin:ife(r.store.originOf(a)),newOrigin:i.origin}))}return e}const w0=t=>{let e=class extends t{constructor(...i){super(...i);const r=un(this),n=r.store,s=new wme;r.store=s,bJ(r,n,s)}read(i,r){_J(this,i,r)}write(i,r){return xJ(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Cme.call(this,i,r)}};return e=c([k("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Cme(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}function kE(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}let B=class extends w0(de){};B=c([k("esri.core.JSONSupport")],B);const Mme=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Lme={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function A6(t){const e=t==null?void 0:t.match(Mme);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let s=null,o=null,a=null;const{devext:l,qaext:u,www:p}=Lme;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}else({customBaseUrl:o,portalHostname:a}=p);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=u);break;case"www":({customBaseUrl:o,portalHostname:a}=p);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function Ome(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function Ame(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function Pme(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const Rme=q.getLogger("esri.core.urlUtils"),_0=Ze.request,P6="esri/config: esriConfig.request.proxyUrl is not set.",EJ=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,TJ=/^\s*http:/i,Nme=/^\s*https:/i,Dme=/^\s*file:/i,Fme=/:\d+$/,jme=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,zme=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Vme=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let Pd=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(zme);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Vme),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const yS={},Ume=new Pd(Ze.applicationUrl);let Br=Ume;const Bme=Gme();let e5=Bme;const t5=()=>Br,AUe=()=>e5;function Gme(){const t=Br.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${Br.scheme}://${Br.host}${Br.port!=null?`:${Br.port}`:""}`}${e}`}function mi(t){if(!t)return null;const e={path:null,query:null},i=new Pd(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,r),e.query=i5(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function i5(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let s,o;n<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,n)),o=decodeURIComponent(r.slice(n+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function e1(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=e==null?void 0:e[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>kE(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):kE(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function Hme(t=!1){let e,i=_0.proxyUrl;if(typeof t=="string"){e=Xme(t);const r=Ok(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw Rme.warn(P6),new j("urlutils:proxy-not-set",P6);return e&&HO()&&(i=a5(i)),mi(i)}function qme(t){const e=Ok(t);let i,r;if(e){const n=r5(e.proxyUrl);i=n.path,r=n.query?i5(n.query):null}if(i){const n=mi(t);t=i+"?"+n.path;const s=e1({...r,...n.query});s&&(t=`${t}?${s}`)}return t}const Q0={path:"",query:""};function r5(t){const e=t.indexOf("?");return e!==-1?(Q0.path=t.slice(0,e),Q0.query=t.slice(e+1)):(Q0.path=t,Q0.query=null),Q0}function kJ(t){return t=(t=CE(t=nye(t=r5(t).path),!0)).toLowerCase()}function Wme(t){const e={proxyUrl:t.proxyUrl,urlPrefix:kJ(t.urlPrefix)},i=_0.proxyRules,r=e.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;n=s;break}o.indexOf(r)===0&&(n=s+1)}return i.splice(n,0,e),n}function Ok(t){const e=_0.proxyRules,i=kJ(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function Jme(t,e){if(!t||!e)return!1;t=IE(t),e=IE(e);const i=A6(t),r=A6(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&wf(t,e,!0)}function IJ(t,e){return t=IE(t),e=IE(e),CE(t)===CE(e)}function IE(t){const e=(t=xr(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function CJ(t){const e=r=>r==null||r instanceof RegExp&&r.test(t)||typeof r=="string"&&t.startsWith(r),i=_0.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(e))return r}else if(e(r.urls))return r}return null}function wf(t,e,i=!1){if(!t||!e)return!1;const r=WO(t),n=WO(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function n5(t){if(typeof t=="string"){if(!gs(t))return!0;t=WO(t)}if(wf(t,Br))return!0;const e=_0.trustedServers||[];for(let i=0;i<e.length;i++){const r=Zme(e[i]);for(let n=0;n<r.length;n++)if(wf(t,r[n]))return!0}return!1}function Zme(t){return yS[t]||(o5(t)||wl(t)?yS[t]=[new Pd(Ln(t))]:yS[t]=[new Pd(`http://${t}`),new Pd(`https://${t}`)]),yS[t]}function Ln(t,e=e5,i){return wl(t)?i&&i.preserveProtocolRelative?t:Br.scheme==="http"&&Br.authority===la(t).slice(2)?`http:${t}`:`https:${t}`:o5(t)?t:Vg(t[0]==="/"?rye(e):e,t)}function s5(t,e=e5,i){if(t==null||!gs(t))return t;const r=xr(t),n=r.toLowerCase(),s=xr(e).toLowerCase().replace(/\/+$/,""),o=i?xr(i).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return t;const a=(h,m,y)=>(y=h.indexOf(m,y))===-1?h.length:y;let l=a(n,"/",n.indexOf("//")+2),u=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(u=l+1,l!==n.length);)l=a(n,"/",l+1);if(u===-1||o&&u<o.length)return t;t=r.slice(u);const p=s.slice(u-1).replaceAll(/[^/]+/g,"").length;if(p>0)for(let h=0;h<p;h++)t=`../${t}`;else t=`./${t}`;return t}function xr(t){return t=aye(t=oye(t=sye(t=Ln(t=t.trim()))))}function Vg(...t){const e=t.filter(An);if(!(e!=null&&e.length))return;const i=[];if(gs(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),tye(e[0])&&(i[0]+="/"),e[0]=n.slice(s+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function la(t,e=!1){if(t==null||Ak(t)||sp(t))return null;let i=t.indexOf("://");if(i===-1&&wl(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=CE(t,!0)),t}function gs(t){return wl(t)||o5(t)}function Ak(t){return t!=null&&t.slice(0,5)==="blob:"}function sp(t){return t!=null&&t.slice(0,5)==="data:"}function Yme(t){const e=_f(t);return e&&e.isBase64?Ame(e.data):null}function PUe(t){return Pme(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Kme=/^data:(.*?)(;base64)?,(.*)$/;function _f(t){const e=t.match(Kme);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function MJ(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function RUe(t){return(await fetch(t)).blob()}function NUe(t){const e=Yme(t);if(!e)return null;const i=_f(t);return new Blob([e],{type:i.mediaType})}function DUe(t,e){Qme(t,e)}function Qme(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(t);return i.download=e,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function wl(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function o5(t){return t!=null&&EJ.test(t)}function Xme(t){return t!=null&&Nme.test(t)||Br.scheme==="https"&&wl(t)}function eye(t){return t!=null&&TJ.test(t)||Br.scheme==="http"&&wl(t)}function tye(t){return t!=null&&Dme.test(t)}function a5(t){return wl(t)?`https:${t}`:t.replace(TJ,"https:")}function iye(){return Br.scheme==="http"}function HO(){return Br.scheme==="https"}function CE(t,e=!1){return wl(t)?t.slice(2):(t=t.replace(EJ,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function rye(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function l5(t){let e=0;if(gs(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function FUe(t,e){if(!t)return"";const i=mi(t).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const n=new RegExp(`.(${e.join("|")})$`,"ig");return r.replace(n,"")}function nye(t){return t.endsWith("/")?t:`${t}/`}function LJ(t){return t.replace(/\/+$/,"")}function sye(t){if(/^https?:\/\//i.test(t)){const e=r5(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function oye(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function aye(t){const e=_0.httpsDomains;if(!eye(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),Fme.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return iye()&&r===Br.authority&&!jme.test(t)||(HO()&&r===Br.authority||e&&e.some(n=>r===n||r.endsWith(`.${n}`))||HO()&&!Ok(t))&&(t=a5(t)),t}function qO(t,e,i){if(!(e&&i&&t&&gs(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(n<0?t.length:n,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function WO(t){return typeof t=="string"?new Pd(Ln(t)):(t.scheme||(t.scheme=Br.scheme),t)}function jUe(t){return lye.test(t)}function OJ(t,e){const i=mi(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function c5(t,e,i){const r=mi(t),n=r.query||{};return n[e]=String(i),`${r.path}?${e1(n)}`}function K$(t,e){if(!e)return t;const i=mi(t),r=i.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const n=e1(r);return n?`${i.path}?${n}`:i.path}function zUe(t){if(t==null)return null;const e=t.match(AJ);return e?e[2]:null}function R6(t){if(t==null)return null;const e=t.match(AJ);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function VUe(t){return typeof t=="string"?_f(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(_f(r.result)),r.onerror=n=>i(n)})}const AJ=/([^.]*)\.([^\/]*)$/,lye=/(^data:image\/svg|\.svg$)/i,PJ="20231115",RJ="a6fcf2901ef678ef17a528e11b93ffe09e3ec267";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const NJ="4.28";let Ne,u5=NJ;u5="4.28.10";function UUe(t){Ne=t}function cye(t){const e=Ne==null?void 0:Ne.findCredential(t);return e!=null&&e.token?c5(t,"token",e.token):t}G("host-webworker");const uye=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function d5(t){const e=la(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!uye.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function dye(t,e,i=!1,r){return new Promise((n,s)=>{if(pa(r))return void s(N6());let o=()=>{u(),s(new Error(`Unable to load ${e}`))},a=()=>{const p=t;u(),n(p)},l=()=>{if(!t)return;const p=t;u(),p.src="",s(N6())};const u=()=>{G("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,r!=null&&r.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",l),G("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))})}function N6(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const pye="Timeout exceeded";function hye(){return new Error(pye)}function fye(t){Ze.request.crossOriginNoCorsDomains||(Ze.request.crossOriginNoCorsDomains={});const e=Ze.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[la(i)??""]=0:(e[la("http://"+i)??""]=0,e[la("https://"+i)??""]=0)}function mye(t){const e=Ze.request.crossOriginNoCorsDomains;if(e){let i=la(t);if(i)return i=i.toLowerCase(),!wf(i,t5())&&e[i]<Date.now()-36e5}return!1}async function yye(t){var n;const e=Ze.request.crossOriginNoCorsDomains,i=la(t);e&&i&&(e[i.toLowerCase()]=Date.now());const r=mi(t);t=r.path,((n=r.query)==null?void 0:n.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function Ve(t,e){var u;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=i5(e.query.toString().replaceAll("+"," ")));const i=sp(t),r=Ak(t);r||i||(t=xr(t));const n={url:t,requestOptions:{...e}};let s=CJ(t);if(s){const p=await xye(s,n);if(p!=null)return{data:p,getHeader:p5,httpStatus:200,requestOptions:n.requestOptions,url:n.url};s.after||s.error||(s=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(G("host-webworker")||G("host-node")))throw fl("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw fl("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw fl("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await _ye(),ME)return ME.execute(t,e);const o=new AbortController;ys(e,()=>o.abort());const a={controller:o,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:s,params:n,redoRequest:!1,useIdentity:Yo.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},l=await Tye(a);return(u=s==null?void 0:s.after)==null||u.call(s,l),l}let ME;const Yo=Ze.request,DJ="FormData"in globalThis,gye=new Set([499,498,403,401]),vye=new Set(["COM_0056","COM_0057","SB_0008"]),bye=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],p5=()=>null,LE=Symbol();function wye(t){const e=la(t);e&&!Ve._corsServers.includes(e)&&Ve._corsServers.push(e)}function D6(t){const e=la(t);return!e||e.endsWith(".arcgis.com")||Ve._corsServers.includes(e)||n5(e)}function fl(t,e,i,r){let n="Error";const s={url:i.url,requestOptions:i.requestOptions,getHeader:p5,ssl:!1};if(e instanceof j)return e.details?(e.details=D(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const o=r&&(u=>r.headers.get(u)),a=r==null?void 0:r.status,l=e.message;l&&(n=l),o&&(s.getHeader=o),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||a||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?s.messages=[e.details]:s.messages=e.details,s.raw=LE in e?e[LE]:e}return hr(e)?mt():new j(t,n,s)}async function _ye(){G("host-webworker")?ME||(ME=await Z(()=>import("./request-iCTPwlxG.js"),__vite__mapDeps([]))):Ve._abortableFetch||(Ve._abortableFetch=globalThis.fetch.bind(globalThis))}async function JO(){Ne||await Z(()=>import("./IdentityManager-0kAvz9qK.js"),__vite__mapDeps([]))}async function Sye(t){var a;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let s=null,o=null;if(DJ&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:i.cacheBust&&!("polyfill"in Ve._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Yo.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=i.query)!=null&&a.token||s!=null&&s.get("token")),!t.hasToken&&Ze.apiKey&&d5(e)&&(i.query||(i.query={}),i.query.token=Ze.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!FJ(e)&&!pa(r)){let l;i.authMode==="immediate"?(await JO(),l=await Ne.getCredential(e,{signal:r}),t.credential=l):i.authMode==="no-prompt"?(await JO(),l=await Ne.getCredential(e,{prompt:!1,signal:r}).catch(()=>{}),t.credential=l):Ne&&(l=Ne.findCredential(e)),l&&(t.credentialToken=l.token,t.useSSL=!!l.ssl)}}function FJ(t){return bye.some(e=>e.test(t))}async function $ye(t){let e=t.params.url;const i=t.params.requestOptions,r=t.fetchOptions??{},n=Ak(e)||sp(e),s=i.responseType||"json",o=n?0:i.timeout!=null?i.timeout:Yo.timeout;let a=!1;if(!n){t.useSSL&&(e=a5(e)),i.cacheBust&&r.cache==="default"&&(e=c5(e,"request.preventCache",Date.now()));let m={...i.query};t.credentialToken&&(m.token=t.credentialToken);let y=e1(m);G("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const g=e.length+1+y.length;let v;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||g>Yo.maxUrlLength;const w=i.useProxy||!!Ok(e);if(w){const b=Hme(e);v=b.path,!a&&v.length+1+g>Yo.maxUrlLength&&(a=!0),b.query&&(m={...b.query,...m})}if(r.method==="HEAD"&&(a||w)){if(a)throw g>Yo.maxUrlLength?fl("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):fl("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(w)throw fl("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=K$(e,m):(r.body=e1(m),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):e=K$(e,m),w&&(t.useProxy=!0,e=`${v}?${e}`),m.token&&DJ&&r.body instanceof FormData&&!Ome(e)&&r.body.set("token",m.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!wf(e,t5())){if(n5(e))t.withCredentials=!0;else if(Ne){const b=Ne.findServerInfo(e);b!=null&&b.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(r.credentials="include",mye(e)&&await yye(a?K$(e,m):e))}let l,u,p=0,h=!1;o>0&&(p=setTimeout(()=>{h=!0,t.controller.abort()},o));try{if(i.responseType==="native-request-init")u=r,u.url=e;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||Eye(i.headers)||!n&&!t.useProxy&&Yo.proxyUrl&&!D6(e)){if(l=await Ve._abortableFetch(e,r),t.useProxy||wye(e),i.responseType==="native")u=l;else if(r.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(p&&(clearTimeout(p),p=0),s==="json"||s==="xml"||s==="document")if(u)switch(s){case"json":u=JSON.parse(u);break;case"xml":u=F6(u,"application/xml");break;case"document":u=F6(u,"text/html")}else u=null;if(u){if(s==="array-buffer"||s==="blob"){const m=l.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&u[s==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(u).json();y.error&&(u=y)}catch{}}s==="image"&&u instanceof Blob&&(u=await j6(URL.createObjectURL(u),t,!0))}}else{u=await l.text();try{u=JSON.parse(u)}catch{}}}else u=await j6(e,t)}catch(m){if(m.name==="AbortError")throw h?hye():mt("Request canceled");if(!(!l&&m instanceof TypeError&&Yo.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||D6(e))throw m;t.redoRequest=!0,Wme({proxyUrl:Yo.proxyUrl,urlPrefix:la(e)??""})}finally{p&&clearTimeout(p)}return[l,u]}async function xye(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=fl("request:interceptor",n,e)}if((r instanceof Error||r instanceof j)&&(i=fl("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function Eye(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function F6(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function Tye(t){var s,o;let e,i;await Sye(t);try{do[e,i]=await $ye(t);while(!await kye(t,e,i))}catch(a){const l=fl("request:server",a,t.params,e);throw l.details.ssl=t.useSSL,(s=t.interceptor)!=null&&s.error&&t.interceptor.error(l),l}const r=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((o=i.user)!=null&&o.username)&&!n5(r)){const a=la(r,!0);a&&Yo.trustedServers.push(a)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&fye(i.authorizedCrossOriginNoCorsDomains)}const n=t.credential;if(n&&Ne){const a=Ne.findServerInfo(n.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const u=Ne.findCredential(l,n.userId);u&&Ne._getIdenticalSvcIdx(l,u)===-1&&u.resources.unshift(l)}}return{data:i,getHeader:e?a=>e==null?void 0:e.headers.get(a):p5,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function kye(t,e,i){var u;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(i&&(i.error?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[LE]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[LE]=i,n;let o,a=null;n&&(s=Number(n.code),a=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const l=r.authMode;if(s===403&&(a===4||(u=n.message)!=null&&u.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&gye.has(s)&&!FJ(t.params.url)&&(s!==403||(!o||!vye.has(o))&&(a==null||a===2&&t.credentialToken))){await JO();try{const p=await Ne.getCredential(t.params.url,{error:fl("request:server",n,t.params),prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=p,t.credentialToken=p.token,t.useSSL=t.useSSL||p.ssl,!1}catch(p){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=p}}if(n)throw n;return!0}function j6(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Yo.priority,n.src=t,dye(n,t,i,r)}Ve._abortableFetch=null,Ve._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];let Q$=class jJ{constructor(){this._emitter=new jJ.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){var u;let o=(u=this._listenersMap)==null?void 0:u.get(n);if(!o)return!1;const a=this._target||this;let l=!1;for(const p of o.slice()){const h="deref"in p?p.deref():p;h?h==null||h.call(a,s):l=!0}return l&&(o=o.filter(p=>!("deref"in p)||p.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(l=>this.on(l,s));return J1(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),Mt(()=>{var u;const a=(u=this._listenersMap)==null?void 0:u.get(n),l=(a==null?void 0:a.indexOf(s))??-1;l>=0&&a.splice(l,1)})}once(n,s){const o=this.on(n,a=>{o.remove();const l="deref"in s?s.deref():s;l==null||l.call(null,a)});return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let n=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=c([k("esri.core.Evented")],n),n};let i=class extends de{constructor(){super(...arguments),this._emitter=new Q$.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,n){return this._emitter.emit(r,n)}on(r,n){return this._emitter.on(r,n)}once(r,n){return this._emitter.once(r,n)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=c([k("esri.core.Evented")],i),t.EventedAccessor=i})(Q$||(Q$={}));const Il=Q$;var lt;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(lt||(lt={}));function h5(t){return(e,i)=>{e[i]=t}}let e_=class extends FW{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var wc;let Iye=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},Cye=class{constructor(e,i,r,n,s){this.target=e,this.added=i,this.removed=r,this.start=n,this.deleteCount=s}};const As=new Wf(Iye,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function LC(t){return t?t instanceof kh?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function OC(t){if(t!=null&&t.length)return t[0]}function Mye(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let s=0;for(;s<n&&t[i+s]===e[r+s];)s++;return s}function zJ(t,e,i,r){e&&e.forEach((n,s,o)=>{t.push(n),zJ(t,i.call(r,n,s,o),i,r)})}const ru=new Set,nu=new Set,su=new Set,AC=new Map;let Lye=0,kh=wc=class extends Il.EventedAccessor{static isCollection(t){return t!=null&&t instanceof wc}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new e_,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Lye++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof wc?{items:t}:t:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return Se(this._observable),this._items}set items(t){this._emitBeforeChanges(lt.ADD)||(this._splice(0,this.length,LC(t)),this._emitAfterChanges(lt.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Mt(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return this._emitter.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,r=this.on(t,n=>{var s;(s=i())==null||s.call(null,n),r.remove()});return r}add(t,e){if(Se(this._observable),this._emitBeforeChanges(lt.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(lt.ADD),this}addMany(t,e=this._items.length){if(Se(this._observable),!(t!=null&&t.length))return this;if(this._emitBeforeChanges(lt.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,LC(t)),this._emitAfterChanges(lt.ADD),this}at(t){if(Se(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Se(this._observable),!this.length||this._emitBeforeChanges(lt.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(lt.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Se(this._observable),this._createNewInstance({items:this._items.map(D)})}concat(...t){Se(this._observable);const e=t.map(LC);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Se(this._observable),!this.length||this._emitBeforeChanges(lt.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)t.call(e,i[n],n,i);this._emitAfterChanges(lt.REMOVE)}every(t,e){return Se(this._observable),this._items.every(t,e)}filter(t,e){let i;return Se(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return Se(this._observable),this._items.find(t,e)}findIndex(t,e){return Se(this._observable),this._items.findIndex(t,e)}flatten(t,e){Se(this._observable);const i=[];return zJ(i,this,t,e),new wc(i)}forEach(t,e){return Se(this._observable),this._items.forEach(t,e)}getItemAt(t){return Se(this._observable),this._items[t]}getNextIndex(t){Se(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Se(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Se(this._observable),this._items.indexOf(t,e)}join(t=","){return Se(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Se(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Se(this._observable);const i=this._items.map(t,e);return new wc({items:i})}reorder(t,e=this.length-1){Se(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(lt.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(lt.MOVE)}return t}}pop(){if(Se(this._observable),!this.length||this._emitBeforeChanges(lt.REMOVE))return;const t=OC(this._splice(this.length-1,1));return this._emitAfterChanges(lt.REMOVE),t}push(...t){return Se(this._observable),this._emitBeforeChanges(lt.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(lt.ADD)),this.length}reduce(t,e){Se(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Se(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Se(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Se(this._observable),t<0||t>=this.length||this._emitBeforeChanges(lt.REMOVE))return;const e=OC(this._splice(t,1));return this._emitAfterChanges(lt.REMOVE),e}removeMany(t){if(Se(this._observable),!(t!=null&&t.length)||this._emitBeforeChanges(lt.REMOVE))return[];const e=t instanceof wc?t.toArray():t,i=this._items,r=[],n=e.length;for(let s=0;s<n;s++){const o=e[s],a=i.indexOf(o);if(a>-1){const l=1+Mye(e,i,s+1,a+1),u=this._splice(a,l);u&&u.length>0&&r.push.apply(r,u),s+=l-1}}return this._emitAfterChanges(lt.REMOVE),r}reverse(){if(Se(this._observable),this._emitBeforeChanges(lt.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(lt.MOVE),this}shift(){if(Se(this._observable),!this.length||this._emitBeforeChanges(lt.REMOVE))return;const t=OC(this._splice(0,1));return this._emitAfterChanges(lt.REMOVE),t}slice(t=0,e=this.length){return Se(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Se(this._observable),this._items.some(t,e)}sort(t){if(Se(this._observable),!this.length||this._emitBeforeChanges(lt.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(lt.MOVE),this}splice(t,e,...i){Se(this._observable);const r=(e?lt.REMOVE:0)|(i.length?lt.ADD:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(r),n}toArray(){return Se(this._observable),this._items.slice()}toJSON(){return Se(this._observable),this.toArray()}toLocaleString(){return Se(this._observable),this._items.toLocaleString()}toString(){return Se(this._observable),this._items.toString()}unshift(...t){return Se(this._observable),!t.length||this._emitBeforeChanges(lt.ADD)||(this._splice(0,0,t),this._emitAfterChanges(lt.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=v0(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const a=As.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(t,0,s),t+=1,l-=1,u-=1);As.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=As.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);As.release(a)}}if(i!=null&&i.length){if(n){const p=[];for(const h of i){const m=n.ensureType(h);m==null&&h!=null||p.push(m)}i=p}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=t===this.length;if(a||l){const p=As.acquire();p.target=this,p.cancellable=!0;const h=As.acquire();h.target=this,h.cancellable=!1;for(const m of i)a?(p.reset(m),this.emit("before-add",p),p.defaultPrevented||(u?r.push(m):r.splice(t++,0,m),this._set("length",r.length),l&&(h.reset(m),this.emit("after-add",h)))):(u?r.push(m):r.splice(t++,0,m),this._set("length",r.length),h.reset(m),this.emit("after-add",h));As.release(h),As.release(p)}else{if(u)for(const p of i)r.push(p);else r.splice(t,0,...i);this._set("length",r.length)}}if((i!=null&&i.length||o!=null&&o.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const a=new Cye(this,i,o,t,e);this.emit("after-splice",a)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=As.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,As.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=As.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),As.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;ru.clear(),nu.clear(),su.clear();for(const{added:l,removed:u}of i){if(l)if(su.size===0&&nu.size===0)for(const p of l)ru.add(p);else for(const p of l)nu.has(p)?(su.add(p),nu.delete(p)):su.has(p)||ru.add(p);if(u)if(su.size===0&&ru.size===0)for(const p of u)nu.add(p);else for(const p of u)ru.has(p)?ru.delete(p):(su.delete(p),nu.add(p))}const r=ln.acquire();ru.forEach(l=>{r.push(l)});const n=ln.acquire();nu.forEach(l=>{n.push(l)});const s=this._items,o=e.items,a=ln.acquire();if(su.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),e.listeners&&(r.length||n.length||a.length)){const l={target:this,added:r,removed:n,moved:a},u=e.listeners.length;for(let p=0;p<u;p++){const h=e.listeners[p];h.removed||h.callback.call(this,l)}}ln.release(r),ln.release(n),ln.release(a)}ru.clear(),nu.clear(),su.clear()}};kh.ofType=t=>{if(!t)return wc;if(AC.has(t))return AC.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const n=t.typeMap[r].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends wc{};return c([h5({Type:t,ensureType:typeof t=="function"?ei(t):bl(t)})],i.prototype,"itemType",void 0),i=c([k(`esri.core.Collection<${e}>`)],i),AC.set(t,i),i},c([d()],kh.prototype,"length",void 0),c([d()],kh.prototype,"items",null),kh=wc=c([k("esri.core.Collection")],kh);const ce=kh;function Sf(t,e,i=ce){return e||(e=new i),e===t||(e.removeAll(),Oye(t)?e.addMany(t):t&&e.add(t)),e}function VJ(t){return t}function Oye(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}var Qu;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Qu||(Qu={}));let Aye=class{constructor(){this._resolver=xs(),this._status=Qu.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Qu.RESOLVED,this._cleanUp()},()=>{this._status=Qu.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Qu.RESOLVED}isRejected(){return this._status===Qu.REJECTED}isFulfilled(){return this._status!==Qu.PENDING}abort(){this._resolver.reject(mt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=xs(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||hr(n)||this._resolver.reject(n)}),e.resolve()}};const S0=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new Aye,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=c([k("esri.core.Promise")],e),e};let OE=class extends S0(de){};OE=c([k("esri.core.Promise")],OE);const Pye="not-loaded",Rye="loading",Nye="failed",z6="loaded",UJ=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const u=JD(s,l);this.destroyed&&l(new j("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===Pye){this._set("loadStatus",Rye);const a=this._loadController=new AbortController;n({signal:a.signal})}return r(),o}})),this.when(()=>{this._set("loadStatus",z6),this._loadController=null},r=>{this._set("loadStatus",Nye),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=jg(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===z6}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new j("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return c([d({readOnly:!0})],e.prototype,"loaded",null),c([d({readOnly:!0})],e.prototype,"loadError",void 0),c([d({clonable:!1})],e.prototype,"loadStatus",void 0),c([d({type:[po],readOnly:!0})],e.prototype,"loadWarnings",null),e=c([k("esri.core.Loadable")],e),e};let Tv=class extends UJ(OE){};Tv=c([k("esri.core.Loadable")],Tv),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=UJ,t.isLoadable=e}(Tv||(Tv={}));const Jr=Tv;function Dye(t,e,i){return kk(t.map((r,n)=>e.apply(i,[r,n])))}async function Fye(t,e,i){return(await kk(t.map((r,n)=>e.apply(i,[r,n])))).map(r=>r.value)}function f5(t){return{ok:!0,value:t}}function m5(t){return{ok:!1,error:t}}function jye(t){return t!=null&&t.ok===!0?t.value:null}function zye(t){return t!=null&&t.ok===!1?t.error:null}async function Pk(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return f5(await t)}catch(e){return m5(e)}}async function Vye(t){try{return f5(await t)}catch(e){return sl(e),m5(e)}}function y5(t,e){return new gu(t,e)}let gu=class extends de{get value(){return jye(this._result)}get error(){return zye(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=jg(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=f5(n),this._cleanup()},n=>{this._result=m5(n),this._cleanup()}),this._abortHandle=ys(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Xt(this._abortHandle),this._abortController=null}};c([d()],gu.prototype,"value",null),c([d()],gu.prototype,"error",null),c([d()],gu.prototype,"finished",null),c([d()],gu.prototype,"promise",void 0),c([d()],gu.prototype,"_result",void 0),gu=c([k("esri.core.asyncUtils.ReactiveTask")],gu);async function g5(t,e){return await t.load(),Uye(t,e)}async function Uye(t,e){const i=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):ce.isCollection(o)?o.forEach(a=>r(a)):Jr.isLoadable(o)&&i.push(o))};e(r);let n=null;if(await Fye(i,async s=>{const o=await Pk(Bye(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return t}function Bye(t){return"loadAll"in t&&typeof t.loadAll=="function"}function ee(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const u=oJ(s,l,n);u.write&&typeof u.write=="object"||(u.write={}),i&&(u.write.target=i),u.write.writer=a[o]}}}let $e=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const o=this.toJSON(r);o!==void 0&&Ji(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const r in e)i[e[r]]=r;return i}_getKeysSorted(e){const i=[];for(const r in e)i.push(r);return i.sort(),i}};function Zi(){return function(t,e){return new $e(t,{ignoreUnknown:!0,...e})}}let v5=class{constructor(e,i,r,n){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Lt=new v5(6378137,1/298.257223563,3e5,.006694379990137799),Ic=new v5(3396190,1/169.8944472236118,23e4),Wd=new v5(1737400,0,0),Gye=q.getLogger("esri.assets");function it(t){if(!Ze.assetsPath)throw Gye.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new j("assets:path-not-set","config.assetsPath is not set");return Vg(Ze.assetsPath,t)}let PC,z=null;function b5(){return!!z}function Hye(){return!!G("esri-wasm")}function BJ(){return PC||(PC=Z(()=>import("./pe-wasm-S3djM1eV.js"),__vite__mapDeps([])).then(t=>t.p).then(({default:t})=>t({locateFile:e=>it(`esri/geometry/support/${e}`)})).then(t=>{HJ(t)}),PC)}var ZO,Gt,YO;(function(t){function e(s,o,a){z.ensureCache.prepare();const l=Ih(a),u=a===l,p=z.ensureFloat64(l),h=z._pe_geog_to_proj(z.getPointer(s),o,p);return h&&ad(a,o,p,u),h}function i(s,o,a,l){switch(l){case Gt.PE_TRANSFORM_P_TO_G:return r(s,o,a);case Gt.PE_TRANSFORM_G_TO_P:return e(s,o,a)}return 0}function r(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){z.ensureCache.prepare();const u=Ih(a),p=a===u,h=z.ensureFloat64(u),m=z._pe_proj_to_geog_center(z.getPointer(s),o,h,l);return m&&ad(a,o,h,p),m}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=n})(ZO||(ZO={})),function(t){function e(){t.PE_BUFFER_MAX=z.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=z.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=z.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=z.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=z.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=z.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=z.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=z.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=z.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=z.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=z.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=z.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=z.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=z.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=z.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=z.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=z.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=z.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=z.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=z.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_STR_FMT_WKT=z.PeDefs.prototype.PE_STR_FMT_WKT,t.PE_STR_FMT_WKT2=z.PeDefs.prototype.PE_STR_FMT_WKT2,t.PE_PARM_X0=z.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=z.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=z.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=z.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=z.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=z.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=z.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=z.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=z.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=z.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(Gt||(Gt={})),function(t){const e={},i={},r=y=>{if(y){const g=y.getType();switch(g){case Gt.PE_TYPE_GEOGCS:y=z.castObject(y,z.PeGeogcs);break;case Gt.PE_TYPE_PROJCS:y=z.castObject(y,z.PeProjcs);break;case Gt.PE_TYPE_GEOGTRAN:y=z.castObject(y,z.PeGeogtran);break;default:g&Gt.PE_TYPE_UNIT&&(y=z.castObject(y,z.PeUnit))}}return y};function n(){z.PeFactory.prototype.initialize(null)}function s(y){return o(Gt.PE_TYPE_COORDSYS,y)}function o(y,g){let v=null,w=e[y];if(w||(w={},e[y]=w),w.hasOwnProperty(String(g)))v=w[g];else{const b=z.PeFactory.prototype.factoryByType(y,g);z.compare(b,z.NULL)||(v=b,w[g]=v)}return v=r(v),v}function a(y,g){let v=null,w=i[y];if(w||(w={},i[y]=w),w.hasOwnProperty(g))v=w[g];else{const b=z.PeFactory.prototype.fromString(y,g);z.compare(b,z.NULL)||(v=b,w[g]=v)}return v=r(v),v}function l(y){return o(Gt.PE_TYPE_GEOGCS,y)}function u(y){return o(Gt.PE_TYPE_GEOGTRAN,y)}function p(y){return z.PeFactory.prototype.getCode(y)}function h(y){return o(Gt.PE_TYPE_PROJCS,y)}function m(y){return o(Gt.PE_TYPE_UNIT,y)}t.initialize=n,t.coordsys=s,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=u,t.getCode=p,t.projcs=h,t.unit=m}(YO||(YO={}));let GJ=null;var AE,KO,QO,XO,PE,eA,RE,NE,tA;function HJ(t){function e(s,o,a){s[o]=a(s[o])}z=t,Gt.init(),AE.init(),PE.init(),RE.init(),NE.init(),GJ=class extends z.PeGCSExtent{destroy(){z.destroy(this)}};const i=[z.PeDatum,z.PeGeogcs,z.PeGeogtran,z.PeObject,z.PeParameter,z.PePrimem,z.PeProjcs,z.PeSpheroid,z.PeUnit];for(const s of i)e(s.prototype,"getName",o=>function(){return o.call(this,new Array(Gt.PE_NAME_MAX))});for(const s of[z.PeGeogtran,z.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array(Gt.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const p=z.getValue(l,"*");a[u]=p?z.wrapPointer(p,z.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(z.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return ad(a,o,s.call(this)),a}),e(z.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=z._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!z.compare(l,z.NULL)){a=[l];const u=this.getSteps();if(u>1){const p=z.getPointer(l);for(let h=1;h<u;h++)a.push(z.wrapPointer(p+o*h,z.PeGTlistExtendedGTs))}}return a}});const r=z._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!z.compare(l,z.NULL)){a=[l];const u=l.getNump();if(u>1){const p=z.getPointer(l);for(let h=1;h<u;h++)a.push(z.wrapPointer(p+r*h,z.PeHorizon))}}return o.set(s,a),a};e(z.PeProjcs.prototype,"horizonGcsGenerate",n),e(z.PeProjcs.prototype,"horizonPcsGenerate",n),z.PeObject.prototype.toString=function(s=Gt.PE_STR_OPTS_NONE){z.ensureCache.prepare();const o=z.getPointer(this),a=z.ensureInt8(new Array(Gt.PE_BUFFER_MAX));return z.UTF8ToString(z._pe_object_to_string_ext(o,s,a))}}function Pl(t){if(!t)return;const e=z.getClass(t);if(!e)return;const i=z.getCache(e);if(!i)return;const r=z.getPointer(t);r&&delete i[r]}function gS(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(z.ensureInt8(r));return i}function Ih(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function ad(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=z.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=z.getValue(i,"double"),t[s][1]=z.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=z.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=z._pe_getPeGTlistExtendedEntrySize()}function r(n,s,o,a,l,u){let p=null;const h=new z.PeInteger(u);try{const m=z.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,h);if((u=h.val)&&(p=[m],u>1)){const y=z.getPointer(m);for(let g=1;g<u;g++)p.push(z.wrapPointer(y+e*g,z.PeGTlistExtendedEntry))}}finally{z.destroy(h)}return p}t.init=i,t.getGTlist=r})(AE||(AE={})),function(t){function e(i){if(i!=null&&i.length){for(const r of i)Pl(r),r.getEntries().forEach(n=>{Pl(n);const s=n.getGeogtran();Pl(s),s.getParameters().forEach(Pl),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{Pl(o);const a=o.getDatum();Pl(a),Pl(a.getSpheroid()),Pl(o.getPrimem()),Pl(o.getUnit())})});z.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(KO||(KO={})),function(t){function e(i,r,n,s,o){z.ensureCache.prepare();const a=Ih(n),l=n===a,u=z.ensureFloat64(a);let p=0;s&&(p=z.ensureFloat64(s));const h=z._pe_geog_to_geog(z.getPointer(i),r,u,p,o);return h&&ad(n,r,u,l),h}t.geogToGeog=e}(QO||(QO={})),function(t){const e=(u,p,h,m,y,g)=>{let v,w;switch(z.ensureCache.prepare(),u){case"dd":v=z._pe_geog_to_dd,w=Gt.PE_DD_MAX;break;case"ddm":v=z._pe_geog_to_ddm,w=Gt.PE_DDM_MAX;break;case"dms":v=z._pe_geog_to_dms,w=Gt.PE_DMS_MAX}let b=0;p&&(b=z.getPointer(p));const _=Ih(m),S=z.ensureFloat64(_),$=gS(h,w),T=v(b,h,S,y,z.ensureInt32($));if(T)for(let I=0;I<h;I++)g[I]=z.UTF8ToString($[I]);return T},i=(u,p,h,m,y)=>{let g;switch(z.ensureCache.prepare(),u){case"dd":g=z._pe_dd_to_geog;break;case"ddm":g=z._pe_ddm_to_geog;break;case"dms":g=z._pe_dms_to_geog}let v=0;p&&(v=z.getPointer(p));const w=m.map($=>z.ensureString($)),b=z.ensureInt32(w),_=z.ensureFloat64(new Array(2*h)),S=g(v,h,b,_);return S&&ad(y,h,_),S};function r(u,p,h,m,y){return e("dms",u,p,h,m,y)}function n(u,p,h,m){return i("dms",u,p,h,m)}function s(u,p,h,m,y){return e("ddm",u,p,h,m,y)}function o(u,p,h,m){return i("ddm",u,p,h,m)}function a(u,p,h,m,y){return e("dd",u,p,h,m,y)}function l(u,p,h,m){return i("dd",u,p,h,m)}t.geogToDms=r,t.dmsToGeog=n,t.geogToDdm=s,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l}(XO||(XO={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=z.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=z.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=z.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=z.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=z.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(n,s,o,a,l,u,p){z.ensureCache.prepare();let h=0;n&&(h=z.getPointer(n));const m=Ih(o),y=z.ensureFloat64(m),g=gS(s,Gt.PE_MGRS_MAX),v=z.ensureInt32(g),w=z._pe_geog_to_mgrs_extended(h,s,y,a,l,u,v);if(w)for(let b=0;b<s;b++)p[b]=z.UTF8ToString(g[b]);return w}function r(n,s,o,a,l){z.ensureCache.prepare();let u=0;n&&(u=z.getPointer(n));const p=o.map(g=>z.ensureString(g)),h=z.ensureInt32(p),m=z.ensureFloat64(new Array(2*s)),y=z._pe_mgrs_to_geog_extended(u,s,h,a,m);return y&&ad(l,s,m),y}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r}(PE||(PE={})),function(t){function e(r,n,s,o,a,l,u){z.ensureCache.prepare();let p=0;r&&(p=z.getPointer(r));const h=Ih(s),m=z.ensureFloat64(h),y=gS(n,Gt.PE_MGRS_MAX),g=z.ensureInt32(y),v=z._pe_geog_to_usng(p,n,m,o,a,l,g);if(v)for(let w=0;w<n;w++)u[w]=z.UTF8ToString(y[w]);return v}function i(r,n,s,o){z.ensureCache.prepare();let a=0;r&&(a=z.getPointer(r));const l=s.map(m=>z.ensureString(m)),u=z.ensureInt32(l),p=z.ensureFloat64(new Array(2*n)),h=z._pe_usng_to_geog(a,n,u,p);return h&&ad(o,n,p),h}t.geogToUsng=e,t.usngToGeog=i}(eA||(eA={})),function(t){function e(){t.PE_UTM_OPTS_NONE=z.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=z.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=z.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(n,s,o,a,l){z.ensureCache.prepare();let u=0;n&&(u=z.getPointer(n));const p=Ih(o),h=z.ensureFloat64(p),m=gS(s,Gt.PE_UTM_MAX),y=z.ensureInt32(m),g=z._pe_geog_to_utm(u,s,h,a,y);if(g)for(let v=0;v<s;v++)l[v]=z.UTF8ToString(m[v]);return g}function r(n,s,o,a,l){z.ensureCache.prepare();let u=0;n&&(u=z.getPointer(n));const p=o.map(g=>z.ensureString(g)),h=z.ensureInt32(p),m=z.ensureFloat64(new Array(2*s)),y=z._pe_utm_to_geog(u,s,h,a,m);return y&&ad(l,s,m),y}t.init=e,t.geogToUtm=i,t.utmToGeog=r}(RE||(RE={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=z.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=z.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=z.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=z.PePCSInfo.prototype.PE_POLE_POINT}function r(n,s=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(n)&&(a=e.get(n),a[s]&&(o=a[s])),o||(o=z.PePCSInfo.prototype.generate(n,s),a||(a=[],e.set(n,a)),a[s]=o),o}t.init=i,t.generate=r}(NE||(NE={})),function(t){function e(){return z.PeVersion.prototype.version_string()}t.versionString=e}(tA||(tA={}));const qye=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return ZO},get PeDefs(){return Gt},get PeFactory(){return YO},get PeGCSExtent(){return GJ},get PeGTTransformations(){return QO},get PeGTlistExtended(){return AE},get PeGTlistExtendedEntry(){return KO},get PeNotationDms(){return XO},get PeNotationMgrs(){return PE},get PeNotationUsng(){return eA},get PeNotationUtm(){return RE},get PePCSInfo(){return NE},get PeVersion(){return tA},_init:HJ,get _pe(){return z},isLoaded:b5,isSupported:Hye,load:BJ},Symbol.toStringTag,{value:"Module"}));var to;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(to||(to={}));let f;const E={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(f=2e3;f<=2045;f++)E[f]=0;for(f=2056;f<=2065;f++)E[f]=0;for(f=2067;f<=2135;f++)E[f]=0;for(f=2137;f<=2154;f++)E[f]=0;for(f=2161;f<=2170;f++)E[f]=0;for(f=2172;f<=2193;f++)E[f]=0;for(f=2195;f<=2198;f++)E[f]=0;for(f=2200;f<=2203;f++)E[f]=0;for(f=2205;f<=2217;f++)E[f]=0;for(f=2222;f<=2224;f++)E[f]=1;for(f=2225;f<=2250;f++)E[f]=2;for(f=2251;f<=2253;f++)E[f]=1;for(f=2257;f<=2264;f++)E[f]=2;for(f=2274;f<=2279;f++)E[f]=2;for(f=2280;f<=2282;f++)E[f]=1;for(f=2283;f<=2289;f++)E[f]=2;for(f=2290;f<=2292;f++)E[f]=0;for(f=2308;f<=2313;f++)E[f]=0;for(f=2315;f<=2491;f++)E[f]=0;for(f=2494;f<=2866;f++)E[f]=0;for(f=2867;f<=2869;f++)E[f]=1;for(f=2870;f<=2888;f++)E[f]=2;for(f=2891;f<=2895;f++)E[f]=2;for(f=2896;f<=2898;f++)E[f]=1;for(f=2902;f<=2908;f++)E[f]=2;for(f=2915;f<=2920;f++)E[f]=2;for(f=2921;f<=2923;f++)E[f]=1;for(f=2924;f<=2930;f++)E[f]=2;for(f=2931;f<=2962;f++)E[f]=0;for(f=2964;f<=2968;f++)E[f]=2;for(f=2969;f<=2973;f++)E[f]=0;for(f=2975;f<=2991;f++)E[f]=0;for(f=2995;f<=3051;f++)E[f]=0;for(f=3054;f<=3079;f++)E[f]=0;for(f=3081;f<=3088;f++)E[f]=0;for(f=3092;f<=3101;f++)E[f]=0;for(f=3106;f<=3138;f++)E[f]=0;for(f=3146;f<=3151;f++)E[f]=0;for(f=3153;f<=3166;f++)E[f]=0;for(f=3168;f<=3172;f++)E[f]=0;for(f=3174;f<=3203;f++)E[f]=0;for(f=3294;f<=3358;f++)E[f]=0;for(f=3367;f<=3403;f++)E[f]=0;for(f=3408;f<=3416;f++)E[f]=0;for(f=3417;f<=3438;f++)E[f]=2;for(f=3441;f<=3446;f++)E[f]=2;for(f=3447;f<=3450;f++)E[f]=0;for(f=3451;f<=3459;f++)E[f]=2;for(f=3460;f<=3478;f++)E[f]=0;for(f=3554;f<=3559;f++)E[f]=0;for(f=3560;f<=3570;f++)E[f]=2;for(f=3571;f<=3581;f++)E[f]=0;for(f=3594;f<=3597;f++)E[f]=0;for(f=3601;f<=3604;f++)E[f]=0;for(f=3637;f<=3639;f++)E[f]=0;for(f=3665;f<=3667;f++)E[f]=0;for(f=3693;f<=3695;f++)E[f]=0;for(f=3701;f<=3727;f++)E[f]=0;for(f=3728;f<=3739;f++)E[f]=2;for(f=3740;f<=3751;f++)E[f]=0;for(f=3753;f<=3760;f++)E[f]=2;for(f=3761;f<=3773;f++)E[f]=0;for(f=3775;f<=3777;f++)E[f]=0;for(f=3779;f<=3781;f++)E[f]=0;for(f=3783;f<=3785;f++)E[f]=0;for(f=3788;f<=3791;f++)E[f]=0;for(f=3797;f<=3802;f++)E[f]=0;for(f=3814;f<=3816;f++)E[f]=0;for(f=3825;f<=3829;f++)E[f]=0;for(f=3832;f<=3841;f++)E[f]=0;for(f=3844;f<=3852;f++)E[f]=0;for(f=3873;f<=3885;f++)E[f]=0;for(f=3890;f<=3893;f++)E[f]=0;for(f=3907;f<=3912;f++)E[f]=0;for(f=3942;f<=3950;f++)E[f]=0;for(f=3968;f<=3970;f++)E[f]=0;for(f=3973;f<=3976;f++)E[f]=0;for(f=3986;f<=3989;f++)E[f]=0;for(f=3994;f<=3997;f++)E[f]=0;for(f=4048;f<=4051;f++)E[f]=0;for(f=4056;f<=4063;f++)E[f]=0;for(f=4093;f<=4096;f++)E[f]=0;for(f=4390;f<=4398;f++)E[f]=0;for(f=4399;f<=4413;f++)E[f]=2;for(f=4418;f<=4433;f++)E[f]=2;for(f=4455;f<=4457;f++)E[f]=2;for(f=4484;f<=4489;f++)E[f]=0;for(f=4491;f<=4554;f++)E[f]=0;for(f=4568;f<=4589;f++)E[f]=0;for(f=4652;f<=4656;f++)E[f]=0;for(f=4766;f<=4800;f++)E[f]=0;for(f=5014;f<=5016;f++)E[f]=0;for(f=5069;f<=5072;f++)E[f]=0;for(f=5105;f<=5130;f++)E[f]=0;for(f=5167;f<=5188;f++)E[f]=0;for(f=5253;f<=5259;f++)E[f]=0;for(f=5269;f<=5275;f++)E[f]=0;for(f=5292;f<=5311;f++)E[f]=0;for(f=5329;f<=5331;f++)E[f]=0;for(f=5343;f<=5349;f++)E[f]=0;for(f=5355;f<=5357;f++)E[f]=0;for(f=5387;f<=5389;f++)E[f]=0;for(f=5459;f<=5463;f++)E[f]=0;for(f=5479;f<=5482;f++)E[f]=0;for(f=5518;f<=5520;f++)E[f]=0;for(f=5530;f<=5539;f++)E[f]=0;for(f=5550;f<=5552;f++)E[f]=0;for(f=5562;f<=5583;f++)E[f]=0;for(f=5623;f<=5625;f++)E[f]=2;for(f=5631;f<=5639;f++)E[f]=0;for(f=5649;f<=5653;f++)E[f]=0;for(f=5663;f<=5680;f++)E[f]=0;for(f=5682;f<=5685;f++)E[f]=0;for(f=5875;f<=5877;f++)E[f]=0;for(f=5896;f<=5899;f++)E[f]=0;for(f=5921;f<=5940;f++)E[f]=0;for(f=6050;f<=6125;f++)E[f]=0;for(f=6244;f<=6275;f++)E[f]=0;for(f=6328;f<=6348;f++)E[f]=0;for(f=6350;f<=6356;f++)E[f]=0;for(f=6366;f<=6372;f++)E[f]=0;for(f=6381;f<=6387;f++)E[f]=0;for(f=6393;f<=6404;f++)E[f]=0;for(f=6480;f<=6483;f++)E[f]=0;for(f=6511;f<=6514;f++)E[f]=0;for(f=6579;f<=6581;f++)E[f]=0;for(f=6619;f<=6624;f++)E[f]=0;for(f=6625;f<=6627;f++)E[f]=2;for(f=6628;f<=6632;f++)E[f]=0;for(f=6634;f<=6637;f++)E[f]=0;for(f=6669;f<=6692;f++)E[f]=0;for(f=6707;f<=6709;f++)E[f]=0;for(f=6720;f<=6723;f++)E[f]=0;for(f=6732;f<=6738;f++)E[f]=0;for(f=6931;f<=6933;f++)E[f]=0;for(f=6956;f<=6959;f++)E[f]=0;for(f=7005;f<=7007;f++)E[f]=0;for(f=7057;f<=7070;f++)E[f]=2;for(f=7074;f<=7082;f++)E[f]=0;for(f=7109;f<=7118;f++)E[f]=0;for(f=7119;f<=7127;f++)E[f]=1;for(f=7374;f<=7376;f++)E[f]=0;for(f=7528;f<=7586;f++)E[f]=0;for(f=7587;f<=7645;f++)E[f]=2;for(f=7692;f<=7696;f++)E[f]=0;for(f=7755;f<=7787;f++)E[f]=0;for(f=7791;f<=7795;f++)E[f]=0;for(f=7799;f<=7801;f++)E[f]=0;for(f=7803;f<=7805;f++)E[f]=0;for(f=7825;f<=7831;f++)E[f]=0;for(f=7845;f<=7859;f++)E[f]=0;for(f=8013;f<=8032;f++)E[f]=0;for(f=8065;f<=8068;f++)E[f]=1;for(f=8518;f<=8529;f++)E[f]=2;for(f=8533;f<=8536;f++)E[f]=2;for(f=8538;f<=8540;f++)E[f]=2;for(f=8677;f<=8679;f++)E[f]=0;for(f=8836;f<=8840;f++)E[f]=0;for(f=8857;f<=8859;f++)E[f]=0;for(f=8908;f<=8910;f++)E[f]=0;for(f=9154;f<=9159;f++)E[f]=0;for(f=9205;f<=9218;f++)E[f]=0;for(f=9271;f<=9273;f++)E[f]=0;for(f=9295;f<=9297;f++)E[f]=0;for(f=9356;f<=9360;f++)E[f]=0;for(f=9404;f<=9407;f++)E[f]=0;for(f=9476;f<=9482;f++)E[f]=0;for(f=9487;f<=9494;f++)E[f]=0;for(f=9697;f<=9699;f++)E[f]=0;for(f=9821;f<=9865;f++)E[f]=0;for(f=10285;f<=10291;f++)E[f]=0;for(f=10314;f<=10317;f++)E[f]=0;for(f=10448;f<=10465;f++)E[f]=0;for(f=11114;f<=11118;f++)E[f]=0;for(f=20004;f<=20032;f++)E[f]=0;for(f=20047;f<=20049;f++)E[f]=0;for(f=20062;f<=20092;f++)E[f]=0;for(f=20135;f<=20138;f++)E[f]=0;for(f=20248;f<=20258;f++)E[f]=0;for(f=20348;f<=20358;f++)E[f]=0;for(f=20436;f<=20440;f++)E[f]=0;for(f=20822;f<=20824;f++)E[f]=0;for(f=20904;f<=20932;f++)E[f]=0;for(f=20934;f<=20936;f++)E[f]=0;for(f=21004;f<=21032;f++)E[f]=0;for(f=21035;f<=21037;f++)E[f]=0;for(f=21095;f<=21097;f++)E[f]=0;for(f=21148;f<=21150;f++)E[f]=0;for(f=21207;f<=21264;f++)E[f]=0;for(f=21307;f<=21364;f++)E[f]=0;for(f=21413;f<=21423;f++)E[f]=0;for(f=21453;f<=21463;f++)E[f]=0;for(f=21473;f<=21483;f++)E[f]=0;for(f=21780;f<=21782;f++)E[f]=0;for(f=21891;f<=21894;f++)E[f]=0;for(f=21896;f<=21899;f++)E[f]=0;for(f=22171;f<=22177;f++)E[f]=0;for(f=22181;f<=22187;f++)E[f]=0;for(f=22191;f<=22197;f++)E[f]=0;for(f=22207;f<=22222;f++)E[f]=0;for(f=22229;f<=22232;f++)E[f]=0;for(f=22234;f<=22236;f++)E[f]=0;for(f=22243;f<=22250;f++)E[f]=0;for(f=22262;f<=22265;f++)E[f]=0;for(f=22307;f<=22322;f++)E[f]=0;for(f=22348;f<=22357;f++)E[f]=0;for(f=22407;f<=22422;f++)E[f]=0;for(f=22462;f<=22465;f++)E[f]=0;for(f=22521;f<=22525;f++)E[f]=0;for(f=22607;f<=22622;f++)E[f]=0;for(f=22641;f<=22646;f++)E[f]=0;for(f=22648;f<=22657;f++)E[f]=0;for(f=22707;f<=22722;f++)E[f]=0;for(f=22762;f<=22765;f++)E[f]=0;for(f=22807;f<=22822;f++)E[f]=0;for(f=22991;f<=22994;f++)E[f]=0;for(f=23028;f<=23038;f++)E[f]=0;for(f=23301;f<=23333;f++)E[f]=2;for(f=23830;f<=23853;f++)E[f]=0;for(f=23866;f<=23872;f++)E[f]=0;for(f=23877;f<=23884;f++)E[f]=0;for(f=23886;f<=23894;f++)E[f]=0;for(f=23946;f<=23948;f++)E[f]=0;for(f=24311;f<=24313;f++)E[f]=0;for(f=24342;f<=24347;f++)E[f]=0;for(f=24370;f<=24374;f++)E[f]=10;for(f=24375;f<=24381;f++)E[f]=0;for(f=24718;f<=24721;f++)E[f]=0;for(f=24817;f<=24821;f++)E[f]=0;for(f=24877;f<=24882;f++)E[f]=0;for(f=24891;f<=24893;f++)E[f]=0;for(f=25391;f<=25395;f++)E[f]=0;for(f=25828;f<=25838;f++)E[f]=0;for(f=26191;f<=26195;f++)E[f]=0;for(f=26391;f<=26393;f++)E[f]=0;for(f=26701;f<=26722;f++)E[f]=0;for(f=26729;f<=26799;f++)E[f]=2;for(f=26801;f<=26803;f++)E[f]=2;for(f=26811;f<=26813;f++)E[f]=2;for(f=26847;f<=26870;f++)E[f]=2;for(f=26891;f<=26899;f++)E[f]=0;for(f=26901;f<=26923;f++)E[f]=0;for(f=26929;f<=26946;f++)E[f]=0;for(f=26948;f<=26998;f++)E[f]=0;for(f=27037;f<=27040;f++)E[f]=0;for(f=27205;f<=27232;f++)E[f]=0;for(f=27258;f<=27260;f++)E[f]=0;for(f=27391;f<=27398;f++)E[f]=0;for(f=27561;f<=27564;f++)E[f]=0;for(f=27571;f<=27574;f++)E[f]=0;for(f=27581;f<=27584;f++)E[f]=0;for(f=27591;f<=27594;f++)E[f]=0;for(f=28191;f<=28193;f++)E[f]=0;for(f=28348;f<=28358;f++)E[f]=0;for(f=28402;f<=28432;f++)E[f]=0;for(f=28462;f<=28492;f++)E[f]=0;for(f=29118;f<=29122;f++)E[f]=0;for(f=29168;f<=29172;f++)E[f]=0;for(f=29177;f<=29185;f++)E[f]=0;for(f=29187;f<=29195;f++)E[f]=0;for(f=29900;f<=29903;f++)E[f]=0;for(f=30161;f<=30179;f++)E[f]=0;for(f=30491;f<=30494;f++)E[f]=0;for(f=30729;f<=30732;f++)E[f]=0;for(f=31251;f<=31259;f++)E[f]=0;for(f=31265;f<=31268;f++)E[f]=0;for(f=31275;f<=31279;f++)E[f]=0;for(f=31281;f<=31297;f++)E[f]=0;for(f=31461;f<=31469;f++)E[f]=0;for(f=31491;f<=31495;f++)E[f]=0;for(f=31917;f<=31922;f++)E[f]=0;for(f=31965;f<=32e3;f++)E[f]=0;for(f=32001;f<=32003;f++)E[f]=2;for(f=32005;f<=32031;f++)E[f]=2;for(f=32033;f<=32060;f++)E[f]=2;for(f=32064;f<=32067;f++)E[f]=2;for(f=32074;f<=32077;f++)E[f]=2;for(f=32081;f<=32086;f++)E[f]=0;for(f=32107;f<=32130;f++)E[f]=0;for(f=32133;f<=32159;f++)E[f]=0;for(f=32164;f<=32167;f++)E[f]=2;for(f=32180;f<=32199;f++)E[f]=0;for(f=32201;f<=32260;f++)E[f]=0;for(f=32301;f<=32360;f++)E[f]=0;for(f=32401;f<=32460;f++)E[f]=0;for(f=32501;f<=32560;f++)E[f]=0;for(f=32601;f<=32662;f++)E[f]=0;for(f=32664;f<=32667;f++)E[f]=2;for(f=32701;f<=32761;f++)E[f]=0;for(f=53001;f<=53004;f++)E[f]=0;for(f=53008;f<=53019;f++)E[f]=0;for(f=53021;f<=53032;f++)E[f]=0;for(f=53034;f<=53037;f++)E[f]=0;for(f=53042;f<=53046;f++)E[f]=0;for(f=53074;f<=53080;f++)E[f]=0;for(f=54001;f<=54004;f++)E[f]=0;for(f=54008;f<=54019;f++)E[f]=0;for(f=54021;f<=54032;f++)E[f]=0;for(f=54034;f<=54037;f++)E[f]=0;for(f=54042;f<=54046;f++)E[f]=0;for(f=54048;f<=54053;f++)E[f]=0;for(f=54074;f<=54080;f++)E[f]=0;for(f=54098;f<=54101;f++)E[f]=0;for(f=102001;f<=102040;f++)E[f]=0;for(f=102042;f<=102063;f++)E[f]=0;for(f=102065;f<=102067;f++)E[f]=0;for(f=102070;f<=102117;f++)E[f]=0;for(f=102122;f<=102216;f++)E[f]=0;for(f=102221;f<=102377;f++)E[f]=0;for(f=102382;f<=102388;f++)E[f]=0;for(f=102389;f<=102398;f++)E[f]=2;for(f=102399;f<=102444;f++)E[f]=0;for(f=102445;f<=102447;f++)E[f]=2;for(f=102448;f<=102458;f++)E[f]=0;for(f=102459;f<=102468;f++)E[f]=2;for(f=102469;f<=102499;f++)E[f]=0;for(f=102500;f<=102519;f++)E[f]=1;for(f=102520;f<=102524;f++)E[f]=0;for(f=102525;f<=102529;f++)E[f]=2;for(f=102530;f<=102588;f++)E[f]=0;for(f=102590;f<=102598;f++)E[f]=0;for(f=102601;f<=102603;f++)E[f]=0;for(f=102605;f<=102628;f++)E[f]=0;for(f=102629;f<=102646;f++)E[f]=2;for(f=102648;f<=102700;f++)E[f]=2;for(f=102701;f<=102703;f++)E[f]=0;for(f=102707;f<=102730;f++)E[f]=2;for(f=102733;f<=102758;f++)E[f]=2;for(f=102767;f<=102900;f++)E[f]=0;for(f=102901;f<=102933;f++)E[f]=2;for(f=102934;f<=102950;f++)E[f]=13;for(f=102951;f<=102955;f++)E[f]=0;for(f=102961;f<=102963;f++)E[f]=0;for(f=102965;f<=102969;f++)E[f]=0;for(f=102971;f<=102973;f++)E[f]=0;for(f=102975;f<=102989;f++)E[f]=0;for(f=102990;f<=102992;f++)E[f]=1;for(f=102997;f<=103002;f++)E[f]=0;for(f=103003;f<=103008;f++)E[f]=2;for(f=103009;f<=103011;f++)E[f]=0;for(f=103012;f<=103014;f++)E[f]=2;for(f=103019;f<=103021;f++)E[f]=0;for(f=103022;f<=103024;f++)E[f]=2;for(f=103029;f<=103031;f++)E[f]=0;for(f=103032;f<=103034;f++)E[f]=2;for(f=103065;f<=103068;f++)E[f]=0;for(f=103074;f<=103076;f++)E[f]=0;for(f=103077;f<=103079;f++)E[f]=1;for(f=103080;f<=103082;f++)E[f]=0;for(f=103083;f<=103085;f++)E[f]=2;for(f=103090;f<=103093;f++)E[f]=0;for(f=103097;f<=103099;f++)E[f]=0;for(f=103100;f<=103102;f++)E[f]=2;for(f=103107;f<=103109;f++)E[f]=0;for(f=103110;f<=103112;f++)E[f]=2;for(f=103113;f<=103116;f++)E[f]=0;for(f=103117;f<=103120;f++)E[f]=2;for(f=103153;f<=103157;f++)E[f]=0;for(f=103158;f<=103162;f++)E[f]=2;for(f=103163;f<=103165;f++)E[f]=0;for(f=103166;f<=103168;f++)E[f]=1;for(f=103169;f<=103171;f++)E[f]=2;for(f=103186;f<=103188;f++)E[f]=0;for(f=103189;f<=103191;f++)E[f]=2;for(f=103192;f<=103195;f++)E[f]=0;for(f=103196;f<=103199;f++)E[f]=2;for(f=103200;f<=103224;f++)E[f]=0;for(f=103225;f<=103227;f++)E[f]=1;for(f=103232;f<=103237;f++)E[f]=0;for(f=103238;f<=103243;f++)E[f]=2;for(f=103244;f<=103246;f++)E[f]=0;for(f=103247;f<=103249;f++)E[f]=2;for(f=103254;f<=103256;f++)E[f]=0;for(f=103257;f<=103259;f++)E[f]=2;for(f=103264;f<=103266;f++)E[f]=0;for(f=103267;f<=103269;f++)E[f]=2;for(f=103300;f<=103375;f++)E[f]=0;for(f=103381;f<=103383;f++)E[f]=0;for(f=103384;f<=103386;f++)E[f]=1;for(f=103387;f<=103389;f++)E[f]=0;for(f=103390;f<=103392;f++)E[f]=2;for(f=103397;f<=103399;f++)E[f]=0;for(f=103400;f<=103471;f++)E[f]=2;for(f=103476;f<=103478;f++)E[f]=0;for(f=103479;f<=103481;f++)E[f]=2;for(f=103486;f<=103488;f++)E[f]=0;for(f=103489;f<=103491;f++)E[f]=2;for(f=103492;f<=103495;f++)E[f]=0;for(f=103496;f<=103499;f++)E[f]=2;for(f=103528;f<=103543;f++)E[f]=0;for(f=103544;f<=103548;f++)E[f]=2;for(f=103549;f<=103551;f++)E[f]=0;for(f=103552;f<=103554;f++)E[f]=1;for(f=103555;f<=103557;f++)E[f]=2;for(f=103558;f<=103560;f++)E[f]=0;for(f=103571;f<=103573;f++)E[f]=0;for(f=103574;f<=103576;f++)E[f]=2;for(f=103577;f<=103580;f++)E[f]=0;for(f=103581;f<=103583;f++)E[f]=2;for(f=103595;f<=103694;f++)E[f]=0;for(f=103696;f<=103699;f++)E[f]=0;for(f=103700;f<=103793;f++)E[f]=2;for(f=103794;f<=103890;f++)E[f]=0;for(f=103891;f<=103896;f++)E[f]=2;for(f=103900;f<=103971;f++)E[f]=2;for(f=103972;f<=103977;f++)E[f]=0;for(f=112e3;f<=112101;f++)E[f]=0;const Wye={102113:!0,102100:!0,3857:!0,3785:!0},Jye={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},V6='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',vS=[-20037508342788905e-9,20037508342788905e-9],bS=[-20037508342787e-6,20037508342787e-6],qJ={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:vS,origin:bS,dx:1e-5},102100:{wkTemplate:V6,valid:vS,origin:bS,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:vS,origin:bS,dx:1e-5},3857:{wkTemplate:V6,valid:vS,origin:bS,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function ti(t,e){if(t===e)return!0;if(t==null||e==null)return!1;if(t.wkid!=null||e.wkid!=null)return t.wkid===e.wkid||$f(t)&&$f(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid;const i=t.wkt2??t.wkt,r=e.wkt2??e.wkt;return!(!i||!r)&&i.toUpperCase()===r.toUpperCase()}function vs(t){return cr(t)&&t.wkid&&qJ[t.wkid]||null}function DE(t){if(!t)return;if(t.wkid)return String(t.wkid);const e=t.wkt||t.wkt2;return JSON.stringify(e?{wkt:e}:{})}function w5(t){if(!cr(t))return!1;if(t.wkid)return E[t.wkid]==null;const e=t.wkt2||t.wkt;return!!e&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(e)}function Zye(t){return!(t_(t)||i_(t))}function t1(t){return cr(t)&&t.wkid===4326}function QUe(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function XUe(t){return cr(t)&&t.wkid===to.CGCS2000}function $f(t){return cr(t)&&t.wkid!=null&&Wye[t.wkid]===!0}function Yye(t){return cr(t)&&t.wkid===32662}function _5(t){return t===to.GCSMARS2000||t===to.GCSMARS2000_SPHERE}function t_(t){return cr(t)&&t.wkid!=null&&_5(t.wkid)}function S5(t){return t===to.GCSMOON2000}function i_(t){return cr(t)&&t.wkid!=null&&S5(t.wkid)}function Kye(t){return cr(t)&&t.wkid!=null&&Jye[t.wkid]===!0}function cr(t){return t!=null&&(t.wkid!=null&&t.wkid>=2e3||t.wkt2!=null||t.wkt!=null)}const Qye={wkid:4326,wkt:Sk(qJ[4326].wkTemplate,{Central_Meridian:"0.0"})},Xye={wkid:102100,latestWkid:3857},ege={wkid:32662};function $5(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const tge=$5(Lt),x5=$5(Ic),E5=$5(Wd),ige={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Lt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function rge(t){return t!=null&&(t_(t)||ti(t,x5))?Ic:t!=null&&(i_(t)||ti(t,E5))?Wd:Lt}function e9e(t){return _5(t)?Ic:S5(t)?Wd:Lt}function FE(t){return ti(t,tge)}function Jd(t){return FE(t)||ti(t,x5)||ti(t,E5)}const WJ=39.37,nge=Lt.radius*Math.PI/200,JJ=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,tf=E,ZJ=/UNIT\[([^\]]+)]/i,sge=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),oge=Zi()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),_a=t=>t*t,ou=t=>t*t*t,i1={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:_a(.001)},"square-centimeters":{inBaseUnits:_a(.01)},"square-decimeters":{inBaseUnits:_a(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:_a(1e3)},"square-inches":{inBaseUnits:_a(.0254)},"square-feet":{inBaseUnits:_a(.3048)},"square-yards":{inBaseUnits:_a(.9144)},"square-miles":{inBaseUnits:_a(1609.344)},"square-us-feet":{inBaseUnits:_a(1200/3937)},acres:{inBaseUnits:.0015625*_a(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*ou(.001)},"cubic-centimeters":{inBaseUnits:1e3*ou(.01)},"cubic-decimeters":{inBaseUnits:1e3*ou(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*ou(1e3)},"cubic-inches":{inBaseUnits:1e3*ou(.0254)},"cubic-feet":{inBaseUnits:1e3*ou(.3048)},"cubic-yards":{inBaseUnits:1e3*ou(.9144)},"cubic-miles":{inBaseUnits:1e3*ou(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},age=(()=>{const t={};for(const e in i1)for(const i in i1[e].units)t[i]=e;return t})();function lge(t,e,i){return t*i1[i].units[e].inBaseUnits}function cge(t,e,i){return t/i1[i].units[e].inBaseUnits}function iA(t){const e=age[t];if(!e)throw new Error("unknown type");return e}function U6(t,e=null){return e=e||iA(t),i1[e].baseUnit===t}function Rs(t,e,i){if(e===i)return t;const r=iA(e);if(r!==iA(i))throw new Error("incompatible units");const n=U6(e,r)?t:lge(t,e,r);return U6(i,r)?n:cge(n,i,r)}function uge(t,e,i){return Rs(t,e,"meters")/(i*Math.PI/180)}function YJ(t){return oge.fromJSON(t.toLowerCase())||null}function jE(t){if(t!=null&&!Zye(t))return 1;const e=Cl(t);return e>1e5?1:e}function dge(t){return Cl(t)>=rge(t).metersPerDegree?"meters":QJ(t)}function Cl(t,e=Lt.metersPerDegree){return pge(t,!0)??e}function pge(t,e=!1){const i=(t==null?void 0:t.wkid)??null,r=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let n=null;if(i){if(_5(i))return Ic.metersPerDegree;if(S5(i))return Wd.metersPerDegree;n=tf.values[tf[i]],!n&&e&&sge.has(i)&&(n=nge)}else r&&(eZ(r)?n=B6(JJ.exec(r),n):XJ(r)&&(n=B6(ZJ.exec(r),n)));return n}function t9e(t){return w5(t)?1:Cl(t)}function B6(t,e){return t!=null&&t[1]?KJ(t[1]):e}function KJ(t){return parseFloat(t.split(",")[1])}function QJ(t){const e=(t==null?void 0:t.wkid)??null,i=(t==null?void 0:t.wkt2)??(t==null?void 0:t.wkt)??null;let r=null;if(e)r=tf.units[tf[e]];else if(i){const n=eZ(i)?JJ:XJ(i)?ZJ:null;if(n){const s=n.exec(i);s!=null&&s[1]&&(r=fge(s[1]))}}return r!=null?YJ(r):null}function XJ(t){return/^GEOCCS/i.test(t)}function eZ(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const hge=1e-7;function fge(t){const e=/[\\"']{1}([^\\"']+)/.exec(t);let i=e==null?void 0:e[1];if(!i||!tf.units.includes(i)){const r=KJ(t);i=null;const n=tf.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<hge){i=tf.units[s];break}}return i}const mge={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},yge={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},gge={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},vge=Zi()(mge),bge=Zi()(yge),i9e=Zi()(gge);var Ta;let Xe=Ta=class extends B{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return Ta.WebMercator;if(t.wkid===4326)return Ta.WGS84}const e=new Ta;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return t1(this)}get isWebMercator(){return $f(this)}get isGeographic(){return w5(this)}get isWrappable(){return Kye(this)}get metersPerUnit(){return Cl(this)}get unit(){return QJ(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Ta.WGS84)return Ta.WGS84;if(this===Ta.WebMercator)return Ta.WebMercator;const t=new Ta;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(t.wkt=this.wkt),this.wkt2!=null&&(t.wkt2=this.wkt2)),this.imageCoordinateSystem&&(t.imageCoordinateSystem=D(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:r}=t.imageCoordinateSystem,n=this.imageCoordinateSystem;return e==null||r?JSON.stringify(n)===JSON.stringify(t.imageCoordinateSystem):i?n.id===e&&n.referenceServiceName===i:n.id===e}return ti(this,t)}toJSON(t){return this.write(void 0,t)}};Xe.GCS_NAD_1927=null,Xe.WGS84=null,Xe.WebMercator=null,Xe.PlateCarree=null,c([d({readOnly:!0})],Xe.prototype,"isWGS84",null),c([d({readOnly:!0})],Xe.prototype,"isWebMercator",null),c([d({readOnly:!0})],Xe.prototype,"isGeographic",null),c([d({readOnly:!0})],Xe.prototype,"isWrappable",null),c([d({type:ft,json:{write:!0}})],Xe.prototype,"latestWkid",void 0),c([d({readOnly:!0})],Xe.prototype,"metersPerUnit",null),c([d({readOnly:!0})],Xe.prototype,"unit",null),c([d({type:ft,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Xe.prototype,"wkid",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Xe.prototype,"wkt",void 0),c([ee("wkt"),ee("web-scene","wkt")],Xe.prototype,"writeWkt",null),c([d({type:String,json:{write:!1}})],Xe.prototype,"wkt2",void 0),c([d({type:ft,json:{write:!0}})],Xe.prototype,"vcsWkid",void 0),c([d({type:ft,json:{write:!0}})],Xe.prototype,"latestVcsWkid",void 0),c([d()],Xe.prototype,"imageCoordinateSystem",void 0),Xe=Ta=c([k("esri.geometry.SpatialReference")],Xe),Xe.prototype.toJSON.isDefaultToJSON=!0,Xe.GCS_NAD_1927=new Xe({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Xe.WGS84=new Xe(Qye),Xe.WebMercator=new Xe(Xye),Xe.PlateCarree=new Xe(ege),Object.freeze&&(Object.freeze(Xe.GCS_NAD_1927),Object.freeze(Xe.WGS84),Object.freeze(Xe.WebMercator));const Ee=Xe;function K(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach(l=>{const u=oJ(s,l,n);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],i&&(u.read.source=(u.read.source||[]).concat(i))})}}let ka=class extends B{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ee.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Ee)return e;if(e!=null){const r=new Ee;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};c([d()],ka.prototype,"type",void 0),c([d({readOnly:!0})],ka.prototype,"cache",null),c([d({readOnly:!0})],ka.prototype,"extent",null),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ka.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ka.prototype,"hasZ",void 0),c([d({type:Ee,json:{write:!0},value:Ee.WGS84})],ka.prototype,"spatialReference",void 0),c([K("spatialReference")],ka.prototype,"readSpatialReference",null),ka=c([k("esri.geometry.Geometry")],ka);const op=ka,wge=Object.prototype.toString;function _ge(t){const e="__accessorMetadata__"in t?ei(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Sge.apply(this,i)}}function Sge(t,e,i,r){xk(t,e).cast=r}function $ge(t){return(e,i)=>{xk(e,t).cast=e[i]}}function qe(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&wge.call(t[0])==="[object Function]"?_ge(t[0]):t.length===1&&typeof t[0]=="string"?$ge(t[0]):void 0}function xge(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}const Ege=57.29577951308232,Tge=.017453292519943;function G6(t){return t*Ege}function H6(t){return t*Tge}function q6(t){return t/Lt.radius}function W6(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Lt.radius))}function rA(t){return t.wkid!=null||t.wkt!=null}const RC=[0,0];function zE(t,e,i,r,n){const s=t,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,RC,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,RC,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,RC,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let u;for(let p=0;p<a.length;p++){const h=a[p];u=[],l.push(u);for(let m=0;m<h.length;m++)u.push(e(h[m][0],h[m][1],[0,0],r)),h[m].length>2&&u[m].push(h[m][2]),h[m].length>3&&u[m].push(h[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let u=0;u<a.length;u++)l[u]=e(a[u][0],a[u][1],[0,0],r),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return n}function X$(t,e){const i=t&&(rA(t)?t:t.spatialReference),r=e&&(rA(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!ti(r,i)||$f(r)&&t1(i)||$f(i)&&t1(r))}function Rk(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(rA(e)?e:e.spatialReference);return X$(i,r)?ti(i,r)?D(t):$f(r)?zE(t,By,Ee.WebMercator,!1,D(t)):t1(r)?zE(t,Yb,Ee.WGS84,!1,D(t)):null:null}function By(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=H6(e);return i[0]=H6(t)*Lt.radius,i[1]=Lt.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function Yb(t,e,i=[0,0],r=!1){const n=G6(t/Lt.radius);return i[0]=r?n:n-360*Math.floor((n+180)/360),i[1]=G6(Math.PI/2-2*Math.atan(Math.exp(-e/Lt.radius))),i}function Rd(t,e=!1,i=D(t)){return zE(t,By,Ee.WebMercator,e,i)}function Gy(t,e=!1,i=D(t)){return zE(t,Yb,Ee.WGS84,e,i)}var ex;const X0=[0,0];function J6(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Qr=ex=class extends op{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let s;if(Array.isArray(t))s=t,n=e,t=s[0],e=s[1],i=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new Ee(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)q.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)q.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&n&&n.isWebMercator){const a=By(s.longitude,s.latitude,X0);t=a[0],e=a[1]}}}else J6(i)?(n=i,i=null):J6(r)&&(n=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?q.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&q.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return Yb(e,i,X0)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",By(i,t,X0)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return Yb(t,e,X0)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",By(t,e,X0)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new ex;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return ex.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:u,spatialReference:p}=t;if(!s.equals(p))if(s.isWebMercator&&p.isWGS84)[l,u]=By(l,u),p=s;else{if(!s.isWGS84||!p.isWebMercator)return!1;[l,u]=Yb(l,u),p=s}return e===l&&i===u&&r===o&&n===a&&s.wkid===p.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=vs(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n),this._set("x",e),this}distance(t){return xge(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],Qr.prototype,"cache",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Qr.prototype,"hasM",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Qr.prototype,"hasZ",null),c([d({type:Number})],Qr.prototype,"latitude",null),c([d({type:Number})],Qr.prototype,"longitude",null),c([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),qe(t=>isNaN(t)?t:Xs(t))],Qr.prototype,"x",void 0),c([ee("x")],Qr.prototype,"writeX",null),c([K("x")],Qr.prototype,"readX",null),c([d({type:Number,json:{write:!0}})],Qr.prototype,"y",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Qr.prototype,"z",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Qr.prototype,"m",void 0),Qr=ex=c([k("esri.geometry.Point")],Qr),Qr.prototype.toJSON.isDefaultToJSON=!0;const Me=Qr,NC=[0,0];function Nk(t,e){return e!=null&&on(t,e.x,e.y,e.z)}function n9e(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!Ug(t,i))return!1;return!0}function kge(t,e){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?on(t,i,r,n)&&on(t,i,o,n)&&on(t,s,o,n)&&on(t,s,r,n)&&on(t,i,r,a)&&on(t,i,o,a)&&on(t,s,o,a)&&on(t,s,r,a):on(t,i,r)&&on(t,i,o)&&on(t,s,o)&&on(t,s,r)}function Ug(t,e){return on(t,e[0],e[1])}function Ige(t,e){return on(t,e[0],e[1],e[2])}function on(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function tZ(t,e){return NC[1]=e.y,NC[0]=e.x,Cge(t,NC)}function Cge(t,e){return iZ(t.rings,e)}function iZ(t,e){if(!t)return!1;if(Mge(t))return Z6(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=Z6(i,t[r],e);return i}function Mge(t){return!Array.isArray(t[0][0])}function Z6(t,e,i){const[r,n]=i;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[u,p]=e[a],[h,m]=e[o];(p<n&&m>=n||m<n&&p>=n)&&u+(n-p)/(m-p)*(h-u)<r&&(s=!s)}return s}function Lge(t,e){return Nk(t,e)}function Oge(t,e){const i=t.hasZ&&e.hasZ;let r,n,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function Age(t,e){const{points:i,hasZ:r}=e,n=r?Ige:Ug;for(const s of i)if(n(t,s))return!0;return!1}const xf=[0,0],Ef=[0,0],Tf=[0,0],kf=[0,0],Pge=[xf,Ef,Tf,kf],rZ=[[Tf,xf],[xf,Ef],[Ef,kf],[kf,Tf]];function Rge(t,e){return Nge(t,e.rings)}function Nge(t,e){xf[0]=t.xmin,xf[1]=t.ymax,Ef[0]=t.xmax,Ef[1]=t.ymax,Tf[0]=t.xmin,Tf[1]=t.ymin,kf[0]=t.xmax,kf[1]=t.ymin;for(const i of Pge)if(iZ(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(Ug(t,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(Ug(t,s)||nZ(r,s,rZ))return!0;r=s}}return!1}function Dge(t,e){xf[0]=t.xmin,xf[1]=t.ymax,Ef[0]=t.xmax,Ef[1]=t.ymax,Tf[0]=t.xmin,Tf[1]=t.ymin,kf[0]=t.xmax,kf[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(Ug(t,n))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(Ug(t,o)||nZ(n,o,rZ))return!0;n=o}}return!1}const Xi=[0,0];function Fge(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const u=t[a][l],p=t[a][l+1];if(nA(s,o,u,p,Xi)&&!(Xi[0]===s[0]&&Xi[1]===s[1]||Xi[0]===u[0]&&Xi[1]===u[1]||Xi[0]===o[0]&&Xi[1]===o[1]||Xi[0]===p[0]&&Xi[1]===p[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const o=i[n],a=i[n+1];for(let l=n+2;l<s;l++){const u=i[l],p=i[l+1];if(nA(o,a,u,p,Xi)&&!(Xi[0]===o[0]&&Xi[1]===o[1]||Xi[0]===u[0]&&Xi[1]===u[1]||Xi[0]===a[0]&&Xi[1]===a[1]||Xi[0]===p[0]&&Xi[1]===p[1]))return!0}}}return!1}function nZ(t,e,i){for(let r=0;r<i.length;r++)if(nA(t,e,i[r][0],i[r][1]))return!0;return!1}function nA(t,e,i,r,n){const[s,o]=t,[a,l]=e,[u,p]=i,[h,m]=r,y=h-u,g=s-u,v=a-s,w=m-p,b=o-p,_=l-o,S=w*v-y*_;if(S===0)return!1;const $=(y*b-w*g)/S,T=(v*b-_*g)/S;return $>=0&&$<=1&&T>=0&&T<=1&&(n&&(n[0]=s+$*(a-s),n[1]=o+$*(l-o)),!0)}function jge(t){switch(t){case"esriGeometryEnvelope":case"extent":return Oge;case"esriGeometryMultipoint":case"multipoint":return Age;case"esriGeometryPoint":case"point":return Lge;case"esriGeometryPolygon":case"polygon":return Rge;case"esriGeometryPolyline":case"polyline":return Dge}}var Ns;function zge(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function au(t,e,i){return e==null?i:i==null?e:t(e,i)}let Ni=Ns=class extends op{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return zge(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Ee.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??Ee.WGS84}}static fromBounds(t,e){return new Ns({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new Ns({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Me({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Ns;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&X$(e,i)&&(t=e.isWebMercator?Rd(t):Gy(t,!0)),t.type==="point"?Nk(this,t):t.type==="extent"&&kge(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&X$(e,i)&&(t=e.isWebMercator?Rd(t):Gy(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!ti(e,i)&&X$(e,i)&&(t=e.isWebMercator?Rd(t):Gy(t,!0)),jge(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=au(Math.min,this.zmin,t.zmin),this.zmax=au(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=au(Math.min,this.mmin,t.mmin),this.mmax=au(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=au(Math.max,this.zmin,t.zmin),this.zmax=au(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=au(Math.max,this.mmin,t.mmin),this.mmax=au(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=vs(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?Gy(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=this._normalizeX(r.x,t).x),this.spatialReference=new Ee(Sk((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??vs(r);if(n==null)return this;const s=this._getParts(n).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const p=(l.zmax-l.zmin)/2;for(let h=0;h<u.length;h++)u[h].push(p)}if(a){const p=(l.mmax-l.mmin)/2;for(let h=0;h<u.length;h++)u[h].push(p)}return u}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let p;t=t||vs(o);const[h,m]=t.valid;p=this._normalizeX(this.xmin,t);const y=p.x,g=p.frameId;p=this._normalizeX(this.xmax,t);const v=p.x,w=p.frameId,b=y===v&&a>0;if(a>2*m){const _=new Ns(l<u?y:v,n,m,s,o),S=new Ns(h,n,l<u?v:y,s,o),$=new Ns(0,n,m,s,o),T=new Ns(h,n,0,s,o),I=[],C=[];_.contains($)&&I.push(g),_.contains(T)&&C.push(g),S.contains($)&&I.push(w),S.contains(T)&&C.push(w);for(let M=g+1;M<w;M++)I.push(M),C.push(M);e.push({extent:_,frameIds:[g]},{extent:S,frameIds:[w]},{extent:$,frameIds:I},{extent:T,frameIds:C})}else y>v||b?e.push({extent:new Ns(y,n,m,s,o),frameIds:[g]},{extent:new Ns(h,n,v,s,o),frameIds:[w]}):e.push({extent:new Ns(y,n,v,s,o),frameIds:[g]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(n)}return e}_normalizeX(t,e){const[i,r]=e.valid,n=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n,o=-s),{x:t,frameId:o}}};c([d({readOnly:!0})],Ni.prototype,"cache",null),c([d({readOnly:!0})],Ni.prototype,"center",null),c([d({readOnly:!0})],Ni.prototype,"extent",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Ni.prototype,"hasM",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Ni.prototype,"hasZ",null),c([d({readOnly:!0})],Ni.prototype,"height",null),c([d({readOnly:!0})],Ni.prototype,"width",null),c([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Ni.prototype,"xmin",void 0),c([d({type:Number,json:{write:!0}})],Ni.prototype,"ymin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ni.prototype,"mmin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ni.prototype,"zmin",void 0),c([d({type:Number,json:{write:!0}})],Ni.prototype,"xmax",void 0),c([d({type:Number,json:{write:!0}})],Ni.prototype,"ymax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ni.prototype,"mmax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ni.prototype,"zmax",void 0),Ni=Ns=c([k("esri.geometry.Extent")],Ni),Ni.prototype.toJSON.isDefaultToJSON=!0;const ct=Ni;let Kb;var N7,D7;const Vge=((N7=globalThis.esriConfig)==null?void 0:N7.locale)??((D7=globalThis.dojoConfig)==null?void 0:D7.locale);function sZ(){var t;return Vge??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function Fn(){return Kb===void 0&&(Kb=sZ()),Kb}function oZ(t=Fn()){const e=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(t);return e==null?void 0:e[1].toLowerCase()}const Qb=[];function Dk(t){return Qb.push(t),Mt(()=>Qb.splice(Qb.indexOf(t),1))}const sA=[];function T5(t){return sA.push(t),Mt(()=>Qb.splice(sA.indexOf(t),1))}function Uge(){const t=sZ();Kb!==t&&(Kb=t,[...sA].forEach(e=>{e.call(null,t)}),[...Qb].forEach(e=>{e.call(null,t)}))}var F7;(F7=globalThis.addEventListener)==null||F7.call(globalThis,"languagechange",Uge);let wS;function Bge(t){return wS&&!wS.destroyed||(wS=t()),wS}var oA;const Gge=new $e({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Ds=oA=class extends de{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new oA({categories:this.categories?D(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=Rk(this.extent,Ee.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>Gge.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};c([d()],Ds.prototype,"categories",void 0),c([d()],Ds.prototype,"disableExtraQuery",void 0),c([d({type:ct})],Ds.prototype,"extent",void 0),c([d()],Ds.prototype,"filter",void 0),c([d()],Ds.prototype,"num",void 0),c([d()],Ds.prototype,"query",void 0),c([d()],Ds.prototype,"sortField",void 0),c([d()],Ds.prototype,"sortOrder",null),c([d()],Ds.prototype,"start",void 0),Ds=oA=c([k("esri.portal.PortalQueryParams")],Ds);const ll=Ds;var aA;let xi=aA=class extends B{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const t=this.url,e=this.thumbnail;return t&&e&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new j("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new aA;return e.sourceJSON=t,e.read(t),e}queryItems(t,e){let i=ei(ll,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new ll,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new ll,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(r=>{const n=r.contentCategorySetsGroupQuery;if(n){const s=new ll;return s.disableExtraQuery=!0,s.num=1,s.query=n,i.queryGroups(s,e)}throw new j("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const n=r.results[0],s=new ll;return s.num=1,s.query=`typekeywords:"${t}"`,n.queryItems(s,e)}throw new j("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]}):[])}};c([d()],xi.prototype,"access",void 0),c([d({type:Date})],xi.prototype,"created",void 0),c([d()],xi.prototype,"description",void 0),c([d()],xi.prototype,"id",void 0),c([d()],xi.prototype,"isInvitationOnly",void 0),c([d({type:Date})],xi.prototype,"modified",void 0),c([d()],xi.prototype,"owner",void 0),c([d()],xi.prototype,"portal",void 0),c([d()],xi.prototype,"snippet",void 0),c([d()],xi.prototype,"sortField",void 0),c([d()],xi.prototype,"sortOrder",void 0),c([d()],xi.prototype,"sourceJSON",void 0),c([d()],xi.prototype,"tags",void 0),c([d()],xi.prototype,"thumbnail",void 0),c([d({readOnly:!0})],xi.prototype,"thumbnailUrl",null),c([d()],xi.prototype,"title",void 0),c([d({readOnly:!0})],xi.prototype,"url",null),xi=aA=c([k("esri.portal.PortalGroup")],xi);const lA=xi;let Rp=class extends de{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([d()],Rp.prototype,"nextQueryParams",void 0),c([d()],Rp.prototype,"queryParams",void 0),c([d()],Rp.prototype,"results",void 0),c([d()],Rp.prototype,"total",void 0),Rp=c([k("esri.portal.PortalQueryResult")],Rp);const Hge=Rp;let Bl=class extends B{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const e=(i=this.portal)==null?void 0:i.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new j("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([d({type:Date})],Bl.prototype,"created",void 0),c([d()],Bl.prototype,"id",void 0),c([d()],Bl.prototype,"portal",void 0),c([d()],Bl.prototype,"title",void 0),c([d({readOnly:!0})],Bl.prototype,"url",null),c([d()],Bl.prototype,"username",void 0),Bl=c([k("esri.portal.PortalFolder")],Bl);const qge=Bl;var cA;let Ot=cA=class extends B{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/content/users/${this.username}`:null}get url(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t==null?void 0:t.data,r=t==null?void 0:t.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(e,r).then(()=>{t.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const n=qge.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=lA.fromJSON(i);return r.portal=this.portal,r}):[],e})}fetchItems(t){const e=t??{};let i,r=this.userContentUrl??"";return e.folder&&(r+="/"+e.folder.id),Z(()=>Promise.resolve().then(()=>aZ),void 0).then(({default:n})=>{i=n;const s={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(r,{query:s})}).then(n=>{let s;return n!=null&&n.items?(s=n.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),Promise.all(s.map(o=>o.load())).catch(o=>o).then(()=>({items:s,nextStart:n.nextStart,total:n.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new lA({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new j("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new j("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new cA;return e.sourceJSON=t,e.read(t),e}};c([d()],Ot.prototype,"access",void 0),c([d({type:Date})],Ot.prototype,"created",void 0),c([d()],Ot.prototype,"culture",void 0),c([d()],Ot.prototype,"description",void 0),c([d()],Ot.prototype,"email",void 0),c([d()],Ot.prototype,"favGroupId",void 0),c([d()],Ot.prototype,"fullName",void 0),c([d({type:Date})],Ot.prototype,"modified",void 0),c([d()],Ot.prototype,"orgId",void 0),c([d()],Ot.prototype,"portal",void 0),c([d()],Ot.prototype,"preferredView",void 0),c([d()],Ot.prototype,"privileges",void 0),c([d()],Ot.prototype,"region",void 0),c([d()],Ot.prototype,"role",void 0),c([d()],Ot.prototype,"roleId",void 0),c([d()],Ot.prototype,"sourceJSON",void 0),c([d()],Ot.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Ot.prototype,"thumbnailUrl",null),c([d()],Ot.prototype,"units",void 0),c([d({readOnly:!0})],Ot.prototype,"userContentUrl",null),c([d({readOnly:!0})],Ot.prototype,"url",null),c([d()],Ot.prototype,"username",void 0),c([d()],Ot.prototype,"userType",void 0),Ot=cA=c([k("esri.portal.PortalUser")],Ot);const k5=Ot;var Gl;let _S;const Y6={PortalGroup:()=>Promise.resolve({default:lA}),PortalItem:()=>Z(()=>Promise.resolve().then(()=>aZ),void 0),PortalUser:()=>Promise.resolve({default:k5})};let se=Gl=class extends w0(Jr){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ze.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){K6.unregister(this),this.defaultBasemap=wt(this.defaultBasemap),this.defaultDevBasemap=wt(this.defaultDevBasemap),this.defaultVectorBasemap=wt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Xt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)Ze.request.trustedServers.includes(e)||Ze.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){var i;const t=(i=this.user)==null?void 0:i.orgId,e=!t||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=k5.fromJSON(t),e.portal=this),e}load(t){const e=Z(()=>Promise.resolve().then(()=>x0e),void 0).then(({default:i})=>{kt(t),_S=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var r;if(Ne){const n=Ne;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Gl.AUTH_MODE_AUTO||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",Wge(new WeakRef(this))),K6.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await Z(()=>import("./ElevationLayer-XotiXLux.js"),__vite__mapDeps([0,1,2,3,4]))).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(t,e);i.unshift(...r)}return i}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):pa(t)?Promise.reject(mt()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new ll;if(i.num=100,i.sortField="title",e&&e.length){const r=[];for(const n of e)r.push(`(title:"${n.title}" AND owner:${n.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,t).then(n=>n.results)}return pa(t)?Promise.reject(mt()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Fn();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Fn();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return Bge(()=>new Gl)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const r=this.restUrl+"/portals/self",n={authMode:t,query:{culture:Fn().toLowerCase()},...i};return n.authMode==="auto"&&(n.authMode="no-prompt"),e&&(n.query.default=!0),this.request(r,n)}queryPortal(t,e,i,r){const n=ei(ll,e),s=o=>this.request(this.restUrl+t,{...n.toRequestOptions(this),...r}).then(a=>{const l=n.clone();return l.start=a.nextStart,new Hge({nextQueryParams:l,queryParams:n,total:a.total,results:Gl._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(sl(l),a)));return i&&Y6[i]?Y6[i]().then(({default:o})=>(kt(r),s(o))):s()}signIn(){if(this.authMode===Gl.AUTH_MODE_ANONYMOUS)return Promise.reject(new j("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Ne?Ne.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){var i;const e=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(r=>{const n=Gl._resultsToTypedArray(i,{portal:this},r);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():r)).then(()=>n,()=>n)})}request(t,e={}){const i={f:"json",...e.query},{authMode:r=this.authMode===Gl.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=e,u={authMode:r,body:n,cacheBust:s,method:o,query:i,responseType:a,timeout:0,signal:l};return Ve(this._normalizeSSL(t),u).then(p=>p.data)}toJSON(){throw new j("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Gl({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new j("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new ll;i.query=t||(Ze.apiKey&&d5(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,e);if(!r.total)return[];const n=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const s=await n.queryItems(i,e);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new _S({portalItem:o})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const r=new ll({query:i,disableExtraQuery:!0}),n=await this.queryGroups(r,e);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,e);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new _S({portalItem:a})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=_S.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,r){let n=[];if(i){const s=r!=null?r.signal:null;n=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(n=n.map(o=>{const a=Object.assign(t?t.fromJSON(o):o,e);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};se.AUTH_MODE_ANONYMOUS="anonymous",se.AUTH_MODE_AUTO="auto",se.AUTH_MODE_IMMEDIATE="immediate",c([d()],se.prototype,"access",void 0),c([d()],se.prototype,"allSSL",void 0),c([d()],se.prototype,"authMode",void 0),c([d()],se.prototype,"authorizedCrossOriginDomains",void 0),c([K("authorizedCrossOriginDomains")],se.prototype,"readAuthorizedCrossOriginDomains",null),c([d()],se.prototype,"basemapGalleryGroupQuery",void 0),c([d({json:{name:"3DBasemapGalleryGroupQuery"}})],se.prototype,"basemapGalleryGroupQuery3D",void 0),c([d()],se.prototype,"bingKey",void 0),c([d()],se.prototype,"canListApps",void 0),c([d()],se.prototype,"canListData",void 0),c([d()],se.prototype,"canListPreProvisionedItems",void 0),c([d()],se.prototype,"canProvisionDirectPurchase",void 0),c([d()],se.prototype,"canSearchPublic",void 0),c([d()],se.prototype,"canShareBingPublic",void 0),c([d()],se.prototype,"canSharePublic",void 0),c([d()],se.prototype,"canSignInArcGIS",void 0),c([d()],se.prototype,"canSignInIDP",void 0),c([d()],se.prototype,"colorSetsGroupQuery",void 0),c([d()],se.prototype,"commentsEnabled",void 0),c([d({type:Date})],se.prototype,"created",void 0),c([d()],se.prototype,"credential",void 0),c([d()],se.prototype,"culture",void 0),c([d()],se.prototype,"currentVersion",void 0),c([d()],se.prototype,"customBaseUrl",void 0),c([d()],se.prototype,"defaultBasemap",void 0),c([K("defaultBasemap")],se.prototype,"readDefaultBasemap",null),c([d()],se.prototype,"defaultDevBasemap",void 0),c([K("defaultDevBasemap")],se.prototype,"readDefaultDevBasemap",null),c([d({type:ct})],se.prototype,"defaultExtent",void 0),c([d()],se.prototype,"defaultVectorBasemap",void 0),c([K("defaultVectorBasemap")],se.prototype,"readDefaultVectorBasemap",null),c([d()],se.prototype,"description",void 0),c([d()],se.prototype,"devBasemapGalleryGroupQuery",void 0),c([d()],se.prototype,"eueiEnabled",void 0),c([d({readOnly:!0})],se.prototype,"extraQuery",null),c([d()],se.prototype,"featuredGroups",void 0),c([d()],se.prototype,"featuredItemsGroupQuery",void 0),c([d()],se.prototype,"galleryTemplatesGroupQuery",void 0),c([d()],se.prototype,"livingAtlasGroupQuery",void 0),c([d()],se.prototype,"hasCategorySchema",void 0),c([d()],se.prototype,"helpBase",void 0),c([d()],se.prototype,"helperServices",void 0),c([d()],se.prototype,"helpMap",void 0),c([d()],se.prototype,"homePageFeaturedContent",void 0),c([d()],se.prototype,"homePageFeaturedContentCount",void 0),c([d()],se.prototype,"httpPort",void 0),c([d()],se.prototype,"httpsPort",void 0),c([d()],se.prototype,"id",void 0),c([d()],se.prototype,"ipCntryCode",void 0),c([d({readOnly:!0})],se.prototype,"isOrganization",null),c([d()],se.prototype,"isPortal",void 0),c([d()],se.prototype,"isReadOnly",void 0),c([d({readOnly:!0})],se.prototype,"itemPageUrl",null),c([d()],se.prototype,"layerTemplatesGroupQuery",void 0),c([d()],se.prototype,"maxTokenExpirationMinutes",void 0),c([d({type:Date})],se.prototype,"modified",void 0),c([d()],se.prototype,"name",void 0),c([d()],se.prototype,"portalHostname",void 0),c([d()],se.prototype,"portalMode",void 0),c([d()],se.prototype,"portalProperties",void 0),c([d()],se.prototype,"region",void 0),c([d({readOnly:!0})],se.prototype,"restUrl",null),c([d()],se.prototype,"rotatorPanels",void 0),c([d()],se.prototype,"showHomePageDescription",void 0),c([d()],se.prototype,"sourceJSON",void 0),c([d()],se.prototype,"staticImagesUrl",void 0),c([d({json:{name:"2DStylesGroupQuery"}})],se.prototype,"stylesGroupQuery2d",void 0),c([d({json:{name:"stylesGroupQuery"}})],se.prototype,"stylesGroupQuery3d",void 0),c([d()],se.prototype,"supportsHostedServices",void 0),c([d()],se.prototype,"symbolSetsGroupQuery",void 0),c([d()],se.prototype,"templatesGroupQuery",void 0),c([d()],se.prototype,"thumbnail",void 0),c([d({readOnly:!0})],se.prototype,"thumbnailUrl",null),c([d()],se.prototype,"units",void 0),c([d()],se.prototype,"url",void 0),c([d()],se.prototype,"urlKey",void 0),c([K("urlKey")],se.prototype,"readUrlKey",null),c([d()],se.prototype,"user",void 0),c([K("user")],se.prototype,"readUser",null),c([d()],se.prototype,"use3dBasemaps",void 0),c([d()],se.prototype,"useStandardizedQuery",void 0),c([d()],se.prototype,"useVectorBasemaps",void 0),c([d()],se.prototype,"vectorBasemapGalleryGroupQuery",void 0),se=Gl=c([k("esri.portal.Portal")],se);const gi=se,K6=new FinalizationRegistry(t=>{t.remove()});function Wge(t){const e=Ne;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Hl=class extends de{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e!=null&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){e!=null&&gs(e)?q.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new j("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResource:r}=await Z(()=>import("./resourceUtils-0deFedx4.js"),__vite__mapDeps([]));return r(this,"update",e,i)}hasPath(){return this.path!=null}_normalizePath(e,i){return e==null?e:(e=e.replace(/^\/+/,""),i!=null&&gs(e)&&(e=s5(e,i.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};c([d()],Hl.prototype,"portalItem",void 0),c([d({type:String,value:null})],Hl.prototype,"path",null),c([qe("path")],Hl.prototype,"_castPath",null),c([d({type:String,readOnly:!0})],Hl.prototype,"url",null),c([d({type:String,readOnly:!0})],Hl.prototype,"cdnUrl",null),c([d({type:String,readOnly:!0})],Hl.prototype,"itemRelativeUrl",null),Hl=c([k("esri.portal.PortalItemResource")],Hl);const Jge=Hl;let kv=class extends de{constructor(e){super(e),this.created=null,this.rating=null}};c([d()],kv.prototype,"created",void 0),c([d()],kv.prototype,"rating",void 0),kv=c([k("esri.portal.PortalRating")],kv);const DC=kv;var Np;const Zge=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),Yge=new Set(["KML","GeoJson","CSV"]);let De=Np=class extends w0(Jr){static from(t){return Mk(Np,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"&&(i="Excalibur Project"),i}readExtent(t){return t&&t.length?new ct(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){var m;const t=((m=this.type)==null?void 0:m.toLowerCase())||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,o=!1,a=!1,l=!1,u=!1,p=!1,h=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),u=e.includes("Spatiotemporal"),p=e.includes("UtilityNetwork"),n=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":s?"featureshosted":p?"utilitynetwork":"features"):n=t==="map service"||t==="wms"||t==="wmts"?s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="360 vr experience"?n="360vr":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hubpage"?n="hubpage":t==="hub event"?n="hubevent":t==="hub site application"?n="hubsite":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="style"?n="style":t==="desktop style"?n="desktopstyle":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="insights script"?n="insightsscript":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="link chart"?n="linkchart":t==="investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(h=e.includes("Map"),n=h?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":"maps",n?it(i+n+r+".png"):null}get isLayer(){return this.type!=null&&Zge.has(this.type)}get itemCdnUrl(){let t=this.itemUrl;return t&&Ne&&!Ne.findCredential(t)&&(t=Ne._normalizeAGOLorgDomain(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){var i,r,n;const t=(i=this.portal)==null?void 0:i.restUrl;if(!t)return null;const e=this.owner||((n=(r=this.portal)==null?void 0:r.user)==null?void 0:n.username);return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=gi.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof DC&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new DC({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:D(this.applicationProxies),avgRating:this.avgRating,categories:D(this.categories),created:D(this.created),culture:this.culture,description:this.description,extent:D(this.extent),groupCategories:D(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:D(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:D(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:D(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:D(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new Np({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var i;const t=this.toJSON();for(const r of["tags","typeKeywords","categories"])t[r]=(i=t[r])==null?void 0:i.join(", ");const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new DC(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},Np)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t==null?void 0:t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new j("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new j("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:n,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!r,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new Np({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")sp(e)?r.query={data:e}:r.query={url:Ln(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new j("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await Z(()=>import("./resourceUtils-0deFedx4.js"),__vite__mapDeps([]));return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResource:r}=await Z(()=>import("./resourceUtils-0deFedx4.js"),__vite__mapDeps([]));return t.portalItem=this,r(t,"add",e,i)}async removeResource(t,e){const{removeResource:i}=await Z(()=>import("./resourceUtils-0deFedx4.js"),__vite__mapDeps([]));if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new j("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await Z(()=>import("./resourceUtils-0deFedx4.js"),__vite__mapDeps([]));return e(this,t)}resourceFromPath(t){return new Jge({portalItem:this,path:t})}toJSON(){var i,r;const t=this.extent,e={accessInformation:this.accessInformation,categories:D(this.categories),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:D(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:D(this.typeKeywords),url:this.url};return $W(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Np({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};c([d({type:["private","shared","org","public"]})],De.prototype,"access",void 0),c([d()],De.prototype,"accessInformation",void 0),c([d({type:String})],De.prototype,"apiKey",void 0),c([d({json:{read:{source:"appProxies"}}})],De.prototype,"applicationProxies",void 0),c([d()],De.prototype,"avgRating",void 0),c([d()],De.prototype,"categories",void 0),c([d({type:Date})],De.prototype,"created",void 0),c([d()],De.prototype,"culture",void 0),c([d()],De.prototype,"description",void 0),c([d({readOnly:!0})],De.prototype,"displayName",null),c([d({type:ct})],De.prototype,"extent",void 0),c([K("extent")],De.prototype,"readExtent",null),c([d()],De.prototype,"groupCategories",void 0),c([d({readOnly:!0})],De.prototype,"iconUrl",null),c([d()],De.prototype,"id",void 0),c([d({readOnly:!0})],De.prototype,"isLayer",null),c([d({type:Boolean,readOnly:!0})],De.prototype,"isOrgItem",void 0),c([d()],De.prototype,"itemControl",void 0),c([d({readOnly:!0})],De.prototype,"itemPageUrl",null),c([d({readOnly:!0})],De.prototype,"itemUrl",null),c([d()],De.prototype,"licenseInfo",void 0),c([d({type:Date})],De.prototype,"modified",void 0),c([d()],De.prototype,"name",void 0),c([d()],De.prototype,"numComments",void 0),c([d()],De.prototype,"numRatings",void 0),c([d()],De.prototype,"numViews",void 0),c([d()],De.prototype,"owner",void 0),c([d()],De.prototype,"ownerFolder",void 0),c([d({type:gi})],De.prototype,"portal",void 0),c([d()],De.prototype,"screenshots",void 0),c([d()],De.prototype,"size",void 0),c([d()],De.prototype,"snippet",void 0),c([d()],De.prototype,"sourceJSON",void 0),c([d({type:String})],De.prototype,"sourceUrl",void 0),c([d({type:String})],De.prototype,"spatialReference",void 0),c([d()],De.prototype,"tags",void 0),c([d()],De.prototype,"thumbnail",void 0),c([d({readOnly:!0})],De.prototype,"thumbnailUrl",null),c([d()],De.prototype,"title",void 0),c([d()],De.prototype,"type",void 0),c([d()],De.prototype,"typeKeywords",void 0),c([d({type:String,json:{read(t,e){var i;if(Yge.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],De.prototype,"url",void 0),c([d({readOnly:!0})],De.prototype,"userItemUrl",null),De=Np=c([k("esri.portal.PortalItem")],De);const ml=De,aZ=Object.freeze(Object.defineProperty({__proto__:null,default:ml},Symbol.toStringTag,{value:"Module"})),Q6=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Kge={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function X6(t){return t in Kge}const Iv=[],hg=new Map;function eV(t){for(const e of hg.keys())lZ(t.pattern,e)&&hg.delete(e)}function Qge(t){return Iv.includes(t)||(eV(t),Iv.unshift(t)),Mt(()=>{const e=Iv.indexOf(t);e>-1&&(Iv.splice(e,1),eV(t))})}async function Fk(t){const e=Fn();hg.has(t)||hg.set(t,e0e(t,e));const i=hg.get(t);return i&&await t0e.add(i),i}function Xge(t){if(!Q6.test(t))return null;const e=Q6.exec(t);if(e===null)return null;const[,i,r]=e,n=i+(r?"-"+r.toUpperCase():"");return X6(n)?n:X6(i)?i:null}async function e0e(t,e){const i=[];for(const r of Iv)if(lZ(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new j("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new j("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function lZ(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}T5(()=>{hg.clear()});const t0e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=xs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function i0e(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await Fk("esri/t9n/basemaps");return i[t]||i[e]}const Bg={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return it("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return it("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return it("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return it("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return it("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return it("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return it("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return it("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return it("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return it("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return it("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return it("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return it("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},r0e=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let Mm=class extends de{constructor(e){super(e),this.id=null,this.language=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps"}getLanguageParamValue(){if(this.language)return this.language;const e=Fn().toLowerCase();switch(e){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const i=oZ(e);return i==="pt"?"pt-BR":i&&r0e.has(i)?i:"global"}};c([d()],Mm.prototype,"id",void 0),c([d()],Mm.prototype,"language",void 0),c([d()],Mm.prototype,"serviceUrl",void 0),Mm=c([k("esri.support.BasemapStyle")],Mm);const n0e=Mm;function s0e(t){return cZ(t)||a0e(t)}function o0e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function a0e(t){return(t==null?void 0:t.type)==="scene"}function cZ(t){const e=t==null?void 0:t.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function l0e(t){const e=t==null?void 0:t.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const u9e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function uZ(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function jk(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function d9e(t){var e;return((t==null?void 0:t.type)==="feature"||(t==null?void 0:t.type)==="subtype-group")&&((e=t.source)==null?void 0:e.type)==="feature-layer"}function c0e(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function dZ(t,e){const i=Ne==null?void 0:Ne.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.substring(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await Ve(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function u0e(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function d0e(t){return u0e(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function p0e(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function h0e(t){return!!p0e(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const f0e=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),m0e=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function y0e(t){return t.layerContainerType==="basemap"?f0e:t.layerContainerType==="operational-layers"?m0e:null}function g0e(t,e){if(e.restrictedWebMapWriting){const i=y0e(e);return i==null||i.has(t.type)&&!jk(t)}return!0}function v0e(t,e){var i;if(e)if(jk(t)){const r=q1("featureCollection.layers",e),n=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;n&&tV(t,n)}else t.type!=="group"&&tV(t,e)}function tV(t,e){"maxScale"in t&&(e.maxScale=TE(t.maxScale)??void 0),"minScale"in t&&(e.minScale=TE(t.minScale)??void 0)}function b0e(t,e){if(v0e(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=TE(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(jk(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function uA(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i!=null&&i.messages&&i.messages.push(new j("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(jk(t)&&!t.isTable)e=t.resourceInfo;else if(g0e(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&b0e(t,e=D(e)),e}var Cv;let w0e=0;const _0e="esri.Basemap";let Kn=Cv=class extends w0(Jr){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+w0e++,this.baseLayers=new ce,this.referenceLayers=new ce;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&q.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>e(r.item)),this.referenceLayers.on("after-add",r=>e(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{q.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.baseLayers.toArray();for(const i of t)i.destroy();const e=this.referenceLayers.toArray();for(const i of e)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=wt(this.portalItem)}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",Sf(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=uA(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&r.push(s)}),this.referenceLayers.forEach(n=>{const s=uA(n,i.webmap?i.webmap.getLayerJSONFromResourceInfo(n):null,i);s!=null&&(n.type!=="scene"&&(s.isReference=!0),r.push(s))})),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",Sf(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return g5(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>dE(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>dE(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new Cv({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){var i;return t=t||{},e!=null&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const n=D(r);return n.url&&wl(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&wl(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i,style:r}=this;kt(t);const n=[];if(e){const s=e.context?e.context.url:null;if(n.push(this._loadLayersFromJSON(e.data,s,t)),e.data.id&&!e.data.title){const o=e.data.id;n.push(i0e(o).then(a=>{a&&this.read({title:a},e.context)}))}}else i?n.push(this._loadFromItem(i,t)):r&&n.push(this._loadFromStylesService(r,t));await Promise.all(n)}async _loadLayersFromJSON(t,e,i){var l,u;const r=(l=this.resourceInfo)==null?void 0:l.context,n=((u=this.portalItem)==null?void 0:u.portal)||(r==null?void 0:r.portal)||null,s=$0e[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:o}=await Z(()=>import("./layersCreator-NYJ93n7K.js"),__vite__mapDeps([5,6,7,8])),a=[];if(kt(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const p={context:{...r,origin:s,url:e,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},h=g=>s==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,m=o(this.baseLayers,t.baseMapLayers.filter(g=>!h(g)),p);a.push(m);const y=o(this.referenceLayers,t.baseMapLayers.filter(h),p);a.push(y)}await Promise.allSettled(a)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),n=mi(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:S0e[t.type||""]??"web-map",portal:t.portal||gi.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||gi.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,e)}async _loadFromStylesService(t,e){var s;const i=`${t.serviceUrl}/${t.id}`,r=(await Ve(i,{query:{language:t.getLanguageParamValue()},signal:e==null?void 0:e.signal})).data;if(r.baseMap&&Array.isArray(r.baseMap.baseMapLayers)){for(const o of r.baseMap.baseMapLayers)if(!o.customParameters&&((s=o.styleUrl)!=null&&s.includes("?"))){const a=mi(o.styleUrl);a.query&&(o.styleUrl=a.path,o.customParameters=a.query)}}const n=mi(i);return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:"web-map",url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this._loadLayersFromJSON(this.resourceInfo.data,n,e)}static fromId(t){const e=Bg[t];return e?e.itemId?new Cv({portalItem:{id:e.itemId,portal:{url:"https://www.arcgis.com"}}}):Cv.fromJSON(e,{origin:e.is3d?"web-scene":"web-map"}):null}};c([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ce}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],Kn.prototype,"baseLayers",null),c([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Kn.prototype,"id",void 0),c([d({type:ml})],Kn.prototype,"portalItem",void 0),c([d()],Kn.prototype,"referenceLayers",null),c([d({readOnly:!0})],Kn.prototype,"resourceInfo",void 0),c([d({type:Ee})],Kn.prototype,"spatialReference",void 0),c([d({type:n0e})],Kn.prototype,"style",void 0),c([d()],Kn.prototype,"thumbnailUrl",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Kn.prototype,"title",void 0),c([ee("title")],Kn.prototype,"writeTitle",null),Kn=Cv=c([k(_0e)],Kn);const S0e={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},$0e={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Nd=Kn,x0e=Object.freeze(Object.defineProperty({__proto__:null,default:Nd},Symbol.toStringTag,{value:"Module"})),VE={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function pZ(t){return!!VE[t]||!!VE[t.toLowerCase()]}function I5(t){return VE[t]??VE[t.toLowerCase()]}function E0e(t){return[...I5(t)]}function FC(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function hZ(t,e,i,r=1){const n=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s;return[Math.round(255*FC(o,s,n+1/3)),Math.round(255*FC(o,s,n)),Math.round(255*FC(o,s,n-1/3)),r]}function T0e(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=i,a[3]=n*l/255),l=o&r,o>>=i,a[2]=n*l,l=o&r,o>>=i,a[1]=n*l,l=o&r,o>>=i,a[0]=n*l,a}function mo(){return[0,0,0]}function k0e(t){return[t[0],t[1],t[2]]}function r_(t,e,i){return[t,e,i]}function I0e(t,e=mo()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function C0e(t,e){return new Float64Array(t,e,3)}function fZ(){return mo()}function mZ(){return r_(1,1,1)}function yZ(){return r_(1,0,0)}function gZ(){return r_(0,1,0)}function vZ(){return r_(0,0,1)}const M0e=fZ(),bZ=mZ(),L0e=yZ(),O0e=gZ(),A0e=vZ();Object.freeze(Object.defineProperty({__proto__:null,ONES:bZ,UNIT_X:L0e,UNIT_Y:O0e,UNIT_Z:A0e,ZEROS:M0e,clone:k0e,create:mo,createView:C0e,fromArray:I0e,fromValues:r_,ones:mZ,unitX:yZ,unitY:gZ,unitZ:vZ,zeros:fZ},Symbol.toStringTag,{value:"Module"}));let C5=1e-6;function yo(){return C5}function P0e(t){C5=t}const zk=Math.random,R0e=Math.PI/180,N0e=180/Math.PI;function M5(t){return t*R0e}function D0e(t){return t*N0e}function F0e(t,e){return Math.abs(t-e)<=C5*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:zk,equals:F0e,getEpsilon:yo,setEpsilon:P0e,toDegree:D0e,toRadian:M5},Symbol.toStringTag,{value:"Module"}));function L5(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function UE(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function wZ(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function _Z(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function Xb(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function SZ(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function $Z(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function j0e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function z0e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function V0e(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function U0e(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function B0e(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function G0e(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function H0e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function O5(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function q0e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function xZ(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function EZ(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function TZ(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function W0e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function J0e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function dA(t,e){const i=e[0],r=e[1],n=e[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function BE(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Z0e(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2];return t[0]=n*l-s*a,t[1]=s*o-r*l,t[2]=r*a-n*o,t}function Y0e(t,e,i,r){const n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t}function K0e(t,e,i,r,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,u=o*(s-1),p=o*(3-2*s);return t[0]=e[0]*a+i[0]*l+r[0]*u+n[0]*p,t[1]=e[1]*a+i[1]*l+r[1]*u+n[1]*p,t[2]=e[2]*a+i[2]*l+r[2]*u+n[2]*p,t}function Q0e(t,e,i,r,n,s){const o=1-s,a=o*o,l=s*s,u=a*o,p=3*s*a,h=3*l*o,m=l*s;return t[0]=e[0]*u+i[0]*p+r[0]*h+n[0]*m,t[1]=e[1]*u+i[1]*p+r[1]*h+n[1]*m,t[2]=e[2]*u+i[2]*p+r[2]*h+n[2]*m,t}function X0e(t,e){e=e||1;const i=zk,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=n*e,t}function eve(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t}function tve(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function ive(t,e,i){const r=i[0],n=i[1],s=i[2],o=i[3],a=e[0],l=e[1],u=e[2];let p=n*u-s*l,h=s*a-r*u,m=r*l-n*a,y=n*m-s*h,g=s*p-r*m,v=r*h-n*p;const w=2*o;return p*=w,h*=w,m*=w,y*=2,g*=2,v*=2,t[0]=a+p+y,t[1]=l+h+g,t[2]=u+m+v,t}function rve(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function nve(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function sve(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function ove(t,e){UE(SS,t),UE($S,e),dA(SS,SS),dA($S,$S);const i=BE(SS,$S);return i>1?0:i<-1?Math.PI:Math.acos(i)}const SS=mo(),$S=mo();function ave(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function lve(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function cve(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],a=e[2],l=yo();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))}function uve(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],s=i[2]-e[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const dve=Xb,pve=SZ,hve=$Z,fve=xZ,mve=EZ,yve=L5,gve=TZ;Object.freeze(Object.defineProperty({__proto__:null,abs:V0e,add:_Z,angle:ove,bezier:Q0e,ceil:j0e,copy:UE,cross:Z0e,direction:uve,dist:fve,distance:xZ,div:hve,divide:$Z,dot:BE,equals:cve,exactEquals:lve,floor:z0e,hermite:K0e,inverse:J0e,len:yve,length:L5,lerp:Y0e,max:G0e,min:B0e,mul:pve,multiply:SZ,negate:W0e,normalize:dA,random:X0e,rotateX:rve,rotateY:nve,rotateZ:sve,round:H0e,scale:O5,scaleAndAdd:q0e,set:wZ,sign:U0e,sqrDist:mve,sqrLen:gve,squaredDistance:EZ,squaredLength:TZ,str:ave,sub:dve,subtract:Xb,transformMat3:tve,transformMat4:eve,transformQuat:ive},Symbol.toStringTag,{value:"Module"}));function vve(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function bve(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function wve(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function kZ(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function IZ(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function CZ(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function _ve(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Sve(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function $ve(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function xve(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function Eve(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Tve(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function kve(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function MZ(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function LZ(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function OZ(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function AZ(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function Ive(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Cve(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Mve(t,e){const i=e[0],r=e[1],n=e[2],s=e[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=n*o,t[3]=s*o),t}function Lve(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function PZ(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function Ove(t,e){const i=zk;let r,n,s,o,a,l;e=e||1;do r=2*i()-1,n=2*i()-1,a=r*r+n*n;while(a>=1);do s=2*i()-1,o=2*i()-1,l=s*s+o*o;while(l>=1);const u=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*n,t[2]=e*s*u,t[3]=e*o*u,t}function Ave(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t}function Pve(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2],u=i[3],p=u*r+a*s-l*n,h=u*n+l*r-o*s,m=u*s+o*n-a*r,y=-o*r-a*n-l*s;return t[0]=p*u+y*-o+h*-l-m*-a,t[1]=h*u+y*-a+m*-o-p*-l,t[2]=m*u+y*-l+p*-a-h*-o,t[3]=e[3],t}function Rve(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Nve(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Dve(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=e[0],a=e[1],l=e[2],u=e[3],p=yo();return Math.abs(i-o)<=p*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=p*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=p*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-u)<=p*Math.max(1,Math.abs(s),Math.abs(u))}const Fve=kZ,jve=IZ,zve=CZ,Vve=MZ,Uve=LZ,Bve=OZ,Gve=AZ;Object.freeze(Object.defineProperty({__proto__:null,add:wve,ceil:_ve,copy:vve,dist:Vve,distance:MZ,div:zve,divide:CZ,dot:Lve,equals:Dve,exactEquals:Nve,floor:Sve,inverse:Cve,len:Bve,length:OZ,lerp:PZ,max:xve,min:$ve,mul:jve,multiply:IZ,negate:Ive,normalize:Mve,random:Ove,round:Eve,scale:Tve,scaleAndAdd:kve,set:bve,sqrDist:Uve,sqrLen:Gve,squaredDistance:LZ,squaredLength:AZ,str:Rve,sub:Fve,subtract:kZ,transformMat4:Ave,transformQuat:Pve},Symbol.toStringTag,{value:"Module"}));const iV=new Float32Array(1);function p9e(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Es(t,e,i){return Math.min(Math.max(t,e),i)}function h9e(t){return(t&t-1)==0}function f9e(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function Hve(t,e,i){return t+(e-t)*i}function m9e(t,e,i,r,n){return Hve(r,n,(t-e)/(i-e))}function Mv(t){return t*Math.PI/180}function RZ(t){return 180*t/Math.PI}function y9e(t){return Math.acos(Es(t,-1,1))}function NZ(t){return Math.asin(Es(t,-1,1))}function Dd(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const GE=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function qve(t){return GE.setFloat64(0,t),GE.getBigInt64(0)}function Wve(t){return GE.setBigInt64(0,t),GE.getFloat64(0)}const jC=BigInt("1000000");Jve(1);function Jve(t){const e=qve(t=Math.abs(t)),i=Wve(e<=jC?jC:e-jC);return Math.abs(t-i)}function Zve(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),n=Math.abs(t),s=Math.abs(e);if(t===0||e===0||n<1e-12&&s<1e-12){if(r>.01*i)return!1}else if(r/(n+s)>i)return!1;return!0}function Yve(t){return DZ(Math.max(-pA,Math.min(t,pA)))}function DZ(t){return iV[0]=t,iV[0]}function g9e(t,e){const i=L5(t),r=NZ(t[2]/i),n=Math.atan2(t[1]/i,t[0]/i);return wZ(e,i,r,n),e}function v9e(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Dd(e,1)&&Dd(i,1)&&Dd(r,1))}const pA=DZ(34028234663852886e22);function xS(t){return Es(YD(t),0,255)}function ES(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}function TS(t,e){const i=t.toString(16).padStart(2,"0");return e?i.substring(0,1):i}let tx=class Di{static blendColors(e,i,r,n=new Di){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const n=r[2].split(/\s*,\s*/),s=r[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(l=>2.56*parseFloat(l));return n.length===4&&(a[3]=parseFloat(n[3])),Di.fromArray(a,i)}return Di.fromArray(n.map(a=>parseFloat(a)),i)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return Di.fromArray(hZ(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),i)}return null}static fromHex(e,i=new Di){if(e[0]!=="#"||isNaN(+`0x${e.substring(1)}`))return null;switch(e.length){case 4:case 5:{const r=parseInt(e.substring(1,2),16),n=parseInt(e.substring(2,3),16),s=parseInt(e.substring(3,4),16),o=e.length===5?15:parseInt(e.substring(4),16);return Di.fromArray([r+16*r,n+16*n,s+16*s,(o+16*o)/255],i)}case 7:case 9:{const r=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),s=parseInt(e.substring(5,7),16),o=e.length===7?255:parseInt(e.substring(7),16);return Di.fromArray([r,n,s,o/255],i)}default:return null}}static fromArray(e,i=new Di){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=pZ(e)?I5(e):null;return r&&Di.fromArray(r,i)||Di.fromRgb(e,i)||Di.fromHex(e,i)}static fromJSON(e){return e!=null?new Di([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Di.fromString(e,this):Array.isArray(e)?Di.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Di||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=(e==null?void 0:e.capitalize)??!1,r=(e==null?void 0:e.digits)??6,n=r===3||r===4,s=r===4||r===8,o=`#${TS(this.r,n)}${TS(this.g,n)}${TS(this.b,n)}${s?TS(Math.round(255*this.a),n):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Di.AlphaMode.ALWAYS){const i=xS(this.r),r=xS(this.g),n=xS(this.b);return e===Di.AlphaMode.ALWAYS||this.a!==1?[i,r,n,xS(255*this.a)]:[i,r,n]}clone(){return new Di(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(ES(this.r,0,255)),this.g=Math.round(ES(this.g,0,255)),this.b=Math.round(ES(this.b,0,255)),this.a=ES(this.a,0,1),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};tx.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(tx||(tx={}));const le=tx;function b9e(t){}function Kve(t){return()=>t}function he(t,e={}){const i=t instanceof $e?t:new $e(t,e),r={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(r.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(r.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(r.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(r.nonNullable=e.nonNullable),d(r)}var hA;let ix=hA=class extends B{constructor(t){super(t),this.type="none"}clone(){return new hA({type:this.type})}};c([he({none:"none",stayAbove:"stay-above"})],ix.prototype,"type",void 0),ix=hA=c([k("esri.ground.NavigationConstraint")],ix);function Vk(t){const e=YD(100*(1-t));return Math.max(0,Math.min(e,100))}function r1(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var fA;let ql=fA=class extends w0(Jr){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ce;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&q.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{hr(t)||q.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)wt(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",Sf(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};Kve(s)().write(o,r)&&n.push(o)}else r!=null&&r.messages&&r.messages.push(new j("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return g5(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await Z(()=>import("./ElevationQuery-SAUJ5ih4.js"),__vite__mapDeps([]));kt(e);const r=new i,n=this.layers.filter(rV).toArray();return r.queryAll(n,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await Z(()=>import("./ElevationQuery-SAUJ5ih4.js"),__vite__mapDeps([]));kt(e);const r=new i,n=this.layers.filter(rV).toArray();return r.createSamplerAll(n,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:D(this.surfaceColor),navigationConstraint:D(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new fA({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=(e==null?void 0:e.origin)||"web-scene",n=(e==null?void 0:e.portal)||null,s=(e==null?void 0:e.url)||null,{populateOperationalLayers:o}=await Z(()=>import("./layersCreator-NYJ93n7K.js"),__vite__mapDeps([5,6,7,8]));kt(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}};function Qve(t){return t&&"createElevationSampler"in t}function rV(t){return t.type==="elevation"||Qve(t)}c([d({json:{read:!1}})],ql.prototype,"layers",null),c([ee("layers")],ql.prototype,"writeLayers",null),c([d({readOnly:!0})],ql.prototype,"resourceInfo",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ft,read:{reader:r1,source:"transparency"},write:{writer:(t,e)=>{e.transparency=Vk(t)},target:"transparency"}}})],ql.prototype,"opacity",void 0),c([d({type:le,json:{type:[ft],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],ql.prototype,"surfaceColor",void 0),c([d({type:ix,json:{write:!0}})],ql.prototype,"navigationConstraint",void 0),ql=fA=c([k("esri.Ground")],ql);const HE=ql;let Lm=class extends ce{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(QW(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(e){return new ce(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};c([d()],Lm.prototype,"getCollections",void 0),c([d()],Lm.prototype,"getChildrenFunction",void 0),c([d()],Lm.prototype,"itemFilterFunction",void 0),Lm=c([k("esri.core.CollectionFlattener")],Lm);const n1=Lm,Xve=[["binary","application/octet-stream","bin",""]];function _9e(t,e){return zZ(e.name,(t==null?void 0:t.supportedFormats)??[])!=null}function S9e(t,e){if(!t)return!1;const i=ebe(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function FZ(t,e){return P5(ibe(t,e))}function jZ(t,e){return P5(zZ(t,e))}function $9e(t,e){return VZ(tbe(t,e))}function ebe(t,e){return jZ(t.name,e)??FZ(t.type,e)}function A5(t){return[...Xve,...t]}function tbe(t,e){return A5(e).find(i=>P5(i)===t)}function ibe(t,e){const i=t.toLowerCase();return A5(e).find(r=>VZ(r)===i)}function zZ(t,e){const i=t.toLowerCase();return A5(e).find(r=>rbe(r).some(n=>i.endsWith(n)))}function P5(t){return t==null?void 0:t[0]}function VZ(t){return t==null?void 0:t[1].toLowerCase()}function rbe(t){return(t==null?void 0:t[2].split(",").map(e=>e.toLowerCase()))??[]}function x9e(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function nbe(t){var e,i;return!(!(t&&typeof t=="object"&&"loaded"in t&&t.loaded&&((i=(e=d0e(t))==null?void 0:e.operations)!=null&&i.supportsEditing)&&"type"in t)||"editingEnabled"in t&&!h0e(t)||t.type==="scene"&&!sbe(t))}function sbe(t){const{associatedLayer:e}=t,i=e==null?void 0:e.infoFor3D;if(!i)return!0;const{supportedFormats:r,queryFormats:n}=i,s=FZ("model/gltf-binary",r)??jZ("glb",r);if(!(s!=null&&n.includes(s)))return q.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${t.title??"Untitled layer"}, ${t.id}) is not editable because it does not support GLB queries.`),!1;const o=t.spatialReference,a=e.spatialReference;if(!ti(o,a))return q.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${t.title??"Untitled layer"}, ${t.id}) is not editable because its spatial reference (wkid:${o.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${a.wkid}).`),!1;const l=e.sourceJSON.sourceSpatialReference;return!(l!=null&&!ti(l,a))||(q.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${t.title??"Untitled layer"}, ${t.id}) is not editable because the spatial reference of its associated FeatureLayer's service (wkid:${a.wkid}) is different from its source spatial reference (wkid:${l.wkid}).`),!1)}const obe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,abe="screenUtils.toPt: input not recognized!",UZ=96;function _t(t){return t?t/72*UZ:0}function lr(t){return t?72*t/UZ:0}function Ke(t){if(typeof t=="string"){const e=t.match(obe);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.charAt(0)==="-",s=r==="px"?lr(i):i;return n?-s:s}return console.warn(abe),null}return t}function qr(t=0,e=0){return{x:t,y:e}}function E9e(t=0,e=0){return[t,e]}function Uk(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function lbe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function cbe(t,e,i,r,n,s,o,a,l,u,p,h,m,y,g,v){const w=new Float32Array(16);return w[0]=t,w[1]=e,w[2]=i,w[3]=r,w[4]=n,w[5]=s,w[6]=o,w[7]=a,w[8]=l,w[9]=u,w[10]=p,w[11]=h,w[12]=m,w[13]=y,w[14]=g,w[15]=v,w}function ube(t,e){return new Float32Array(t,e,16)}const dbe=Uk();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:dbe,clone:lbe,create:Uk,createView:ube,fromValues:cbe},Symbol.toStringTag,{value:"Module"}));function pbe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ap(t,e,i,r,n,s,o,a,l,u,p,h,m,y,g,v,w){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t[9]=p,t[10]=h,t[11]=m,t[12]=y,t[13]=g,t[14]=v,t[15]=w,t}function Bk(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function lp(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function hbe(t,e){return BZ(t,e)||Bk(t),t}function BZ(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],h=e[9],m=e[10],y=e[11],g=e[12],v=e[13],w=e[14],b=e[15],_=i*a-r*o,S=i*l-n*o,$=i*u-s*o,T=r*l-n*a,I=r*u-s*a,C=n*u-s*l,M=p*v-h*g,R=p*w-m*g,O=p*b-y*g,F=h*w-m*v,A=h*b-y*v,P=m*b-y*w;let V=_*P-S*A+$*F+T*O-I*R+C*M;return V?(V=1/V,t[0]=(a*P-l*A+u*F)*V,t[1]=(n*A-r*P-s*F)*V,t[2]=(v*C-w*I+b*T)*V,t[3]=(m*I-h*C-y*T)*V,t[4]=(l*O-o*P-u*R)*V,t[5]=(i*P-n*O+s*R)*V,t[6]=(w*$-g*C-b*S)*V,t[7]=(p*C-m*$+y*S)*V,t[8]=(o*A-a*O+u*M)*V,t[9]=(r*O-i*A-s*M)*V,t[10]=(g*I-v*$+b*_)*V,t[11]=(h*$-p*I-y*_)*V,t[12]=(a*R-o*F-l*M)*V,t[13]=(i*F-r*R+n*M)*V,t[14]=(v*S-g*T-w*_)*V,t[15]=(p*T-h*S+m*_)*V,t):null}function fbe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],h=e[9],m=e[10],y=e[11],g=e[12],v=e[13],w=e[14],b=e[15];return t[0]=a*(m*b-y*w)-h*(l*b-u*w)+v*(l*y-u*m),t[1]=-(r*(m*b-y*w)-h*(n*b-s*w)+v*(n*y-s*m)),t[2]=r*(l*b-u*w)-a*(n*b-s*w)+v*(n*u-s*l),t[3]=-(r*(l*y-u*m)-a*(n*y-s*m)+h*(n*u-s*l)),t[4]=-(o*(m*b-y*w)-p*(l*b-u*w)+g*(l*y-u*m)),t[5]=i*(m*b-y*w)-p*(n*b-s*w)+g*(n*y-s*m),t[6]=-(i*(l*b-u*w)-o*(n*b-s*w)+g*(n*u-s*l)),t[7]=i*(l*y-u*m)-o*(n*y-s*m)+p*(n*u-s*l),t[8]=o*(h*b-y*v)-p*(a*b-u*v)+g*(a*y-u*h),t[9]=-(i*(h*b-y*v)-p*(r*b-s*v)+g*(r*y-s*h)),t[10]=i*(a*b-u*v)-o*(r*b-s*v)+g*(r*u-s*a),t[11]=-(i*(a*y-u*h)-o*(r*y-s*h)+p*(r*u-s*a)),t[12]=-(o*(h*w-m*v)-p*(a*w-l*v)+g*(a*m-l*h)),t[13]=i*(h*w-m*v)-p*(r*w-n*v)+g*(r*m-n*h),t[14]=-(i*(a*w-l*v)-o*(r*w-n*v)+g*(r*l-n*a)),t[15]=i*(a*m-l*h)-o*(r*m-n*h)+p*(r*l-n*a),t}function mbe(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],p=t[9],h=t[10],m=t[11],y=t[12],g=t[13],v=t[14],w=t[15];return(e*o-i*s)*(h*w-m*v)-(e*a-r*s)*(p*w-m*g)+(e*l-n*s)*(p*v-h*g)+(i*a-r*o)*(u*w-m*y)-(i*l-n*o)*(u*v-h*y)+(r*l-n*a)*(u*g-p*y)}function GZ(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],h=e[8],m=e[9],y=e[10],g=e[11],v=e[12],w=e[13],b=e[14],_=e[15];let S=i[0],$=i[1],T=i[2],I=i[3];return t[0]=S*r+$*a+T*h+I*v,t[1]=S*n+$*l+T*m+I*w,t[2]=S*s+$*u+T*y+I*b,t[3]=S*o+$*p+T*g+I*_,S=i[4],$=i[5],T=i[6],I=i[7],t[4]=S*r+$*a+T*h+I*v,t[5]=S*n+$*l+T*m+I*w,t[6]=S*s+$*u+T*y+I*b,t[7]=S*o+$*p+T*g+I*_,S=i[8],$=i[9],T=i[10],I=i[11],t[8]=S*r+$*a+T*h+I*v,t[9]=S*n+$*l+T*m+I*w,t[10]=S*s+$*u+T*y+I*b,t[11]=S*o+$*p+T*g+I*_,S=i[12],$=i[13],T=i[14],I=i[15],t[12]=S*r+$*a+T*h+I*v,t[13]=S*n+$*l+T*m+I*w,t[14]=S*s+$*u+T*y+I*b,t[15]=S*o+$*p+T*g+I*_,t}function ybe(t,e,i){const r=i[0],n=i[1],s=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*s+e[12],t[13]=e[1]*r+e[5]*n+e[9]*s+e[13],t[14]=e[2]*r+e[6]*n+e[10]*s+e[14],t[15]=e[3]*r+e[7]*n+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],u=e[3],p=e[4],h=e[5],m=e[6],y=e[7],g=e[8],v=e[9],w=e[10],b=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=u,t[4]=p,t[5]=h,t[6]=m,t[7]=y,t[8]=g,t[9]=v,t[10]=w,t[11]=b,t[12]=o*r+p*n+g*s+e[12],t[13]=a*r+h*n+v*s+e[13],t[14]=l*r+m*n+w*s+e[14],t[15]=u*r+y*n+b*s+e[15]}return t}function gbe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vbe(t,e,i,r){let n,s,o,a,l,u,p,h,m,y,g,v,w,b,_,S,$,T,I,C,M,R,O,F,A=r[0],P=r[1],V=r[2],te=Math.sqrt(A*A+P*P+V*V);return te<yo()?null:(te=1/te,A*=te,P*=te,V*=te,n=Math.sin(i),s=Math.cos(i),o=1-s,a=e[0],l=e[1],u=e[2],p=e[3],h=e[4],m=e[5],y=e[6],g=e[7],v=e[8],w=e[9],b=e[10],_=e[11],S=A*A*o+s,$=P*A*o+V*n,T=V*A*o-P*n,I=A*P*o-V*n,C=P*P*o+s,M=V*P*o+A*n,R=A*V*o+P*n,O=P*V*o-A*n,F=V*V*o+s,t[0]=a*S+h*$+v*T,t[1]=l*S+m*$+w*T,t[2]=u*S+y*$+b*T,t[3]=p*S+g*$+_*T,t[4]=a*I+h*C+v*M,t[5]=l*I+m*C+w*M,t[6]=u*I+y*C+b*M,t[7]=p*I+g*C+_*M,t[8]=a*R+h*O+v*F,t[9]=l*R+m*O+w*F,t[10]=u*R+y*O+b*F,t[11]=p*R+g*O+_*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function bbe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],p=e[9],h=e[10],m=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+u*r,t[5]=o*n+p*r,t[6]=a*n+h*r,t[7]=l*n+m*r,t[8]=u*n-s*r,t[9]=p*n-o*r,t[10]=h*n-a*r,t[11]=m*n-l*r,t}function wbe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],u=e[8],p=e[9],h=e[10],m=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-u*r,t[1]=o*n-p*r,t[2]=a*n-h*r,t[3]=l*n-m*r,t[8]=s*r+u*n,t[9]=o*r+p*n,t[10]=a*r+h*n,t[11]=l*r+m*n,t}function _be(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],u=e[4],p=e[5],h=e[6],m=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+u*r,t[1]=o*n+p*r,t[2]=a*n+h*r,t[3]=l*n+m*r,t[4]=u*n-s*r,t[5]=p*n-o*r,t[6]=h*n-a*r,t[7]=m*n-l*r,t}function Sbe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function $be(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xbe(t,e,i){if(e===0)return Bk(t);let r,n,s,o=i[0],a=i[1],l=i[2],u=Math.sqrt(o*o+a*a+l*l);return u<yo()?null:(u=1/u,o*=u,a*=u,l*=u,r=Math.sin(e),n=Math.cos(e),s=1-n,t[0]=o*o*s+n,t[1]=a*o*s+l*r,t[2]=l*o*s-a*r,t[3]=0,t[4]=o*a*s-l*r,t[5]=a*a*s+n,t[6]=l*a*s+o*r,t[7]=0,t[8]=o*l*s+a*r,t[9]=a*l*s-o*r,t[10]=l*l*s+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Ebe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tbe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function kbe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function HZ(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,l=n+n,u=s+s,p=r*a,h=r*l,m=r*u,y=n*l,g=n*u,v=s*u,w=o*a,b=o*l,_=o*u;return t[0]=1-(y+v),t[1]=h+_,t[2]=m-b,t[3]=0,t[4]=h-_,t[5]=1-(p+v),t[6]=g+w,t[7]=0,t[8]=m+b,t[9]=g-w,t[10]=1-(p+y),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Ibe(t,e){const i=Cbe,r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],h=r*r+n*n+s*s+o*o;return h>0?(i[0]=2*(a*o+p*r+l*s-u*n)/h,i[1]=2*(l*o+p*n+u*r-a*s)/h,i[2]=2*(u*o+p*s+a*n-l*r)/h):(i[0]=2*(a*o+p*r+l*s-u*n),i[1]=2*(l*o+p*n+u*r-a*s),i[2]=2*(u*o+p*s+a*n-l*r)),HZ(t,e,i),t}const Cbe=mo();function Mbe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Lbe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],p=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+u*u+p*p),t}function Obe(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function Abe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=e[3],l=n+n,u=s+s,p=o+o,h=n*l,m=n*u,y=n*p,g=s*u,v=s*p,w=o*p,b=a*l,_=a*u,S=a*p,$=r[0],T=r[1],I=r[2];return t[0]=(1-(g+w))*$,t[1]=(m+S)*$,t[2]=(y-_)*$,t[3]=0,t[4]=(m-S)*T,t[5]=(1-(h+w))*T,t[6]=(v+b)*T,t[7]=0,t[8]=(y+_)*I,t[9]=(v-b)*I,t[10]=(1-(h+g))*I,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Pbe(t,e,i,r,n){const s=e[0],o=e[1],a=e[2],l=e[3],u=s+s,p=o+o,h=a+a,m=s*u,y=s*p,g=s*h,v=o*p,w=o*h,b=a*h,_=l*u,S=l*p,$=l*h,T=r[0],I=r[1],C=r[2],M=n[0],R=n[1],O=n[2],F=(1-(v+b))*T,A=(y+$)*T,P=(g-S)*T,V=(y-$)*I,te=(1-(m+b))*I,re=(w+_)*I,Q=(g+S)*C,H=(w-_)*C,ne=(1-(m+v))*C;return t[0]=F,t[1]=A,t[2]=P,t[3]=0,t[4]=V,t[5]=te,t[6]=re,t[7]=0,t[8]=Q,t[9]=H,t[10]=ne,t[11]=0,t[12]=i[0]+M-(F*M+V*R+Q*O),t[13]=i[1]+R-(A*M+te*R+H*O),t[14]=i[2]+O-(P*M+re*R+ne*O),t[15]=1,t}function Rbe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,u=i*o,p=r*o,h=r*a,m=n*o,y=n*a,g=n*l,v=s*o,w=s*a,b=s*l;return t[0]=1-h-g,t[1]=p+b,t[2]=m-w,t[3]=0,t[4]=p-b,t[5]=1-u-g,t[6]=y+v,t[7]=0,t[8]=m+w,t[9]=y-v,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Nbe(t,e,i,r,n,s,o){const a=1/(i-e),l=1/(n-r),u=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(n+r)*l,t[10]=(o+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*u,t[15]=0,t}function Dbe(t,e,i,r,n){const s=1/Math.tan(e/2);let o;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(o=1/(r-n),t[10]=(n+r)*o,t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t}function Fbe(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(n+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(n-s)*u*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function jbe(t,e,i,r,n,s,o){const a=1/(e-i),l=1/(r-n),u=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*l,t[14]=(o+s)*u,t[15]=1,t}function zbe(t,e,i,r){const n=e[0],s=e[1],o=e[2];let a=n-i[0],l=s-i[1],u=o-i[2];const p=yo();if(Math.abs(a)<p&&Math.abs(l)<p&&Math.abs(u)<p)return void Bk(t);let h=1/Math.sqrt(a*a+l*l+u*u);a*=h,l*=h,u*=h;const m=r[0],y=r[1],g=r[2];let v=y*u-g*l,w=g*a-m*u,b=m*l-y*a;h=Math.sqrt(v*v+w*w+b*b),h?(h=1/h,v*=h,w*=h,b*=h):(v=0,w=0,b=0);let _=l*b-u*w,S=u*v-a*b,$=a*w-l*v;h=Math.sqrt(_*_+S*S+$*$),h?(h=1/h,_*=h,S*=h,$*=h):(_=0,S=0,$=0),t[0]=v,t[1]=_,t[2]=a,t[3]=0,t[4]=w,t[5]=S,t[6]=l,t[7]=0,t[8]=b,t[9]=$,t[10]=u,t[11]=0,t[12]=-(v*n+w*s+b*o),t[13]=-(_*n+S*s+$*o),t[14]=-(a*n+l*s+u*o),t[15]=1}function Vbe(t,e,i,r){const n=e[0],s=e[1],o=e[2],a=r[0],l=r[1],u=r[2];let p=n-i[0],h=s-i[1],m=o-i[2],y=p*p+h*h+m*m;y>0&&(y=1/Math.sqrt(y),p*=y,h*=y,m*=y);let g=l*m-u*h,v=u*p-a*m,w=a*h-l*p;return y=g*g+v*v+w*w,y>0&&(y=1/Math.sqrt(y),g*=y,v*=y,w*=y),t[0]=g,t[1]=v,t[2]=w,t[3]=0,t[4]=h*w-m*v,t[5]=m*g-p*w,t[6]=p*v-h*g,t[7]=0,t[8]=p,t[9]=h,t[10]=m,t[11]=0,t[12]=n,t[13]=s,t[14]=o,t[15]=1,t}function Ube(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Bbe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function Gbe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function qZ(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function Hbe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function qbe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function Wbe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Jbe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],p=t[8],h=t[9],m=t[10],y=t[11],g=t[12],v=t[13],w=t[14],b=t[15],_=e[0],S=e[1],$=e[2],T=e[3],I=e[4],C=e[5],M=e[6],R=e[7],O=e[8],F=e[9],A=e[10],P=e[11],V=e[12],te=e[13],re=e[14],Q=e[15],H=yo();return Math.abs(i-_)<=H*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(r-S)<=H*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(n-$)<=H*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(s-T)<=H*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-I)<=H*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-C)<=H*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(l-M)<=H*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-R)<=H*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(p-O)<=H*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(h-F)<=H*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(m-A)<=H*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(y-P)<=H*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(g-V)<=H*Math.max(1,Math.abs(g),Math.abs(V))&&Math.abs(v-te)<=H*Math.max(1,Math.abs(v),Math.abs(te))&&Math.abs(w-re)<=H*Math.max(1,Math.abs(w),Math.abs(re))&&Math.abs(b-Q)<=H*Math.max(1,Math.abs(b),Math.abs(Q))}function Zbe(t){const e=yo(),i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],p=t[10];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+u*u))<=e&&Math.abs(1-(n*n+a*a+p*p))<=e}function Ybe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const Kbe=GZ,Qbe=qZ;Object.freeze(Object.defineProperty({__proto__:null,add:Gbe,adjoint:fbe,copy:pbe,determinant:mbe,equals:Jbe,exactEquals:Wbe,frob:Bbe,fromQuat:Rbe,fromQuat2:Ibe,fromRotation:xbe,fromRotationTranslation:HZ,fromRotationTranslationScale:Abe,fromRotationTranslationScaleOrigin:Pbe,fromScaling:$be,fromTranslation:Sbe,fromXRotation:Ebe,fromYRotation:Tbe,fromZRotation:kbe,frustum:Nbe,getRotation:Obe,getScaling:Lbe,getTranslation:Mbe,hasIdentityRotation:Ybe,identity:Bk,invert:BZ,invertOrIdentity:hbe,isOrthoNormal:Zbe,lookAt:zbe,mul:Kbe,multiply:GZ,multiplyScalar:Hbe,multiplyScalarAndAdd:qbe,ortho:jbe,perspective:Dbe,perspectiveFromFieldOfView:Fbe,rotate:vbe,rotateX:bbe,rotateY:wbe,rotateZ:_be,scale:gbe,set:ap,str:Ube,sub:Qbe,subtract:qZ,targetTo:Vbe,translate:ybe,transpose:lp},Symbol.toStringTag,{value:"Module"}));const Xbe=(t,e)=>{const i=ap(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return lp(i,i)},ewe=(t,e)=>{const i=ap(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return lp(i,i)},twe=(t,e)=>{const i=1-e,r=ap(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return lp(r,r)},iwe=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=ap(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return lp(n,n)},rwe=(t,e)=>{const i=1-2*e,r=ap(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return lp(r,r)},nwe=(t,e)=>{const i=ap(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return lp(i,i)},swe=(t,e)=>{const i=1-e,r=ap(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return lp(r,r)};let WZ=class JZ{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=In(e.strength,i.strength,r),this.radius=In(e.radius,i.radius,r),this.threshold=In(e.threshold,i.threshold,r)}clone(){return new JZ(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:ew(this.radius),strength:this.strength,threshold:this.threshold}}},ZZ=class YZ{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(In(e.radius,i.radius,r))}clone(){return new YZ(this.radius)}toJSON(){return{type:"blur",radius:ew(this.radius)}}},mA=class KZ{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=In(e.amount,i.amount,r),this._updateMatrix()}clone(){return new KZ(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||Uk();switch(this.type){case"brightness":this._colorMatrix=Xbe(e,this.amount);break;case"contrast":this._colorMatrix=ewe(e,this.amount);break;case"grayscale":this._colorMatrix=twe(e,this.amount);break;case"invert":this._colorMatrix=rwe(e,this.amount);break;case"saturate":this._colorMatrix=nwe(e,this.amount);break;case"sepia":this._colorMatrix=swe(e,this.amount)}}},QZ=class XZ{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=In(e.offsetX,i.offsetX,r),this.offsetY=In(e.offsetY,i.offsetY,r),this.blurRadius=In(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(In(e.color[0],i.color[0],r)),this.color[1]=Math.round(In(e.color[1],i.color[1],r)),this.color[2]=Math.round(In(e.color[2],i.color[2],r)),this.color[3]=In(e.color[3],i.color[3],r)}clone(){return new XZ(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:ew(this.offsetX),yoffset:ew(this.offsetY),blurRadius:ew(this.blurRadius),color:e}}},eY=class tY{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=In(e.angle,i.angle,r),this._updateMatrix()}clone(){return new tY(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||Uk();this._colorMatrix=iwe(e,this.angle)}},iY=class rY{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=In(e.amount,i.amount,r)}clone(){return new rY(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function In(t,e,i){return t+(e-t)*i}function ew(t){return Math.round(1e3*lr(t))/1e3}function owe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new mA(t.type,0);case"saturate":case"brightness":case"contrast":return new mA(t.type,1);case"opacity":return new iY(1);case"hue-rotate":return new eY(0);case"blur":return new ZZ(0);case"drop-shadow":return new QZ(0,0,0,[...I5("transparent")]);case"bloom":return new WZ(0,0,1)}}function nY(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,n)=>r.type===i[n].type)}function sY(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(owe(i[n]))}function awe(t){const e=t[0];return!!e&&"type"in e}function lwe(t,e){return JSON.stringify(t??null)===JSON.stringify(e??null)}const nV=q.getLogger("esri.support.basemapUtils");function cwe(){return{}}function uwe(t){for(const e in t){const i=t[e];wt(i),delete t[e]}}function dwe(t,e){let i;if(typeof t=="string"){const r=t in Bg,n=!r&&t.includes("/");if(!r&&!n){const s=Object.entries(Bg).filter(([o,a])=>Ze.apiKey&&!a.classic||!Ze.apiKey&&(a.classic||a.is3d)).map(([o])=>`"${o}"`).sort().join(", ");return nV.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`),null}e&&(i=e[t]),i||(i=r?Nd.fromId(t):new Nd({style:{id:t}}),e&&(e[t]=i))}else i=ei(Nd,t);return i!=null&&i.destroyed&&(nV.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function pwe(t){var e;return((e=t.portalItem)==null?void 0:e.type)==="Web Scene"}function hwe(t){var e,i;return!!((i=(e=t==null?void 0:t.portalItem)==null?void 0:e.tags)!=null&&i.some(r=>r.toLowerCase()==="beta"))}function fwe(t){let e=null;const i=yA(t),r=!(i!=null&&i.baseLayers.length);for(const n in Bg){const s=aY(i,oY(Bg[n]),{mustMatchReferences:r});if(s==="equal"){e=n;break}s==="base-layers-equal"&&(e=n)}return e}function mwe(t,e){var i,r;return t===e||((i=t==null?void 0:t.portalItem)==null?void 0:i.id)!=null&&t.portalItem.id===((r=e==null?void 0:e.portalItem)==null?void 0:r.id)?!0:aY(yA(t),yA(e),{mustMatchReferences:!0})==="equal"}function T9e(t){return!!(t!=null&&t.baseLayers.concat(t.referenceLayers).some(ywe))}function ywe(t){if(sV(t.url))return!0;if(t.type==="vector-tile")for(const e in t.sourceNameToSource){const i=t.sourceNameToSource[e];if(sV(i==null?void 0:i.sourceUrl))return!0}return!1}function gwe(t,e){var s;if(e==null||t==null)return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=e.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(s=i.tileInfo)==null?void 0:s.spatialReference:i.spatialReference]).filter(Boolean),n=t.spatialReference;return n?{spatialReference:r.find(o=>n.equals(o))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}const vwe=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function sV(t){if(!t)return!1;const e=new Pd(Ln(t));return!!e.authority&&vwe.test(e.authority)}function yA(t){return t?!t.loaded&&t.resourceInfo?oY(t.resourceInfo.data):{baseLayers:oV(t.baseLayers),referenceLayers:oV(t.referenceLayers)}:null}function oV(t){return(ce.isCollection(t)?t.toArray():t).map(bwe)}function bwe(t){var e,i;return{type:t.type,effect:"effect"in t?t.effect:void 0,url:lY("urlTemplate"in t&&t.urlTemplate||t.url||"styleUrl"in t&&t.styleUrl||""),minScale:"minScale"in t&&t.minScale!=null?t.minScale:0,maxScale:"maxScale"in t&&t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visible==null||!!t.visible,sublayers:t.type!=="map-image"&&t.type!=="wms"||t.sublayers==null||(e=t.sublayers)==null?void 0:e.map(r=>({id:r.id,visible:r.visible})),activeLayerId:t.type==="wmts"?(i=t.activeLayer)==null?void 0:i.id:void 0}}function aV(t){return t.isReference||t.layerType==="ArcGISSceneServiceLayer"}function oY(t){return t?{baseLayers:lV((t.baseMapLayers??[]).filter(e=>!aV(e))),referenceLayers:lV((t.baseMapLayers??[]).filter(e=>aV(e)))}:null}function lV(t){return t.map(e=>wwe(e))}function wwe(t){let e;switch(t.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;case"ArcGISSceneServiceLayer":e="scene";break;default:e="unknown"}return{type:e,effect:t.effect,url:lY(t.templateUrl||t.urlTemplate||t.styleUrl||t.url),minScale:t.minScale??0,maxScale:t.maxScale??0,opacity:t.opacity??1,visible:t.visibility==null||!!t.visibility,sublayers:void 0,activeLayerId:void 0}}function aY(t,e,i){return t!=null!=(e!=null)?"not-equal":!t||!e?"equal":cV(t.baseLayers,e.baseLayers)?cV(t.referenceLayers,e.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function cV(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!_we(t[i],e[i]))return!1;return!0}function _we(t,e){if(t.type!==e.type||t.url!==e.url||t.minScale!==e.minScale||t.maxScale!==e.maxScale||t.visible!==e.visible||t.opacity!==e.opacity||!lwe(t.effect,e.effect))return!1;if(t.activeLayerId!=null||e.activeLayerId!=null)return t.activeLayerId===e.activeLayerId;if(t.sublayers!=null||e.sublayers!=null){if(t.sublayers==null||e.sublayers==null||t.sublayers.length!==e.sublayers.length)return!1;for(let i=0;i<t.sublayers.length;i++){const r=t.sublayers.at(i),n=e.sublayers.at(i);if((r==null?void 0:r.id)!==(n==null?void 0:n.id)||(r==null?void 0:r.visible)!==(n==null?void 0:n.visible))return!1}}return!0}function lY(t){return t?xr(t).replace(/^\s*https?:/i,"").toLowerCase():""}function Swe(t){if(!t)return null;const{thumbnailUrl:e}=t;if(e)return e;const i=fwe(t);return i?Bg[i].thumbnailUrl:Ghe(t.baseLayers,$we)}function $we(t){var e;return"portalItem"in t?(e=t.portalItem)==null?void 0:e.thumbnailUrl:void 0}function xwe(t){return new n1({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function zC(t){for(const e of t.values())e==null||e.destroy();t.clear()}const uV={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Ewe(t){let e=null;if(typeof t=="string")if(t in uV){const i=uV[t];e=new HE({resourceInfo:{data:{layers:[i]}}})}else q.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=ei(HE,t);return e}function Gg(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var gA;function dV(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function Twe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let vu=gA=class extends op{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){var n;if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):Twe(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=(n=i.points)==null?void 0:n[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new ct,i=this.hasZ,r=this.hasM,n=i?3:2,s=t[0],o=dV(Math.min),a=dV(Math.max);let l,u,p,h,[m,y]=s,[g,v]=s;for(let w=0,b=t.length;w<b;w++){const _=t[w],[S,$]=_;if(m=o(m,S),y=o(y,$),g=a(g,S),v=a(v,$),i&&_.length>2){const T=_[2];l=o(l,T),p=a(p,T)}if(r&&_.length>n){const T=_[n];u=o(u,T),h=a(h,T)}}return e.xmin=m,e.ymin=y,e.xmax=g,e.ymax=v,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=p):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=u,e.mmax=h):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=D(this.points)}addPoint(t){return Gg(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:D(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new gA(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new Me(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Me(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Gg(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};c([d({readOnly:!0})],vu.prototype,"cache",null),c([d()],vu.prototype,"extent",null),c([d({type:[[Number]],json:{write:{isRequired:!0}}})],vu.prototype,"points",void 0),c([ee("points")],vu.prototype,"writePoints",null),vu=gA=c([k("esri.geometry.Multipoint")],vu),vu.prototype.toJSON.isDefaultToJSON=!0;const n_=vu;function k9e(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function kwe(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}var qE;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(qE||(qE={}));function cY(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function Iwe(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function Cwe(t,e,i,r){return Mwe(t,e,i[r],i[r+1])}function Mwe(t,e,i,r){const[n,s]=e,[o,a]=i,[l,u]=r,p=l-o,h=u-a,m=p*p+h*h,y=(n-o)*p+(s-a)*h,g=Math.min(1,Math.max(0,y/m));return t[0]=o+p*g,t[1]=a+h*g,t}function uY(t,e){return Iwe(t,e,.5)}function dY(t,e=qE.X,i=qE.Y){let r=0;const n=t.length;let s=t[0];for(let o=0;o<n-1;o++){const a=t[o+1];r+=(a[e]-s[e])*(a[i]+s[i]),s=a}return r>=0}function Lwe(t){const e=t.length;return e>2&&bk(t[0],t[e-1])}function I9e(t){if("rings"in t&&(Owe(t),t.rings.length>0&&!dY(t.rings[0])))for(const e of t.rings)e.reverse()}function Owe(t){if("rings"in t)for(const e of t.rings)Lwe(e)||e.push(e[0].slice())}function C9e(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function Awe(t){return t?Pwe(t.rings,t.hasZ??!1):null}function Pwe(t,e){if(!(t!=null&&t.length))return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=pY(t[s],e,n);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?Rwe(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function pY(t,e,i){let r=0,n=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,u=t.length?t[0][1]:0,p=t.length&&e?t[0][2]:0;for(let m=0;m<t.length;m++){const y=t[m],g=t[(m+1)%t.length],[v,w,b]=y,_=v-l,S=w-u,[$,T,I]=g,C=$-l,M=T-u,R=_*M-C*S;if(o+=R,r+=(_+C)*R,n+=(S+M)*R,e&&y.length>2&&g.length>2){const O=b-p,F=I-p,A=_*F-C*O;s+=(O+F)*A,a+=A}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),w<i[2]&&(i[2]=w),w>i[3]&&(i[3]=w),e&&(b<i[4]&&(i[4]=b),b>i[5]&&(i[5]=b))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const h=[r/(6*o)+l,n/(6*o)+u,o];return e&&(i[4]===i[5]||a===0?(h[3]=(i[4]+i[5])/2,h[4]=0):(h[3]=s/(6*a)+p,h[4]=a)),h}function M9e(t,e){let i=0,r=0,n=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const u=[t.x,t.y],[p,h]=l,m=p-s,y=h-o,[g,v]=u,w=g-s,b=v-o,_=m*b-w*y;n+=_,i+=(m+w)*_,r+=(y+b)*_,p<e[0]&&(e[0]=p),p>e[1]&&(e[1]=p),h<e[2]&&(e[2]=h),h>e[3]&&(e[3]=h)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+s,r/(6*n)+o,n]):null}function Rwe(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,u=t.length;l<u-1;l++){const p=t[l],h=t[l+1];if(p&&h){i[0]=p[0],i[1]=p[1],r[0]=h[0],r[1]=h[1],e&&p.length>2&&h.length>2&&(i[2]=p[2],r[2]=h[2]);const m=cY(i,r);if(m){n+=m;const y=uY(p,h);s+=m*y[0],o+=m*y[1],e&&y.length>2&&(a+=m*y[2])}}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.length?t[0]:null}function Nwe(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=pY(kwe(t),t.hasZ,s);o&&n.push(o)}if(n.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?Dwe(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function Dwe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,u=t.y,p=t.z;for(;t.nextPoint();){const h=t.x,m=t.y,y=t.z;i[0]=l,i[1]=u,r[0]=h,r[1]=m,e&&(i[2]=p,r[2]=y);const g=cY(i,r);if(g){n+=g;const v=uY(i,r);s+=g*v[0],o+=g*v[1],e&&v.length>2&&(a+=g*v[2])}l=h,u=m,p=y}}return n>0?e?[s/n,o/n,a/n]:[s/n,o/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const Fwe=1e-6;function L9e(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<Fwe){const n=Nwe(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)zwe(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const jwe=1/3;function zwe(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,o=i.x-r,a=i.y-n,l=0,u=0;for(;i.nextPoint();)l=i.x-r,u=i.y-n,s=.5*jwe*(l*a-u*o),t[0]+=s*(o+l),t[1]+=s*(a+u),o=l,a=u;const p=i.getCurrentRingArea(),h=[r,n];return h[0]-=e[0],h[1]-=e[1],h[0]*=p,h[1]*=p,t[0]+=h[0],t[1]+=h[1],t}function Bn(t=Jwe){return[t[0],t[1],t[2],t[3]]}function O9e(t){return[t[0],t[1],t[2],t[3]]}function hY(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function A9e(t,e,i,r,n=Bn()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function Vwe(t,e=Bn()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function P9e(t,e){return new ct({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function R9e(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function N9e(t,e,i){if(e!=null)if("length"in e)vA(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else hY(i,t)}function Uwe(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function Bwe(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function D9e(t){return Uwe(t)*Bwe(t)}function Gwe(t,e){return Hwe(t,e[0],e[1])}function Hwe(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function qwe(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function F9e(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function Wwe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function j9e(t){return t?hY(t,pV):Bn(pV)}function vA(t){return t!=null&&t.length===4}function z9e(t,e){return vA(t)&&vA(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const pV=[1/0,1/0,-1/0,-1/0],Jwe=[0,0,0,0];function fY(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function mY(t){return t.points!==void 0}function yY(t){return t.x!==void 0&&t.y!==void 0}function gY(t){return t.paths!==void 0}function vY(t){return t.rings!==void 0}function bY(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const gd=bY(Math.min),vd=bY(Math.max);function V9e(t,e){return gY(e)?Hg(t,e.paths,!1,!1):vY(e)?Hg(t,e.rings,!1,!1):mY(e)?R5(t,e.points,!1,!1,!1,!1):fY(e)?wY(t,e):(yY(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function U9e(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const s=Zwe(t);e=Math.min(s[0],e),r=Math.min(s[1],r),i=Math.max(s[2],i),n=Math.max(s[3],n)}return Bn([e,r,i,n])}function Zwe(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return Bn([e,r,i,n])}function B9e(t,e){return gY(e)?Hg(t,e.paths,!0,!1):vY(e)?Hg(t,e.rings,!0,!1):mY(e)?R5(t,e.points,!0,!1,!0,!1):fY(e)?wY(t,e,!0,!1,!0,!1):(yY(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Hg(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[u,p]=e[0][0],[h,m]=e[0][0];for(let y=0;y<e.length;y++){const g=e[y];for(let v=0;v<g.length;v++){const w=g[v],[b,_]=w;if(u=gd(u,b),p=gd(p,_),h=vd(h,b),m=vd(m,_),i&&w.length>2){const S=w[2];s=gd(s,S),o=vd(o,S)}if(r&&w.length>n){const S=w[n];a=gd(s,S),l=vd(o,S)}}}return i?r?(t[0]=u,t[1]=p,t[2]=s,t[3]=a,t[4]=h,t[5]=m,t[6]=o,t[7]=l,t.length=8,t):(t[0]=u,t[1]=p,t[2]=s,t[3]=h,t[4]=m,t[5]=o,t.length=6,t):r?(t[0]=u,t[1]=p,t[2]=a,t[3]=h,t[4]=m,t[5]=l,t.length=6,t):(t[0]=u,t[1]=p,t[2]=h,t[3]=m,t.length=4,t)}function wY(t,e,i,r,n,s){const o=e.xmin,a=e.xmax,l=e.ymin,u=e.ymax;let p=e.zmin,h=e.zmax,m=e.mmin,y=e.mmax;return n?(p=p||0,h=h||0,s?(m=m||0,y=y||0,t[0]=o,t[1]=l,t[2]=p,t[3]=m,t[4]=a,t[5]=u,t[6]=h,t[7]=y,t):(t[0]=o,t[1]=l,t[2]=p,t[3]=a,t[4]=u,t[5]=h,t)):s?(m=m||0,y=y||0,t[0]=o,t[1]=l,t[2]=m,t[3]=a,t[4]=u,t[5]=y,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=u,t)}function R5(t,e,i,r,n,s){const o=i?3:2,a=r&&s,l=i&&n;if(!e.length||!e[0].length)return null;let u,p,h,m,[y,g]=e[0],[v,w]=e[0];for(let b=0;b<e.length;b++){const _=e[b],[S,$]=_;if(y=gd(y,S),g=gd(g,$),v=vd(v,S),w=vd(w,$),l&&_.length>2){const T=_[2];u=gd(u,T),p=vd(p,T)}if(a&&_.length>o){const T=_[o];h=gd(u,T),m=vd(p,T)}}return n?(u=u||0,p=p||0,s?(h=h||0,m=m||0,t[0]=y,t[1]=g,t[2]=u,t[3]=h,t[4]=v,t[5]=w,t[6]=p,t[7]=m,t):(t[0]=y,t[1]=g,t[2]=u,t[3]=v,t[4]=w,t[5]=p,t)):s?(h=h||0,m=m||0,t[0]=y,t[1]=g,t[2]=h,t[3]=v,t[4]=w,t[5]=m,t):(t[0]=y,t[1]=g,t[2]=v,t[3]=w,t)}function Ywe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Kwe(t){return t.points!==void 0}function Qwe(t){return t.x!==void 0&&t.y!==void 0}function Xwe(t){return t.paths!==void 0}function e1e(t){return t.rings!==void 0}const N5=[];function _Y(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function SY(t,e,i,r,n,s){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:s}}function $Y(t,e,i,r,n,s){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:s}}function xY(t,e,i,r,n,s,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:a}}function D5(t,e=!1,i=!1){return e?i?xY(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):SY(t[0],t[1],t[2],t[3],t[4],t[5]):i?$Y(t[0],t[1],t[2],t[3],t[4],t[5]):_Y(t[0],t[1],t[2],t[3])}function G9e(t){return t?Ywe(t)?t:Qwe(t)?i1e(t):e1e(t)?EY(t):Xwe(t)?TY(t):Kwe(t)?t1e(t):null:null}function t1e(t){const{hasZ:e,hasM:i,points:r}=t;return D5(R5(N5,r,e??!1,i??!1),e,i)}function i1e(t){const{x:e,y:i,z:r,m:n}=t,s=n!=null;return r!=null?s?xY(e,i,r,n,e,i,r,n):SY(e,i,r,e,i,r):s?$Y(e,i,n,e,i,n):_Y(e,i,e,i)}function EY(t){const{hasZ:e,hasM:i,rings:r}=t,n=Hg(N5,r,e??!1,i??!1);return n?D5(n,e,i):null}function TY(t){const{hasZ:e,hasM:i,paths:r}=t,n=Hg(N5,r,e??!1,i??!1);return n?D5(n,e,i):null}var rx;function hV(t){return!Array.isArray(t[0])}let Ia=rx=class extends op{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let r=!1,n=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(n=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new rx(s)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){var o,a;let i,r,n=null,s=null;return t&&!Array.isArray(t)?(n=t.rings??null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,r=t.hasM):n=t,n=n||[],e=e||Ee.WGS84,n.length&&((o=n[0])==null?void 0:o[0])!=null&&typeof n[0][0]=="number"&&(n=[n]),s=(a=n[0])==null?void 0:a[0],s&&(i===void 0&&r===void 0?(i=s.length>2,r=s.length>3):i===void 0?i=r?s.length>3:s.length>2:r===void 0&&(r=i?s.length>3:s.length>2)),{rings:n,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=Awe(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Me;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=EY(this);if(!e)return null;const i=new ct(e);return i.spatialReference=t,i}get isSelfIntersecting(){return Fge(this.rings)}writeRings(t,e){e.rings=D(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(hV(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new rx;return t.spatialReference=this.spatialReference,t.rings=D(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,s,o,a],[l,u,p,h])=>n===l&&s===u&&(o==null&&p==null||o===p)&&(a==null&&h==null||a===h);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=t.rings[n];if(!bk(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=Rk(t,this.spatialReference);return tZ(this,e??t)}isClockwise(t){let e;return e=hV(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,dY(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new Me(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new Me(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new Me(i[0],i[1],i[2],i[3],this.spatialReference):new Me(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Gg(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Me(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new Me(n,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(Gg(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],Ia.prototype,"cache",null),c([d({readOnly:!0})],Ia.prototype,"centroid",null),c([d({readOnly:!0})],Ia.prototype,"extent",null),c([d({readOnly:!0})],Ia.prototype,"isSelfIntersecting",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ia.prototype,"rings",void 0),c([ee("rings")],Ia.prototype,"writeRings",null),Ia=rx=c([k("esri.geometry.Polygon")],Ia),Ia.prototype.toJSON.isDefaultToJSON=!0;const ha=Ia;var bA;function r1e(t){return!Array.isArray(t[0])}let bu=bA=class extends op{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){var o,a;let i,r,n=null,s=null;return t&&!Array.isArray(t)?(n=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,r=t.hasM):n=t,n=n||[],e=e||Ee.WGS84,n.length&&((o=n[0])==null?void 0:o[0])!=null&&typeof n[0][0]=="number"&&(n=[n]),s=(a=n[0])==null?void 0:a[0],s&&(i===void 0&&r===void 0?(i=s.length>2,r=!1):i===void 0?i=!r&&s.length>3:r===void 0&&(r=!i&&s.length>3)),{paths:n,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=TY(this);if(!e)return null;const i=new ct(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=D(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(r1e(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new bA;return t.spatialReference=this.spatialReference,t.paths=D(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new Me(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new Me(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new Me(i[0],i[1],i[2],i[3],this.spatialReference):new Me(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Gg(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new Me(n,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Me(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(Gg(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],bu.prototype,"cache",null),c([d({readOnly:!0})],bu.prototype,"extent",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],bu.prototype,"paths",void 0),c([ee("paths")],bu.prototype,"writePaths",null),bu=bA=c([k("esri.geometry.Polyline")],bu),bu.prototype.toJSON.isDefaultToJSON=!0;const ro=bu,n1e=Zi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),fV=Zi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function kY(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function IY(t){return t.points!==void 0}function CY(t){return t.x!==void 0&&t.y!==void 0}function MY(t){return t.paths!==void 0}function fg(t){return t.rings!==void 0}function _l(t){return t==null?null:t instanceof op?t:CY(t)?Me.fromJSON(t):MY(t)?ro.fromJSON(t):fg(t)?ha.fromJSON(t):IY(t)?n_.fromJSON(t):kY(t)?ct.fromJSON(t):null}function s_(t){return t?CY(t)?"esriGeometryPoint":MY(t)?"esriGeometryPolyline":fg(t)?"esriGeometryPolygon":kY(t)?"esriGeometryEnvelope":IY(t)?"esriGeometryMultipoint":null:null}const s1e={esriGeometryPoint:Me,esriGeometryPolyline:ro,esriGeometryPolygon:ha,esriGeometryEnvelope:ct,esriGeometryMultipoint:n_};function o1e(t){return t&&s1e[t]||null}const cp={base:op,key:"type",typeMap:{extent:ct,multipoint:n_,point:Me,polyline:ro,polygon:ha}};bl(cp);let LY=0;const Jf=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+LY++})}};return e=c([k("esri.core.Identifiable")],e),e},F5=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:LY++})}};return e=c([k("esri.core.NumericIdentifiable")],e),e};let mV=class extends Jf(class{}){};mV=c([k("esri.core.Identifiable")],mV);async function a1e(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await Z(()=>import("./portalLayers-NbT0moLe.js").then(r=>r.p),__vite__mapDeps([6,7,8]));try{return await i(e)}catch(r){const n=e&&e.portalItem,s=(n==null?void 0:n.id)||"unset",o=n&&n.portal&&n.portal.url||Ze.portalUrl;throw q.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",r),r}}let l1e=0,Ei=class extends Il.EventedMixin(Jf(Jr)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new ct(-180,-90,180,90,Ee.WGS84),this.id=Date.now().toString(16)+"-layer-"+l1e++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ee.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await Z(()=>import("./arcgisLayers-gOy5Z2-M.js"),__vite__mapDeps([9,7,10,8]))).fromUrl(i)}static fromPortalItem(e){return a1e(e)}initialize(){this.when().catch(e=>{hr(e)||q.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const i=this;"layers"in e&&e.layers.includes(i)?e.layers.remove(i):"tables"in e&&e.tables.includes(i)?e.tables.remove(i):"baseLayers"in e&&e.baseLayers.includes(i)?e.baseLayers.remove(i):"referenceLayers"in e&&e.referenceLayers.includes(i)&&e.referenceLayers.remove(i),this._set("parent",null)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return mi(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Ve(e,{query:{f:"json"},responseType:"json"})).data;throw new j("layer:no-attribution-data","Layer does not have attribution data")}};c([d({type:String})],Ei.prototype,"attributionDataUrl",void 0),c([d({type:ct})],Ei.prototype,"fullExtent",void 0),c([d({readOnly:!0})],Ei.prototype,"hasAttributionData",null),c([d({type:String,clonable:!1})],Ei.prototype,"id",void 0),c([d({type:Boolean,nonNullable:!0})],Ei.prototype,"legendEnabled",void 0),c([d({type:["show","hide","hide-children"]})],Ei.prototype,"listMode",void 0),c([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Ei.prototype,"opacity",void 0),c([d({clonable:!1})],Ei.prototype,"parent",void 0),c([d({readOnly:!0})],Ei.prototype,"parsedUrl",null),c([d({type:Boolean,readOnly:!0})],Ei.prototype,"persistenceEnabled",void 0),c([d({type:Boolean})],Ei.prototype,"popupEnabled",void 0),c([d({type:Boolean})],Ei.prototype,"attributionVisible",void 0),c([d({type:Ee})],Ei.prototype,"spatialReference",void 0),c([d({type:String})],Ei.prototype,"title",void 0),c([d({readOnly:!0,json:{read:!1}})],Ei.prototype,"type",void 0),c([d()],Ei.prototype,"url",void 0),c([d({type:Boolean,nonNullable:!0})],Ei.prototype,"visible",void 0),Ei=c([k("esri.layers.Layer")],Ei);const OY=Ei;function wA(t,e,i){let r,n;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(n=wA(r.layers,e,i),n))return n}}const c1e=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new ce;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||q.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>r(o.item)),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Sf(i,this._get("layers")))}add(i,r){const n=this.layers;if(r=n.getNextIndex(r),i instanceof OY){const s=i;s.parent===this?this.reorder(s,r):n.add(s,r)}else Zc(i)?i.then(s=>{this.destroyed||this.add(s,r)}):q.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const n=this.layers;let s=n.getNextIndex(r);i.slice().forEach(o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(i){return wA(this.layers,"id",i)}findLayerByUid(i){return wA(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return c([d()],e.prototype,"layers",null),e=c([k("esri.support.LayersMixin")],e),e};function _A(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const s=t.at(r);if(s[e]===i)return s;if((s==null?void 0:s.type)==="group"){const o=_A(s.tables,e,i);if(o)return o}}}const u1e=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new ce,this.addHandles([this.tables.on("after-add",r=>{const n=r.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&q.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Sf(i,this._get("tables")))}findTableById(i){return _A(this.tables,"id",i)}findTableByUid(i){return _A(this.tables,"uid",i)}};return c([d()],e.prototype,"tables",null),e=c([k("esri.support.TablesMixin")],e),e};let Ca=class extends u1e(c1e(Il.EventedMixin(de))){constructor(e){super(e),this.allLayers=new n1({getCollections:()=>{var i,r,n;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=xwe(this),this.basemap=null,this.editableLayers=new n1({getCollections:()=>[this.allLayers],itemFilterFunction:nbe}),this.ground=new HE,this._basemapCache=cwe()}destroy(){uwe(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=wt(this.basemap),wt(this.ground),this._set("ground",null)}castBasemap(e){return dwe(e,this._basemapCache)}castGround(e){return Ewe(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};c([d({readOnly:!0,dependsOn:[]})],Ca.prototype,"allLayers",void 0),c([d({readOnly:!0})],Ca.prototype,"allTables",void 0),c([d({type:Nd,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Ca.prototype,"basemap",void 0),c([qe("basemap")],Ca.prototype,"castBasemap",null),c([d({readOnly:!0})],Ca.prototype,"editableLayers",void 0),c([d({type:HE,nonNullable:!0})],Ca.prototype,"ground",void 0),c([qe("ground")],Ca.prototype,"castGround",null),Ca=c([k("esri.Map")],Ca);const AY=Ca,Je=t=>{let e=class extends t{clone(){var l;const i=un(this);W1(i,"unable to clone instance of non-accessor class");const r=i.metadatas,n=i.store,s={},o=new Map;for(const u in r){const p=r[u],h=n==null?void 0:n.originOf(u),m=p.clonable;if(p.readOnly||m===!1||h!==Ie.USER&&h!==Ie.DEFAULTS&&h!==Ie.WEB_MAP&&h!==Ie.WEB_SCENE)continue;const y=this[u];let g=null;g=typeof m=="function"?m(y):m==="reference"?y:TO(y),y!=null&&g==null||(h===Ie.DEFAULTS?o.set(u,g):s[u]=g)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const u=(l=un(a))==null?void 0:l.store;if(u)for(const[p,h]of o)u.set(p,h,Ie.DEFAULTS)}return a}};return e=c([k("esri.core.Clonable")],e),e};let yV=class extends Je(de){};yV=c([k("esri.core.Clonable")],yV);let j5=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,r,n=0,s=!1){return(r-=n)<e?r+=this.ndiff(e-r):r>i&&(r-=this.ndiff(r-i)),s&&r===i&&(r=e),r+n}normalize(e,i=0,r=!1){return this._normalize(this.min,this.max,e,i,r)}clamp(e,i=0){return Es(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+this.ndiff(e-i,r)}minimalMonotonic(e,i,r){return this._normalize(e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function z5(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}z5(new j5(0,2*Math.PI));z5(new j5(-Math.PI,Math.PI));const d1e=z5(new j5(0,360));let Wl=class extends Je(B){constructor(...e){super(...e),this.position=new Me([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return e}writePosition(e,i,r,n){const s=e.clone();s.x=Xs(e.x||0),s.y=Xs(e.y||0),s.z=e.hasZ?Xs(e.z||0):e.z,i[r]=s.write({},n)}readPosition(e,i){const r=new Me;return r.read(e,i),r.x=Xs(r.x||0),r.y=Xs(r.y||0),r.z=r.hasZ?Xs(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};c([d({type:Me,json:{write:{isRequired:!0}}})],Wl.prototype,"position",void 0),c([ee("position")],Wl.prototype,"writePosition",null),c([K("position")],Wl.prototype,"readPosition",null),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),qe(t=>d1e.normalize(Xs(t)))],Wl.prototype,"heading",void 0),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),qe(t=>Es(Xs(t),-180,180))],Wl.prototype,"tilt",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Wl.prototype,"fov",void 0),Wl=c([k("esri.Camera")],Wl);const p1e=Wl;var SA;let wu=SA=class extends B{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new SA({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function VC(){return{enabled:!this.camera}}c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:VC}}}}})],wu.prototype,"rotation",void 0),c([qe("rotation")],wu.prototype,"castRotation",null),c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:VC}}}}})],wu.prototype,"scale",void 0),c([d({types:cp,json:{read:_l,write:!0,origins:{"web-scene":{read:_l,write:{overridePolicy:VC}}}}})],wu.prototype,"targetGeometry",void 0),c([d({type:p1e,json:{write:!0}})],wu.prototype,"camera",void 0),wu=SA=c([k("esri.Viewpoint")],wu);const dr=wu;let h1e=class PY{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(CO),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new PY,r=this._originStores[Ie.DEFAULTS];r&&r.forEach((n,s)=>{i.set(s,D(n),Ie.DEFAULTS)});for(let n=Ie.SERVICE;n<CO;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{e&&e.has(a)||i.set(a,D(o),n)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=Ie.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),s!==i}return!1}delete(e,i=Ie.USER){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r==null?void 0:r.get(e),s=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),s!==n}originOf(e){return this._propertyOriginMap.get(e)||Ie.DEFAULTS}forEach(e){this._values.forEach(e)}};const RY=t=>{let e=class extends t{constructor(...i){super(...i);const r=un(this),n=r.store,s=new h1e;r.store=s,bJ(r,n,s)}read(i,r){_J(this,i,r)}getAtOrigin(i,r){const n=UC(this),s=yd(r);if(typeof i=="string")return n.get(i,s);const o={};return i.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(i){return fE(this.originIdOf(i))}originIdOf(i){return UC(this).originOf(i)}revert(i,r){const n=UC(this),s=yd(r),o=un(this);let a;a=typeof i=="string"?i==="*"?n.keys(s):[i]:i,a.forEach(l=>{o.invalidate(l),n.revert(l,s),o.commit(l)})}};return e=c([k("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function UC(t){return un(t).store}let gV=class extends RY(de){};gV=c([k("esri.core.ReadOnlyMultiOriginJSONSupport")],gV);const f1e=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){return BC(this).delete(i,yd(r))}write(i,r){return xJ(this,i=i||{},r),i}setAtOrigin(i,r,n){un(this).setAtOrigin(i,r,yd(n))}removeOrigin(i){const r=BC(this),n=yd(i),s=r.keys(n);for(const o of s)r.originOf(o)===n&&r.set(o,r.get(o,n),Ie.USER)}updateOrigin(i,r){const n=BC(this),s=yd(r),o=Hr(this,i);for(let a=s+1;a<CO;++a)n.delete(i,a);n.set(i,o,s)}toJSON(i){return this.write({},i)}};return e=c([k("esri.core.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function BC(t){return un(t).store}const Gk=t=>{let e=class extends f1e(RY(t)){constructor(...i){super(...i)}};return e=c([k("esri.core.MultiOriginJSONSupport")],e),e};let $A=class extends Gk(de){};$A=c([k("esri.core.MultiOriginJSONSupport")],$A);function Y(t,e,i={}){return V5(t,e,i,NY)}function Gn(t,e,i={}){return V5(t,e,i,DY)}function V5(t,e,i={},r){let n=null;const s=i.once?(o,a)=>{r(o)&&(Xt(n),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(n=Bfe(t,s,i.sync,i.equals),i.initial){const o=t();s(o,o)}return n}function bs(t,e,i,r={}){let n=null,s=null,o=null;function a(){var p;n&&s&&(s.remove(),(p=r.onListenerRemove)==null||p.call(r,n),n=null,s=null)}function l(p){r.once&&r.once&&Xt(o),i(p)}const u=Y(t,(p,h)=>{var m;a(),Ek(p)&&(n=p,s=g0(p,e,l),(m=r.onListenerAdd)==null||m.call(r,p))},{sync:r.sync,initial:!0});return o=Mt(()=>{u.remove(),a()}),o}function Zf(t,e){return m1e(t,DY,e)}function m1e(t,e,i){if(pa(i))return Promise.reject(mt());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let n=null;function s(){n=Xt(n)}return new Promise((o,a)=>{n=J1([ys(i,()=>{s(),a(mt())}),V5(t,l=>{s(),o(l)},{sync:!1,once:!0},e??NY)])})}function NY(t){return!0}function DY(t){return!!t}const Yf={sync:!0},Le={initial:!0},ol={sync:!0,initial:!0};async function FY(t,e){const{WhereClause:i}=await Z(()=>import("./WhereClause-C-EKvWWd.js").then(r=>r.W),__vite__mapDeps([11,12]));return i.create(t,e)}function jY(t,e){return t!=null?e!=null?`(${t}) AND (${e})`:t:e}function sm(t){return typeof t=="string"||t instanceof String}const vV=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Kf extends Error{}class y1e extends Kf{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class g1e extends Kf{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class v1e extends Kf{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Hy extends Kf{}class zY extends Kf{constructor(e){super(`Invalid unit ${e}`)}}class Mn extends Kf{}class lu extends Kf{constructor(){super("Zone is an abstract class")}}const pe="numeric",fa="short",ws="long",WE={year:pe,month:pe,day:pe},VY={year:pe,month:fa,day:pe},b1e={year:pe,month:fa,day:pe,weekday:fa},UY={year:pe,month:ws,day:pe},BY={year:pe,month:ws,day:pe,weekday:ws},GY={hour:pe,minute:pe},HY={hour:pe,minute:pe,second:pe},qY={hour:pe,minute:pe,second:pe,timeZoneName:fa},WY={hour:pe,minute:pe,second:pe,timeZoneName:ws},JY={hour:pe,minute:pe,hourCycle:"h23"},ZY={hour:pe,minute:pe,second:pe,hourCycle:"h23"},YY={hour:pe,minute:pe,second:pe,hourCycle:"h23",timeZoneName:fa},KY={hour:pe,minute:pe,second:pe,hourCycle:"h23",timeZoneName:ws},QY={year:pe,month:pe,day:pe,hour:pe,minute:pe},XY={year:pe,month:pe,day:pe,hour:pe,minute:pe,second:pe},eK={year:pe,month:fa,day:pe,hour:pe,minute:pe},tK={year:pe,month:fa,day:pe,hour:pe,minute:pe,second:pe},w1e={year:pe,month:fa,day:pe,weekday:fa,hour:pe,minute:pe},iK={year:pe,month:ws,day:pe,hour:pe,minute:pe,timeZoneName:fa},rK={year:pe,month:ws,day:pe,hour:pe,minute:pe,second:pe,timeZoneName:fa},nK={year:pe,month:ws,day:pe,weekday:ws,hour:pe,minute:pe,timeZoneName:ws},sK={year:pe,month:ws,day:pe,weekday:ws,hour:pe,minute:pe,second:pe,timeZoneName:ws};class $0{get type(){throw new lu}get name(){throw new lu}get ianaName(){return this.name}get isUniversal(){throw new lu}offsetName(e,i){throw new lu}formatOffset(e,i){throw new lu}offset(e){throw new lu}equals(e){throw new lu}get isValid(){throw new lu}}let GC=null;class Hk extends $0{static get instance(){return GC===null&&(GC=new Hk),GC}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return fK(e,i,r)}formatOffset(e,i){return tw(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let nx={};function _1e(t){return nx[t]||(nx[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),nx[t]}const S1e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function $1e(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,o,a,l,u,p]=r;return[o,n,s,a,l,u,p]}function x1e(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:s,value:o}=i[n],a=S1e[s];s==="era"?r[a]=o:ze(a)||(r[a]=parseInt(o,10))}return r}let kS={};class Ts extends $0{static create(e){return kS[e]||(kS[e]=new Ts(e)),kS[e]}static resetCache(){kS={},nx={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ts.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return fK(e,i,r,this.name)}formatOffset(e,i){return tw(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const r=_1e(this.name);let[n,s,o,a,l,u,p]=r.formatToParts?x1e(r,i):$1e(r,i);a==="BC"&&(n=-Math.abs(n)+1);const m=Wk({year:n,month:s,day:o,hour:l===24?0:l,minute:u,second:p,millisecond:0});let y=+i;const g=y%1e3;return y-=g>=0?g:1e3+g,(m-y)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let bV={};function E1e(t,e={}){const i=JSON.stringify([t,e]);let r=bV[i];return r||(r=new Intl.ListFormat(t,e),bV[i]=r),r}let xA={};function EA(t,e={}){const i=JSON.stringify([t,e]);let r=xA[i];return r||(r=new Intl.DateTimeFormat(t,e),xA[i]=r),r}let TA={};function T1e(t,e={}){const i=JSON.stringify([t,e]);let r=TA[i];return r||(r=new Intl.NumberFormat(t,e),TA[i]=r),r}let kA={};function k1e(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let s=kA[n];return s||(s=new Intl.RelativeTimeFormat(t,e),kA[n]=s),s}let Lv=null;function I1e(){return Lv||(Lv=new Intl.DateTimeFormat().resolvedOptions().locale,Lv)}let wV={};function C1e(t){let e=wV[t];if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,wV[t]=e}return e}function M1e(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=EA(t).resolvedOptions(),n=t}catch{const l=t.substring(0,i);r=EA(l).resolvedOptions(),n=l}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function L1e(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function O1e(t){const e=[];for(let i=1;i<=12;i++){const r=Pe.utc(2009,i,1);e.push(t(r))}return e}function A1e(t){const e=[];for(let i=1;i<=7;i++){const r=Pe.utc(2016,11,13+i);e.push(t(r))}return e}function IS(t,e,i,r){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):r(e)}function P1e(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class R1e{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=T1e(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):H5(e,3);return Oi(i,this.padTo)}}}class N1e{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Ts.create(a).valid?(n=a,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=EA(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class D1e{constructor(e,i,r){this.opts={style:"long",...r},!i&&pK()&&(this.rtf=k1e(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):r_e(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const F1e={firstDay:1,minimalDays:4,weekend:[6,7]};class Tt{static fromOpts(e){return Tt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,n,s=!1){const o=e||_i.defaultLocale,a=o||(s?"en-US":I1e()),l=i||_i.defaultNumberingSystem,u=r||_i.defaultOutputCalendar,p=IA(n)||_i.defaultWeekSettings;return new Tt(a,l,u,p,o)}static resetCache(){Lv=null,xA={},TA={},kA={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return Tt.create(e,i,r,n)}constructor(e,i,r,n,s){const[o,a,l]=M1e(e);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||l||null,this.weekSettings=n,this.intl=L1e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=P1e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Tt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,IA(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return IS(this,e,gK,()=>{const r=i?{month:e,day:"numeric"}:{month:e},n=i?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=O1e(s=>this.extract(s,r,"month"))),this.monthsCache[n][e]})}weekdays(e,i=!1){return IS(this,e,wK,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=A1e(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return IS(this,void 0,()=>_K,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Pe.utc(2016,11,13,9),Pe.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return IS(this,e,SK,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[Pe.utc(-40,1,1),Pe.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new R1e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new N1e(e,this.intl,i)}relFormatter(e={}){return new D1e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return E1e(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:hK()?C1e(this.locale):F1e}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let HC=null;class Sr extends $0{static get utcInstance(){return HC===null&&(HC=new Sr(0)),HC}static instance(e){return e===0?Sr.utcInstance:new Sr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Sr(Jk(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${tw(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${tw(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return tw(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class j1e extends $0{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ld(t,e){if(ze(t)||t===null)return e;if(t instanceof $0)return t;if(U1e(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?Hk.instance:i==="utc"||i==="gmt"?Sr.utcInstance:Sr.parseSpecifier(i)||Ts.create(t)}else return rf(t)?Sr.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new j1e(t)}let _V=()=>Date.now(),SV="system",$V=null,xV=null,EV=null,TV=60,kV,IV=null;class _i{static get now(){return _V}static set now(e){_V=e}static set defaultZone(e){SV=e}static get defaultZone(){return ld(SV,Hk.instance)}static get defaultLocale(){return $V}static set defaultLocale(e){$V=e}static get defaultNumberingSystem(){return xV}static set defaultNumberingSystem(e){xV=e}static get defaultOutputCalendar(){return EV}static set defaultOutputCalendar(e){EV=e}static get defaultWeekSettings(){return IV}static set defaultWeekSettings(e){IV=IA(e)}static get twoDigitCutoffYear(){return TV}static set twoDigitCutoffYear(e){TV=e%100}static get throwOnInvalid(){return kV}static set throwOnInvalid(e){kV=e}static resetCaches(){Tt.resetCache(),Ts.resetCache()}}class na{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const oK=[0,31,59,90,120,151,181,212,243,273,304,334],aK=[0,31,60,91,121,152,182,213,244,274,305,335];function no(t,e){return new na("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function U5(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function lK(t,e,i){return i+(o_(t)?aK:oK)[e-1]}function cK(t,e){const i=o_(t)?aK:oK,r=i.findIndex(s=>s<e),n=e-i[r];return{month:r+1,day:n}}function B5(t,e){return(t-e+7)%7+1}function JE(t,e=4,i=1){const{year:r,month:n,day:s}=t,o=lK(r,n,s),a=B5(U5(r,n,s),i);let l=Math.floor((o-a+14-e)/7),u;return l<1?(u=r-1,l=s1(u,e,i)):l>s1(r,e,i)?(u=r+1,l=1):u=r,{weekYear:u,weekNumber:l,weekday:a,...Zk(t)}}function CV(t,e=4,i=1){const{weekYear:r,weekNumber:n,weekday:s}=t,o=B5(U5(r,1,e),i),a=mg(r);let l=n*7+s-o-7+e,u;l<1?(u=r-1,l+=mg(u)):l>a?(u=r+1,l-=mg(r)):u=r;const{month:p,day:h}=cK(u,l);return{year:u,month:p,day:h,...Zk(t)}}function qC(t){const{year:e,month:i,day:r}=t,n=lK(e,i,r);return{year:e,ordinal:n,...Zk(t)}}function MV(t){const{year:e,ordinal:i}=t,{month:r,day:n}=cK(e,i);return{year:e,month:r,day:n,...Zk(t)}}function LV(t,e){if(!ze(t.localWeekday)||!ze(t.localWeekNumber)||!ze(t.localWeekYear)){if(!ze(t.weekday)||!ze(t.weekNumber)||!ze(t.weekYear))throw new Hy("Cannot mix locale-based week fields with ISO-based week fields");return ze(t.localWeekday)||(t.weekday=t.localWeekday),ze(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),ze(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function z1e(t,e=4,i=1){const r=qk(t.weekYear),n=so(t.weekNumber,1,s1(t.weekYear,e,i)),s=so(t.weekday,1,7);return r?n?s?!1:no("weekday",t.weekday):no("week",t.weekNumber):no("weekYear",t.weekYear)}function V1e(t){const e=qk(t.year),i=so(t.ordinal,1,mg(t.year));return e?i?!1:no("ordinal",t.ordinal):no("year",t.year)}function uK(t){const e=qk(t.year),i=so(t.month,1,12),r=so(t.day,1,ZE(t.year,t.month));return e?i?r?!1:no("day",t.day):no("month",t.month):no("year",t.year)}function dK(t){const{hour:e,minute:i,second:r,millisecond:n}=t,s=so(e,0,23)||e===24&&i===0&&r===0&&n===0,o=so(i,0,59),a=so(r,0,59),l=so(n,0,999);return s?o?a?l?!1:no("millisecond",n):no("second",r):no("minute",i):no("hour",e)}function ze(t){return typeof t>"u"}function rf(t){return typeof t=="number"}function qk(t){return typeof t=="number"&&t%1===0}function U1e(t){return typeof t=="string"}function B1e(t){return Object.prototype.toString.call(t)==="[object Date]"}function pK(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function hK(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function G1e(t){return Array.isArray(t)?t:[t]}function OV(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const s=[e(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function H1e(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function qg(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function IA(t){if(t==null)return null;if(typeof t!="object")throw new Mn("Week settings must be an object");if(!so(t.firstDay,1,7)||!so(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!so(e,1,7)))throw new Mn("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function so(t,e,i){return qk(t)&&t>=e&&t<=i}function q1e(t,e){return t-e*Math.floor(t/e)}function Oi(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Xu(t){if(!(ze(t)||t===null||t===""))return parseInt(t,10)}function vp(t){if(!(ze(t)||t===null||t===""))return parseFloat(t)}function G5(t){if(!(ze(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function H5(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function o_(t){return t%4===0&&(t%100!==0||t%400===0)}function mg(t){return o_(t)?366:365}function ZE(t,e){const i=q1e(e-1,12)+1,r=t+(e-i)/12;return i===2?o_(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Wk(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function AV(t,e,i){return-B5(U5(t,1,e),i)+e-1}function s1(t,e=4,i=1){const r=AV(t,e,i),n=AV(t+1,e,i);return(mg(t)-r+n)/7}function CA(t){return t>99?t:t>_i.twoDigitCutoffYear?1900+t:2e3+t}function fK(t,e,i,r=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function Jk(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function mK(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Mn(`Invalid unit value ${t}`);return e}function YE(t,e){const i={};for(const r in t)if(qg(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=mK(n)}return i}function tw(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${Oi(i,2)}:${Oi(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${Oi(i,2)}${Oi(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Zk(t){return H1e(t,["hour","minute","second","millisecond"])}const W1e=["January","February","March","April","May","June","July","August","September","October","November","December"],yK=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],J1e=["J","F","M","A","M","J","J","A","S","O","N","D"];function gK(t){switch(t){case"narrow":return[...J1e];case"short":return[...yK];case"long":return[...W1e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const vK=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],bK=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Z1e=["M","T","W","T","F","S","S"];function wK(t){switch(t){case"narrow":return[...Z1e];case"short":return[...bK];case"long":return[...vK];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const _K=["AM","PM"],Y1e=["Before Christ","Anno Domini"],K1e=["BC","AD"],Q1e=["B","A"];function SK(t){switch(t){case"narrow":return[...Q1e];case"short":return[...K1e];case"long":return[...Y1e];default:return null}}function X1e(t){return _K[t.hour<12?0:1]}function e_e(t,e){return wK(e)[t.weekday-1]}function t_e(t,e){return gK(e)[t.month-1]}function i_e(t,e){return SK(e)[t.year<0?0:1]}function r_e(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${n[t][0]}`;case-1:return h?"yesterday":`last ${n[t][0]}`;case 0:return h?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=n[t],p=r?l?u[1]:u[2]||u[1]:l?n[t][0]:t;return o?`${a} ${p} ago`:`in ${a} ${p}`}function PV(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const n_e={D:WE,DD:VY,DDD:UY,DDDD:BY,t:GY,tt:HY,ttt:qY,tttt:WY,T:JY,TT:ZY,TTT:YY,TTTT:KY,f:QY,ff:eK,fff:iK,ffff:nK,F:XY,FF:tK,FFF:rK,FFFF:sK};class Gr{static create(e,i={}){return new Gr(e,i)}static parseFormat(e){let i=null,r="",n=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),i=null,r="",n=!n):n||a===i?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return n_e[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Oi(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,g)=>this.loc.extract(e,y,g),o=y=>e.isOffsetFixed&&e.offset===0&&y.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,y.format):"",a=()=>r?X1e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,g)=>r?t_e(e,y):s(g?{month:y}:{month:y,day:"numeric"},"month"),u=(y,g)=>r?e_e(e,y):s(g?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),p=y=>{const g=Gr.macroTokenToFormatOpts(y);return g?this.formatWithSystemDefault(e,g):y},h=y=>r?i_e(e,y):s({era:y},"era"),m=y=>{switch(y){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(y)}};return PV(Gr.parseFormat(i),m)}formatDurationFromString(e,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>u=>{const p=r(u);return p?this.num(l.get(p),u.length):u},s=Gr.parseFormat(i),o=s.reduce((l,{literal:u,val:p})=>u?l:l.concat(p),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return PV(s,n(a))}}const $K=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function x0(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function E0(...t){return e=>t.reduce(([i,r,n],s)=>{const[o,a,l]=s(e,n);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function T0(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function xK(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=Xu(e[i+n]);return[r,null,i+n]}}const EK=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,s_e=`(?:${EK.source}?(?:\\[(${$K.source})\\])?)?`,q5=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,TK=RegExp(`${q5.source}${s_e}`),W5=RegExp(`(?:T${TK.source})?`),o_e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,a_e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,l_e=/(\d{4})-?(\d{3})/,c_e=xK("weekYear","weekNumber","weekDay"),u_e=xK("year","ordinal"),d_e=/(\d{4})-(\d\d)-(\d\d)/,kK=RegExp(`${q5.source} ?(?:${EK.source}|(${$K.source}))?`),p_e=RegExp(`(?: ${kK.source})?`);function yg(t,e,i){const r=t[e];return ze(r)?i:Xu(r)}function h_e(t,e){return[{year:yg(t,e),month:yg(t,e+1,1),day:yg(t,e+2,1)},null,e+3]}function k0(t,e){return[{hours:yg(t,e,0),minutes:yg(t,e+1,0),seconds:yg(t,e+2,0),milliseconds:G5(t[e+3])},null,e+4]}function a_(t,e){const i=!t[e]&&!t[e+1],r=Jk(t[e+1],t[e+2]),n=i?null:Sr.instance(r);return[{},n,e+3]}function l_(t,e){const i=t[e]?Ts.create(t[e]):null;return[{},i,e+1]}const f_e=RegExp(`^T?${q5.source}$`),m_e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function y_e(t){const[e,i,r,n,s,o,a,l,u]=t,p=e[0]==="-",h=l&&l[0]==="-",m=(y,g=!1)=>y!==void 0&&(g||y&&p)?-y:y;return[{years:m(vp(i)),months:m(vp(r)),weeks:m(vp(n)),days:m(vp(s)),hours:m(vp(o)),minutes:m(vp(a)),seconds:m(vp(l),l==="-0"),milliseconds:m(G5(u),h)}]}const g_e={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function J5(t,e,i,r,n,s,o){const a={year:e.length===2?CA(Xu(e)):Xu(e),month:yK.indexOf(i)+1,day:Xu(r),hour:Xu(n),minute:Xu(s)};return o&&(a.second=Xu(o)),t&&(a.weekday=t.length>3?vK.indexOf(t)+1:bK.indexOf(t)+1),a}const v_e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function b_e(t){const[,e,i,r,n,s,o,a,l,u,p,h]=t,m=J5(e,n,r,i,s,o,a);let y;return l?y=g_e[l]:u?y=0:y=Jk(p,h),[m,new Sr(y)]}function w_e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const __e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,S_e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,$_e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function RV(t){const[,e,i,r,n,s,o,a]=t;return[J5(e,n,r,i,s,o,a),Sr.utcInstance]}function x_e(t){const[,e,i,r,n,s,o,a]=t;return[J5(e,a,i,r,n,s,o),Sr.utcInstance]}const E_e=x0(o_e,W5),T_e=x0(a_e,W5),k_e=x0(l_e,W5),I_e=x0(TK),IK=E0(h_e,k0,a_,l_),C_e=E0(c_e,k0,a_,l_),M_e=E0(u_e,k0,a_,l_),L_e=E0(k0,a_,l_);function O_e(t){return T0(t,[E_e,IK],[T_e,C_e],[k_e,M_e],[I_e,L_e])}function A_e(t){return T0(w_e(t),[v_e,b_e])}function P_e(t){return T0(t,[__e,RV],[S_e,RV],[$_e,x_e])}function R_e(t){return T0(t,[m_e,y_e])}const N_e=E0(k0);function D_e(t){return T0(t,[f_e,N_e])}const F_e=x0(d_e,p_e),j_e=x0(kK),z_e=E0(k0,a_,l_);function V_e(t){return T0(t,[F_e,IK],[j_e,z_e])}const NV="Invalid Duration",CK={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},U_e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...CK},Ps=146097/400,om=146097/4800,B_e={years:{quarters:4,months:12,weeks:Ps/7,days:Ps,hours:Ps*24,minutes:Ps*24*60,seconds:Ps*24*60*60,milliseconds:Ps*24*60*60*1e3},quarters:{months:3,weeks:Ps/28,days:Ps/4,hours:Ps*24/4,minutes:Ps*24*60/4,seconds:Ps*24*60*60/4,milliseconds:Ps*24*60*60*1e3/4},months:{weeks:om/7,days:om,hours:om*24,minutes:om*24*60,seconds:om*24*60*60,milliseconds:om*24*60*60*1e3},...CK},zh=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],G_e=zh.slice(0).reverse();function cu(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new nt(r)}function MK(t,e){let i=e.milliseconds??0;for(const r of G_e.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function DV(t,e){const i=MK(t,e)<0?-1:1;zh.reduceRight((r,n)=>{if(ze(e[n]))return r;if(r){const s=e[r]*i,o=t[n][r],a=Math.floor(s/o);e[n]+=a*i,e[r]-=a*o*i}return n},null),zh.reduce((r,n)=>{if(ze(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*t[r][n]}return n},null)}function H_e(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class nt{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?B_e:U_e;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Tt.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return nt.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Mn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new nt({values:YE(e,nt.normalizeUnit),loc:Tt.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(rf(e))return nt.fromMillis(e);if(nt.isDuration(e))return e;if(typeof e=="object")return nt.fromObject(e);throw new Mn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=R_e(e);return r?nt.fromObject(r,i):nt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=D_e(e);return r?nt.fromObject(r,i):nt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Mn("need to specify a reason the Duration is invalid");const r=e instanceof na?e:new na(e,i);if(_i.throwOnInvalid)throw new v1e(r);return new nt({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new zY(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Gr.create(this.loc,r).formatDurationFromString(this,e):NV}toHuman(e={}){if(!this.isValid)return NV;const i=zh.map(r=>{const n=this.values[r];return ze(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(n)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=H5(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Pe.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?MK(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=nt.fromDurationLike(e),r={};for(const n of zh)(qg(i.values,n)||qg(this.values,n))&&(r[n]=i.get(n)+this.get(n));return cu(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=nt.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=mK(e(this.values[r],r));return cu(this,{values:i},!0)}get(e){return this[nt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...YE(e,nt.normalizeUnit)};return cu(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return cu(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return DV(this.matrix,e),cu(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=H_e(this.normalize().shiftToAll().toObject());return cu(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>nt.normalizeUnit(o));const i={},r={},n=this.toObject();let s;for(const o of zh)if(e.indexOf(o)>=0){s=o;let a=0;for(const u in r)a+=this.matrix[u][o]*r[u],r[u]=0;rf(n[o])&&(a+=n[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else rf(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(i[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return DV(this.matrix,i),cu(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return cu(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of zh)if(!i(this.values[r],e.values[r]))return!1;return!0}}const am="Invalid Interval";function q_e(t,e){return!t||!t.isValid?hi.invalid("missing or invalid start"):!e||!e.isValid?hi.invalid("missing or invalid end"):e<t?hi.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class hi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Mn("need to specify a reason the Interval is invalid");const r=e instanceof na?e:new na(e,i);if(_i.throwOnInvalid)throw new g1e(r);return new hi({invalid:r})}static fromDateTimes(e,i){const r=tv(e),n=tv(i),s=q_e(r,n);return s??new hi({start:r,end:n})}static after(e,i){const r=nt.fromDurationLike(i),n=tv(e);return hi.fromDateTimes(n,n.plus(r))}static before(e,i){const r=nt.fromDurationLike(i),n=tv(e);return hi.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let s,o;try{s=Pe.fromISO(r,i),o=s.isValid}catch{o=!1}let a,l;try{a=Pe.fromISO(n,i),l=a.isValid}catch{l=!1}if(o&&l)return hi.fromDateTimes(s,a);if(o){const u=nt.fromISO(n,i);if(u.isValid)return hi.after(s,u)}else if(l){const u=nt.fromISO(r,i);if(u.isValid)return hi.before(a,u)}}return hi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let n;return i!=null&&i.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?hi.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(tv).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=i[s]||this.e,a=+o>+this.e?this.e:o;r.push(hi.fromDateTimes(n,a)),n=a,s+=1}return r}splitBy(e){const i=nt.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(hi.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:hi.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return hi.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&n.push(hi.fromDateTimes(i,l.time)),i=null);return hi.merge(n)}difference(...e){return hi.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:am}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=WE,i={}){return this.isValid?Gr.create(this.s.loc.clone(i),e).formatInterval(this):am}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:am}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:am}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:am}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:am}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):nt.invalid(this.invalidReason)}mapEndpoints(e){return hi.fromDateTimes(e(this.s),e(this.e))}}class CS{static hasDST(e=_i.defaultZone){const i=Pe.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Ts.isValidZone(e)}static normalizeZone(e){return ld(e,_i.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||Tt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||Tt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||Tt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Tt.create(i,r,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Tt.create(i,r,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||Tt.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||Tt.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Tt.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Tt.create(i,null,"gregory").eras(e)}static features(){return{relative:pK(),localeWeek:hK()}}}function FV(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(nt.fromMillis(r).as("days"))}function W_e(t,e,i){const r=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const p=FV(l,u);return(p-p%7)/7}],["days",FV]],n={},s=t;let o,a;for(const[l,u]of r)i.indexOf(l)>=0&&(o=l,n[l]=u(t,e),a=s.plus(n),a>e?(n[l]--,t=s.plus(n),t>e&&(a=t,n[l]--,t=s.plus(n))):t=a);return[t,n,a,o]}function J_e(t,e,i,r){let[n,s,o,a]=W_e(t,e,i);const l=e-n,u=i.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);u.length===0&&(o<e&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const p=nt.fromObject(s,r);return u.length>0?nt.fromMillis(l,r).shiftTo(...u).plus(p):p}const Z5={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},jV={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Z_e=Z5.hanidec.replace(/[\[|\]]/g,"").split("");function Y_e(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(Z5.hanidec)!==-1)e+=Z_e.indexOf(t[i]);else for(const n in jV){const[s,o]=jV[n];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}function _o({numberingSystem:t},e=""){return new RegExp(`${Z5[t||"latn"]}${e}`)}const K_e="missing Intl.DateTimeFormat.formatToParts support";function ut(t,e=i=>i){return{regex:t,deser:([i])=>e(Y_e(i))}}const Q_e=" ",LK=`[ ${Q_e}]`,OK=new RegExp(LK,"g");function X_e(t){return t.replace(/\./g,"\\.?").replace(OK,LK)}function zV(t){return t.replace(/\./g,"").replace(OK," ").toLowerCase()}function So(t,e){return t===null?null:{regex:RegExp(t.map(X_e).join("|")),deser:([i])=>t.findIndex(r=>zV(i)===zV(r))+e}}function VV(t,e){return{regex:t,deser:([,i,r])=>Jk(i,r),groups:e}}function MS(t){return{regex:t,deser:([e])=>e}}function eSe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tSe(t,e){const i=_o(e),r=_o(e,"{2}"),n=_o(e,"{3}"),s=_o(e,"{4}"),o=_o(e,"{6}"),a=_o(e,"{1,2}"),l=_o(e,"{1,3}"),u=_o(e,"{1,6}"),p=_o(e,"{1,9}"),h=_o(e,"{2,4}"),m=_o(e,"{4,6}"),y=w=>({regex:RegExp(eSe(w.val)),deser:([b])=>b,literal:!0}),v=(w=>{if(t.literal)return y(w);switch(w.val){case"G":return So(e.eras("short"),0);case"GG":return So(e.eras("long"),0);case"y":return ut(u);case"yy":return ut(h,CA);case"yyyy":return ut(s);case"yyyyy":return ut(m);case"yyyyyy":return ut(o);case"M":return ut(a);case"MM":return ut(r);case"MMM":return So(e.months("short",!0),1);case"MMMM":return So(e.months("long",!0),1);case"L":return ut(a);case"LL":return ut(r);case"LLL":return So(e.months("short",!1),1);case"LLLL":return So(e.months("long",!1),1);case"d":return ut(a);case"dd":return ut(r);case"o":return ut(l);case"ooo":return ut(n);case"HH":return ut(r);case"H":return ut(a);case"hh":return ut(r);case"h":return ut(a);case"mm":return ut(r);case"m":return ut(a);case"q":return ut(a);case"qq":return ut(r);case"s":return ut(a);case"ss":return ut(r);case"S":return ut(l);case"SSS":return ut(n);case"u":return MS(p);case"uu":return MS(a);case"uuu":return ut(i);case"a":return So(e.meridiems(),0);case"kkkk":return ut(s);case"kk":return ut(h,CA);case"W":return ut(a);case"WW":return ut(r);case"E":case"c":return ut(i);case"EEE":return So(e.weekdays("short",!1),1);case"EEEE":return So(e.weekdays("long",!1),1);case"ccc":return So(e.weekdays("short",!0),1);case"cccc":return So(e.weekdays("long",!0),1);case"Z":case"ZZ":return VV(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return VV(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return MS(/[a-z_+-/]{1,256}?/i);case" ":return MS(/[^\S\n\r]/);default:return y(w)}})(t)||{invalidReason:K_e};return v.token=t,v}const iSe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function rSe(t,e,i){const{type:r,value:n}=t;if(r==="literal"){const l=/^\s+$/.test(n);return{literal:!l,val:l?" ":n}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=iSe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function nSe(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function sSe(t,e,i){const r=t.match(e);if(r){const n={};let s=1;for(const o in i)if(qg(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,n]}else return[r,{}]}function oSe(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return ze(t.z)||(i=Ts.create(t.z)),ze(t.Z)||(i||(i=new Sr(t.Z)),r=t.Z),ze(t.q)||(t.M=(t.q-1)*3+1),ze(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),ze(t.u)||(t.S=G5(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),i,r]}let WC=null;function aSe(){return WC||(WC=Pe.fromMillis(1555555555555)),WC}function lSe(t,e){if(t.literal)return t;const i=Gr.macroTokenToFormatOpts(t.val),r=RK(i,e);return r==null||r.includes(void 0)?t:r}function AK(t,e){return Array.prototype.concat(...t.map(i=>lSe(i,e)))}function PK(t,e,i){const r=AK(Gr.parseFormat(i),t),n=r.map(o=>tSe(o,t)),s=n.find(o=>o.invalidReason);if(s)return{input:e,tokens:r,invalidReason:s.invalidReason};{const[o,a]=nSe(n),l=RegExp(o,"i"),[u,p]=sSe(e,l,a),[h,m,y]=p?oSe(p):[null,null,void 0];if(qg(p,"a")&&qg(p,"H"))throw new Hy("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:l,rawMatches:u,matches:p,result:h,zone:m,specificOffset:y}}}function cSe(t,e,i){const{result:r,zone:n,specificOffset:s,invalidReason:o}=PK(t,e,i);return[r,n,s,o]}function RK(t,e){if(!t)return null;const r=Gr.create(e,t).dtFormatter(aSe()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(o=>rSe(o,t,s))}const JC="Invalid DateTime",UV=864e13;function LS(t){return new na("unsupported zone",`the zone "${t.name}" is not supported`)}function ZC(t){return t.weekData===null&&(t.weekData=JE(t.c)),t.weekData}function YC(t){return t.localWeekData===null&&(t.localWeekData=JE(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function bp(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Pe({...i,...e,old:i})}function NK(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function OS(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function sx(t,e,i){return NK(Wk(t),e,i)}function BV(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:n,day:Math.min(t.c.day,ZE(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=nt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Wk(s);let[l,u]=NK(a,i,t.zone);return o!==0&&(l+=o,u=t.zone.offset(l)),{ts:l,o:u}}function ev(t,e,i,r,n,s){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const l=e||a,u=Pe.fromObject(t,{...i,zone:l,specificOffset:s});return o?u:u.setZone(a)}else return Pe.invalid(new na("unparsable",`the input "${n}" can't be parsed as ${r}`))}function AS(t,e,i=!0){return t.isValid?Gr.create(Tt.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function KC(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=Oi(t.c.year,i?6:4),e?(r+="-",r+=Oi(t.c.month),r+="-",r+=Oi(t.c.day)):(r+=Oi(t.c.month),r+=Oi(t.c.day)),r}function GV(t,e,i,r,n,s){let o=Oi(t.c.hour);return e?(o+=":",o+=Oi(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=":")):o+=Oi(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!i)&&(o+=Oi(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Oi(t.c.millisecond,3))),n&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Oi(Math.trunc(-t.o/60)),o+=":",o+=Oi(Math.trunc(-t.o%60))):(o+="+",o+=Oi(Math.trunc(t.o/60)),o+=":",o+=Oi(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const DK={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},uSe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},dSe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},FK=["year","month","day","hour","minute","second","millisecond"],pSe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],hSe=["year","ordinal","hour","minute","second","millisecond"];function fSe(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new zY(t);return e}function HV(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return fSe(t)}}function qV(t,e){const i=ld(e.zone,_i.defaultZone),r=Tt.fromObject(e),n=_i.now();let s,o;if(ze(t.year))s=n;else{for(const u of FK)ze(t[u])&&(t[u]=DK[u]);const a=uK(t)||dK(t);if(a)return Pe.invalid(a);const l=i.offset(n);[s,o]=sx(t,l,i)}return new Pe({ts:s,zone:i,loc:r,o})}function WV(t,e,i){const r=ze(i.round)?!0:i.round,n=(o,a)=>(o=H5(o,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),s=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return n(s(i.unit),i.unit);for(const o of i.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(t>e?-0:0,i.units[i.units.length-1])}function JV(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class Pe{constructor(e){const i=e.zone||_i.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new na("invalid input"):null)||(i.isValid?null:LS(i));this.ts=ze(e.ts)?_i.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,s]=[e.old.c,e.old.o];else{const a=i.offset(this.ts);n=OS(this.ts,a),r=Number.isNaN(n.year)?new na("invalid input"):null,n=r?null:n,s=r?null:a}this._zone=i,this.loc=e.loc||Tt.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Pe({})}static local(){const[e,i]=JV(arguments),[r,n,s,o,a,l,u]=i;return qV({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static utc(){const[e,i]=JV(arguments),[r,n,s,o,a,l,u]=i;return e.zone=Sr.utcInstance,qV({year:r,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,i={}){const r=B1e(e)?e.valueOf():NaN;if(Number.isNaN(r))return Pe.invalid("invalid input");const n=ld(i.zone,_i.defaultZone);return n.isValid?new Pe({ts:r,zone:n,loc:Tt.fromObject(i)}):Pe.invalid(LS(n))}static fromMillis(e,i={}){if(rf(e))return e<-UV||e>UV?Pe.invalid("Timestamp out of range"):new Pe({ts:e,zone:ld(i.zone,_i.defaultZone),loc:Tt.fromObject(i)});throw new Mn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(rf(e))return new Pe({ts:e*1e3,zone:ld(i.zone,_i.defaultZone),loc:Tt.fromObject(i)});throw new Mn("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=ld(i.zone,_i.defaultZone);if(!r.isValid)return Pe.invalid(LS(r));const n=Tt.fromObject(i),s=YE(e,HV),{minDaysInFirstWeek:o,startOfWeek:a}=LV(s,n),l=_i.now(),u=ze(i.specificOffset)?r.offset(l):i.specificOffset,p=!ze(s.ordinal),h=!ze(s.year),m=!ze(s.month)||!ze(s.day),y=h||m,g=s.weekYear||s.weekNumber;if((y||p)&&g)throw new Hy("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&p)throw new Hy("Can't mix ordinal dates with month/day");const v=g||s.weekday&&!y;let w,b,_=OS(l,u);v?(w=pSe,b=uSe,_=JE(_,o,a)):p?(w=hSe,b=dSe,_=qC(_)):(w=FK,b=DK);let S=!1;for(const O of w){const F=s[O];ze(F)?S?s[O]=b[O]:s[O]=_[O]:S=!0}const $=v?z1e(s,o,a):p?V1e(s):uK(s),T=$||dK(s);if(T)return Pe.invalid(T);const I=v?CV(s,o,a):p?MV(s):s,[C,M]=sx(I,u,r),R=new Pe({ts:C,zone:r,o:M,loc:n});return s.weekday&&y&&e.weekday!==R.weekday?Pe.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${R.toISO()}`):R}static fromISO(e,i={}){const[r,n]=O_e(e);return ev(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=A_e(e);return ev(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=P_e(e);return ev(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(ze(e)||ze(i))throw new Mn("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=Tt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,u,p]=cSe(o,e,i);return p?Pe.invalid(p):ev(a,l,r,`format ${i}`,e,u)}static fromString(e,i,r={}){return Pe.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=V_e(e);return ev(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Mn("need to specify a reason the DateTime is invalid");const r=e instanceof na?e:new na(e,i);if(_i.throwOnInvalid)throw new y1e(r);return new Pe({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=RK(e,Tt.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return AK(Gr.parseFormat(e),Tt.fromObject(i)).map(n=>n.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?ZC(this).weekYear:NaN}get weekNumber(){return this.isValid?ZC(this).weekNumber:NaN}get weekday(){return this.isValid?ZC(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?YC(this).weekday:NaN}get localWeekNumber(){return this.isValid?YC(this).weekNumber:NaN}get localWeekYear(){return this.isValid?YC(this).weekYear:NaN}get ordinal(){return this.isValid?qC(this.c).ordinal:NaN}get monthShort(){return this.isValid?CS.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?CS.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?CS.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?CS.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=Wk(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-n*i),a=this.zone.offset(r-s*i);if(o===a)return[this];const l=r-o*i,u=r-a*i,p=OS(l,o),h=OS(u,a);return p.hour===h.hour&&p.minute===h.minute&&p.second===h.second&&p.millisecond===h.millisecond?[bp(this,{ts:l}),bp(this,{ts:u})]:[this]}get isInLeapYear(){return o_(this.year)}get daysInMonth(){return ZE(this.year,this.month)}get daysInYear(){return this.isValid?mg(this.year):NaN}get weeksInWeekYear(){return this.isValid?s1(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?s1(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=Gr.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(Sr.instance(e),i)}toLocal(){return this.setZone(_i.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=ld(e,_i.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const s=e.offset(this.ts),o=this.toObject();[n]=sx(o,s,e)}return bp(this,{ts:n,zone:e})}else return Pe.invalid(LS(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return bp(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=YE(e,HV),{minDaysInFirstWeek:r,startOfWeek:n}=LV(i,this.loc),s=!ze(i.weekYear)||!ze(i.weekNumber)||!ze(i.weekday),o=!ze(i.ordinal),a=!ze(i.year),l=!ze(i.month)||!ze(i.day),u=a||l,p=i.weekYear||i.weekNumber;if((u||o)&&p)throw new Hy("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Hy("Can't mix ordinal dates with month/day");let h;s?h=CV({...JE(this.c,r,n),...i},r,n):ze(i.ordinal)?(h={...this.toObject(),...i},ze(i.day)&&(h.day=Math.min(ZE(h.year,h.month),h.day))):h=MV({...qC(this.c),...i});const[m,y]=sx(h,this.o,this.zone);return bp(this,{ts:m,o:y})}plus(e){if(!this.isValid)return this;const i=nt.fromDurationLike(e);return bp(this,BV(this,i))}minus(e){if(!this.isValid)return this;const i=nt.fromDurationLike(e).negate();return bp(this,BV(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=nt.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Gr.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):JC}toLocaleString(e=WE,i={}){return this.isValid?Gr.create(this.loc.clone(i),e).formatDateTime(this):JC}toLocaleParts(e={}){return this.isValid?Gr.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=KC(this,o);return a+="T",a+=GV(this,o,i,r,n,s),a}toISODate({format:e="extended"}={}){return this.isValid?KC(this,e==="extended"):null}toISOWeekDate(){return AS(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+GV(this,o==="extended",i,e,r,s):null}toRFC2822(){return AS(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return AS(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?KC(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),AS(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():JC}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return nt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=G1e(i).map(nt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,u=J_e(a,l,s,n);return o?u.negate():u}diffNow(e="milliseconds",i={}){return this.diff(Pe.now(),e,i)}until(e){return this.isValid?hi.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i,r)<=n&&n<=s.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||Pe.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),WV(i,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?WV(e.base||Pe.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Pe.isDateTime))throw new Mn("min requires all arguments be DateTimes");return OV(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(Pe.isDateTime))throw new Mn("max requires all arguments be DateTimes");return OV(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=Tt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return PK(o,e,i)}static fromStringExplain(e,i,r={}){return Pe.fromFormatExplain(e,i,r)}static get DATE_SHORT(){return WE}static get DATE_MED(){return VY}static get DATE_MED_WITH_WEEKDAY(){return b1e}static get DATE_FULL(){return UY}static get DATE_HUGE(){return BY}static get TIME_SIMPLE(){return GY}static get TIME_WITH_SECONDS(){return HY}static get TIME_WITH_SHORT_OFFSET(){return qY}static get TIME_WITH_LONG_OFFSET(){return WY}static get TIME_24_SIMPLE(){return JY}static get TIME_24_WITH_SECONDS(){return ZY}static get TIME_24_WITH_SHORT_OFFSET(){return YY}static get TIME_24_WITH_LONG_OFFSET(){return KY}static get DATETIME_SHORT(){return QY}static get DATETIME_SHORT_WITH_SECONDS(){return XY}static get DATETIME_MED(){return eK}static get DATETIME_MED_WITH_SECONDS(){return tK}static get DATETIME_MED_WITH_WEEKDAY(){return w1e}static get DATETIME_FULL(){return iK}static get DATETIME_FULL_WITH_SECONDS(){return rK}static get DATETIME_HUGE(){return nK}static get DATETIME_HUGE_WITH_SECONDS(){return sK}}function tv(t){if(Pe.isDateTime(t))return t;if(t&&t.valueOf&&rf(t.valueOf()))return Pe.fromJSDate(t);if(t&&typeof t=="object")return Pe.fromObject(t);throw new Mn(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const ks="system",If="unknown",Sl="UTC",mSe=Intl.DateTimeFormat().resolvedOptions().timeZone,ySe="shortOffset";function gSe(t){return"timeZoneIANA"in t}function vSe(t){return t.startsWith("UTC")}function KE(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?ox(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?bSe(i):null}}}}}function ox(t,e=ks){return t?gSe(t)?t.timeZoneIANA:wSe(t,e):e}function bSe(t){return{timeZoneIANA:t}}function wSe(t,e=ks){if(!t||!vV.has(t.timeZone))return e;const i=vV.get(t.timeZone);return vSe(t.timeZone)||t.respectsDaylightSaving?i:_Se(i)}function _Se(t){const e=Pe.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Sr.instance(-i).formatOffset(0,"narrow")}`}function SSe(t,e,i,r,n){if(e&&n==="date")return{timeZone:Sl,timeZoneName:void 0};const s=r.timeStyle||r.hour,o=i===If;return{timeZone:o?n==="timestamp-offset"?void 0:t??Sl:i,timeZoneName:o&&s?ySe:void 0}}const $Se={year:void 0,month:void 0,day:void 0,weekday:void 0},xSe={hour:void 0,minute:void 0,second:void 0},jK={timeZone:Sl},Sa={year:"numeric",month:"numeric",day:"numeric"},iv={year:"numeric",month:"long",day:"numeric"},rv={year:"numeric",month:"short",day:"numeric"},nv={year:"numeric",month:"long",weekday:"long",day:"numeric"},ed={hour:"numeric",minute:"numeric"},Dp={...ed,second:"numeric"},zK={hourCycle:"h23"},sv={...ed,...zK},ov={...Dp,...zK},VK={"short-date":Sa,"short-date-short-time":{...Sa,...ed},"short-date-short-time-24":{...Sa,...sv},"short-date-long-time":{...Sa,...Dp},"short-date-long-time-24":{...Sa,...ov},"short-date-le":Sa,"short-date-le-short-time":{...Sa,...ed},"short-date-le-short-time-24":{...Sa,...sv},"short-date-le-long-time":{...Sa,...Dp},"short-date-le-long-time-24":{...Sa,...ov},"long-month-day-year":iv,"long-month-day-year-short-time":{...iv,...ed},"long-month-day-year-short-time-24":{...iv,...sv},"long-month-day-year-long-time":{...iv,...Dp},"long-month-day-year-long-time-24":{...iv,...ov},"day-short-month-year":rv,"day-short-month-year-short-time":{...rv,...ed},"day-short-month-year-short-time-24":{...rv,...sv},"day-short-month-year-long-time":{...rv,...Dp},"day-short-month-year-long-time-24":{...rv,...ov},"long-date":nv,"long-date-short-time":{...nv,...ed},"long-date-short-time-24":{...nv,...sv},"long-date-long-time":{...nv,...Dp},"long-date-long-time-24":{...nv,...ov},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":ed,"long-time":Dp},ESe=Zi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),UK={ar:"ar-u-nu-latn-ca-gregory"};let MA=new WeakMap;const Yk=VK["short-date-short-time"];function TSe(t){let e=MA.get(t);if(!e){const i=Fn(),r=UK[i]||i,n=Y5(t.timeZone??ks),s={...t,timeZone:n};e=new Intl.DateTimeFormat(r,s),MA.set(t,e)}return e}function cd(t){return VK[t]}function Pn(t,e=Yk){return TSe(e).format(t)}function kSe(t,e=Yk){return Pn(new Date(t),{...e,...jK,...xSe})}function ISe(t,e=Yk){return Pn(new Date(`1970-01-01T${t}Z`),{...e,...jK,...$Se})}function CSe(t,e=Yk){if(e.timeZone)return Pn(new Date(t),e);const i=Pe.fromISO(t,{setZone:!0}),r=Fn(),n=UK[r]??r,s=i.offset===0?Sl:e.timeZone,o={...e,timeZone:s};return i.toLocaleString(o,{locale:n})}function Y5(t){switch(t){case ks:return mSe;case If:return Sl;default:return t}}T5(()=>{MA=new WeakMap});const MSe={ar:"ar-u-nu-latn"};let ax=new WeakMap,BK={};function LSe(t){const e=t||BK;if(!ax.has(e)){const i=Fn(),r=MSe[Fn()]||i;ax.set(e,new Intl.NumberFormat(r,t))}return ax.get(e)}function X9e(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Cf(t,e){return Object.is(t,-0)&&(t=0),LSe(e).format(t)}T5(()=>{ax=new WeakMap,BK={}});const GK=q.getLogger("esri.intl.substitute");function QE(t,e,i={}){const{format:r={}}=i;return Sk(t,n=>OSe(n,e,r))}function OSe(t,e,i){let r,n;const s=t.indexOf(":");if(s===-1?r=t.trim():(r=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!r)return"";const o=q1(r,e);if(o==null)return"";const a=(n?i==null?void 0:i[n]:null)??(i==null?void 0:i[r]);return a?ASe(o,a):n?PSe(o,n):K5(o)}function ASe(t,e){switch(e.type){case"date":return Pn(t,e.intlOptions);case"number":return Cf(t,e.intlOptions);default:return GK.warn("missing format descriptor for key {key}"),K5(t)}}function PSe(t,e){switch(e.toLowerCase()){case"dateformat":return Pn(t);case"numberformat":return Cf(t);default:return GK.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?Pn(t):/^numberformat/i.test(e)?Cf(t):K5(t)}}function K5(t){switch(typeof t){case"string":return t;case"number":return Cf(t);case"boolean":return""+t;default:return t instanceof Date?Pn(t):""}}async function RSe(t,e,i,r){const n=e.exec(i);if(!n)throw new j("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=Xge(r),l=`${s}${o}.json`,u=a?`${s}${o}_${a}.json`:l;let p;try{p=await ZV(t(u))}catch(h){if(u===l)throw new j("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:h});try{p=await ZV(t(l))}catch(m){throw new j("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:m})}}return p}async function ZV(t){if(YV.fetchBundleAsset!=null)return YV.fetchBundleAsset(t);const e=await Ve(t,{responseType:"text"});return JSON.parse(e.data)}let NSe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return RSe(this.getAssetUrl,this.matcher,e,i)}};function DSe(t){return new NSe(t)}const YV={};Qge(DSe({pattern:"esri/",location:it}));const FSe="yyyy-MM-dd",jSe="TT";var iw;(function(t){t.HM="HH:mm",t.HMS="HH:mm:ss",t.HMS_MS="HH:mm:ss.SSS"})(iw||(iw={}));const zSe=[iw.HMS_MS,iw.HMS,iw.HM,jSe];function KV(t){return Pe.fromFormat(t,FSe)}function QV(t){let e=null;return zSe.find(i=>(e=Pe.fromFormat(t,i),e.isValid)),e}function XV(t){return Pe.fromISO(t)}var Wg;(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Wg||(Wg={}));const VSe=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function USe(t){return t!=null&&VSe.has(t.type)}function HK(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function qK(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function WK(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function BSe(t,e){const i=t==null?void 0:t.domain;if(!i)return null;switch(i.type){case"range":{const{min:r,max:n}=GSe(t);if(r!=null&&+e<r||n!=null&&+e>n)return Wg.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(i.codedValues==null||i.codedValues.every(r=>r==null||r.code!==e))return Wg.INVALID_CODED_VALUE}return null}function GSe(t,e){const i=e??(t==null?void 0:t.domain);if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,s=USe(t);return HK(t)||WK(t)||qK(t)?{...HSe(t,n,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:s}}function HSe(t,e,i){return HK(t)?{min:i!=null&&sm(i)?KV(i).toMillis():null,max:e!=null&&sm(e)?KV(e).toMillis():null,rawMin:i,rawMax:e}:WK(t)?{min:i!=null&&sm(i)?QV(i).toMillis():null,max:e!=null&&sm(e)?QV(e).toMillis():null,rawMin:i,rawMax:e}:qK(t)?{min:i!=null&&sm(i)?XV(i).toMillis():null,max:e!=null&&sm(e)?XV(e).toMillis():null,rawMin:i,rawMax:e}:{max:null,min:null}}const qSe=q.getLogger("esri.support.arcadeOnDemand");let QC;function Zd(){return QC||(QC=(async()=>{const t=await Z(()=>import("./arcadeUtils-wc62o7Hx.js").then(e=>e.aD),__vite__mapDeps([13,12,14,15,16,17,18]));return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),QC}const tBe=(t,e,i)=>Q5.create(t,e,i,null,["$feature","$view"],[]),iBe=(t,e,i)=>Q5.create(t,e,i,null,["$feature","$view"],[]),WSe=(t,e,i,r)=>Q5.create(t,e,i,r,["$feature","$view"],[]);let Q5=class JK{constructor(e,i,r,n,s,o,a){this.services=null,this.script=e,this.evaluate=n;const l=Array.isArray(o)?o:o.fields;this.fields=l,this._syntaxTree=r,this._arcade=i,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,r,n,s,o){const{arcade:a,Feature:l,Dictionary:u}=await Zd(),p=Ee.fromJSON(i);let h;try{h=a.parseScript(e,o)}catch(M){return qSe.error(new j("arcade-bad-expression","Failed to parse arcade script",{script:e,error:M})),null}const m=s.reduce((M,R)=>({...M,[R]:null}),{});let y=null;n!=null&&(y=new u(n),y.immutable=!0,m.$config=null);const g=a.scriptUsesGeometryEngine(h),v=g&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(h)&&a.enableFeatureSetSupport(),b=a.scriptIsAsync(h),_=b&&a.enableAsyncSupport(),S={vars:m,spatialReference:p,useAsync:!!_};await Promise.all([v,w,_]);const $=new Set;await a.loadDependentModules($,h,null,b,g);const T=new u;T.immutable=!1,T.setField("scale",0);const I=a.compileScript(h,S),C=(M,R)=>{var F;const O=(F=M.$view)==null?void 0:F.timeZone;return"$view"in M&&M.$view&&(T.setField("scale",typeof M.$view=="object"&&"scale"in M.$view?M.$view.scale:void 0),M.$view=T),y&&(M.$config=y),I({vars:M,spatialReference:p,services:R,timeZone:O})};return new JK(e,a,h,C,new l,r,p)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const JSe=/^([0-9_])/,ZSe=/[^a-z0-9_\u0080-\uffff]+/gi;function YSe(t){return t==null?null:t.trim().replaceAll(ZSe,"_").replace(JSe,"F$1")||null}const KSe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],QSe=["field","normalizationField"];function e8(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(t8(KSe,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)t8(QSe,r,e)}}function t8(t,e,i){if(t)for(const r of t){const n=q1(r,e),s=n&&typeof n!="function"&&i.get(n);s&&Ji(r,s.name,e)}}function ZK(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),n=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(n==null?void 0:n.name)??null}else{const r=e.get(t.startTimeField),n=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(n==null?void 0:n.name)??null}}const XC=new Set;function X5(t,e){return t&&e?(XC.clear(),o1(XC,t,e),Array.from(XC).sort()):[]}function o1(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:n}of e.fields)t.add(n);else for(const n of i)_s(t,e,n);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const n of i)n!=null&&t.add(n)}}function _s(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function rBe(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function dn(t,e,i){var s;if(!i)return;const{arcadeUtils:r}=await Zd(),n=r.extractFieldNames(i,(s=e==null?void 0:e.fields)==null?void 0:s.map(o=>o.name));for(const o of n)_s(t,e,o)}async function YK(t,e,i){if(i&&i!=="1=1"){const r=await FY(i,e);if(!r.isStandardized)throw new j("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});o1(t,e,r.fieldNames)}}function XSe({displayField:t,fields:e}){return t||(e!=null&&e.length?eM(e,"name-or-title")||eM(e,"unique-identifier")||eM(e,"type-or-category")||e$e(e):null)}function e$e(t){for(const e of t){if(!(e!=null&&e.name))continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function eM(t,e){for(const i of t)if(i!=null&&i.valueType&&i.valueType===e)return i.name;return null}async function nBe(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function t$e(t,e,i){i.onStatisticExpression?dn(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function sBe(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(i$e(t,e,n)),i.fields&&r.push(...i.fields.map(async s=>t$e(t,e.fieldsIndex,s))),await Promise.all(r)}async function i$e(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(s=>dn(t,e.fieldsIndex,s.expression)));const n=i==null?void 0:i.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(dn(t,e.fieldsIndex,s.expressionInfo.expression));await Promise.all(r)}async function oBe(t,e,i){e&&(e.timeInfo&&(i!=null&&i.timeExtent)&&o1(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&o1(t,e.fieldsIndex,[e.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await YK(t,e.fieldsIndex,i.where))}async function aBe(t,e,i){e&&i&&await Promise.all(i.map(r=>r$e(t,e,r)))}async function r$e(t,e,i){e&&i&&(i.valueExpression?await dn(t,e.fieldsIndex,i.valueExpression):i.field&&_s(t,e.fieldsIndex,i.field))}function lBe(t){return t?X5(t.fieldsIndex,KK(t)):[]}function n$e(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?X5(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const s$e=new Set(["oid","global-id","guid"]),o$e=new Set(["oid","global-id"]),a$e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function l$e(t){const e=new Set;QK(t).forEach(r=>e.add(r)),n$e(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function KK(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=e;return[i,r,n,s].filter(Boolean)}function QK(t){return KK(t).map(e=>e.toLowerCase())}function c$e(t,e){var i;return t.editable&&!s$e.has(t.type)&&!QK(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function u$e(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||l$e(e).includes(i)||o$e.has(t.type)||a$e.some(n=>n.test(i)))}async function d$e(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i!=null&&i.length&&await Promise.all(i.map(n=>p$e(t,r,n)))}async function p$e(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await dn(t,e,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{_s(t,e,o.slice(1,-1))})}await YK(t,e,n)}function h$e(t){const e=t.defaultValue;return e!==void 0&&tQ(t,e)?e:t.nullable?null:void 0}function cBe(t){const e=typeof t=="string"?{type:t}:t;return E$e(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function XK(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function f$e(t){return t===null||XK(t)}function m$e(t){return t===null||Number.isInteger(t)}function eQ(t){return t!=null&&typeof t=="string"}function y$e(t){return t===null||eQ(t)}function g$e(){return!0}function tQ(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?m$e:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?f$e:XK;break;case"string":case"esriFieldTypeString":i=t.nullable?y$e:eQ;break;default:i=g$e}return arguments.length===1?i:i(e)}const v$e=["integer","small-integer","big-integer"],b$e=["single","double"],w$e=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],_$e=["esriFieldTypeSingle","esriFieldTypeDouble"],S$e=new Set([...v$e,...w$e]),$$e=new Set([...b$e,..._$e]),x$e=Cfe(S$e,$$e);function iQ(t){return t!=null&&x$e.has(t.type)}function E$e(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function rQ(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function T$e(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function k$e(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function nQ(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function i8(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function r8(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function uBe(t,e){return I$e(t,e)===null}var XE,eT;function dBe(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function I$e(t,e){return t==null||t.nullable&&e===null?null:iQ(t)&&!C$e(t.type,Number(e))?XE.OUT_OF_RANGE:tQ(t,e)?t.domain?BSe(t,e):null:eT.INVALID_TYPE}function C$e(t,e){const i=typeof t=="string"?sQ(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=n:e>=r&&e<=n}function sQ(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return M$e;case"esriFieldTypeInteger":case"integer":return L$e;case"esriFieldTypeBigInteger":case"big-integer":return O$e;case"esriFieldTypeSingle":case"single":return A$e;case"esriFieldTypeDouble":case"double":return P$e}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(XE||(XE={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(eT||(eT={}));const M$e={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},L$e={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},O$e={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},A$e={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},P$e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function pBe(t,e,i){switch(t){case Wg.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case Wg.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case eT.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case XE.OUT_OF_RANGE:{const{min:r,max:n}=sQ(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function hBe(t,e){return!R$e(t,e,null)}function R$e(t,e,i){if(!(e!=null&&e.attributes)||!t){if(i!=null)for(const s of t??[])i.add(s);return!0}const r=new Set(Object.keys(e.attributes));let n=!1;for(const s of t)if(!r.has(s)){if(n=!0,i==null)break;i.add(s)}return n}function N$e(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let lx=class extends B{constructor(e){super(e),this.type=null}};c([d({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],lx.prototype,"type",void 0),lx=c([k("esri.popup.content.Content")],lx);const up=lx;var LA;let Fp=LA=class extends up{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new LA({description:this.description,displayType:this.displayType,title:this.title})}};c([d({type:String,json:{write:!0}})],Fp.prototype,"description",void 0),c([d({type:["auto","preview","list"],json:{write:!0}})],Fp.prototype,"displayType",void 0),c([d({type:String,json:{write:!0}})],Fp.prototype,"title",void 0),c([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Fp.prototype,"type",void 0),Fp=LA=c([k("esri.popup.content.AttachmentsContent")],Fp);const a1=Fp;var OA;let jp=OA=class extends up{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new OA({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?D(this.outFields):null})}};c([d()],jp.prototype,"creator",void 0),c([d()],jp.prototype,"destroyer",void 0),c([d()],jp.prototype,"outFields",void 0),c([d({type:["custom"],readOnly:!0})],jp.prototype,"type",void 0),jp=OA=c([k("esri.popup.content.CustomContent")],jp);const D$e=jp;var AA;let Om=AA=class extends B{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new AA({title:this.title,expression:this.expression})}};c([d({type:String,json:{write:!0}})],Om.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Om.prototype,"expression",void 0),c([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Om.prototype,"returnType",void 0),Om=AA=c([k("esri.popup.ElementExpressionInfo")],Om);const F$e=Om;var PA;let Ov=PA=class extends up{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new PA({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};c([d({type:F$e,json:{write:!0}})],Ov.prototype,"expressionInfo",void 0),c([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Ov.prototype,"type",void 0),Ov=PA=c([k("esri.popup.content.ExpressionContent")],Ov);const eF=Ov;let Am=class extends Je(B){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};c([he(ESe)],Am.prototype,"dateFormat",void 0),c([d({type:Boolean,json:{write:!0}})],Am.prototype,"digitSeparator",void 0),c([d({type:ft,json:{write:!0}})],Am.prototype,"places",void 0),Am=c([k("esri.popup.support.FieldInfoFormat")],Am);const cx=Am;var RA;let Co=RA=class extends B{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new RA({fieldName:this.fieldName,format:this.format?D(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([d({type:String,json:{write:!0}})],Co.prototype,"fieldName",void 0),c([d({type:cx,json:{write:!0}})],Co.prototype,"format",void 0),c([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Co.prototype,"isEditable",void 0),c([d({type:String,json:{write:!0}})],Co.prototype,"label",void 0),c([he(new $e({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Co.prototype,"stringFieldOption",void 0),c([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Co.prototype,"statisticType",void 0),c([d({type:String,json:{write:!0}})],Co.prototype,"tooltip",void 0),c([d({type:Boolean,json:{write:!0}})],Co.prototype,"visible",void 0),Co=RA=c([k("esri.popup.FieldInfo")],Co);const tF=Co;var NA;let Jl=NA=class extends up{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new NA(D({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([d({type:Object,json:{write:!0}})],Jl.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],Jl.prototype,"description",void 0),c([d({type:[tF]})],Jl.prototype,"fieldInfos",void 0),c([ee("fieldInfos")],Jl.prototype,"writeFieldInfos",null),c([d({type:String,json:{write:!0}})],Jl.prototype,"title",void 0),c([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Jl.prototype,"type",void 0),Jl=NA=c([k("esri.popup.content.FieldsContent")],Jl);const l1=Jl;let zp=class extends B{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};c([d({type:String,json:{write:!0}})],zp.prototype,"altText",void 0),c([d({type:String,json:{write:!0}})],zp.prototype,"caption",void 0),c([d({type:String,json:{write:!0}})],zp.prototype,"title",void 0),c([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],zp.prototype,"type",void 0),zp=c([k("esri.popup.content.mixins.MediaInfo")],zp);const iF=zp;var DA;let Vp=DA=class extends de{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new DA({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};c([d()],Vp.prototype,"color",void 0),c([d()],Vp.prototype,"fieldName",void 0),c([d()],Vp.prototype,"tooltip",void 0),c([d()],Vp.prototype,"value",void 0),Vp=DA=c([k("esri.popup.content.support.ChartMediaInfoValueSeries")],Vp);const j$e=Vp;var FA;let _u=FA=class extends B{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new FA({colors:D(this.colors),fields:D(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};c([d({type:[le],json:{type:[[ft]],write:!0}})],_u.prototype,"colors",void 0),c([d({type:[String],json:{write:!0}})],_u.prototype,"fields",void 0),c([d({type:String,json:{write:!0}})],_u.prototype,"normalizeField",void 0),c([d({type:[j$e],json:{read:!1}})],_u.prototype,"series",void 0),c([d({type:String,json:{write:!0}})],_u.prototype,"tooltipField",void 0),_u=FA=c([k("esri.popup.content.support.ChartMediaInfoValue")],_u);const z$e=_u;let Av=class extends iF{constructor(e){super(e),this.type=null,this.value=null}};c([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Av.prototype,"type",void 0),c([d({type:z$e,json:{write:!0}})],Av.prototype,"value",void 0),Av=c([k("esri.popup.content.mixins.ChartMediaInfo")],Av);const Kk=Av,Qk=Zi()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var jA;let ux=jA=class extends Kk{constructor(t){super(t),this.type="bar-chart"}clone(){return new jA({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Qk.write}})],ux.prototype,"type",void 0),ux=jA=c([k("esri.popup.content.BarChartMediaInfo")],ux);const oQ=ux;var zA;let dx=zA=class extends Kk{constructor(t){super(t),this.type="column-chart"}clone(){return new zA({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Qk.write}})],dx.prototype,"type",void 0),dx=zA=c([k("esri.popup.content.ColumnChartMediaInfo")],dx);const aQ=dx;var VA;let Pv=VA=class extends B{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new VA({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([d({type:String,json:{write:!0}})],Pv.prototype,"linkURL",void 0),c([d({type:String,json:{write:!0}})],Pv.prototype,"sourceURL",void 0),Pv=VA=c([k("esri.popup.content.support.ImageMediaInfoValue")],Pv);const V$e=Pv;var UA;let Pm=UA=class extends iF{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new UA({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};c([d({type:Number,json:{write:!0}})],Pm.prototype,"refreshInterval",void 0),c([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Pm.prototype,"type",void 0),c([d({type:V$e,json:{write:!0}})],Pm.prototype,"value",void 0),Pm=UA=c([k("esri.popup.content.ImageMediaInfo")],Pm);const lQ=Pm;var BA;let px=BA=class extends Kk{constructor(t){super(t),this.type="line-chart"}clone(){return new BA({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Qk.write}})],px.prototype,"type",void 0),px=BA=c([k("esri.popup.content.LineChartMediaInfo")],px);const cQ=px;var GA;let hx=GA=class extends Kk{constructor(t){super(t),this.type="pie-chart"}clone(){return new GA({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Qk.write}})],hx.prototype,"type",void 0),hx=GA=c([k("esri.popup.content.PieChartMediaInfo")],hx);const uQ=hx,dQ={base:iF,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":oQ,"column-chart":aQ,"line-chart":cQ,"pie-chart":uQ,image:lQ}};var HA;let Mo=HA=class extends up{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?lQ.fromJSON(e):e.type==="barchart"?oQ.fromJSON(e):e.type==="columnchart"?aQ.fromJSON(e):e.type==="linechart"?cQ.fromJSON(e):e.type==="piechart"?uQ.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new HA(D({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([d()],Mo.prototype,"activeMediaInfoIndex",void 0),c([d({type:Object,json:{write:!0}})],Mo.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],Mo.prototype,"description",void 0),c([d({types:[dQ]})],Mo.prototype,"mediaInfos",void 0),c([K("mediaInfos")],Mo.prototype,"readMediaInfos",null),c([ee("mediaInfos")],Mo.prototype,"writeMediaInfos",null),c([d({type:String,json:{write:!0}})],Mo.prototype,"title",void 0),c([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Mo.prototype,"type",void 0),Mo=HA=c([k("esri.popup.content.MediaContent")],Mo);const tT=Mo;var qA;let Rv=qA=class extends B{constructor(t){super(t),this.field=null,this.order=null}clone(){return new qA({field:this.field,order:this.order})}};c([d({type:String,json:{write:!0}})],Rv.prototype,"field",void 0),c([d({type:["asc","desc"],json:{write:!0}})],Rv.prototype,"order",void 0),Rv=qA=c([k("esri.popup.support.RelatedRecordsInfoFieldOrder")],Rv);const rF=Rv;let Ma=class extends Je(up){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};c([d({type:String,json:{write:!0}})],Ma.prototype,"description",void 0),c([d({type:Number,json:{type:ft,write:!0}})],Ma.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:!0}})],Ma.prototype,"displayType",void 0),c([d({type:[rF],json:{write:!0}})],Ma.prototype,"orderByFields",void 0),c([d({type:Number,json:{type:ft,write:!0}})],Ma.prototype,"relationshipId",void 0),c([d({type:String,json:{write:!0}})],Ma.prototype,"title",void 0),c([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Ma.prototype,"type",void 0),Ma=c([k("esri.popup.content.RelationshipContent")],Ma);const iT=Ma;var WA;let Nv=WA=class extends up{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new WA({text:this.text})}};c([d({type:String,json:{write:!0}})],Nv.prototype,"text",void 0),c([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Nv.prototype,"type",void 0),Nv=WA=c([k("esri.popup.content.TextContent")],Nv);const rT=Nv,U$e={base:null,key:"type",typeMap:{attachment:a1,media:tT,text:rT,expression:eF,field:l1,relationship:iT}};var JA;let Up=JA=class extends B{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new JA({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],Up.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],Up.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Up.prototype,"expression",void 0),c([d({type:["string","number"],json:{write:!0}})],Up.prototype,"returnType",void 0),Up=JA=c([k("esri.popup.ExpressionInfo")],Up);const B$e=Up;var ZA;let Dv=ZA=class extends B{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new ZA({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([d({type:Boolean,json:{write:!0}})],Dv.prototype,"returnTopmostRaster",void 0),c([d({type:Boolean,json:{write:!0}})],Dv.prototype,"showNoDataRecords",void 0),Dv=ZA=c([k("esri.popup.LayerOptions")],Dv);const G$e=Dv;var YA;let Fv=YA=class extends B{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new YA({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?D(this.orderByFields):null})}};c([d({type:Boolean,json:{write:!0}})],Fv.prototype,"showRelatedRecords",void 0),c([d({type:[rF],json:{write:!0}})],Fv.prototype,"orderByFields",void 0),Fv=YA=c([k("esri.popup.RelatedRecordsInfo")],Fv);const H$e=Fv;var KA;let Fs=KA=class extends Jf(de){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new KA({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([d()],Fs.prototype,"active",void 0),c([d()],Fs.prototype,"className",void 0),c([d()],Fs.prototype,"disabled",void 0),c([d()],Fs.prototype,"icon",void 0),c([d()],Fs.prototype,"id",void 0),c([d()],Fs.prototype,"indicator",void 0),c([d()],Fs.prototype,"title",void 0),c([d()],Fs.prototype,"type",void 0),c([d()],Fs.prototype,"visible",void 0),Fs=KA=c([k("esri.support.actions.ActionBase")],Fs);const c_=Fs;var QA;let fx=QA=class extends c_{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new QA({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([d()],fx.prototype,"image",void 0),fx=QA=c([k("esri.support.Action.ActionButton")],fx);const pQ=fx;var XA;let jv=XA=class extends c_{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new XA({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([d()],jv.prototype,"image",void 0),c([d()],jv.prototype,"value",void 0),jv=XA=c([k("esri.support.Action.ActionToggle")],jv);const hQ=jv,q$e="esri.PopupTemplate",W$e=q.getLogger(q$e),av="relationships/",n8="expression/",J$e=ce.ofType({key:"type",defaultKeyValue:"button",base:c_,typeMap:{button:pQ,toggle:hQ}}),Z$e={base:up,key:"type",typeMap:{media:tT,custom:D$e,text:rT,attachments:a1,fields:l1,expression:eF,relationship:iT}},Y$e=new Set(["attachments","fields","media","text","expression","relationship"]);let Fi=class extends Je(B){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>bl(Z$e,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Zc(e)?e:(W$e.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeContent(e,i,r,n){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(s=>Y$e.has(s.type)).map(s=>s==null?void 0:s.toJSON(n)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=e}writeFieldInfos(e,i,r,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(e){const a=o?o.filter(u=>u.type==="fields"):[],l=a.length&&a.every(u=>{var p;return(p=u.fieldInfos)==null?void 0:p.length});i.fieldInfos=e.filter(Boolean).map(u=>{const p=u.toJSON(n);return l&&(p.visible=!1),p})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),o1(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=D(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(n=>{const s=i.fieldInfos.find(o=>o.fieldName.toLowerCase()===n.fieldName.toLowerCase());s?s.visible=!0:i.fieldInfos.push(n)}):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var s,o;const r=((s=e.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,e.relationshipId)))||[],n=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=D(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),tT.fromJSON(s)):s.type==="text"?(s.text||!e||n.description||(s.text=e,n.description=!0),rT.fromJSON(s)):s.type==="attachments"?a1.fromJSON(s):s.type==="fields"?l1.fromJSON(s):s.type==="expression"?eF.fromJSON(s):s.type==="relationship"?iT.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(av)))return null;const n=i.replace(av,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return typeof s=="number"&&o?iT.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${av}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new rT({text:e})):s.push(new l1),Array.isArray(i)&&i.length&&s.push(tT.fromJSON({mediaInfos:i})),r&&s.push(a1.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=n;return o&&(a!=null&&a.length)&&a.forEach(l=>{const u=this._toRelationshipContent(l);u&&s.push(u)}),s.length?s:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,s=n||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:u,linkURL:p}=s,h=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(u),...this._extractFieldNames(p),...o??[]];return a&&h.push(a),l&&h.push(l),h}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map(n=>dn(e,i,n.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(av)&&!i.startsWith(n8)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,r=e.match(i);if(!r)return[];const n=/\{(\w+):.+\}/,s=r.filter(o=>!(o.indexOf(`{${av}`)===0||o.indexOf(`{${n8}`)===0)).map(o=>o.replace(n,"{$1}"));return s?s.map(o=>o.slice(1,-1)):[]}};c([d({type:J$e})],Fi.prototype,"actions",void 0),c([d()],Fi.prototype,"content",void 0),c([qe("content")],Fi.prototype,"castContent",null),c([K("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Fi.prototype,"readContent",null),c([ee("content",{popupElements:{type:ce.ofType(U$e)},showAttachments:{type:Boolean},mediaInfos:{type:ce.ofType(dQ)},description:{type:String},relatedRecordsInfo:{type:H$e}})],Fi.prototype,"writeContent",null),c([d({type:[B$e],json:{write:!0}})],Fi.prototype,"expressionInfos",void 0),c([d({type:[tF]})],Fi.prototype,"fieldInfos",void 0),c([ee("fieldInfos")],Fi.prototype,"writeFieldInfos",null),c([d({type:G$e})],Fi.prototype,"layerOptions",void 0),c([ee("layerOptions")],Fi.prototype,"writeLayerOptions",null),c([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Fi.prototype,"lastEditInfoEnabled",void 0),c([d()],Fi.prototype,"outFields",void 0),c([d()],Fi.prototype,"overwriteActions",void 0),c([d()],Fi.prototype,"returnGeometry",void 0),c([d({json:{type:String}})],Fi.prototype,"title",void 0),c([ee("title")],Fi.prototype,"writeTitle",null),Fi=c([k("esri.PopupTemplate")],Fi);const u_=Fi,s8=new $e({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let K$e=0,Rm=class extends B{constructor(e){super(e),this.id="sym"+K$e++,this.type=null,this.color=new le([0,0,0,1])}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([d({type:s8.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:s8.write}}})],Rm.prototype,"type",void 0),c([d({type:le,json:{write:{allowNull:!0}}})],Rm.prototype,"color",void 0),c([K("color")],Rm.prototype,"readColor",null),Rm=c([k("esri.symbols.Symbol")],Rm);const Hn=Rm;var e3;let Su=e3=class extends Hn{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(s=>{const o=s.valueExpressionInfo;return dn(t,e,o.expression)});await Promise.all(n)}}}clone(){return new e3({data:D(this.data)})}hash(){return qD(JSON.stringify(this.data)).toString()}};c([d({json:{write:!1}})],Su.prototype,"color",void 0),c([d({json:{write:!0}})],Su.prototype,"data",void 0),c([K("data",["symbol"])],Su.prototype,"readData",null),c([ee("data",{})],Su.prototype,"writeData",null),c([he({CIMSymbolReference:"cim"},{readOnly:!0})],Su.prototype,"type",void 0),Su=e3=c([k("esri.symbols.CIMSymbol")],Su);const d_=Su;let Nm=class extends B{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};c([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Nm.prototype,"enabled",void 0),c([ee("enabled")],Nm.prototype,"writeEnabled",null),c([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Nm.prototype,"type",void 0),Nm=c([k("esri.symbols.Symbol3DLayer")],Nm);const Ml=Nm;function Q$e(t,e){const i=e.transparency!=null?r1(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new le([r[0]||0,r[1]||0,r[2]||0,i]):null}function X$e(t,e){e.color=t.toJSON().slice(0,3);const i=Vk(t.a);i!==0&&(e.transparency=i)}const dp={type:le,json:{type:[ft],default:null,read:{source:["color","transparency"],reader:Q$e},write:{target:{color:{type:[ft]},transparency:{type:ft}},writer:X$e}}},$l={type:Number,cast:Ke,json:{write:!0}};let Bp=class extends B{constructor(e){super(e),this.color=new le([0,0,0,1]),this.extensionLength=0,this.size=lr(1)}clone(){}cloneProperties(){return{color:D(this.color),size:this.size,extensionLength:this.extensionLength}}};c([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Bp.prototype,"type",void 0),c([d(dp)],Bp.prototype,"color",void 0),c([d({...$l,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Bp.prototype,"extensionLength",void 0),c([d($l)],Bp.prototype,"size",void 0),Bp=c([k("esri.symbols.edges.Edges3D")],Bp);const nF=Bp;var t3;let mx=t3=class extends nF{constructor(t){super(t),this.type="sketch"}clone(){return new t3(this.cloneProperties())}};c([he({sketch:"sketch"},{readOnly:!0})],mx.prototype,"type",void 0),mx=t3=c([k("esri.symbols.edges.SketchEdges3D")],mx);const exe=mx;var i3;let yx=i3=class extends nF{constructor(t){super(t),this.type="solid"}clone(){return new i3(this.cloneProperties())}};c([he({solid:"solid"},{readOnly:!0})],yx.prototype,"type",void 0),yx=i3=c([k("esri.symbols.support.SolidEdges3D")],yx);const txe=yx,fQ={types:{key:"type",base:nF,typeMap:{solid:txe,sketch:exe}},json:{write:!0}};var r3;let Ss=r3=class extends B{constructor(t){super(t),this.color=null}clone(){const t={color:this.color!=null?this.color.clone():null};return new r3(t)}};c([d(dp)],Ss.prototype,"color",void 0),Ss=r3=c([k("esri.symbols.support.Symbol3DMaterial")],Ss);var n3;let $u=n3=class extends Ml{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new n3({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};c([he({Extrude:"extrude"},{readOnly:!0})],$u.prototype,"type",void 0),c([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],$u.prototype,"size",void 0),c([d({type:Ss,json:{write:!0}})],$u.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],$u.prototype,"castShadows",void 0),c([d(fQ)],$u.prototype,"edges",void 0),$u=n3=c([k("esri.symbols.ExtrudeSymbol3DLayer")],$u);const mQ=$u;let zv=class extends Hn{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([he({esriSLS:"simple-line"},{readOnly:!0})],zv.prototype,"type",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],zv.prototype,"width",void 0),zv=c([k("esri.symbols.LineSymbol")],zv);const ixe=zv,rxe=["begin","end","begin-end"],yQ=["arrow","circle","square","diamond","cross","x"];var s3;let La=s3=class extends B{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new s3({color:D(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};c([d({type:["begin","end","begin-end"],json:{write:!0}})],La.prototype,"placement",void 0),c([he({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],La.prototype,"type",void 0),c([d({type:yQ})],La.prototype,"style",void 0),c([ee("style")],La.prototype,"writeStyle",null),c([d({type:le,value:null,json:{write:{allowNull:!0}}})],La.prototype,"color",null),c([K("color")],La.prototype,"readColor",null),c([ee("color")],La.prototype,"writeColor",null),La=s3=c([k("esri.symbols.LineSymbolMarker")],La);const nxe=La;var o3;const tM=new $e({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Zl=o3=class extends ixe{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=Ke(i)),r!=null&&(o.cap=r),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Ke(s)),o}clone(){var t;return new o3({color:D(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};c([he({esriSLS:"simple-line"},{readOnly:!0})],Zl.prototype,"type",void 0),c([d({type:tM.apiValues,json:{read:tM.read,write:tM.write}})],Zl.prototype,"style",void 0),c([d({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Zl.prototype,"cap",void 0),c([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null?void 0:i.origin)==null})}}})],Zl.prototype,"join",void 0),c([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":nxe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Zl.prototype,"marker",void 0),c([d({type:Number,json:{read:!1,write:!1}})],Zl.prototype,"miterLimit",void 0),Zl=o3=c([k("esri.symbols.SimpleLineSymbol")],Zl);const qn=Zl;let Vv=class extends Hn{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":qn}},json:{default:null,write:!0}})],Vv.prototype,"outline",void 0),c([d({type:["simple-fill","picture-fill"],readOnly:!0})],Vv.prototype,"type",void 0),Vv=c([k("esri.symbols.FillSymbol")],Vv);const gQ=Vv;let gx=class extends B{constructor(e){super(e)}clone(){}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],gx.prototype,"type",void 0),gx=c([k("esri.symbols.patterns.LinePattern3D")],gx);const vQ=gx,sxe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var a3;const oxe=Zi()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Uv=a3=class extends vQ{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new a3(t)}};c([d({type:["style"]})],Uv.prototype,"type",void 0),c([he(oxe),d({type:sxe})],Uv.prototype,"style",void 0),Uv=a3=c([k("esri.symbols.patterns.LineStylePattern3D")],Uv);const sF=Uv;let vx=class extends B{constructor(e){super(e)}clone(){}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],vx.prototype,"type",void 0),vx=c([k("esri.symbols.patterns.Pattern3D")],vx);const bQ=vx,axe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var l3;let Bv=l3=class extends bQ{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new l3(t)}};c([d({type:["style"]})],Bv.prototype,"type",void 0),c([d({type:axe,json:{read:!0,write:!0}})],Bv.prototype,"style",void 0),Bv=l3=c([k("esri.symbols.patterns.StylePattern3D")],Bv);const wQ=Bv,lxe={types:{key:"type",base:bQ,typeMap:{style:wQ}},json:{write:!0}},_Q={types:{key:"type",base:vQ,typeMap:{style:sF}},json:{write:!0}},rw=new le("white");new le("black");const cxe=new le([255,255,255,0]);function uxe(t){return t.r===0&&t.g===0&&t.b===0}var c3;let nw=c3=class extends Ss{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new c3(t)}};c([he({multiply:"multiply",replace:"replace",tint:"tint"})],nw.prototype,"colorMixMode",void 0),nw=c3=c([k("esri.symbols.support.Symbol3DFillMaterial")],nw);function oF(t=mxe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function aF(t,e,i,r,n,s,o=oF()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function kBe(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new ct(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function IBe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function CBe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function dxe(t){return t[0]>=t[3]?0:t[3]-t[0]}function pxe(t){return t[1]>=t[4]?0:t[4]-t[1]}function hxe(t){return t[2]>=t[5]?0:t[5]-t[2]}function MBe(t,e=[0,0,0]){return e[0]=dxe(t),e[1]=pxe(t),e[2]=hxe(t),e}function LBe(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function OBe(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function fxe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ABe(t){return t?fxe(t,a8):oF(a8)}function PBe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function RBe(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function o8(t){return t.length===6}function NBe(t,e,i){if(t==null||e==null)return t===e;if(!o8(t)||!o8(e))return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const a8=[1/0,1/0,1/0,-1/0,-1/0,-1/0],mxe=[0,0,0,0,0,0];oF();const yxe=aF(-.5,-.5,-.5,.5,.5,.5),gxe=aF(-.5,-.5,0,.5,.5,1),vxe=aF(-.5,-.5,0,.5,.5,.5);function DBe(t){switch(t){case"sphere":case"cube":case"diamond":return yxe;case"cylinder":case"cone":case"inverted-cone":return gxe;case"tetrahedron":return vxe;default:return}}const lF=["butt","square","round"],bxe=[...lF,"none"],SQ=["miter","bevel","round"];var u3;let Gp=u3=class extends B{constructor(t){super(t),this.color=new le([0,0,0,1]),this.size=lr(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new u3(t)}};c([d(dp)],Gp.prototype,"color",void 0),c([d($l)],Gp.prototype,"size",void 0),c([d(_Q)],Gp.prototype,"pattern",void 0),c([d({type:lF,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Gp.prototype,"patternCap",void 0),Gp=u3=c([k("esri.symbols.support.Symbol3DOutline")],Gp);var bx;let Yl=bx=class extends Ml{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new bx(t)}static fromSimpleFillSymbol(t){var r,n,s;const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new sF({style:t.outline.style}):null,i={size:((r=t.outline)==null?void 0:r.width)??0,color:(((n=t.outline)==null?void 0:n.color)??rw).clone(),pattern:e};return e&&((s=t.outline)!=null&&s.cap)&&(i.patternCap=t.outline.cap),new bx({material:new nw({color:(t.color??cxe).clone()}),pattern:t.style&&t.style!=="solid"?new wQ({style:t.style}):null,outline:i})}};c([he({Fill:"fill"},{readOnly:!0})],Yl.prototype,"type",void 0),c([d({type:nw,json:{write:!0}})],Yl.prototype,"material",void 0),c([d(lxe)],Yl.prototype,"pattern",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Yl.prototype,"castShadows",void 0),c([d({type:Gp,json:{write:!0}})],Yl.prototype,"outline",void 0),c([d(fQ)],Yl.prototype,"edges",void 0),Yl=bx=c([k("esri.symbols.FillSymbol3DLayer")],Yl);const p_=Yl,wxe=["none","underline","line-through"],_xe=["normal","italic","oblique"],Sxe=["normal","lighter","bold","bolder"],$Q={type:Number,cast:t=>{const e=Xs(t);return e===0?1:Es(e,.1,4)},nonNullable:!0},$xe=["left","right","center"],xxe=["baseline","top","middle","bottom"],xQ={type:$xe,nonNullable:!0},EQ={type:xxe,nonNullable:!0},FBe=8;var d3;let Kl=d3=class extends B{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Ke(t)}clone(){return new d3({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([d({type:wxe,json:{default:"none",write:!0}})],Kl.prototype,"decoration",void 0),c([d({type:String,json:{write:!0}})],Kl.prototype,"family",void 0),c([d({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],Kl.prototype,"size",void 0),c([qe("size")],Kl.prototype,"castSize",null),c([d({type:_xe,json:{default:"normal",write:!0}})],Kl.prototype,"style",void 0),c([d({type:Sxe,json:{default:"normal",write:!0}})],Kl.prototype,"weight",void 0),Kl=d3=c([k("esri.symbols.Font")],Kl);const Xk=Kl;function Yd(t,e){var r;const i=(r=e==null?void 0:e.url)==null?void 0:r.path;if(t&&i&&(t=Ln(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const n=s5(t,e.portalItem.itemUrl);n!=null&&Exe.test(n)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)}return p3(t,e==null?void 0:e.portal)}function h_(t,e,i=c1.YES){var n,s;if(t==null)return t;!gs(t)&&(e!=null&&e.blockedRelativeUrls)&&e.blockedRelativeUrls.push(t);let r=Ln(t);if(e){const o=((n=e.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=e.url)==null?void 0:s.path);if(o){const a=p3(o,e.portal),l=p3(r,e.portal);r=s5(l,a,a),r!=null&&r!==l&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=kQ(r,e==null?void 0:e.portal),gs(r)&&(r=xr(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!gs(r)&&!sp(r)&&i===c1.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function cF(t,e,i){return Yd(t,i)}function Mf(t,e,i,r){const n=h_(t,r);n!==void 0&&(e[i]=n)}const TQ=/\/items\/([^\/]+)\/resources\/(.*)/,Exe=/^\.\/resources\//;function Txe(t){const e=(t==null?void 0:t.match(TQ))??null;return(e==null?void 0:e[1])??null}function kxe(t){const e=(t==null?void 0:t.match(TQ))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=R6(i);return{prefix:null,filename:o,extension:a}}const{path:n,extension:s}=R6(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function kQ(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?qO(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function p3(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=t5();return wf(r,`${r.scheme}://${i}`)?qO(t,e.portalHostname,i):qO(t,i,e.portalHostname)}var c1;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(c1||(c1={}));const jBe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return c1},ensureMainOnlineDomain:kQ,fromJSON:Yd,itemIdFromResourceUrl:Txe,prefixAndFilenameFromResourceUrl:kxe,read:cF,toJSON:h_,write:Mf},Symbol.toStringTag,{value:"Module"}));var h3;const Ixe=Zi()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Hp=h3=class extends B{constructor(t){super(t)}readHref(t,e,i){return t?Yd(t,i):e.dataURI}writeHref(t,e,i,r){t&&(sp(t)?e.dataURI=t:(e.href=h_(t,r),gs(e.href)&&(e.href=xr(e.href))))}clone(){return new h3({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Hp.prototype,"href",void 0),c([K("href")],Hp.prototype,"readHref",null),c([ee("href",{href:{type:String},dataURI:{type:String}})],Hp.prototype,"writeHref",null),c([he(Ixe)],Hp.prototype,"primitive",void 0),Hp=h3=c([k("esri.symbols.support.IconSymbol3DLayerResource")],Hp);const Cxe="circle";var f3;let qy=f3=class extends de{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new f3({x:this.x,y:this.y})}};c([d({type:Number})],qy.prototype,"x",void 0),c([d({type:Number})],qy.prototype,"y",void 0),qy=f3=c([k("esri.symbols.support.Symbol3DAnchorPosition2D")],qy);var m3;let Gv=m3=class extends B{constructor(t){super(t),this.color=new le([0,0,0,1]),this.size=lr(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new m3(t)}};c([d(dp)],Gv.prototype,"color",void 0),c([d($l)],Gv.prototype,"size",void 0),Gv=m3=c([k("esri.symbols.support.Symbol3DIconOutline")],Gv);var Dm;const IQ="esri.symbols.IconSymbol3DLayer";let Oa=Dm=class extends Ml{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Dm({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||rw,i=l8(t),r=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||rw).clone()}:null;return new Dm({size:t.size,resource:{primitive:Lxe(t.style)},material:{color:e},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||uxe(t.color)?rw:t.color,i=l8(t);return new Dm({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new Dm({resource:{href:MJ({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function l8(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=c8(t.xoffset),n=c8(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function c8(t){return isFinite(t)?t:0}c([d({type:Ss,json:{write:!0}})],Oa.prototype,"material",void 0),c([d({type:Hp,json:{write:!0}})],Oa.prototype,"resource",void 0),c([he({Icon:"icon"},{readOnly:!0})],Oa.prototype,"type",void 0),c([d($l)],Oa.prototype,"size",void 0),c([he({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],Oa.prototype,"anchor",void 0),c([d({type:qy,json:{type:[Number],read:{reader:t=>new qy({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Oa.prototype,"anchorPosition",void 0),c([d({type:Gv,json:{write:!0}})],Oa.prototype,"outline",void 0),Oa=Dm=c([k(IQ)],Oa);const Mxe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Lxe(t){return Mxe[t]||(q.getLogger(IQ).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Vh=Oa;let qp=class extends Je(B){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],qp.prototype,"type",void 0),c([d({type:rxe,json:{default:"begin-end",write:!0}})],qp.prototype,"placement",void 0),c([d({type:yQ,json:{default:"arrow",write:!0}})],qp.prototype,"style",void 0),c([d({type:le,json:{type:[ft],default:null,write:!0}})],qp.prototype,"color",void 0),qp=c([k("esri.symbols.LineStyleMarker3D")],qp);const y3=qp;var wx;let Aa=wx=class extends Ml{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=lr(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new wx(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??lr(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new sF({style:t.style}):null,material:new Ss({color:(t.color||rw).clone()}),marker:t.marker?new y3({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new wx(e)}};c([d({type:Ss,json:{write:!0}})],Aa.prototype,"material",void 0),c([he({Line:"line"},{readOnly:!0})],Aa.prototype,"type",void 0),c([d({type:SQ,json:{write:!0,default:"miter"}})],Aa.prototype,"join",void 0),c([d({type:lF,json:{write:!0,default:"butt"}})],Aa.prototype,"cap",void 0),c([d($l)],Aa.prototype,"size",void 0),c([d(_Q)],Aa.prototype,"pattern",void 0),c([d({types:{key:"type",base:y3,typeMap:{style:y3}},json:{write:!0}})],Aa.prototype,"marker",void 0),Aa=wx=c([k("esri.symbols.LineSymbol3DLayer")],Aa);const f_=Aa;var g3;const Oxe=Zi()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Hv=g3=class extends B{clone(){return new g3({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{read:cF,write:Mf}})],Hv.prototype,"href",void 0),c([he(Oxe)],Hv.prototype,"primitive",void 0),Hv=g3=c([k("esri.symbols.support.ObjectSymbol3DLayerResource")],Hv);const Axe="sphere";var v3;let Ch=v3=class extends de{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new v3({x:this.x,y:this.y,z:this.z})}};c([d({type:Number})],Ch.prototype,"x",void 0),c([d({type:Number})],Ch.prototype,"y",void 0),c([d({type:Number})],Ch.prototype,"z",void 0),Ch=v3=c([k("esri.symbols.support.Symbol3DAnchorPosition3D")],Ch);var b3;let Dr=b3=class extends Ml{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var t,e,i;return new b3({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(t=this.anchorPosition)==null?void 0:t.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((e=this.material)==null?void 0:e.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};c([d({type:Ss,json:{write:!0}})],Dr.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Dr.prototype,"castShadows",void 0),c([d({type:Hv,json:{write:!0}})],Dr.prototype,"resource",void 0),c([he({Object:"object"},{readOnly:!0})],Dr.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],Dr.prototype,"width",void 0),c([d({type:Number,json:{write:!0}})],Dr.prototype,"height",void 0),c([d({type:Number,json:{write:!0}})],Dr.prototype,"depth",void 0),c([he({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],Dr.prototype,"anchor",void 0),c([d({type:Ch,json:{type:[Number],read:{reader:t=>new Ch({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Dr.prototype,"anchorPosition",void 0),c([d({type:Number,json:{write:!0}})],Dr.prototype,"heading",void 0),c([d({type:Number,json:{write:!0}})],Dr.prototype,"tilt",void 0),c([d({type:Number,json:{write:!0}})],Dr.prototype,"roll",void 0),c([d({readOnly:!0})],Dr.prototype,"isPrimitive",null),Dr=b3=c([k("esri.symbols.ObjectSymbol3DLayer")],Dr);const uF=Dr;var w3;let Xr=w3=class extends Ml{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new w3({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};c([d({type:Ss,json:{write:!0}})],Xr.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Xr.prototype,"castShadows",void 0),c([he({Path:"path"},{readOnly:!0})],Xr.prototype,"type",void 0),c([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],Xr.prototype,"profile",void 0),c([d({type:SQ,json:{write:!0,default:"miter"}})],Xr.prototype,"join",void 0),c([d({type:bxe,json:{write:!0,default:"butt"}})],Xr.prototype,"cap",void 0),c([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Xr.prototype,"width",void 0),c([K("width",["width","size","height"])],Xr.prototype,"readWidth",null),c([d({type:Number,json:{write:!0}})],Xr.prototype,"height",void 0),c([K("height",["height","size","width"])],Xr.prototype,"readHeight",null),c([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Xr.prototype,"anchor",void 0),c([d({type:["heading","all"],json:{write:!0,default:"all"}})],Xr.prototype,"profileRotation",void 0),Xr=w3=c([k("esri.symbols.PathSymbol3DLayer")],Xr);const dF=Xr;var _3;let Wy=_3=class extends B{constructor(){super(...arguments),this.color=new le([0,0,0,1]),this.size=0}clone(){const t={color:D(this.color),size:this.size};return new _3(t)}};c([d(dp)],Wy.prototype,"color",void 0),c([d($l)],Wy.prototype,"size",void 0),Wy=_3=c([k("esri.symbols.support.Symbol3DHalo")],Wy);let sw=class extends Je(B){constructor(e){super(e),this.color=null}};c([d(dp)],sw.prototype,"color",void 0),sw=c([k("esri.symbols.support.Symbol3DTextBackground")],sw);var _x;let _n=_x=class extends Ml{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,r){const n={...r,textSymbol3D:!0};e.font=t.write({},n),delete e.font.size}get size(){var t;return this._userSize!=null?this._userSize:((t=this.font)==null?void 0:t.size)!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new _x({enabled:this.enabled,font:this.font&&D(this.font),halo:this.halo&&D(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:D(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new _x({font:t.font!=null?t.font.clone():new Xk,halo:Pxe(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Ss({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new sw({color:t.backgroundColor.clone()}):null})}};function Pxe(t,e){return t&&e!=null&&e>0?new Wy({color:D(t),size:e}):null}c([d({type:Xk,json:{write:!0}})],_n.prototype,"font",null),c([ee("font")],_n.prototype,"writeFont",null),c([d({type:Wy,json:{write:!0}})],_n.prototype,"halo",void 0),c([d({...xQ,json:{default:"center",write:!0}})],_n.prototype,"horizontalAlignment",void 0),c([d({...$Q,json:{default:1,write:!0}})],_n.prototype,"lineHeight",void 0),c([d({type:Ss,json:{write:!0}})],_n.prototype,"material",void 0),c([d({type:sw,json:{write:!0}})],_n.prototype,"background",void 0),c([d($l)],_n.prototype,"size",null),c([d({type:String,json:{write:!0}})],_n.prototype,"text",void 0),c([he({Text:"text"},{readOnly:!0})],_n.prototype,"type",void 0),c([d({...EQ,json:{default:"baseline",write:!0}})],_n.prototype,"verticalAlignment",void 0),_n=_x=c([k("esri.symbols.TextSymbol3DLayer")],_n);const I0=_n;var S3;let xu=S3=class extends Ml{constructor(t){super(t),this.color=$3.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new S3({color:D(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};c([d({type:le,nonNullable:!0,json:{type:[ft],write:(t,e,i)=>e[i]=t.toArray(le.AlphaMode.UNLESS_OPAQUE),default:()=>$3.clone(),defaultEquals:t=>t.toCss(!0)===$3.toCss(!0)}})],xu.prototype,"color",void 0),c([he({Water:"water"},{readOnly:!0})],xu.prototype,"type",void 0),c([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],xu.prototype,"waterbodySize",void 0),c([d({type:Number,json:{write:!0,default:null}})],xu.prototype,"waveDirection",void 0),c([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],xu.prototype,"waveStrength",void 0),xu=S3=c([k("esri.symbols.WaterSymbol3DLayer")],xu);const $3=new le([0,119,190]),CQ=xu;var x3;let Wp=x3=class extends de{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new x3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([d({type:String})],Wp.prototype,"name",void 0),c([d({type:String})],Wp.prototype,"styleUrl",void 0),c([d({type:String})],Wp.prototype,"styleName",void 0),c([d({type:gi})],Wp.prototype,"portal",void 0),Wp=x3=c([k("esri.symbols.support.StyleOrigin")],Wp);const u1=Wp;var E3;let nf=E3=class extends de{constructor(){super(...arguments),this.url=""}clone(){return new E3({url:this.url})}};c([d({type:String})],nf.prototype,"url",void 0),nf=E3=c([k("esri.symbols.support.Thumbnail")],nf);const MQ={icon:Vh,object:uF,line:f_,path:dF,fill:p_,extrude:mQ,text:I0,water:CQ},Rxe=ce.ofType({base:Ml,key:"type",typeMap:MQ,errorContext:"symbol-layer"});let Pa=class extends Hn{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=i==null?void 0:i.type,n=r||ce;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&q.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Sf(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=Yd(e.styleUrl,r);return new u1({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new u1({portal:(r==null?void 0:r.portal)||gi.getDefault(),styleName:e.styleName,name:e.name});r!=null&&r.messages&&r.messages.push(new po("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let s=h_(e.styleUrl,n);gs(s)&&(s=xr(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&(n!=null&&n.portal)&&!IJ(e.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new po("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Ml||e&&MQ[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};c([d({json:{read:!1,write:!1}})],Pa.prototype,"color",null),c([d({type:Rxe,nonNullable:!0,json:{write:!0}}),qe(VJ)],Pa.prototype,"symbolLayers",null),c([d({type:u1})],Pa.prototype,"styleOrigin",void 0),c([K("styleOrigin")],Pa.prototype,"readStyleOrigin",null),c([ee("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Pa.prototype,"writeStyleOrigin",null),c([d({type:nf,json:{read:!1}})],Pa.prototype,"thumbnail",void 0),c([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Pa.prototype,"type",void 0),Pa=c([k("esri.symbols.Symbol3D")],Pa);const C0=Pa;let qv=class extends B{constructor(e){super(e),this.visible=!0}clone(){}};c([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],qv.prototype,"type",void 0),c([d({readOnly:!0})],qv.prototype,"visible",void 0),qv=c([k("esri.symbols.callouts.Callout3D")],qv);const LQ=qv;var T3;let Sx=T3=class extends B{constructor(t){super(t),this.color=new le("white")}clone(){return new T3({color:D(this.color)})}};c([d(dp)],Sx.prototype,"color",void 0),Sx=T3=c([k("esri.symbols.callouts.LineCallout3DBorder")],Sx);const Nxe=Sx;var k3;let Eu=k3=class extends LQ{constructor(t){super(t),this.type="line",this.color=new le([0,0,0,1]),this.size=lr(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new k3({color:D(this.color),size:this.size,border:D(this.border)})}};c([he({line:"line"})],Eu.prototype,"type",void 0),c([d(dp)],Eu.prototype,"color",void 0),c([d($l)],Eu.prototype,"size",void 0),c([d({type:Nxe,json:{write:!0}})],Eu.prototype,"border",void 0),c([d({readOnly:!0})],Eu.prototype,"visible",null),Eu=k3=c([k("esri.symbols.callouts.LineCallout3D")],Eu);const OQ=Eu;function pF(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function AQ(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!pF(t)}const PQ={types:{key:"type",base:LQ,typeMap:{line:OQ}},json:{write:!0}};var I3;let Fm=I3=class extends B{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new I3({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([d($l)],Fm.prototype,"screenLength",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Fm.prototype,"minWorldLength",void 0),c([d({type:Number,json:{write:!0}})],Fm.prototype,"maxWorldLength",void 0),Fm=I3=c([k("esri.symbols.support.Symbol3DVerticalOffset")],Fm);const hF=Fm;var $x;const RQ=ce.ofType({base:null,key:"type",typeMap:{text:I0}});let Tu=$x=class extends C0{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new RQ,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return AQ(this)}hasVisibleVerticalOffset(){return pF(this)}clone(){return new $x({styleOrigin:D(this.styleOrigin),symbolLayers:D(this.symbolLayers),thumbnail:D(this.thumbnail),callout:D(this.callout),verticalOffset:D(this.verticalOffset)})}static fromTextSymbol(t){return new $x({symbolLayers:new ce([I0.fromTextSymbol(t)])})}};c([d({type:hF,json:{write:!0}})],Tu.prototype,"verticalOffset",void 0),c([d(PQ)],Tu.prototype,"callout",void 0),c([d({json:{read:!1,write:!1}})],Tu.prototype,"styleOrigin",void 0),c([d({type:RQ})],Tu.prototype,"symbolLayers",void 0),c([he({LabelSymbol3D:"label-3d"},{readOnly:!0})],Tu.prototype,"type",void 0),Tu=$x=c([k("esri.symbols.LabelSymbol3D")],Tu);const eI=Tu;var xx;const NQ=ce.ofType({base:null,key:"type",typeMap:{line:f_,path:dF}}),Dxe=ce.ofType({base:null,key:"type",typeMap:{line:f_,path:dF}});let Wv=xx=class extends C0{constructor(t){super(t),this.symbolLayers=new NQ,this.type="line-3d"}clone(){return new xx({styleOrigin:D(this.styleOrigin),symbolLayers:D(this.symbolLayers),thumbnail:D(this.thumbnail)})}static fromSimpleLineSymbol(t){return new xx({symbolLayers:new ce([f_.fromSimpleLineSymbol(t)])})}};c([d({type:NQ,json:{type:Dxe}})],Wv.prototype,"symbolLayers",void 0),c([he({LineSymbol3D:"line-3d"},{readOnly:!0})],Wv.prototype,"type",void 0),Wv=xx=c([k("esri.symbols.LineSymbol3D")],Wv);const tI=Wv;let ku=class extends Hn{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],ku.prototype,"angle",void 0),c([d({type:["simple-marker","picture-marker"],readOnly:!0})],ku.prototype,"type",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],ku.prototype,"xoffset",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],ku.prototype,"yoffset",void 0),c([d({type:Number,cast:t=>t==="auto"?t:Ke(t),json:{write:!0}})],ku.prototype,"size",void 0),ku=c([k("esri.symbols.MarkerSymbol")],ku);const DQ=ku;var Ex;const FQ=ce.ofType({base:null,key:"type",typeMap:{fill:p_}});let Jv=Ex=class extends C0{constructor(t){super(t),this.symbolLayers=new FQ,this.type="mesh-3d"}clone(){return new Ex({styleOrigin:D(this.styleOrigin),symbolLayers:D(this.symbolLayers),thumbnail:D(this.thumbnail)})}static fromSimpleFillSymbol(t){return new Ex({symbolLayers:new ce([p_.fromSimpleFillSymbol(t)])})}};c([d({type:FQ})],Jv.prototype,"symbolLayers",void 0),c([he({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Jv.prototype,"type",void 0),Jv=Ex=c([k("esri.symbols.MeshSymbol3D")],Jv);const iI=Jv;function Fxe(t,e,i){return e.imageData?MJ({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):jQ(e.url,i)}function jQ(t,e){var i;return zxe(e)&&!gs(t)&&((i=e==null?void 0:e.layer)!=null&&i.parsedUrl)?Vg(e.layer.parsedUrl.path,"images",t):Yd(t,e)}function jxe(t,e,i,r){if(sp(t)){const n=_f(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&Mf(i.url,e,"url",r)}else Mf(t,e,"url",r)}const zQ={json:{read:{source:["imageData","url"],reader:Fxe},write:{writer(t,e,i,r){jxe(t,e,this.source,r)}}}},VQ={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=jQ(e.url,i)),r}}}};function zxe(t){var e,i;return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||((e=t.layer)==null?void 0:e.type)!=="feature"&&((i=t.layer)==null?void 0:i.type)!=="stream")}var C3;let js=C3=class extends gQ{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=Ke(i)),r!=null&&(n.height=Ke(r)),n}clone(){const t=new C3({color:D(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",D(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([he({esriPFS:"picture-fill"},{readOnly:!0})],js.prototype,"type",void 0),c([d(zQ)],js.prototype,"url",void 0),c([d({type:Number,json:{write:!0}})],js.prototype,"xscale",void 0),c([d({type:Number,json:{write:!0}})],js.prototype,"yscale",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],js.prototype,"width",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],js.prototype,"height",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],js.prototype,"xoffset",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],js.prototype,"yoffset",void 0),c([d(VQ)],js.prototype,"source",void 0),js=C3=c([k("esri.symbols.PictureFillSymbol")],js);const UQ=js;var M3;let Lo=M3=class extends DQ{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Ke(e)),i!=null&&(r.height=Ke(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new M3({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",D(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([d({json:{write:!1}})],Lo.prototype,"color",void 0),c([he({esriPMS:"picture-marker"},{readOnly:!0})],Lo.prototype,"type",void 0),c([d(zQ)],Lo.prototype,"url",void 0),c([d(VQ)],Lo.prototype,"source",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],Lo.prototype,"height",void 0),c([K("height",["height","size"])],Lo.prototype,"readHeight",null),c([d({type:Number,cast:Ke,json:{write:!0}})],Lo.prototype,"width",void 0),c([d({json:{write:!1}})],Lo.prototype,"size",void 0),Lo=M3=c([k("esri.symbols.PictureMarkerSymbol")],Lo);const rI=Lo;var Jp;const BQ=ce.ofType({base:null,key:"type",typeMap:{icon:Vh,object:uF,text:I0}});let Zp=Jp=class extends C0{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new BQ,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return AQ(this)}hasVisibleVerticalOffset(){return pF(this)}clone(){return new Jp({verticalOffset:D(this.verticalOffset),callout:D(this.callout),styleOrigin:D(this.styleOrigin),symbolLayers:D(this.symbolLayers),thumbnail:D(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Jp({symbolLayers:new ce([Vh.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new Jp({symbolLayers:new ce([Vh.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){var r,n;if(((n=(r=t.data)==null?void 0:r.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Jp(i!=null&&i.callout?{symbolLayers:new ce([Vh.fromCIMSymbol(t)]),callout:new OQ({size:.5,color:new le([0,0,0])}),verticalOffset:new hF({screenLength:40})}:{symbolLayers:new ce([Vh.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new Jp({symbolLayers:new ce([I0.fromTextSymbol(t)])})}};c([d({type:hF,json:{write:!0}})],Zp.prototype,"verticalOffset",void 0),c([d(PQ)],Zp.prototype,"callout",void 0),c([d({type:BQ,json:{origins:{"web-scene":{write:!0}}}})],Zp.prototype,"symbolLayers",void 0),c([he({PointSymbol3D:"point-3d"},{readOnly:!0})],Zp.prototype,"type",void 0),Zp=Jp=c([k("esri.symbols.PointSymbol3D")],Zp);const Uh=Zp;var Zv;const GQ=ce.ofType({base:null,key:"type",typeMap:{extrude:mQ,fill:p_,icon:Vh,line:f_,object:uF,text:I0,water:CQ}});let Yv=Zv=class extends C0{constructor(t){super(t),this.symbolLayers=new GQ,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Fg(q.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Fg(q.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(bs(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Yf))}clone(){return new Zv({styleOrigin:D(this.styleOrigin),symbolLayers:D(this.symbolLayers),thumbnail:D(this.thumbnail)})}static fromJSON(t){var i;const e=new Zv;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const r=e.symbolLayers.at(0),n=e.symbolLayers.at(1);!n.enabled||(i=t.symbolLayers)!=null&&i[1]&&t.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new Zv({symbolLayers:new ce([p_.fromSimpleFillSymbol(t)])})}};c([d({type:GQ,json:{write:!0}})],Yv.prototype,"symbolLayers",void 0),c([he({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Yv.prototype,"type",void 0),Yv=Zv=c([k("esri.symbols.PolygonSymbol3D")],Yv);const m_=Yv;var L3;const iM=new $e({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Yp=L3=class extends gQ{constructor(...t){super(...t),this.color=new le([0,0,0,.25]),this.outline=new qn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new L3({color:D(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([d()],Yp.prototype,"color",void 0),c([d()],Yp.prototype,"outline",void 0),c([he({esriSFS:"simple-fill"},{readOnly:!0})],Yp.prototype,"type",void 0),c([d({type:iM.apiValues,json:{read:iM.read,write:iM.write}})],Yp.prototype,"style",void 0),Yp=L3=c([k("esri.symbols.SimpleFillSymbol")],Yp);const Yc=Yp;var O3;const rM=new $e({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ra=O3=class extends DQ{constructor(...t){super(...t),this.color=new le([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new qn}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=Ke(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new O3({angle:this.angle,color:D(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};c([d()],Ra.prototype,"color",void 0),c([ee("color")],Ra.prototype,"writeColor",null),c([he({esriSMS:"simple-marker"},{readOnly:!0})],Ra.prototype,"type",void 0),c([d()],Ra.prototype,"size",void 0),c([d({type:rM.apiValues,json:{read:rM.read,write:rM.write}})],Ra.prototype,"style",void 0),c([d({type:String,json:{write:!0}})],Ra.prototype,"path",null),c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":qn}},json:{default:null,write:!0}})],Ra.prototype,"outline",void 0),Ra=O3=c([k("esri.symbols.SimpleMarkerSymbol")],Ra);const jn=Ra;var A3;let zt=A3=class extends Hn{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Xk,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return Ke(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new A3({angle:this.angle,backgroundColor:D(this.backgroundColor),borderLineColor:D(this.borderLineColor),borderLineSize:this.borderLineSize,color:D(this.color),font:this.font&&this.font.clone(),haloColor:D(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t,e,i;return`${(t=this.backgroundColor)==null?void 0:t.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([d({type:le,json:{write:!0}})],zt.prototype,"backgroundColor",void 0),c([d({type:le,json:{write:!0}})],zt.prototype,"borderLineColor",void 0),c([d({type:Number,json:{write:!0},cast:Ke})],zt.prototype,"borderLineSize",void 0),c([d({type:Xk,json:{write:!0}})],zt.prototype,"font",void 0),c([d({...xQ,json:{write:!0}})],zt.prototype,"horizontalAlignment",void 0),c([d({type:Boolean,json:{write:!0}})],zt.prototype,"kerning",void 0),c([d({type:le,json:{write:!0}})],zt.prototype,"haloColor",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],zt.prototype,"haloSize",void 0),c([d({type:Boolean,json:{write:!0}})],zt.prototype,"rightToLeft",void 0),c([d({type:Boolean,json:{write:!0}})],zt.prototype,"rotated",void 0),c([d({type:String,json:{write:!0}})],zt.prototype,"text",void 0),c([he({esriTS:"text"},{readOnly:!0})],zt.prototype,"type",void 0),c([d({...EQ,json:{write:!0}})],zt.prototype,"verticalAlignment",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],zt.prototype,"xoffset",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],zt.prototype,"yoffset",void 0),c([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],zt.prototype,"angle",void 0),c([d({type:Number,json:{write:!0}})],zt.prototype,"width",void 0),c([d({type:Number})],zt.prototype,"lineWidth",void 0),c([ee("lineWidth")],zt.prototype,"writeLineWidth",null),c([qe("lineWidth")],zt.prototype,"castLineWidth",null),c([d($Q)],zt.prototype,"lineHeight",void 0),c([ee("lineHeight")],zt.prototype,"writeLineHeight",null),zt=A3=c([k("esri.symbols.TextSymbol")],zt);const M0=zt;var P3;let Oo=P3=class extends Hn{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:gi.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new P3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,r=i?this._fetchCacheKey:null;if(i!=null){const a=r&&i.get(r);if(a)return a.clone()}const{resolveWebStyleSymbol:n}=await Z(()=>Promise.resolve().then(()=>jje),void 0);kt(e);const s=n(this,{portal:this.portal},t,e);s.catch(a=>{q.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return t==="webRef"&&o.type==="point-3d"||t==="cimRef"&&o.type==="cim"?(i!=null&&i.set(r,o.clone()),o):null}};c([d({json:{write:!1}})],Oo.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Oo.prototype,"styleName",void 0),c([d({type:gi,json:{write:!1}})],Oo.prototype,"portal",void 0),c([d({type:String,json:{read:cF,write:Mf}})],Oo.prototype,"styleUrl",void 0),c([d({type:nf,json:{read:!1}})],Oo.prototype,"thumbnail",void 0),c([d({type:String,json:{write:!0}})],Oo.prototype,"name",void 0),c([he({styleSymbolReference:"web-style"},{readOnly:!0})],Oo.prototype,"type",void 0),c([d()],Oo.prototype,"_fetchCacheKey",null),Oo=P3=c([k("esri.symbols.WebStyleSymbol")],Oo);const Qf=Oo;function nI(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function xl(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const sf={base:Hn,key:"type",typeMap:{"simple-fill":Yc,"picture-fill":UQ,"picture-marker":rI,"simple-line":qn,"simple-marker":jn,text:M0,"label-3d":eI,"line-3d":tI,"mesh-3d":iI,"point-3d":Uh,"polygon-3d":m_,"web-style":Qf,cim:d_},errorContext:"symbol"},Vxe={base:Hn,key:"type",typeMap:{"picture-marker":rI,"simple-marker":jn,text:M0,"web-style":Qf,cim:d_},errorContext:"symbol"},Uxe=b0({types:sf}),HQ={base:Hn,key:"type",typeMap:{"simple-fill":Yc,"picture-fill":UQ,"picture-marker":rI,"simple-line":qn,"simple-marker":jn,text:M0,"line-3d":tI,"mesh-3d":iI,"point-3d":Uh,"polygon-3d":m_,"web-style":Qf,cim:d_},errorContext:"symbol"},Bxe={base:Hn,key:"type",typeMap:{text:M0,"label-3d":eI},errorContext:"symbol"},u8={base:Hn,key:"type",typeMap:{"line-3d":tI,"mesh-3d":iI,"point-3d":Uh,"polygon-3d":m_,"web-style":Qf,cim:d_},errorContext:"symbol"},Gxe={base:Hn,key:"type",typeMap:{"label-3d":eI},errorContext:"symbol"},qQ=bl(sf);var R3;let Kv=R3=class extends B{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new R3({minValue:this.minValue,maxValue:this.maxValue})}};c([d({type:Number,json:{write:!0}})],Kv.prototype,"minValue",void 0),c([d({type:Number,json:{write:!0}})],Kv.prototype,"maxValue",void 0),Kv=R3=c([k("esri.renderer.support.AuthoringInfoClassBreakInfo")],Kv);var N3;let td=N3=class extends B{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new N3({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:D(this.classBreakInfos)})}};c([d({type:String,json:{write:!0}})],td.prototype,"field",void 0),c([d({type:String,json:{write:!0}})],td.prototype,"normalizationField",void 0),c([d({type:String,json:{write:!0}})],td.prototype,"label",void 0),c([d({type:[Kv],json:{write:!0}})],td.prototype,"classBreakInfos",void 0),td=N3=c([k("esri.renderers.support.AuthoringInfoFieldInfo")],td);var D3;const PS=new $e({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),RS=new $e({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),d8={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},p8=["high-to-low","above-and-below","centered-on","extremes"],h8=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],f8=["seconds","minutes","hours","days","months","years"];let Sn=D3=class extends B{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new D3({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};c([d({types:d8,json:{write:!0}})],Sn.prototype,"endTime",void 0),c([qe("endTime")],Sn.prototype,"castEndTime",null),c([d({type:String,json:{write:!0}})],Sn.prototype,"field",void 0),c([d({type:Number,json:{write:!0}})],Sn.prototype,"maxSliderValue",void 0),c([d({type:Number,json:{write:!0}})],Sn.prototype,"minSliderValue",void 0),c([d({types:d8,json:{write:!0}})],Sn.prototype,"startTime",void 0),c([qe("startTime")],Sn.prototype,"castStartTime",null),c([d({type:PS.apiValues,value:null,json:{type:PS.jsonValues,read:PS.read,write:PS.write}})],Sn.prototype,"style",null),c([d({type:h8,value:null,json:{type:h8,origins:{"web-scene":{type:p8,write:{writer:(t,e)=>{p8.includes(t)&&(e.theme=t)}}}},write:!0}})],Sn.prototype,"theme",null),c([d({type:RS.apiValues,json:{type:RS.jsonValues,read:RS.read,write:RS.write}})],Sn.prototype,"type",void 0),c([d({type:f8,json:{type:f8,write:!0}})],Sn.prototype,"units",void 0),Sn=D3=c([k("esri.renderers.support.AuthoringInfoVisualVariable")],Sn);const Hxe=Sn;let Tx=class extends B{constructor(e){super(e),this.type=null}};c([d({readOnly:!0,json:{read:!1,write:!0}})],Tx.prototype,"type",void 0),Tx=c([k("esri.rest.support.ColorRamp")],Tx);const fF=Tx;var F3;let Kp=F3=class extends fF{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new F3({fromColor:D(this.fromColor),toColor:D(this.toColor),algorithm:this.algorithm})}};c([he({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Kp.prototype,"algorithm",void 0),c([d({type:le,json:{type:[ft],write:!0}})],Kp.prototype,"fromColor",void 0),c([d({type:le,json:{type:[ft],write:!0}})],Kp.prototype,"toColor",void 0),c([d({type:["algorithmic"]})],Kp.prototype,"type",void 0),Kp=F3=c([k("esri.rest.support.AlgorithmicColorRamp")],Kp);const mF=Kp;var j3;let Qv=j3=class extends fF{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new j3({colorRamps:D(this.colorRamps)})}};c([d({type:[mF],json:{write:!0}})],Qv.prototype,"colorRamps",void 0),c([d({type:["multipart"]})],Qv.prototype,"type",void 0),Qv=j3=c([k("esri.rest.support.MultipartColorRamp")],Qv);const WQ=Qv,qxe={key:"type",base:fF,typeMap:{algorithmic:mF,multipart:WQ}};function Wxe(t){return t!=null&&t.type?t.type==="algorithmic"?mF.fromJSON(t):t.type==="multipart"?WQ.fromJSON(t):null:null}var z3;const wp=new $e({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),NS=new $e({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),m8=new $e({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),y8=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Jxe=["high-to-low","above-and-below","above","below","90-10"],Zxe=["flow-line","wave-front"],Yxe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let ri=z3=class extends B{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?Wxe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){var t;return new z3({classificationMethod:this.classificationMethod,colorRamp:D(this.colorRamp),fadeRatio:D(this.fadeRatio),fields:(t=this.fields)==null?void 0:t.slice(0),field1:D(this.field1),field2:D(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};c([d({type:wp.apiValues,value:null,json:{type:wp.jsonValues,read:wp.read,write:wp.write,origins:{"web-document":{default:"manual",type:wp.jsonValues,read:wp.read,write:wp.write}}}})],ri.prototype,"classificationMethod",null),c([d({types:qxe,json:{write:!0}})],ri.prototype,"colorRamp",void 0),c([K("colorRamp")],ri.prototype,"readColorRamp",null),c([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ri.prototype,"fadeRatio",void 0),c([d({type:[String],value:null,json:{write:!0}})],ri.prototype,"fields",null),c([d({type:td,value:null,json:{write:!0}})],ri.prototype,"field1",null),c([d({type:td,value:null,json:{write:!0}})],ri.prototype,"field2",null),c([d({type:Zxe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ri.prototype,"flowTheme",null),c([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ri.prototype,"focus",null),c([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ri.prototype,"isAutoGenerated",void 0),c([d({type:Number,value:null,json:{type:ft,write:!0}})],ri.prototype,"numClasses",null),c([d({type:y8,json:{type:y8,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ri.prototype,"lengthUnit",void 0),c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ri.prototype,"maxSliderValue",void 0),c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ri.prototype,"minSliderValue",void 0),c([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ri.prototype,"statistics",null),c([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ri.prototype,"standardDeviationInterval",null),c([d({type:NS.apiValues,value:null,json:{type:NS.jsonValues,read:NS.read,write:NS.write,origins:{"web-scene":{type:m8.jsonValues,write:{writer:m8.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],ri.prototype,"type",null),c([d({type:[Hxe],json:{write:!0}})],ri.prototype,"visualVariables",void 0),c([d({type:Yxe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ri.prototype,"univariateSymbolStyle",null),c([d({type:Jxe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ri.prototype,"univariateTheme",null),ri=z3=c([k("esri.renderers.support.AuthoringInfo")],ri);const yF=ri,nM=new $e({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Xv=class extends B{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};c([d({type:yF,json:{write:!0}})],Xv.prototype,"authoringInfo",void 0),c([d({type:nM.apiValues,readOnly:!0,json:{type:nM.jsonValues,read:!1,write:{writer:nM.write,ignoreOrigin:!0}}})],Xv.prototype,"type",void 0),Xv=c([k("esri.renderers.Renderer")],Xv);const Kc=Xv;function Kxe(t){var e,i;return((i=(e=t.match(Qxe))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const Qxe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var V3;let gg=V3=class extends B{constructor(){super(...arguments),this.title=null}clone(){return new V3({title:this.title})}};c([d({type:String,json:{write:!0}})],gg.prototype,"title",void 0),gg=V3=c([k("esri.renderers.support.LegendOptions")],gg);var U3;let kx=U3=class extends gg{constructor(){super(...arguments),this.showLegend=null}clone(){return new U3({title:this.title,showLegend:this.showLegend})}};c([d({type:Boolean,json:{write:!0}})],kx.prototype,"showLegend",void 0),kx=U3=c([k("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],kx);const JQ=kx,sM=new $e({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Ao=class extends B{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(q.getLogger(this).error(".field: field must be a string value"),null):X1(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};c([d()],Ao.prototype,"index",void 0),c([d({type:sM.apiValues,readOnly:!0,json:{read:sM.read,write:sM.write}})],Ao.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Ao.prototype,"field",void 0),c([qe("field")],Ao.prototype,"castField",null),c([d({type:String,json:{write:!0}})],Ao.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Ao.prototype,"valueExpressionTitle",void 0),c([d({readOnly:!0})],Ao.prototype,"arcadeRequired",null),c([d({type:JQ,json:{write:!0}})],Ao.prototype,"legendOptions",void 0),Ao=c([k("esri.renderers.visualVariables.VisualVariable")],Ao);const y_=Ao;var B3;let Qp=B3=class extends B{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new B3({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};c([d({type:le,json:{type:[ft],write:!0}})],Qp.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Qp.prototype,"label",void 0),c([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Qp.prototype,"value",void 0),c([ee("value")],Qp.prototype,"writeValue",null),Qp=B3=c([k("esri.renderers.visualVariables.support.ColorStop")],Qp);const Xxe=Qp;var G3;let Xp=G3=class extends y_{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new G3({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};c([d({readOnly:!0})],Xp.prototype,"cache",null),c([d({type:["color"],json:{type:["colorInfo"]}})],Xp.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Xp.prototype,"normalizationField",void 0),c([d({type:[Xxe],json:{write:!0}})],Xp.prototype,"stops",null),Xp=G3=c([k("esri.renderers.visualVariables.ColorVariable")],Xp);const ZQ=Xp;var H3;let Iu=H3=class extends B{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return r1(e.transparency)}writeOpacity(t,e,i){e[i]=Vk(t)}clone(){return new H3({label:this.label,opacity:this.opacity,value:this.value})}};c([d({type:String,json:{write:!0}})],Iu.prototype,"label",void 0),c([d({type:Number,json:{type:ft,write:{target:"transparency"}}})],Iu.prototype,"opacity",void 0),c([K("opacity",["transparency"])],Iu.prototype,"readOpacity",null),c([ee("opacity")],Iu.prototype,"writeOpacity",null),c([d({type:Number,json:{write:!0}})],Iu.prototype,"value",void 0),Iu=H3=c([k("esri.renderers.visualVariables.support.OpacityStop")],Iu);const e2e=Iu;var q3;let eh=q3=class extends y_{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){var t;return new q3({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};c([d({readOnly:!0})],eh.prototype,"cache",null),c([d({type:["opacity"],json:{type:["transparencyInfo"]}})],eh.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],eh.prototype,"normalizationField",void 0),c([d({type:[e2e],json:{write:!0}})],eh.prototype,"stops",null),eh=q3=c([k("esri.renderers.visualVariables.OpacityVariable")],eh);const YQ=eh;var W3;let Ql=W3=class extends y_{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,i,r){if(r!=null&&r.messages){const n=`visualVariables[${this.index}]`;r.messages.push(new j("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:r}))}}clone(){var t;return new W3({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}};c([d({readOnly:!0})],Ql.prototype,"cache",null),c([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Ql.prototype,"axis",void 0),c([d({type:["rotation"],json:{type:["rotationInfo"]}})],Ql.prototype,"type",void 0),c([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Ql.prototype,"rotationType",void 0),c([d({type:String,json:{write:!0}})],Ql.prototype,"valueExpressionTitle",void 0),c([ee("web-scene","valueExpressionTitle")],Ql.prototype,"writeValueExpressionTitleWebScene",null),Ql=W3=c([k("esri.renderers.visualVariables.RotationVariable")],Ql);const KQ=Ql;var J3;let jm=J3=class extends B{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new J3({label:this.label,size:this.size,value:this.value})}};c([d({type:String,json:{write:!0}})],jm.prototype,"label",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],jm.prototype,"size",void 0),c([d({type:Number,json:{write:!0}})],jm.prototype,"value",void 0),jm=J3=c([k("esri.renderers.visualVariables.support.SizeStop")],jm);const zm=jm;var Z3;let Ix=Z3=class extends JQ{constructor(){super(...arguments),this.customValues=null}clone(){var t;return new Z3({title:this.title,showLegend:this.showLegend,customValues:(t=this.customValues)==null?void 0:t.slice(0)})}};c([d({type:[Number],json:{write:!0}})],Ix.prototype,"customValues",void 0),Ix=Z3=c([k("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],Ix);const QQ=Ix;var Cc,Hi;function bd(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function d1(t){return t!=null&&!isNaN(t)&&isFinite(t)}function XQ(t){return t.valueExpression?Cc.Expression:t.field&&typeof t.field=="string"?Cc.Field:Cc.Unknown}function t2e(t,e){const i=e||XQ(t),r=t.valueUnit||"unknown";return i===Cc.Unknown?Hi.Constant:t.stops?Hi.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?Hi.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?Hi.Proportional:Hi.Additive:Hi.Identity:Hi.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(Cc||(Cc={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(Hi||(Hi={}));var Y3;function i2e(t){if(!t)return null;const e={};for(const i in t){const r=_l(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function r2e(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}let $n=Y3=class extends Je(B){constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Jb(),configurable:!0})}normalizeCtorArgs(t,e,i,r){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:i,popupTemplate:r}}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new Y3({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const e of[this.sourceLayer,this.layer])if(e){if("popupTemplate"in e&&e.popupTemplate)return e.popupTemplate;if(t&&"defaultPopupTemplate"in e&&e.defaultPopupTemplate!=null)return e.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var t;return{aggregateGeometries:r2e(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:kE(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((t=this.popupTemplate)==null?void 0:t.toJSON())??null}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(n.action=r),t==="attributes"&&(n.attributeName=r),this.layer.graphicChanged(n)}};c([d({value:null,json:{read:i2e}})],$n.prototype,"aggregateGeometries",null),c([d({value:null})],$n.prototype,"attributes",null),c([d({value:null,types:cp,json:{read:_l}})],$n.prototype,"geometry",null),c([d({type:Boolean})],$n.prototype,"isAggregate",void 0),c([d({clonable:"reference"})],$n.prototype,"layer",void 0),c([d({type:u_})],$n.prototype,"popupTemplate",void 0),c([d({clonable:"reference"})],$n.prototype,"sourceLayer",void 0),c([d({value:null,types:sf})],$n.prototype,"symbol",null),c([d({type:Boolean,value:!0})],$n.prototype,"visible",null),$n=Y3=c([k("esri.Graphic")],$n),function(t){t.generateUID=Jb}($n||($n={}));const Vc=$n,gF={unknown:1,inches:Rs(1,"meters","inches"),feet:Rs(1,"meters","feet"),"us-feet":Rs(1,"meters","us-feet"),yards:Rs(1,"meters","yards"),miles:Rs(1,"meters","miles"),"nautical-miles":Rs(1,"meters","nautical-miles"),millimeters:Rs(1,"meters","millimeters"),centimeters:Rs(1,"meters","centimeters"),decimeters:Rs(1,"meters","decimeters"),meters:Rs(1,"meters","meters"),kilometers:Rs(1,"meters","kilometers"),"decimal-degrees":1/uge(1,"meters",Lt.radius)},Kd=q.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),g8=new Vc,Cx=Math.PI,eX=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function vF(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(g=>g.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Kd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const l=r.field,{ipData:u,hasExpression:p}=r.cache;let h=r.cache.compiledFunc;if(!l&&!p){const g=r.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(p){if((i==null?void 0:i.arcade)==null)return void Kd.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,w=v.getViewInfo(g),b=v.createExecContext(s,w,i.timeZone);if(!h){const _=v.createSyntaxTree(r.valueExpression);h=v.createFunction(_),r.cache.compiledFunc=h}a=v.executeFunction(h,b)}else o&&(a=o[l]);const m=r.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=_F(a,u);if(g){const v=g[0],w=g[1],b=v===w?r.stops[v].color:le.blendColors(r.stops[v].color,r.stops[w].color,g[2],i!=null?i.color:void 0);return new le(b)}}}function bF(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(g=>g.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Kd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof e=="number",s=n?null:e,o=s==null?void 0:s.attributes;let a=n?e:null;const l=r.field,{ipData:u,hasExpression:p}=r.cache;let h=r.cache.compiledFunc;if(!l&&!p){const g=r.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(p){if((i==null?void 0:i.arcade)==null)return void Kd.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,w=v.getViewInfo(g),b=v.createExecContext(s,w,i.timeZone);if(!h){const _=v.createSyntaxTree(r.valueExpression);h=v.createFunction(_),r.cache.compiledFunc=h}a=v.executeFunction(h,b)}else o&&(a=o[l]);const m=r.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=_F(a,u);if(g){const v=g[0],w=g[1];if(v===w)return r.stops[v].opacity;{const b=r.stops[v].opacity;return b+(r.stops[w].opacity-b)*g[2]}}}}function wF(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(y=>y.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Kd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,o=n==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a==null?void 0:a.attributes,u=r.field,{hasExpression:p}=r.cache;let h=r.cache.compiledFunc,m=0;if(!u&&!p)return m;if(p){if((i==null?void 0:i.arcade)==null)return void Kd.error("Use of arcade expressions requires an arcade context");const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},g=i.arcade.arcadeUtils,v=g.getViewInfo(y),w=g.createExecContext(a,v,i.timeZone);if(!h){const b=g.createSyntaxTree(r.valueExpression);h=g.createFunction(b),r.cache.compiledFunc=h}m=g.executeFunction(h,w)}else l&&(m=l[u]||0);return m=typeof m!="number"||isNaN(m)?null:s+o*m,m}function n2e(t,e,i){const r=typeof e=="number",n=r?null:e,s=n==null?void 0:n.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const p=i!=null?i.scale:void 0,h=i!=null?i.view:void 0;o=p==null||h==="3d"?s2e(t):p}else if(!r)switch(t.inputValueType){case Cc.Expression:{if((i==null?void 0:i.arcade)==null)return void Kd.error("Use of arcade expressions requires an arcade context");const p={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},h=i.arcade.arcadeUtils,m=h.getViewInfo(p),y=h.createExecContext(n,m,i.timeZone);if(!l){const g=h.createSyntaxTree(t.valueExpression);l=h.createFunction(g),t.cache.compiledFunc=l}o=h.executeFunction(l,y);break}case Cc.Field:s&&(o=s[t.field]);break;case Cc.Unknown:o=null}if(!d1(o))return null;if(r||!t.normalizationField)return o;const u=s?parseFloat(s[t.normalizationField]):null;return d1(u)&&u!==0?o/u:null}function s2e(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function g_(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(s=>s.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Kd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=iX(n2e(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?0:n}function zn(t,e,i){return t==null?null:bd(t)?g_(t,e,i):d1(t)?t:null}function tX(t,e,i){return d1(i)&&t>i?i:d1(e)&&t<e?e:t}function o2e(t,e,i,r){return t+((zn(e.minSize,i,r)||e.minDataValue)??0)}function a2e(t,e,i){const r=t.stops;let n=(r==null?void 0:r.length)&&r[0].size;return n==null&&(n=t.minSize),zn(n,e,i)}function l2e(t,e,i,r){const n=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),s=zn(e.minSize,i,r),o=zn(e.maxSize,i,r),a=r!=null?r.shape:void 0;if(t<=e.minDataValue)return s;if(t>=e.maxDataValue)return o;if(s==null||o==null)return null;if(e.scaleBy==="area"&&a){const l=a==="circle",u=l?Cx*(s/2)**2:s*s,p=u+n*((l?Cx*(o/2)**2:o*o)-u);return l?2*Math.sqrt(p/Cx):Math.sqrt(p)}return s+n*(o-s)}function c2e(t,e,i,r){const n=r!=null?r.shape:void 0,s=t/e.minDataValue,o=zn(e.minSize,i,r),a=zn(e.maxSize,i,r);let l=null;return l=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,tX(l,o,a)}function u2e(t,e,i,r,n){var l,u,p;const[s,o,a]=_F(t,n);if(s===o)return zn((l=e.stops)==null?void 0:l[s].size,i,r);{const h=zn((u=e.stops)==null?void 0:u[s].size,i,r);return h+(zn((p=e.stops)==null?void 0:p[o].size,i,r)-h)*a}}function d2e(t,e,i,r){const n=((r==null?void 0:r.resolution)??1)*gF[e.valueUnit],s=zn(e.minSize,i,r),o=zn(e.maxSize,i,r),{valueRepresentation:a}=e;let l=null;return l=a==="area"?2*Math.sqrt(t/Cx)/n:a==="radius"||a==="distance"?2*t/n:t/n,tX(l,s,o)}function iX(t,e,i,r,n){switch(e.transformationType){case Hi.Additive:return o2e(t,e,i,r);case Hi.Constant:return a2e(e,i,r);case Hi.ClampedLinear:return l2e(t,e,i,r);case Hi.Proportional:return c2e(t,e,i,r);case Hi.Stops:return u2e(t,e,i,r,n);case Hi.RealWorldSize:return d2e(t,e,i,r);case Hi.Identity:return t;case Hi.Unknown:return null}}function rX(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let s=zn(t.minSize,g8,n),o=zn(t.maxSize,g8,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function p2e(t,e,i){if(!t.visualVariables)return;const r=[],n=[],s=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach(l=>{const u=vF(l,e,i);r.push({variable:l,value:u})}),s.forEach(l=>{const u=bF(l,e,i);r.push({variable:l,value:u})}),a.forEach(l=>{const u=wF(l,e,i);r.push({variable:l,value:u})}),o.forEach(l=>{const u=g_(l,e,i);r.push({variable:l,value:u})}),r.filter(l=>l.value!=null)}function _F(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((n,s)=>t<n?(r=s,!0):(i=s,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function h2e(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const s=n.useSymbolValue?"symbol-value":g_(n,e,i);switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const Xf=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:h2e,getColor:vF,getOpacity:bF,getRotationAngle:wF,getSize:g_,getSizeForValue:iX,getSizeFromNumberOrVariable:zn,getSizeRangeAtScale:rX,getVisualVariableValues:p2e,viewScaleRE:eX},Symbol.toStringTag,{value:"Module"}));var K3;const DS=new $e({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),Q3=new $e({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function v8(t){if(t!=null)return typeof t=="string"||typeof t=="number"?Ke(t):t.type==="size"?bd(t)?t:(delete(t={...t}).type,new et(t)):void 0}function b8(t,e,i){if(typeof t!="object")return t;const r=new et;return r.read(t,i),r}let et=K3=class extends y_{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&eX.test(this.valueExpression)}}set expression(t){q.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){bd(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),bd(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return XQ(this)}set maxDataValue(t){t&&this.stops&&(q.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(q.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return v8(t)}readMaxSize(t,e,i){return b8(t,e,i)}set minDataValue(t){t&&this.stops&&(q.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(q.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return v8(t)}readMinSize(t,e,i){return b8(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(q.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return t2e(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r!=null&&r.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new j("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?Q3.read(t):null}clone(){var t,e;return new K3({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:bd(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:bd(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}flipSizes(){if(this.transformationType===Hi.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===Hi.Stops){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var t;return(t=this.stops)==null?void 0:t.map(e=>e.value||0)}};c([d({readOnly:!0})],et.prototype,"cache",null),c([d({type:DS.apiValues,json:{type:DS.jsonValues,origins:{"web-map":{read:!1}},read:DS.read,write:DS.write}})],et.prototype,"axis",void 0),c([d({type:String,value:null,json:{read:!1}})],et.prototype,"expression",null),c([d()],et.prototype,"index",null),c([d({type:String,readOnly:!0})],et.prototype,"inputValueType",null),c([d({type:QQ,json:{write:!0}})],et.prototype,"legendOptions",void 0),c([d({type:Number,value:null,json:{write:!0}})],et.prototype,"maxDataValue",null),c([d({type:Number,value:null,json:{write:!0}})],et.prototype,"maxSize",null),c([qe("maxSize")],et.prototype,"castMaxSize",null),c([K("maxSize")],et.prototype,"readMaxSize",null),c([d({type:Number,value:null,json:{write:!0}})],et.prototype,"minDataValue",null),c([d({type:Number,value:null,json:{write:!0}})],et.prototype,"minSize",null),c([qe("minSize")],et.prototype,"castMinSize",null),c([K("minSize")],et.prototype,"readMinSize",null),c([d({type:String,json:{write:!0}})],et.prototype,"normalizationField",void 0),c([d({readOnly:!0})],et.prototype,"arcadeRequired",null),c([d({type:String})],et.prototype,"scaleBy",void 0),c([d({type:[zm],value:null,json:{write:!0}})],et.prototype,"stops",null),c([d({type:["outline"],json:{write:!0}})],et.prototype,"target",void 0),c([d({type:String,readOnly:!0})],et.prototype,"transformationType",null),c([d({type:["size"],json:{type:["sizeInfo"]}})],et.prototype,"type",void 0),c([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],et.prototype,"useSymbolValue",void 0),c([d({type:String,json:{write:!0}})],et.prototype,"valueExpression",void 0),c([K("valueExpression",["valueExpression","expression"])],et.prototype,"readValueExpression",null),c([ee("web-scene","valueExpression")],et.prototype,"writeValueExpressionWebScene",null),c([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],et.prototype,"valueRepresentation",void 0),c([d({type:Q3.apiValues,json:{write:Q3.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],et.prototype,"valueUnit",void 0),c([K("valueUnit")],et.prototype,"readValueUnit",null),et=K3=c([k("esri.renderers.visualVariables.SizeVariable")],et);const v_=et,f2e={color:ZQ,size:v_,opacity:YQ,rotation:KQ},m2e=new $e({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),y2e=/^\[([^\]]+)\]$/i;let Mx=class extends de{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e&&e.filter(i=>!!i),e==null?void 0:e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:s}=i,o=n==null?void 0:n.match(y2e),a=o==null?void 0:o[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:a})),e)return e.map(l=>{const u=m2e.read(l.type),p=f2e[u];p||(q.getLogger(this).warn(`Unknown variable type: ${u}`),r!=null&&r.messages&&r.messages.push(new po("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:l,context:r})));const h=new p;return h.read(l,r),h})}writeVariables(e,i){const r=[];for(const n of e){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};c([d()],Mx.prototype,"visualVariables",null),Mx=c([k("esri.renderers.visualVariables.VisualVariableFactory")],Mx);const g2e=Mx,v2e={base:y_,key:"type",typeMap:{opacity:YQ,color:ZQ,rotation:KQ,size:v_}},L0=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new g2e}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,n){return this._vvFactory.readVariables(i,r,n)}writeVisualVariables(i,r,n,s){r[n]=this._vvFactory.writeVariables(i,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const n=this.visualVariables;return n?n.filter(s=>s.type===i&&(typeof r=="string"?s.target===r:r!==!1||!s.target)):[]}async collectVVRequiredFields(i,r){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&_s(i,r,s.field),s.normalizationField&&_s(i,r,s.normalizationField),s.valueExpression&&(b2e(s.valueExpression,i,r)||await dn(i,r,s.valueExpression)))}};return c([d({types:[v2e],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),c([K("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),c([ee("visualVariables")],e.prototype,"writeVisualVariables",null),e=c([k("esri.renderers.mixins.VisualVariablesMixin")],e),e};function b2e(t,e,i){const r=Kxe(t);return r!=null&&(_s(e,i,r),!0)}const lv={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function w2e(t,e=lv){var a,l;if(!t)return{symbol:null};const{retainId:i=lv.retainId,ignoreDrivers:r=lv.ignoreDrivers,hasLabelingContext:n=lv.hasLabelingContext,retainCIM:s=lv.retainCIM}=e;let o=null;if(xl(t)||t instanceof Qf)o=t.clone();else if(t.type==="cim"){const u=(l=(a=t.data)==null?void 0:a.symbol)==null?void 0:l.type;if(u!=="CIMPointSymbol")return{error:new j("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${u||"unknown"}' is unsupported in 3D`,{symbol:t})};o=s?t.clone():Uh.fromCIMSymbol(t)}else if(t instanceof qn)o=tI.fromSimpleLineSymbol(t);else if(t instanceof jn)o=Uh.fromSimpleMarkerSymbol(t);else if(t instanceof rI)o=Uh.fromPictureMarkerSymbol(t);else if(t instanceof Yc)o=e.geometryType&&e.geometryType==="mesh"?iI.fromSimpleFillSymbol(t):m_.fromSimpleFillSymbol(t);else{if(!(t instanceof M0))return{error:new j("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};o=n?eI.fromTextSymbol(t):Uh.fromTextSymbol(t)}return i&&o&&o.type!=="cim"&&(o.id=t.id),r&&xl(o)&&o.symbolLayers.forEach(u=>u.ignoreDrivers=!0),{symbol:o}}function nT(t,e,i,r){const n=nX(t,{},{context:r,isLabelSymbol:!1});n!=null&&(e[i]=n)}function w8(t,e,i,r){const n=nX(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function _8(t){return t instanceof C0||t instanceof Qf}function nX(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:n}=i,s=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(s==="web-scene"&&!_8(t)){const a=w2e(t,{retainCIM:!0,hasLabelingContext:n});return a.symbol!=null?a.symbol.write(e,r):(o==null||o.push(new j("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:a.error})),null)}return(s==="web-map"||s==="portal-item"&&!uZ(r==null?void 0:r.layer))&&_8(t)?(o==null||o.push(new j("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function sX(t,e){return Uxe(t,null,e)}const sI={types:HQ,json:{write:{writer:nT},origins:{"web-scene":{types:u8,write:{writer:nT},read:{reader:b0({types:u8})}}}}},SF=HD({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},sI),oX={types:{base:Hn,key:"type",typeMap:{"simple-fill":sf.typeMap["simple-fill"],"picture-fill":sf.typeMap["picture-fill"],"polygon-3d":sf.typeMap["polygon-3d"]}},json:{write:{writer:nT},origins:{"web-scene":{type:m_,write:{writer:nT}}}}},Lx={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var X3;let Cu=X3=class extends B{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new X3({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};c([d({type:String,json:{write:!0}})],Cu.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Cu.prototype,"label",void 0),c([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Cu.prototype,"minValue",void 0),c([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Cu.prototype,"maxValue",void 0),c([d(SF)],Cu.prototype,"symbol",void 0),Cu=X3=c([k("esri.renderers.support.ClassBreakInfo")],Cu);const sT=Cu;var eP;const aX="log",Ox="percent-of-total",Ax="field",FS=new $e({esriNormalizeByLog:aX,esriNormalizeByPercentOfTotal:Ox,esriNormalizeByField:Ax}),_2e=ei(sT);let Ti=eP=class extends L0(Kc){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(n=>{const s=new sT;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(t,e,i,r){const n=t.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(q.getLogger(this).error(".field: field must be a string value"),null):X1(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&Ax||i&&Ox||null,e&&i&&q.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==Ax&&t!==Ox||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new sT({minValue:t,maxValue:e,symbol:qQ(i)}):_2e(D(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(e==null?void 0:e.arcade)==null&&q.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await Zd()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void q.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null?void 0:e.arcade)==null){const n=await Zd(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var t,e;return new eP({field:this.field,backgroundFillSymbol:(t=this.backgroundFillSymbol)==null?void 0:t.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(e=this.defaultSymbol)==null?void 0:e.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:D(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:D(this.visualVariables),legendOptions:D(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),dn(t,e,this.valueExpression)];_s(t,e,this.field),_s(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=s.arcadeUtils;if(!l){const h=u.createSyntaxTree(a);l=u.createFunction(h),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const p=u.executeFunction(l,u.createExecContext(t,u.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._getBreakIndexfromInfos(p)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===aX)n=Math.log(n)*Math.LOG10E;else if(r!==Ox||s==null||isNaN(s)){if(r===Ax&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};c([d(oX)],Ti.prototype,"backgroundFillSymbol",void 0),c([d({type:[sT]})],Ti.prototype,"classBreakInfos",void 0),c([K("classBreakInfos")],Ti.prototype,"readClassBreakInfos",null),c([ee("classBreakInfos")],Ti.prototype,"writeClassBreakInfos",null),c([d({type:String,json:{write:!0}})],Ti.prototype,"defaultLabel",void 0),c([d(sI)],Ti.prototype,"defaultSymbol",void 0),c([d({type:String,json:{write:!0}})],Ti.prototype,"field",void 0),c([qe("field")],Ti.prototype,"castField",null),c([d({type:Boolean})],Ti.prototype,"isMaxInclusive",void 0),c([d({type:gg,json:{write:!0}})],Ti.prototype,"legendOptions",void 0),c([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ti.prototype,"minValue",null),c([d({type:String,json:{write:!0}})],Ti.prototype,"normalizationField",void 0),c([d({type:Number,cast:t=>Xs(t),json:{write:!0}})],Ti.prototype,"normalizationTotal",void 0),c([d({type:FS.apiValues,value:null,json:{type:FS.jsonValues,read:FS.read,write:FS.write}})],Ti.prototype,"normalizationType",null),c([he({classBreaks:"class-breaks"})],Ti.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Ti.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Ti.prototype,"valueExpressionTitle",void 0),Ti=eP=c([k("esri.renderers.ClassBreaksRenderer")],Ti);const lX=Ti,oM=-3;var yc;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(yc||(yc={}));let ZBe=class{constructor(e,i,r){this.name=e,this._storage=i,this.id=$2e+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(e,i,r,n=0){this._storage.put(this,e,i,r,n)}get(e){const i=this._storage.get(this,e);return i===void 0?++this._miss:++this._hit,i}peek(e){return this._storage.peek(this,e)}pop(e){const i=this._storage.pop(this,e);return i===void 0?++this._miss:++this._hit,i}updateSize(e,i,r){this._storage.updateSize(this,e,i,r)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},S2e=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new ef,this._users=new ef}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}put(e,i,r,n,s){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,yc.ALL)),n>this._maxSize)return void this._notifyRemove(i,r,yc.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,yc.ALL);const a=1+Math.max(s,oM)-oM;this._db.set(i,{entry:r,size:n,lifetime:a,lives:a}),this._size+=n,e.size+=n,this._checkSizeLimits()}updateSize(e,i,r,n){i=e.id+i;const s=this._db.get(i);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(i,r,yc.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);n=o}s.size=n,this._size+=n,e.size+=n,this._checkSizeLimits()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forAll(u=>{const{id:p,name:h}=u;if(a.startsWith(p)){const m=i[h]||0;i[h]=m+o.size}})});const n={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(i);s.sort((o,a)=>i[a]-i[o]),s.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+n[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+oM-1)]=Math.round(a/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,yc.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,yc.ALL)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r){let n;return this._removeFuncs.some(s=>{if(e.startsWith(s[0])){const o=s[1](i,r);return typeof o=="number"&&(n=o),!0}return!1}),n}_checkSizeLimits(){if(this._size>this._maxSize){for(const[e,i]of this._db)if(this._purgeItem(e,i),this._size<=.9*this.maxSize)return}this._users.forEach(e=>{if(e.maxSize>0&&e.size>e.maxSize){for(const[i,r]of this._db)if(i.startsWith(e.id)&&(this._purgeItem(i,r,e),e.size<=.9*e.maxSize))return}})}_purgeItem(e,i,r=this._users.find(n=>e.startsWith(n.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,yc.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},$2e=0,cX=class{constructor(e,i){this._storage=new S2e,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},oT=class{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}since(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new j(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new oT(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!s.test(r))throw new j((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!(n!=null&&n.match)||!s.test(n))throw new j((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(n,10);return new oT(o,a,i)}},oI=class{};function x2e(t){return t instanceof $0?t===oI.instance:(t==null?void 0:t.toString().toLowerCase())==="unknown"}function t7e(t){return x2e(t)?oI.instance:t}oI.instance=new Ts("Etc/UTC");function E2e(t){return"timeZone"in t}function T2e(t){return"timeZone"in t}function k2e(t){return"dateFieldsTimeZone"in t}const I2e=new Map;let uX=class Px{static fromJSON(e){return new Px(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new Px(e.fields??[],$8(e))}static fromLayerJSON(e){return new Px(e.fields??[],$8(e))}constructor(e=[],i){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const o=s==null?void 0:s.name,a=S8(o);if(o&&a){const l=Mh(o);this._fieldsMap.set(o,s),this._fieldsMap.set(l,s),this._normalizedFieldsMap.set(a,s),r.push(`${l}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),rQ(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):iQ(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),i8(s)||r8(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)i8(e)||r8(e)||e.nullable||h$e(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(e==null?void 0:e.uid)}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(Mh(e))??this._normalizedFieldsMap.get(S8(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(q.getLogger("esri.layers.support.FieldsIndex").error(new j("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Sl):dX.has(i.type)?If:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===If?oI.instance:i===Sl?Sr.utcInstance:ZD(I2e,i,()=>Ts.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return nQ(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var i;return((i=this.get(e))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(e=>kE(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Mh(t){return t.trim().toLowerCase()}function S8(t){var e;return((e=YSe(t))==null?void 0:e.toLowerCase())??""}const dX=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function $8(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=t,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=k2e(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?ox(t.dateFieldsTimeReference):null,l=n?E2e(n)?n.timeZone??a:n.dateFieldsTimeReference?ox(n.dateFieldsTimeReference):a??Sl:null,u=r?T2e(r)?r.timeZone??a:r.timeReference?ox(r.timeReference):a:null,p=new Map([[Mh((n==null?void 0:n.creationDateField)??""),l],[Mh((n==null?void 0:n.editDateField)??""),l],[Mh(s),u],[Mh(o),u]]);for(const{name:h,type:m}of t.fields)if(dX.has(m))e.set(h,If);else if(m!=="date"&&m!=="esriFieldTypeDate")e.set(h,null);else if(i)e.set(h,If);else{const y=p.get(Mh(h??""))??a;e.set(h,y)}return e}const x8="esri.renderers.support.DictionaryLoader",C2e={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let $F=class{constructor(e,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new cX(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(g){if(hr(g))return this._dictionaryPromise=null,null}const n=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),s={};if(this.fieldMap)for(const g of this._symbolFields){const v=this._getFieldName(this.fieldMap[g]);if(v){const w=e.attributes[v];s[g]=n?w:w!=null?""+e.attributes[v]:""}else s[g]=""}let o=null;try{o=r==null?void 0:r(s,i)}catch{return null}if(!o||typeof o!="string")return null;const a=qD(o).toString(),l=this._symbolCache.get(a);if(l)return l.catch(()=>{this._symbolCache.pop(a)}),l;const u=o.split(";"),p=[],h=[];for(const g of u)if(g)if(g.includes("po:")){const v=g.substr(3).split("|");if(v.length===3){const w=v[0],b=v[1];let _=v[2];if(b==="DashTemplate")_=_.split(" ").map(S=>Number(S));else if(b==="Color"){const S=new le(_).toRgba();_=[S[0],S[1],S[2],255*S[3]]}else _=Number(_);h.push({primitiveName:w,propertyName:b,value:_})}}else if(g.includes("|")){for(const v of g.split("|"))if(this._itemNames.has(v)){p.push(v);break}}else this._itemNames.has(g)&&p.push(g);const m=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point",y=this._cimPartsToCIMSymbol(p,h,m,i);return this._symbolCache.put(a,y,1),y}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void q.getLogger(x8).error("no valid URL!");const i=Ve(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:r}]=await Promise.all([i,Zd()]);if(!r)throw this._dictionaryPromise=null,new j("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:s,expression:o,itemsNames:a}=r,l=o;let u=!1;s&&(this._dictionaryVersion=oT.parse(s),u=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=n.symbol;const p={};if(this.config){const y=this.config;for(const g in y)p[g]=y[g]}if(n.configuration)for(const y of n.configuration)p.hasOwnProperty(y.name)||(p[y.name]=y.value);const h=[];if(e!=null&&e.fields&&this.fieldMap)for(const y of this._symbolFields){const g=this.fieldMap[y],v=e.fields.filter(w=>w.name.toLowerCase()===(g==null?void 0:g.toLowerCase()));v.length>0&&h.push({...v[0],type:u?v[0].type:"esriFieldTypeString"})}h.length>0&&(this._fieldIndex=new uX(h));const m=WSe(l,e!=null?e.spatialReference:null,h,p).then(y=>{const g={scale:0};return(v,w)=>{if(y==null)return null;const b=y.repurposeFeature({geometry:null,attributes:v});return g.scale=w!=null?w.scale??void 0:void 0,y.evaluate({$feature:b,$view:g},y.services)}}).catch(y=>(q.getLogger(x8).error("Creating dictinoary expression failed:",y),null));return this._dictionaryPromise=m,m}async _cimPartsToCIMSymbol(e,i,r,n){const s=new Array(e.length);for(let l=0;l<e.length;l++)s[l]=this._getSymbolPart(e[l],n);const o=await Promise.all(s),a=this.fieldMap;if(a)for(const l of o)pX(l,a);return new d_({data:this._combineSymbolParts(o,i,r)})}async _getSymbolPart(e,i){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(s=>s.data);const r=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),n=Ve(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,n);try{return(await n).data}catch(s){throw this._ongoingRequests.delete(e),s}}_combineSymbolParts(e,i,r){if(!e||e.length===0)return null;const n={...e[0]};if(e.length>1){n.symbolLayers=[];for(const s of e){const o=s;n.symbolLayers.unshift(...o.symbolLayers)}}return r&&(n.callout=C2e),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:i}}_getFieldName(e){if(this._fieldIndex!==null){const i=this._fieldIndex.get(e);return i?i.name:e}return e}};function pX(t,e){if(!t)return;const i=t.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const n=i[r];n&&n.enable!==!1&&n.type==="CIMVectorMarker"&&M2e(n,e)}}function M2e(t,e){const i=t.markerGraphics;if(i)for(const r of i){if(!r)continue;const n=r.symbol;if(n)switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":pX(n,e);break;case"CIMTextSymbol":n.fieldMap=e}}}const r7e=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:$F},Symbol.toStringTag,{value:"Module"}));var tP;let Po=tP=class extends L0(Kc){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new $F(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new tP({config:D(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:D(this.fieldMap),url:D(this.url),visualVariables:D(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await dn(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};c([d({type:$F})],Po.prototype,"_loader",null),c([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Po.prototype,"config",void 0),c([d({type:Object,json:{write:!0}})],Po.prototype,"fieldMap",void 0),c([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Po.prototype,"scaleExpression",void 0),c([ee("scaleExpression")],Po.prototype,"writeData",null),c([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Po.prototype,"scaleExpressionTitle",void 0),c([d({type:String,json:{write:!0}})],Po.prototype,"url",void 0),c([ee("visualVariables")],Po.prototype,"writeVisualVariables",null),Po=tP=c([k("esri.renderers.DictionaryRenderer")],Po);const L2e=Po;var iP;let Xl=iP=class extends B{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(q.getLogger(this).error(".field: field must be a string value"),null):X1(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var t;return new iP({color:(t=this.color)==null?void 0:t.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([d({type:le,json:{type:[Number],write:!0}})],Xl.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Xl.prototype,"field",void 0),c([qe("field")],Xl.prototype,"castField",null),c([d({type:String,json:{write:!0}})],Xl.prototype,"label",void 0),c([d({type:String,json:{write:!0}})],Xl.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Xl.prototype,"valueExpressionTitle",void 0),Xl=iP=c([k("esri.renderers.support.AttributeColorInfo")],Xl);const hX=Xl;var rP;let Rx=rP=class extends B{constructor(){super(...arguments),this.unit=null}clone(){return new rP({unit:this.unit})}};c([d({type:String,json:{write:!0}})],Rx.prototype,"unit",void 0),Rx=rP=c([k("esri.renderers.support.DotDensityLegendOptions")],Rx);const O2e=Rx;var nP;let xn=nP=class extends L0(Kc){constructor(t){super(t),this.attributes=null,this.backgroundColor=new le([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new qn,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Yc({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new nP({attributes:D(this.attributes),backgroundColor:D(this.backgroundColor),dotBlendingEnabled:D(this.dotBlendingEnabled),dotShape:D(this.dotShape),dotSize:D(this.dotSize),dotValue:D(this.dotValue),legendOptions:D(this.legendOptions),outline:D(this.outline),referenceScale:D(this.referenceScale),visualVariables:D(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await dn(t,e,i.valueExpression),i.field&&t.add(i.field)}};c([d({type:[hX],json:{write:!0}})],xn.prototype,"attributes",void 0),c([d({type:le,json:{write:!0}})],xn.prototype,"backgroundColor",void 0),c([d({type:Boolean,json:{write:!0}})],xn.prototype,"dotBlendingEnabled",void 0),c([d({type:String,json:{write:!1}})],xn.prototype,"dotShape",void 0),c([d({type:Number,json:{write:!0}})],xn.prototype,"dotSize",void 0),c([d({type:O2e,json:{write:!0}})],xn.prototype,"legendOptions",void 0),c([d({type:qn,json:{default:null,write:!0}})],xn.prototype,"outline",void 0),c([d({type:Number,json:{write:!0}})],xn.prototype,"dotValue",void 0),c([d({type:Number,json:{write:!0}})],xn.prototype,"referenceScale",void 0),c([d({type:Number,json:{write:!0}})],xn.prototype,"seed",void 0),c([he({dotDensity:"dot-density"})],xn.prototype,"type",void 0),xn=nP=c([k("esri.renderers.DotDensityRenderer")],xn);const A2e=xn;var sP;let eb=sP=class extends B{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new sP({color:this.color,ratio:this.ratio})}};c([d({type:le,json:{type:[ft],default:null,write:!0}})],eb.prototype,"color",void 0),c([d({type:Number,json:{write:!0}})],eb.prototype,"ratio",void 0),eb=sP=c([k("esri.renderers.support.HeatmapColorStop")],eb);const ow=eb;let Vm=class extends Je(B){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};c([d({type:String,json:{write:!0}})],Vm.prototype,"minLabel",void 0),c([d({type:String,json:{write:!0}})],Vm.prototype,"maxLabel",void 0),c([d({type:String,json:{write:!0}})],Vm.prototype,"title",void 0),Vm=c([k("esri.renderers.support.HeatmapLegendOptions")],Vm);function aI(){return[0,0,0,0]}function P2e(t){return[t[0],t[1],t[2],t[3]]}function O0(t,e,i,r){return[t,e,i,r]}function R2e(t,e=aI()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function N2e(t,e){return new Float64Array(t,e,4)}function fX(){return aI()}function mX(){return O0(1,1,1,1)}function yX(){return O0(1,0,0,0)}function gX(){return O0(0,1,0,0)}function vX(){return O0(0,0,1,0)}function bX(){return O0(0,0,0,1)}const D2e=fX(),F2e=mX(),j2e=yX(),z2e=gX(),V2e=vX(),U2e=bX();Object.freeze(Object.defineProperty({__proto__:null,ONES:F2e,UNIT_W:U2e,UNIT_X:j2e,UNIT_Y:z2e,UNIT_Z:V2e,ZEROS:D2e,clone:P2e,create:aI,createView:N2e,fromArray:R2e,fromValues:O0,ones:mX,unitW:bX,unitX:yX,unitY:gX,unitZ:vX,zeros:fX},Symbol.toStringTag,{value:"Module"}));const xF=2.4;function B2e(t){return lr(t*xF)}function G2e(t){return _t(t)/xF}function H2e(t,e,i,r){let{color:n,ratio:s}=e,{color:o,ratio:a}=i;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=Es((r-s)/(a-s),0,1);PZ(t,n.toArray(),o.toArray(),l)}function s7e(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),t.length<1)return i;let r=t[0],n=t[0],s=1;const o=aI();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<t.length;)r=n,n=t[s++];H2e(o,r,n,l),i.set(o,4*a)}return i}function o7e(t,e,i,r){const{radius:n,fieldOffset:s,field:o}=e,a=Math.round(_t(n)),l=new Float64Array(i*r);let u,p=Number.NEGATIVE_INFINITY;const h=J2e(o,s),m=new Set;for(const y of t){const g=y.getCursor();for(;g.next();){const v=g.getObjectId();if(m.has(v))continue;m.add(v);const w=g.readLegacyPointGeometry(),b=128;if(w.x<-b||w.x>=i+b||w.y<-b||w.y>r+b)continue;const _=+h(g),S=Math.max(0,Math.round(w.x)-a),$=Math.max(0,Math.round(w.y)-a),T=Math.min(r,Math.round(w.y)+a),I=Math.min(i,Math.round(w.x)+a);for(let C=$;C<T;C++)for(let M=S;M<I;M++){const R=C*i+M,O=W2e(w.x-M,w.y-C,a);u=l[R]+=O*_,u>p&&(p=u)}}}return{matrix:l.buffer,max:p}}function a7e(t,e,i,r,n,s){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const o=t.getImageData(0,0,e,e);i&&r&&o.data.set(new Uint8ClampedArray(q2e(e,i,r,n,s))),t.putImageData(o,0,0)}function q2e(t,e,i,r,n){const s=new Uint32Array(t*t),o="buffer"in e?e:new Float64Array(e),a="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),l=a.length/(n-r);for(let u=0;u<o.length;u++){const p=o[u],h=Math.floor((p-r)*l);s[u]=a[Es(h,0,a.length-1)]}return s.buffer}function W2e(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function l7e(t,e){return typeof t=="function"?t:t?typeof e=="string"?i=>-1*+i[t]:i=>+i[t]+e:()=>1}function J2e(t,e){return t!=null?typeof e=="string"?i=>-1*+i.readAttribute(t):i=>+i.readAttribute(t)+e:i=>1}var oP;const wX="esri.renderers.HeatmapRenderer",Z2e=q.getLogger(wX);function E8(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=t;return a}}return t}let ji=oP=class extends Kc{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new ow({ratio:0,color:new le("rgba(255, 140, 0, 0)")}),new ow({ratio:.75,color:new le("rgba(255, 140, 0, 1)")}),new ow({ratio:.9,color:new le("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return E8(t)}get blurRadius(){return G2e(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",B2e(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(xF**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,e){this._warnedProps[t]||un(this).getDefaultOrigin()==="user"&&(this._warnedProps[t]=!0,v0(()=>{Yw(Z2e,t,{replacement:`${String(e)} (suggested value: ${this._get(e)})`,version:"4.24"})}))}read(t,e){t=E8(t),super.read(t,e)}getSymbol(){return new jn}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&_s(t,e,i),r&&typeof r=="string"&&await dn(t,e,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new oP({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:D(this.colorStops),field:this.field,legendOptions:D(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([d({type:yF,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ji.prototype,"authoringInfo",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ji.prototype,"blurRadius",null),c([d({type:[ow],json:{write:!0}})],ji.prototype,"colorStops",void 0),c([d({type:String,json:{write:!0}})],ji.prototype,"field",void 0),c([d({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],ji.prototype,"fieldOffset",void 0),c([d({type:Vm,json:{write:!0}})],ji.prototype,"legendOptions",void 0),c([d({type:Number,json:{write:!0}})],ji.prototype,"maxDensity",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ji.prototype,"maxPixelIntensity",null),c([d({type:Number,json:{write:!0}})],ji.prototype,"minDensity",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ji.prototype,"minPixelIntensity",null),c([d({type:Number,cast:Ke,json:{write:!0}})],ji.prototype,"radius",void 0),c([d({type:Number,range:{min:0},json:{default:0,write:!0}})],ji.prototype,"referenceScale",void 0),c([he({heatmap:"heatmap"})],ji.prototype,"type",void 0),c([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],ji.prototype,"valueExpression",void 0),c([d({type:String})],ji.prototype,"valueExpressionTitle",void 0),c([d({readOnly:!0})],ji.prototype,"_pixelIntensityToDensity",null),ji=oP=c([k(wX)],ji);const _X=ji;let Lh=class extends Je(B){constructor(){super(...arguments),this.color=new le([0,0,0,0]),this.label=null,this.threshold=0}};c([d({type:le,json:{write:!0}})],Lh.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Lh.prototype,"label",void 0),c([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Lh.prototype,"threshold",void 0),Lh=c([k("esri.renderers.support.OthersCategory")],Lh);let Nx=class extends Je(B){constructor(){super(...arguments),this.title=null}};c([d({type:String,json:{write:!0}})],Nx.prototype,"title",void 0),Nx=c([k("esri.renderers.support.PieChartLegendOptions")],Nx);let Qn=class extends L0(Je(Kc)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new le([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Lh,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new jn({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(An)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,i)=>e+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await dn(e,i,r.valueExpression),r.field&&e.add(r.field)}};c([d({type:[hX],json:{write:!0}})],Qn.prototype,"attributes",void 0),c([d({type:Yc,json:{default:null,write:!0}})],Qn.prototype,"backgroundFillSymbol",void 0),c([d({type:le,json:{write:!0}})],Qn.prototype,"defaultColor",void 0),c([d({type:String,json:{write:!0}})],Qn.prototype,"defaultLabel",void 0),c([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Qn.prototype,"holePercentage",void 0),c([d({type:Lh,json:{write:!0}})],Qn.prototype,"othersCategory",void 0),c([d({type:Nx,json:{write:!0}})],Qn.prototype,"legendOptions",void 0),c([d({type:qn,json:{default:null,write:!0}})],Qn.prototype,"outline",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],Qn.prototype,"size",void 0),c([he({pieChart:"pie-chart"})],Qn.prototype,"type",void 0),Qn=c([k("esri.renderers.PieChartRenderer")],Qn);const Y2e=Qn;var aP;let th=aP=class extends L0(Kc){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new aP({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:D(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};c([d({type:String,json:{write:!0}})],th.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],th.prototype,"label",void 0),c([d(SF)],th.prototype,"symbol",void 0),c([he({simple:"simple"})],th.prototype,"type",void 0),th=aP=c([k("esri.renderers.SimpleRenderer")],th);const lI=th,K2e=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function lP(t){return t instanceof de}function T8(t){return t instanceof ce?Object.keys(t.items):lP(t)?un(t).keys():t?Object.keys(t):[]}function jS(t,e){return t instanceof ce?t.items[e]:t[e]}function Q2e(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function aw(t){return t?t.declaredClass:null}function SX(t,e){var h;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=T8(t),n=T8(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||Q2e(t,e))return{type:"complete",oldValue:t,newValue:e};const s=n.filter(m=>!r.includes(m)),o=r.filter(m=>!n.includes(m)),a=r.filter(m=>n.includes(m)&&jS(t,m)!==jS(e,m)).concat(s,o).sort(),l=aw(t);if(l&&K2e.has(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let u;const p=lP(t)&&lP(e);for(const m of a){const y=jS(t,m),g=jS(e,m);let v;if((p||typeof y!="function"&&typeof g!="function")&&y!==g&&(y!=null||g!=null)){if(i&&i[m]&&typeof i[m]=="function")v=(h=i[m])==null?void 0:h.call(i,y,g);else if(y instanceof Date&&g instanceof Date){if(y.getTime()===g.getTime())continue;v={type:"complete",oldValue:y,newValue:g}}else v=typeof y=="object"&&typeof g=="object"&&aw(y)===aw(g)?SX(y,g):{type:"complete",oldValue:y,newValue:g};v!=null&&(u!=null?u.diff[m]=v:u={type:"partial",diff:{[m]:v}})}}return u}function X2e(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function p7e(t,e){for(const i of e)if(X2e(t,i))return!0;return!1}function eEe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&aw(t)!==aw(e)?{type:"complete",oldValue:t,newValue:e}:SX(t,e)}let Um=class extends Je(B){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};c([d(Lx)],Um.prototype,"value",void 0),c([d(Lx)],Um.prototype,"value2",void 0),c([d(Lx)],Um.prototype,"value3",void 0),Um=c([k("esri.renderers.support.UniqueValue")],Um);const vg=Um;let Mu=class extends Je(B){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new vg({value:r})):i==="object"?e[0]instanceof vg?e:e.map(r=>new vg(r)):null}};c([d({type:String,json:{write:!0}})],Mu.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Mu.prototype,"label",void 0),c([d(sI)],Mu.prototype,"symbol",void 0),c([d({type:[vg],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new vg({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(An).map(s=>s.toString());i.push(n)}e.values=i}}}})],Mu.prototype,"values",void 0),c([qe("values")],Mu.prototype,"castValues",null),Mu=c([k("esri.renderers.support.UniqueValueClass")],Mu);const $X=Mu;let tb=class extends Je(B){constructor(e){super(e),this.heading=null,this.classes=null}};c([d({type:String,json:{write:!0}})],tb.prototype,"heading",void 0),c([d({type:[$X],json:{write:!0}})],tb.prototype,"classes",void 0),tb=c([k("esri.renderers.support.UniqueValueGroup")],tb);const cP=tb;var uP;let ih=uP=class extends B{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new uP({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var e;const t=JSON.stringify((e=this.symbol)==null?void 0:e.toJSON());return`${this.value}.${t}`}};c([d({type:String,json:{write:!0}})],ih.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],ih.prototype,"label",void 0),c([d(SF)],ih.prototype,"symbol",void 0),c([d(Lx)],ih.prototype,"value",void 0),ih=uP=c([k("esri.renderers.support.UniqueValueInfo")],ih);const lw=ih,tEe=()=>!!G("enable-feature:force-wosr"),iEe=()=>G.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),rEe=()=>G.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),nEe=()=>G.add("enable-i3s-patching",!0,!0,!0),sEe=()=>G.add("enable-i3s-patching",!1,!0,!0),y7e=()=>!!G("enable-feature:SceneLayer-editing"),oEe=(t="i3s-patching")=>{switch(sEe(),rEe(),G.add("enable-feature:SceneLayer-editing",!0,!0,!0),t){case"feature-layer-view":iEe();break;case"i3s-patching":nEe()}};oEe("i3s-patching");let aM={};async function aEe(t,e){try{return{data:(await EF(t,e)).data,baseUrl:l5(t),styleUrl:t}}catch(i){return sl(i),null}}function lEe(t,e,i){const r=e.portal!=null?e.portal:gi.getDefault();let n;const s=`${r.url} - ${r.user&&r.user.username} - ${t}`;return aM[s]||(aM[s]=cEe(t,r,i).then(o=>(n=o,o.fetchData())).then(o=>({data:o,baseUrl:n.itemUrl??"",styleName:t}))),aM[s]}function cEe(t,e,i){return e.load(i).then(()=>{const r=new ll({disableExtraQuery:!0,query:`owner:${k8} AND type:${I8} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{var o;let n=null;const s=t.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some(u=>u.toLowerCase()===s))&&a.type===I8&&a.owner===k8){n=a;break}}if(!n)throw new j("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function xX(t,e,i){return(t==null?void 0:t.styleUrl)!=null?aEe(t.styleUrl,i):(t==null?void 0:t.styleName)!=null?lEe(t.styleName,e,i):Promise.reject(new j("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function EX(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function uEe(t,e,i=["gltf"]){if(e==="cimRef")return t.cimRef;if(t.formatInfos&&!tEe())for(const r of i){const n=t.formatInfos.find(s=>s.type===r);if(n)return n.href}return t.webRef}function EF(t,e){const i={responseType:"json",query:{f:"json"},...e};return Ve(xr(t),i)}const k8="esri_en",I8="Style",dEe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var ib;const TX="esri.renderers.UniqueValueRenderer",uu=q.getLogger(TX),C8="uvInfos-watcher",M8="uvGroups-watcher",pEe=",",hEe=ei(lw);function fEe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=t,a=!(!e||!i);return[{classes:(s??[]).map(l=>{var b;const{symbol:u,label:p,value:h,description:m}=l,[y,g,v]=a?((b=h==null?void 0:h.toString())==null?void 0:b.split(n||""))||[]:[h],w=[];return(e||o)&&w.push(y),i&&w.push(g),r&&w.push(v),{symbol:u,label:p,values:[w],description:m}})}]}let Vt=ib=class extends L0(Kc){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=e.find(a=>a.value===i[s].value);o?eEe(o,i[s])?(n.changed.push({type:"complete",oldValue:o,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:o,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<e.length;s++)i.find(o=>o.value===e[s].value)||(n.removed.push(e[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:X1(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r!=null&&r.messages?r.messages.push(new j("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):uu.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||gi.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Yd(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=h_(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?uu.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?uu.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void uu.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?hEe(t):new lw({value:t,symbol:qQ(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void uu.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[t],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(e==null?void 0:e.arcade)==null&&(i={...i,arcade:await Zd()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null?void 0:e.arcade)==null)return void uu.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const n=await Zd(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this._getUniqueValueInfo(t,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((n,s)=>n+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new ib({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:D(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:D(this.visualVariables),legendOptions:D(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:D(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=D(this.uniqueValueInfos),i=D(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(D(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),dn(t,e,this.valueExpression)];_s(t,e,this.field),_s(t,e,this.field2),_s(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return xX(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const n=new Qf({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new lw({value:r.name,symbol:n});e.push(s),this._valueInfoMap[r.name]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",pEe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[e.value+""]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(C8);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(Y(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,C8)}}_watchUniqueValueGroups(){this.removeHandles(M8);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(Y(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(Y(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,M8)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of s)for(const u of l.classes??[]){const{symbol:p,label:h,values:m,description:y}=u;for(const g of m??[]){const{value:v,value2:w,value3:b}=g,_=[v];i&&_.push(w),r&&_.push(b);const S=a?_.join(n||""):_[0];t.push(new lw({symbol:p,label:h,value:S,description:y}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!e&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=s.map(u=>{var b;const{symbol:p,label:h,value:m,description:y}=u,[g,v,w]=o?((b=m==null?void 0:m.toString())==null?void 0:b.split(n||""))||[]:[m];return new $X({symbol:p,label:h,description:y,values:[new vg({value:g,value2:v,value3:w})]})}),l=[new cP({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{};let a=this._cache.compiledFunc;const l=s.arcadeUtils;if(!a){const p=l.createSyntaxTree(this.valueExpression);a=l.createFunction(p),this._cache.compiledFunc=a}const u=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._valueInfoMap[u+""]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(typeof e!="function"&&this.field2){const n=this.field2,s=this.field3,o=[];e&&o.push(i[e]),n&&o.push(i[n]),s&&o.push(i[s]),r=o.join(this.fieldDelimiter||"")}else typeof e=="function"?r=e(t):e&&(r=i[e]);return this._valueInfoMap[r+""]}static fromPortalStyle(t,e){const i=new ib(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",(e==null?void 0:e.portal)||gi.getDefault());const r=i.populateFromStyle();return r.catch(n=>{uu.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(t,e){const i=new ib(e==null?void 0:e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(n=>{uu.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};c([d({readOnly:!0})],Vt.prototype,"_cache",null),c([he({uniqueValue:"unique-value"})],Vt.prototype,"type",void 0),c([d(oX)],Vt.prototype,"backgroundFillSymbol",void 0),c([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Vt.prototype,"field",null),c([qe("field")],Vt.prototype,"castField",null),c([ee("field")],Vt.prototype,"writeField",null),c([d({type:String,value:null,json:{write:!0}})],Vt.prototype,"field2",null),c([d({type:String,value:null,json:{write:!0}})],Vt.prototype,"field3",null),c([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Vt.prototype,"orderByClassesEnabled",void 0),c([d({type:String,value:null,json:{write:!0}})],Vt.prototype,"valueExpression",null),c([d({type:String,json:{write:!0}})],Vt.prototype,"valueExpressionTitle",void 0),c([d({type:gg,json:{write:!0}})],Vt.prototype,"legendOptions",void 0),c([d({type:String,json:{write:!0}})],Vt.prototype,"defaultLabel",void 0),c([d(HD({...sI},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Vt.prototype,"defaultSymbol",null),c([d({type:String,value:null,json:{write:!0}})],Vt.prototype,"fieldDelimiter",null),c([d({type:gi,readOnly:!0})],Vt.prototype,"portal",void 0),c([K("portal",["styleName"])],Vt.prototype,"readPortal",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Vt.prototype,"styleOrigin",void 0),c([K("styleOrigin",["styleName","styleUrl"])],Vt.prototype,"readStyleOrigin",null),c([ee("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Vt.prototype,"writeStyleOrigin",null),c([d({type:[cP],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||fEe(e)).map(r=>cP.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Vt.prototype,"uniqueValueGroups",null),c([d({type:[lw],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Vt.prototype,"uniqueValueInfos",null),Vt=ib=c([k(TX)],Vt);const TF=Vt,cI={key:"type",base:Kc,typeMap:{heatmap:_X,simple:lI,"unique-value":TF,"class-breaks":lX,"dot-density":A2e,dictionary:L2e,"pie-chart":Y2e},errorContext:"renderer"},mEe={key:"type",base:Kc,typeMap:{simple:lI,"unique-value":TF,"class-breaks":lX,heatmap:_X},errorContext:"renderer",validate:yEe};function yEe(t){switch(t.type){case"simple":return gEe(t);case"unique-value":return vEe(t);case"class-breaks":return bEe(t);case"heatmap":return t}}function gEe(t){if(t.symbol)return t;q.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function vEe(t){const e=t.uniqueValueInfos,i=e==null?void 0:e.filter(({symbol:r,label:n},s)=>(r||q.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.uniqueValueInfos=i),t}function bEe(t){const e=t.classBreakInfos,i=e==null?void 0:e.filter(({symbol:r,label:n},s)=>(r||q.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(e==null?void 0:e.length)&&(t.classBreakInfos=i),t}function wEe(t,e){return p1(t,null,e)}const _Ee=b0({types:cI});function p1(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new po("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):_Ee(t,e,i):null}const Zr=(t=>t)(["operational-layers","basemap","ground"]);var dP;let rh=dP=class extends B{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new dP({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],rh.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],rh.prototype,"name",void 0),c([d({type:["boolean","date","number","string"],json:{write:!0}})],rh.prototype,"returnType",void 0),c([d({type:String,json:{write:!0}})],rh.prototype,"title",void 0),rh=dP=c([k("esri.form.ExpressionInfo")],rh);const SEe=rh;let nh=class extends B{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};c([d({type:String,json:{write:!0}})],nh.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],nh.prototype,"label",void 0),c([d()],nh.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],nh.prototype,"visibilityExpression",void 0),nh=c([k("esri.form.elements.Element")],nh);const Jg=nh;var pP;let Dx=pP=class extends B{constructor(t){super(t),this.type=null}clone(){return new pP({type:this.type})}};c([d({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Dx.prototype,"type",void 0),Dx=pP=c([k("esri.form.elements.inputs.AttachmentInput")],Dx);const $Ee=Dx;var hP;let sh=hP=class extends Jg{constructor(t){super(t),this.attachmentKeyword=null,this.editableExpression=null,this.input=null,this.type="attachment"}clone(){return new hP({attachmentKeyword:this.attachmentKeyword,description:this.description,editableExpression:this.editableExpression,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};c([d({type:String,json:{write:!0}})],sh.prototype,"attachmentKeyword",void 0),c([d({type:String,json:{write:!0}})],sh.prototype,"editableExpression",void 0),c([d({type:$Ee,json:{read:{source:"inputType"},write:{target:"inputType"}}})],sh.prototype,"input",void 0),c([d({type:["attachment"],json:{read:!1,write:!0}})],sh.prototype,"type",void 0),sh=hP=c([k("esri.form.elements.AttachmentElement")],sh);const L8=sh;let Fx=class extends B{constructor(e){super(e),this.type=null}};c([d()],Fx.prototype,"type",void 0),Fx=c([k("esri.form.elements.inputs.Input")],Fx);const Qc=Fx;let rb=class extends Qc{constructor(e){super(e),this.maxLength=null,this.minLength=0}};c([d({type:Number,json:{write:!0}})],rb.prototype,"maxLength",void 0),c([d({type:Number,json:{write:!0}})],rb.prototype,"minLength",void 0),rb=c([k("esri.form.elements.inputs.TextInput")],rb);const kF=rb;var fP;let jx=fP=class extends kF{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new fP({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],jx.prototype,"type",void 0),jx=fP=c([k("esri.form.elements.inputs.BarcodeScannerInput")],jx);const xEe=jx;var mP;let Bm=mP=class extends Qc{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new mP({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};c([d({type:String,json:{write:!0}})],Bm.prototype,"noValueOptionLabel",void 0),c([d({type:Boolean,json:{write:!0}})],Bm.prototype,"showNoValueOption",void 0),c([d({type:["combo-box"],json:{read:!1,write:!0}})],Bm.prototype,"type",void 0),Bm=mP=c([k("esri.form.elements.inputs.ComboBoxInput")],Bm);const EEe=Bm;var yP;function O8(t){return t??null}function A8(t){return t??null}let Na=yP=class extends Qc{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return O8(e.max)}writeMax(t,e){e.max=A8(t)}readMin(t,e){return O8(e.min)}writeMin(t,e){e.min=A8(t)}clone(){return new yP({max:this.max,min:this.min})}};c([d({type:String,json:{type:String,write:!0}})],Na.prototype,"max",void 0),c([K("max")],Na.prototype,"readMax",null),c([ee("max")],Na.prototype,"writeMax",null),c([d({type:String,json:{type:String,write:!0}})],Na.prototype,"min",void 0),c([K("min")],Na.prototype,"readMin",null),c([ee("min")],Na.prototype,"writeMin",null),c([d({type:["date-picker"],json:{read:!1,write:!0}})],Na.prototype,"type",void 0),Na=yP=c([k("esri.form.elements.inputs.DatePickerInput")],Na);const TEe=Na;var gP;function lM(t){return t??null}function cM(t){return t??null}let En=gP=class extends Qc{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return lM(e.max)}writeMax(t,e){e.max=cM(t)}readMin(t,e){return lM(e.min)}writeMin(t,e){e.min=cM(t)}readTimeResolution(t,e){return lM(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=cM(t)}clone(){return new gP({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};c([d({type:Boolean,json:{write:!0}})],En.prototype,"includeTimeOffset",void 0),c([d({type:String,json:{type:String,write:!0}})],En.prototype,"max",void 0),c([K("max")],En.prototype,"readMax",null),c([ee("max")],En.prototype,"writeMax",null),c([d({type:String,json:{type:String,write:!0}})],En.prototype,"min",void 0),c([K("min")],En.prototype,"readMin",null),c([ee("min")],En.prototype,"writeMin",null),c([d({type:String,json:{type:String,write:!0}})],En.prototype,"timeResolution",void 0),c([K("timeResolution")],En.prototype,"readTimeResolution",null),c([ee("timeResolution")],En.prototype,"writeTimeResolution",null),c([d({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],En.prototype,"type",void 0),En=gP=c([k("esri.form.elements.inputs.DateTimeOffsetPickerInput")],En);const kEe=En;var vP;function P8(t){return t!=null?new Date(t):null}function R8(t){return t?t.getTime():null}let Ro=vP=class extends Qc{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return P8(e.max)}writeMax(t,e){e.max=R8(t)}readMin(t,e){return P8(e.min)}writeMin(t,e){e.min=R8(t)}clone(){return new vP({includeTime:this.includeTime,max:this.max,min:this.min})}};c([d({type:Boolean,json:{write:!0}})],Ro.prototype,"includeTime",void 0),c([d({type:Date,json:{type:Number,write:!0}})],Ro.prototype,"max",void 0),c([K("max")],Ro.prototype,"readMax",null),c([ee("max")],Ro.prototype,"writeMax",null),c([d({type:Date,json:{type:Number,write:!0}})],Ro.prototype,"min",void 0),c([K("min")],Ro.prototype,"readMin",null),c([ee("min")],Ro.prototype,"writeMin",null),c([d({type:["datetime-picker"],json:{read:!1,write:!0}})],Ro.prototype,"type",void 0),Ro=vP=c([k("esri.form.elements.inputs.DateTimePickerInput")],Ro);const IEe=Ro;var bP;let Gm=bP=class extends Qc{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new bP({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};c([d({type:String,json:{write:!0}})],Gm.prototype,"noValueOptionLabel",void 0),c([d({type:Boolean,json:{write:!0}})],Gm.prototype,"showNoValueOption",void 0),c([d({type:["radio-buttons"],json:{read:!1,write:!0}})],Gm.prototype,"type",void 0),Gm=bP=c([k("esri.form.elements.inputs.RadioButtonsInput")],Gm);const CEe=Gm;var wP;let Hm=wP=class extends Qc{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new wP({offValue:this.offValue,onValue:this.onValue})}};c([d({type:[String,Number],json:{write:!0}})],Hm.prototype,"offValue",void 0),c([d({type:[String,Number],json:{write:!0}})],Hm.prototype,"onValue",void 0),c([d({type:["switch"],json:{read:!1,write:!0}})],Hm.prototype,"type",void 0),Hm=wP=c([k("esri.form.elements.inputs.SwitchInput")],Hm);const MEe=Hm;var _P;let zx=_P=class extends kF{constructor(t){super(t),this.type="text-area"}clone(){return new _P({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["text-area"],json:{read:!1,write:!0}})],zx.prototype,"type",void 0),zx=_P=c([k("esri.form.elements.inputs.TextAreaInput")],zx);const LEe=zx;var SP;let Vx=SP=class extends kF{constructor(t){super(t),this.type="text-box"}clone(){return new SP({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["text-box"],json:{read:!1,write:!0}})],Vx.prototype,"type",void 0),Vx=SP=c([k("esri.form.elements.inputs.TextBoxInput")],Vx);const OEe=Vx;var $P;function uM(t){return t??null}function dM(t){return t??null}let Xn=$P=class extends Qc{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return uM(e.max)}writeMax(t,e){e.max=dM(t)}readMin(t,e){return uM(e.min)}writeMin(t,e){e.min=dM(t)}readTimeResolution(t,e){return uM(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=dM(t)}clone(){return new $P({max:this.max,min:this.min,timeResolution:this.timeResolution})}};c([d({type:String,json:{type:String,write:!0}})],Xn.prototype,"max",void 0),c([K("max")],Xn.prototype,"readMax",null),c([ee("max")],Xn.prototype,"writeMax",null),c([d({type:String,json:{type:String,write:!0}})],Xn.prototype,"min",void 0),c([K("min")],Xn.prototype,"readMin",null),c([ee("min")],Xn.prototype,"writeMin",null),c([d({type:String,json:{type:String,write:!0}})],Xn.prototype,"timeResolution",void 0),c([K("timeResolution")],Xn.prototype,"readTimeResolution",null),c([ee("timeResolution")],Xn.prototype,"writeTimeResolution",null),c([d({type:["time-picker"],json:{read:!1,write:!0}})],Xn.prototype,"type",void 0),Xn=$P=c([k("esri.form.elements.inputs.TimePickerInput")],Xn);const AEe=Xn,PEe={base:Qc,key:"type",typeMap:{"barcode-scanner":xEe,"combo-box":EEe,"date-picker":TEe,"datetime-picker":IEe,"datetimeoffset-picker":kEe,"radio-buttons":CEe,switch:MEe,"text-area":LEe,"text-box":OEe,"time-picker":AEe}};var xP;let nb=xP=class extends B{constructor(t){super(t),this.name=null,this.code=null}clone(){return new xP({name:this.name,code:this.code})}};c([d({type:String,json:{write:!0}})],nb.prototype,"name",void 0),c([d({type:[String,Number],json:{write:!0}})],nb.prototype,"code",void 0),nb=xP=c([k("esri.layers.support.CodedValue")],nb);const REe=new $e({inherited:"inherited",codedValue:"coded-value",range:"range"});let sb=class extends B{constructor(e){super(e),this.name=null,this.type=null}};c([d({type:String,json:{write:!0}})],sb.prototype,"name",void 0),c([he(REe)],sb.prototype,"type",void 0),sb=c([k("esri.layers.support.Domain")],sb);const uI=sb;var EP;let ob=EP=class extends uI{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(r=>(String(r.code)===i&&(e=r.name),!!e))}return e}clone(){return new EP({codedValues:D(this.codedValues),name:this.name})}};c([d({type:[nb],json:{write:!0}})],ob.prototype,"codedValues",void 0),c([he({codedValue:"coded-value"})],ob.prototype,"type",void 0),ob=EP=c([k("esri.layers.support.CodedValueDomain")],ob);const kX=ob;var TP;let Ux=TP=class extends uI{constructor(t){super(t),this.type="inherited"}clone(){return new TP}};c([he({inherited:"inherited"})],Ux.prototype,"type",void 0),Ux=TP=c([k("esri.layers.support.InheritedDomain")],Ux);const IX=Ux;var kP;let qm=kP=class extends uI{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new kP({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};c([d({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],qm.prototype,"maxValue",void 0),c([d({json:{type:[Number],read:{source:"range",reader:(t,e)=>{var i;return(i=e.range)==null?void 0:i[0]}},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],qm.prototype,"minValue",void 0),c([he({range:"range"})],qm.prototype,"type",void 0),qm=kP=c([k("esri.layers.support.RangeDomain")],qm);const CX=qm,MX={key:"type",base:uI,typeMap:{range:CX,"coded-value":kX,inherited:IX}};function dI(t){if(!(t!=null&&t.type))return null;switch(t.type){case"range":return CX.fromJSON(t);case"codedValue":return kX.fromJSON(t);case"inherited":return IX.fromJSON(t)}return null}var IP;const LX="esri.form.elements.FieldElement",N8=q.getLogger(LX);let zs=IP=class extends Jg{constructor(t){super(t),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return Yw(N8,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(t){Yw(N8,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",t)}clone(){return new IP({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};c([d({types:MX,json:{read:{reader:dI},write:!0}})],zs.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],zs.prototype,"editable",null),c([d({type:String,json:{write:!0}})],zs.prototype,"editableExpression",void 0),c([d({type:String,json:{write:!0}})],zs.prototype,"fieldName",void 0),c([d({type:String,json:{write:!0}})],zs.prototype,"hint",void 0),c([d({types:PEe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],zs.prototype,"input",void 0),c([d({type:String,json:{write:!0}})],zs.prototype,"requiredExpression",void 0),c([d({type:String,json:{read:!1,write:!0}})],zs.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],zs.prototype,"valueExpression",void 0),zs=IP=c([k(LX)],zs);const D8=zs;var CP;let ec=CP=class extends Jg{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new CP({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:D(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};c([d({type:Number,json:{write:!0}})],ec.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:!0}})],ec.prototype,"displayType",void 0),c([d({type:String,json:{write:!0}})],ec.prototype,"editableExpression",void 0),c([d({type:[rF],json:{write:!0}})],ec.prototype,"orderByFields",void 0),c([d({type:Number,json:{write:!0}})],ec.prototype,"relationshipId",void 0),c([d({type:["relationship"],json:{read:!1,write:!0}})],ec.prototype,"type",void 0),ec=CP=c([k("esri.form.elements.RelationshipElement")],ec);const F8=ec;function OX(t){return{typesWithGroup:{base:Jg,key:"type",typeMap:{attachment:L8,field:D8,group:t,relationship:F8}},typesWithoutGroup:{base:Jg,key:"type",typeMap:{attachment:L8,field:D8,relationship:F8}}}}function AX(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function PX(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function RX(t,e,i=!0){return t?t.map(r=>bl(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var MP;let el=MP=class extends Jg{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return RX(t,pM,!1)}readElements(t,e){return AX(e.formElements,pM,!1)}writeElements(t,e){e.formElements=PX(t,pM,!1)}clone(){return new MP({description:this.description,elements:D(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};c([d({json:{write:!0}})],el.prototype,"elements",void 0),c([qe("elements")],el.prototype,"castElements",null),c([K("elements",["formElements"])],el.prototype,"readElements",null),c([ee("elements")],el.prototype,"writeElements",null),c([d({type:["collapsed","expanded"],json:{write:!0}})],el.prototype,"initialState",void 0),c([d({type:String,json:{read:!1,write:!0}})],el.prototype,"type",void 0),el=MP=c([k("esri.form.elements.GroupElement")],el);const pM=OX(el),NEe=el;var LP;const hM=OX(NEe);let No=LP=class extends B{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return RX(t,hM)}readElements(t,e){return AX(e.formElements,hM)}writeElements(t,e){e.formElements=PX(t,hM)}clone(){return new LP({description:this.description,expressionInfos:D(this.expressionInfos),elements:D(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};c([d({type:String,json:{write:!0}})],No.prototype,"description",void 0),c([d({json:{write:!0}})],No.prototype,"elements",void 0),c([qe("elements")],No.prototype,"castElements",null),c([K("elements",["formElements"])],No.prototype,"readElements",null),c([ee("elements")],No.prototype,"writeElements",null),c([d({type:[SEe],json:{write:!0}})],No.prototype,"expressionInfos",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],No.prototype,"preserveFieldValuesWhenHidden",void 0),c([d({type:String,json:{write:!0}})],No.prototype,"title",void 0),No=LP=c([k("esri.form.FormTemplate")],No);const DEe=No;let aT=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new e_,this._items=new Set}get length(){return Se(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Se(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Se(this._observable),yield*this._items}};const NX=new FinalizationRegistry(t=>{t.close()});function FEe(t,e){NX.register(t,e,e)}function jEe(t){NX.unregister(t)}const zEe={statsWorker:()=>Z(()=>import("./statsWorker-dvWkaqPz.js"),__vite__mapDeps([19,20,21,22])),geometryEngineWorker:()=>Z(()=>import("./geometryEngineWorker-Lj1lDNuP.js"),__vite__mapDeps([23,24,25,26])),CSVSourceWorker:()=>Z(()=>import("./CSVSourceWorker-OiLkkgMm.js"),__vite__mapDeps([27,28,26,16,18,29,15,17,30,31,32,33,34,11,12,35,21,20,22,14,36])),EdgeProcessingWorker:()=>Z(()=>import("./EdgeProcessingWorker-Hf-D3IJ8.js"),__vite__mapDeps([37,38,39,40,41,42,43,44,45,46])),ElevationSamplerWorker:()=>Z(()=>import("./ElevationSamplerWorker-RsQOVBre.js"),__vite__mapDeps([47,31,48,49,50,51,52,53,54,55,56,39])),FeatureServiceSnappingSourceWorker:()=>Z(()=>import("./FeatureServiceSnappingSourceWorker-Wz5_d2Ip.js"),__vite__mapDeps([57,29,15,16,17,18,30,31,32,33,26,34,11,12,35,21,20,22,58,59,60,4])),GeoJSONSourceWorker:()=>Z(()=>import("./GeoJSONSourceWorker-4bYgRlqB.js"),__vite__mapDeps([61,15,16,17,18,29,30,31,32,33,26,34,11,12,35,21,20,22,62,28,36,63])),LercWorker:()=>Z(()=>import("./LercWorker-E05MAai3.js"),__vite__mapDeps([])),MemorySourceWorker:()=>Z(()=>import("./MemorySourceWorker-SDo09kPs.js"),__vite__mapDeps([64,15,16,17,18,65,29,30,31,32,33,26,34,11,12,35,21,20,22,36,63,28])),PBFDecoderWorker:()=>Z(()=>import("./PBFDecoderWorker-I4s6oCQy.js"),__vite__mapDeps([66,15,16,17,18,58,59])),Pipeline:()=>Z(()=>import("./Pipeline-96Fa9qpB.js"),__vite__mapDeps([67,15,16,17,18,34,11,12,32,33,26,35,21,20,22,68,69,70,71,72,73,74,75,45,46,76,77,62,28,36,60,58,59,78,79])),PointCloudWorker:()=>Z(()=>import("./PointCloudWorker-em_i7MGz.js"),__vite__mapDeps([80,54,49,55,81,82,83,44])),RasterWorker:()=>Z(()=>import("./RasterWorker-IgdA9yPo.js"),__vite__mapDeps([84,85,86,87,88])),SceneLayerSnappingSourceWorker:()=>Z(()=>import("./SceneLayerSnappingSourceWorker-g9E4dF6t.js"),__vite__mapDeps([89,90,91,4,49,50,55,92,41,42,43,38,39,40,44,45,46])),SceneLayerWorker:()=>Z(()=>import("./SceneLayerWorker-D1cBN2EP.js"),__vite__mapDeps([93,52,53,56,91,4,49,50,55])),WFSSourceWorker:()=>Z(()=>import("./WFSSourceWorker-J9DCpEhp.js"),__vite__mapDeps([94,15,16,17,18,29,30,31,32,33,26,34,11,12,35,21,20,22,62,28,63,95,96])),WorkerTileHandler:()=>Z(()=>import("./WorkerTileHandler-99Lm0jqf.js"),__vite__mapDeps([97,98,99,100,101,102,75,59,103,72,104,45,46,105,106]))};var ar;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(ar||(ar={}));let VEe=0;function DX(){return VEe++}function UEe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function h1(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function IF(t,e,i,r){if(e.type===ar.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==ar.INVOKE&&e.type!==ar.RESPONSE)return void t.postMessage(e);let n;if(UEe(i)?(n=j8(i.transferList),e.data=i.result):(n=j8(r),e.data=i),n){if(G("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case ar.INVOKE:throw o;case ar.RESPONSE:return void IF(t,{type:ar.RESPONSE,jobId:e.jobId,error:h1(o)})}}}t.postMessage(e,n)}else t.postMessage(e)}function f1(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function j8(t){if(!(t!=null&&t.length))return null;if(G("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!BEe(i));return e.length?e:null}function BEe(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}const{CLOSE:z8,ABORT:V8,INVOKE:U8,RESPONSE:cv,OPEN_PORT:B8,ON:GEe}=ar,HEe=2;let qEe=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===ar.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Qd=class Wm{static connect(e){const i=new MessageChannel;let r;r=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const n=new Wm(i.port1,{channel:i,client:r});return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=n),Wm.clients.set(n,r),i.port2}static loadWorker(e){const i=zEe[e];return i?i():Promise.resolve(null)}constructor(e,i,r){this._port=e,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new qEe(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:z8}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){const n=r==null?void 0:r.signal,s=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new j("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=DX();return new Promise((a,l)=>{if(pa(n))return this._processWork(),void l(mt());const u=ys(n,()=>{const h=this._outJobs.get(o);h&&(this._outJobs.delete(o),this._processWork(),Xt(h.abortHandle),this._post({type:V8,jobId:o}),l(mt()))}),p={resolve:a,reject:l,abortHandle:u,debugInfo:e};this._outJobs.set(o,p),this._post({type:U8,jobId:o,methodName:e,abortable:n!=null},i,s)})}on(e,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:ar.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),Mt(()=>{r.port1.postMessage({type:ar.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:B8,port:e.port2}),e.port1}_processWork(){var o;if(this._outJobs.size>=HEe)return;const e=(o=this._jobQueue)==null?void 0:o.pop();if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:s}=e;this.invoke(i,r,n).then(a=>s.resolve(a)).catch(a=>s.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Xt(e.abortHandle),e.reject(mt(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=f1(e);if(i)switch(i.type){case cv:this._onResponseMessage(i);break;case U8:this._invokeQueue.push(i);break;case V8:this._onAbortMessage(i);break;case z8:this._onCloseMessage();break;case B8:this._onOpenPortMessage(i);break;case GEe:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Wm.clients.get(this)===e&&e.destroy(),Wm.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,u=this._client,p=u[i];try{if(!p&&i&&i.includes(".")){const h=i.split(".");for(let m=0;m<h.length-1;m++)u=u[h[m]],p=u[h[m+1]]}if(typeof p!="function")throw new TypeError(`${i} is not a function`);l=p.call(u,n,{client:this,signal:o?o.signal:null})}catch(h){return void this._post({type:cv,jobId:r,error:h1(h)})}Zc(l)?(a.set(r,{controller:o,promise:l}),l.then(h=>{a.has(r)&&(a.delete(r),this._post({type:cv,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),hr(h)||this._post({type:cv,jobId:r,error:h1(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:cv,jobId:r},l)}_onOpenPortMessage(e){new Wm(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,s=>{i.postMessage(s)}),n=g0(e.port,"message",s=>{const o=f1(s);(o==null?void 0:o.type)===ar.CLOSE&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),Xt(o.abortHandle),r?o.reject(j.fromJSON(JSON.parse(r))):o.resolve(n)}_post(e,i,r){return IF(this._port,e,i,r)}};Qd.kernelInfo={buildDate:PJ,fullVersion:u5,revision:RJ},Qd.clients=new Map;let WEe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new aT}destroy(){this.close()}get closed(){var e;return!((e=this._clients)!=null&&e.length)}open(e,i){return new Promise((r,n)=>{let s=!0;const o=a=>{kt(i.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];Zc(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new Qd(u,i,this._ongoingJobsQueue),o(r),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new Qd(l,i,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a==null?void 0:a.invoke(e,i,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(mt(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,jEe(this)}invoke(e,i,r){let n;Array.isArray(r)?(q.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:r}):n=r;const s=xs();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:n,resolver:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(l=>l==null?void 0:l.jobAdded())}return s.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>J1(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(i[n]=s.openPort()),--r==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const JEe={async request(t,e){var o,a;const i=t.options,r=i.responseType;i.signal=e==null?void 0:e.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=CJ(t.url))!=null&&o.after)?r:"array-buffer";const n=await Ve(t.url,i),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((a=n.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},ZEe={};function YEe(t){var i;const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:((i=t.packages)==null?void 0:i.concat())||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=ZEe.baseUrl),e}let KEe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},Bx=class{constructor(){this._dispatcher=new KEe,this._workerPostMessage({type:ar.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){gE(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){gE(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=f1(e);if(i&&i.type===ar.OPEN){const{modulePath:r,jobId:n}=i;let s=await Qd.loadWorker(r);s||(s=await Z(()=>import(r),__vite__mapDeps([])));const o=Qd.connect(s);this._workerPostMessage({type:ar.OPENED,jobId:n,data:o})}}};const OP=q.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:QEe}=ar,XEe='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let zS,VS;const G8="Failed to create Worker. Fallback to execute module in main thread";async function eTe(){if(!G("esri-workers"))return H8(new Bx);if(!zS&&!VS)try{const e=XEe.split('"{CONFIGURATION}"').join(`'${tTe()}'`);zS=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){VS=e||{}}let t;if(zS)try{t=new Worker(zS,{name:"esri-worker-"+iTe++})}catch{OP.warn(G8,VS),t=new Bx}else OP.warn(G8,VS),t=new Bx;return H8(t)}async function H8(t){return new Promise(e=>{function i(n){const s=f1(n);s&&s.type===QEe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),OP.warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new Bx).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function tTe(){let t;if(Ze.default!=null){const n={...Ze};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(Ze));t.assetsPath=Ln(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Ln(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Fn(),t.has={"esri-csp-restrictions":G("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":G("esri-2d-update-debug"),"esri-2d-log-updating":G("esri-2d-log-updating"),"featurelayer-pbf":G("featurelayer-pbf"),"featurelayer-simplify-thresholds":G("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":G("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":G("featurelayer-simplify-mobile-factor"),"esri-atomics":G("esri-atomics"),"esri-shared-array-buffer":G("esri-shared-array-buffer"),"esri-tiles-debug":G("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":G("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":G("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Ln(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Ln(t.workers.workerPath):t.workers.workerPath=Ln(it("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=Ze.workers.loaderConfig,i=YEe({baseUrl:e==null?void 0:e.baseUrl,locale:Fn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:PJ,fullVersion:u5,revision:RJ}})}let iTe=0;const{ABORT:q8,INVOKE:rTe,OPEN:nTe,OPENED:sTe,RESPONSE:uv}=ar;let oTe=class FX{static async create(e){const i=await eTe();return new FX(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),q.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=DX();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:JD(r,()=>{this._outJobs.delete(n),this._post({type:q8,jobId:n})})};this._outJobs.set(n,a),this._post({type:nTe,jobId:n,modulePath:e})})}_onMessage(e){const i=f1(e);if(i)switch(i.type){case sTe:this._onOpenedMessage(i);break;case uv:this._onResponseMessage(i);break;case q8:this._onAbortMessage(i);break;case rTe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=JEe[i];let u;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);u=l.call(null,n,{signal:o?o.signal:null})}catch(p){return void this._post({type:uv,jobId:r,error:h1(p)})}Zc(u)?(a.set(r,{controller:o,promise:u}),u.then(p=>{a.has(r)&&(a.delete(r),this._post({type:uv,jobId:r},p))},p=>{a.has(r)&&(a.delete(r),p||(p={message:"Error encountered at method"+i}),hr(p)||this._post({type:uv,jobId:r,error:h1(p||{message:`Error encountered at method ${i}`})}))})):this._post({type:uv,jobId:r},u)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Xt(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Xt(s.abortHandle),r?s.reject(j.fromJSON(JSON.parse(r))):s.resolve(n))}_post(e,i,r){return IF(this.worker,e,i,r)}};const W8=G("host-browser")?Math.min(navigator.hardwareConcurrency-1,G("workers-pool-size")):0;let Bh=G("esri-mobile")?Math.min(W8,3):W8;Bh||(Bh=G("safari")&&G("mac")?7:2);let J8=0;const Gx=[];function aTe(){jX()}async function US(t,e){const i=new WEe,{registryTarget:r,...n}=e;return await i.open(t,n),r&&FEe(r,i),i}async function lTe(t,e={}){if(typeof t!="string")throw new j("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(G("host-webworker")&&!G("esri-workers")&&(i="local"),i==="local"){let r=await Qd.loadWorker(t);r||(r=await Z(()=>import(t),__vite__mapDeps([]))),kt(e.signal);const n=e.client||r;return US([Qd.connect(r)],{...e,client:n})}if(await jX(),kt(e.signal),i==="dedicated"){const r=J8++%Bh;return US([await Gx[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Bh);if(r<Bh){const n=new Array(r);for(let s=0;s<r;++s){const o=J8++%Bh;n[s]=Gx[o].open(t,e)}return US(n,e)}}return US(Gx.map(r=>r.open(t,e)),e)}let BS=null;async function jX(){if(BS)return BS;new AbortController;const t=[];for(let e=0;e<Bh;e++){const i=oTe.create(e).then(r=>(Gx[e]=r,r));t.push(i)}return BS=Promise.all(t),BS}function Z8(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function cTe(t,e,i){if(!t&&!e||!i)return;const r=jE(i);Y8(t,i,r),Y8(e,i,r)}function Y8(t,e,i){if(t)for(const r of t)uTe(r.geometry,e,i)}function uTe(t,e,i){if(!(t!=null&&t.spatialReference)||ti(t.spatialReference,e))return;const r=jE(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)Z8(t,t.rings,r);else if("paths"in t)Z8(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}function zX(t,e,i){if(e==null||i==null||i.vcsWkid||ti(e,i)||Jd(e)||Jd(i))return null;const r=jE(e)/jE(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>dTe(n,r);case"polyline":case"esriGeometryPolyline":return n=>hTe(n,r);case"polygon":case"esriGeometryPolygon":return n=>pTe(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>fTe(n,r);case"extent":case"esriGeometryEnvelope":return n=>mTe(n,r);default:return null}}function dTe(t,e){(t==null?void 0:t.z)!=null&&(t.z*=e)}function pTe(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function hTe(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function fTe(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function mTe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}function K8(t,e,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=zX(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}const CF=new $e({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var AP;const yTe=new $e({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Fr=AP=class extends B{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?yTe.fromJSON(i.fieldValueType):null}clone(){return new AP({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};c([d({type:String,json:{write:!0}})],Fr.prototype,"alias",void 0),c([d({type:[String,Number],json:{write:{allowNull:!0}}})],Fr.prototype,"defaultValue",void 0),c([d()],Fr.prototype,"description",void 0),c([K("description")],Fr.prototype,"readDescription",null),c([d({types:MX,json:{read:{reader:dI},write:!0}})],Fr.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],Fr.prototype,"editable",void 0),c([d({type:ft,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Fr.prototype,"length",void 0),c([d({type:String,json:{write:!0}})],Fr.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],Fr.prototype,"nullable",void 0),c([he(CF)],Fr.prototype,"type",void 0),c([d()],Fr.prototype,"valueType",void 0),c([K("valueType",["description"])],Fr.prototype,"readValueType",null),c([d({type:Boolean,json:{read:!1}})],Fr.prototype,"visible",void 0),Fr=AP=c([k("esri.layers.support.Field")],Fr);const m1=Fr;var PP;const RP=new $e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let ir=PP=class extends B{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){var n;const i=Ee.fromJSON(e.spatialReference),r=[];for(let s=0;s<t.length;s++){const o=t[s],a=Vc.fromJSON(o),l=(n=o.geometry)==null?void 0:n.spatialReference;a.geometry==null||l||(a.geometry.spatialReference=i);const u=o.aggregateGeometries,p=a.aggregateGeometries;if(u&&p!=null)for(const h in p){const m=p[h],y=u[h],g=y==null?void 0:y.spatialReference;m==null||g||(m.spatialReference=i)}r.push(a)}return r}writeGeometryType(t,e,i,r){if(t)return void RP.write(t,e,i,r);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void RP.write(s.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=_l(t);return r&&!i&&e.spatialReference&&(r.spatialReference=Ee.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new PP(this.cloneProperties())}cloneProperties(){return D({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t==null?void 0:t[i];r.geometry=(n==null?void 0:n.toJSON())||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,s=u=>Math.round((u-r)/e),o=u=>Math.round((n-u)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let u=0,p=a.length;u<p;u++)l!=null&&l(a[u].geometry)||(a.splice(u,1),u--,p--);return this.transform=t,this}unquantize(){var m,y;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i,a=g=>g*s+r,l=g=>n-g*o;let u=null,p=null;if(this.hasZ&&((m=i==null?void 0:i.scale)==null?void 0:m[2])!=null){const{translate:[,,g],scale:[,,v]}=i;u=w=>w*v+g}if(this.hasM&&((y=i==null?void 0:i.scale)==null?void 0:y[3])!=null){const{translate:[,,,g],scale:[,,,v]}=i;p=w=>w==null?w:w*v+g}const h=this._getHydrationFunction(t,a,l,u,p);for(const{geometry:g}of e)g!=null&&h&&h(g);return this.transform=null,this}_quantizePoints(t,e,i){let r,n;const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const u=e(l[0]),p=i(l[1]);u===r&&p===n||(s.push([u-r,p-n]),r=u,n=p)}else r=e(l[0]),n=i(l[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=fg(r)?r.rings:r.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],u=this._quantizePoints(l,e,i);u&&s.push(u)}return s.length>0?(fg(r)?r.rings=s:r.paths=s,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?s=>{s.x=e(s.x),s.y=i(s.y),r&&(s.z=r(s.z))}:t==="polyline"||t==="polygon"?s=>{const o=fg(s)?s.rings:s.paths;let a,l;for(let u=0,p=o.length;u<p;u++){const h=o[u];for(let m=0,y=h.length;m<y;m++){const g=h[m];m>0?(a+=g[0],l+=g[1]):(a=g[0],l=g[1]),g[0]=e(a),g[1]=i(l)}}if(r&&n)for(let u=0,p=o.length;u<p;u++){const h=o[u];for(let m=0,y=h.length;m<y;m++){const g=h[m];g[2]=r(g[2]),g[3]=n(g[3])}}else if(r)for(let u=0,p=o.length;u<p;u++){const h=o[u];for(let m=0,y=h.length;m<y;m++){const g=h[m];g[2]=r(g[2])}}else if(n)for(let u=0,p=o.length;u<p;u++){const h=o[u];for(let m=0,y=h.length;m<y;m++){const g=h[m];g[2]=n(g[2])}}}:t==="extent"?s=>{s.xmin=e(s.xmin),s.ymin=i(s.ymin),s.xmax=e(s.xmax),s.ymax=i(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:t==="multipoint"?s=>{const o=s.points;let a,l;for(let u=0,p=o.length;u<p;u++){const h=o[u];u>0?(a+=h[0],l+=h[1]):(a=h[0],l=h[1]),h[0]=e(a),h[1]=i(l)}if(r&&n)for(let u=0,p=o.length;u<p;u++){const h=o[u];h[2]=r(h[2]),h[3]=n(h[3])}else if(r)for(let u=0,p=o.length;u<p;u++){const h=o[u];h[2]=r(h[2])}else if(n)for(let u=0,p=o.length;u<p;u++){const h=o[u];h[2]=n(h[2])}}:null}};c([d({type:String,json:{write:!0}})],ir.prototype,"displayFieldName",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ir.prototype,"exceededTransferLimit",void 0),c([d({type:[Vc],json:{write:!0}})],ir.prototype,"features",void 0),c([K("features")],ir.prototype,"readFeatures",null),c([d({type:[m1],json:{write:!0}})],ir.prototype,"fields",void 0),c([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:RP.read}}})],ir.prototype,"geometryType",void 0),c([ee("geometryType")],ir.prototype,"writeGeometryType",null),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ir.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ir.prototype,"hasZ",void 0),c([d({types:cp,json:{write:!0}})],ir.prototype,"queryGeometry",void 0),c([K("queryGeometry")],ir.prototype,"readQueryGeometry",null),c([d({type:Ee,json:{write:!0}})],ir.prototype,"spatialReference",void 0),c([ee("spatialReference")],ir.prototype,"writeSpatialReference",null),c([d({json:{write:!0}})],ir.prototype,"transform",void 0),ir=PP=c([k("esri.rest.support.FeatureSet")],ir),ir.prototype.toJSON.isDefaultToJSON=!0;const y1=ir;let gTe=0,gc=class extends Jr.LoadableMixin(S0(ce)){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);K8(e,this.layer.spatialReference,r);const n=y1.fromJSON(r);if(!this._requiresClientGraphicMapping())return n;const s=this.layer.objectIdField;for(const o of n.features){const a=o.attributes[s],l=this._idToClientGraphic.get(a);l&&(o.geometry=l.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new j("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return K8(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:ct.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new j("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=p=>"objectId"in p&&p.objectId!=null?p.objectId:"attributes"in p&&p.attributes[i]!=null?p.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const p of e.deleteFeatures){const h=o(p);h!=null&&n.push(h)}const a=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const p of e.updateFeatures)if(s.push(this._serializeFeature(p)),a){const h=o(p);h!=null&&a.set(h,p)}}cTe(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=l,r&&r.finish(u.uidToObjectId),this._updateClientGraphicIds(a,u),this._createEditsResult(u)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new j("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);n||a.geometry==null||(n=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const s=this;return{features:r,inferredGeometryType:n,finish(o){const a=s.sourceJSON.objectIdField;for(const l in o){const u=o[l],p=i.get(l);p&&(p.attributes||(p.attributes={}),u===-1?delete p.attributes[a]:p.attributes[a]=u,s._addIdToClientGraphic(p))}}}}_addIdToClientGraphic(e){var n;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=(n=e.attributes)==null?void 0:n[i];r!=null&&this._idToClientGraphic.set(r,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(gTe++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?ha.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await lTe("MemorySourceWorker",{strategy:G("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,u=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const p=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{q.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const h={features:p.features,fields:i==null?void 0:i.map(g=>g.toJSON()),geometryType:fV.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:u?null:r&&r.toJSON(),timeInfo:(a==null?void 0:a.toJSON())??null,dateFieldsTimeZone:l},m=await this._connection.invoke("load",h,{signal:e});for(const g of m.warnings)q.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});m.featureErrors.length&&q.getLogger(this.layer).warn("#load()",`Encountered ${m.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:m.featureErrors});const y=m.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(p.inferredGeometryType)&&(y.geometryType=fV.toJSON(p.inferredGeometryType)),this.sourceJSON=y,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),p.finish(m.assignedObjectIds)}};c([h5({Type:Vc,ensureType:ei(Vc)})],gc.prototype,"itemType",void 0),c([d()],gc.prototype,"type",void 0),c([d({constructOnly:!0})],gc.prototype,"layer",void 0),c([d({readOnly:!0})],gc.prototype,"_workerGeometryType",null),c([d()],gc.prototype,"sourceJSON",void 0),gc=c([k("esri.layers.graphics.sources.MemorySource")],gc);function vTe(t){return"portalItem"in t}const bTe=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):vTe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return c([d({type:String})],e.prototype,"apiKey",null),e=c([k("esri.layers.mixins.APIKeyMixin")],e),e},VX={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},UX=Object.values(VX),BX=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${UX.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),wTe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${UX.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),_Te=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function k7e(t){return!!BX.test(t)}function Xd(t){if(t==null)return null;const e=mi(t),i=(e==null?void 0:e.path.match(BX))||(e==null?void 0:e.path.match(wTe));if(!i)return null;const[,r,n,s,o]=i,a=n.indexOf("/");return{title:MF(a!==-1?n.slice(a+1):n),serverType:VX[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function STe(t){const e=mi(t).path.match(_Te);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function MF(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function $Te(t,e){const i=[];if(t){const r=Xd(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=MF(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function GX(t){if(!t)return!1;const e=".arcgis.com/",i="//services",r="//tiles",n="//features",s=(t=t.toLowerCase()).includes(e),o=t.includes(i)||t.includes(r)||t.includes(n);return s&&o}function xTe(t,e){return t&&LJ(OJ(t,e))}function ETe(t){let{url:e}=t;if(!e)return{url:e};e=OJ(e,t.logger);const i=mi(e),r=Xd(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=STe(i.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:LJ(e),layerId:n}}function TTe(t,e,i,r,n){Mf(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=Vg(r.url,i,t.layerId.toString()))}function I7e(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(r||n||s)}function C7e(t){var r;if(!t)return!1;const e=new Pd(Ln(t)),i=(r=e.authority)==null?void 0:r.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const kTe=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Xd(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",xTe(i,q.getLogger(this)))}};return c([d()],e.prototype,"title",null),c([d({type:String})],e.prototype,"url",null),e=c([k("esri.layers.mixins.ArcGISService")],e),e};var M7e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ITe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q8,X8,NP={exports:{}};NP.exports,X8=function(){function t(n,s){function o(){this.constructor=n}o.prototype=s.prototype,n.prototype=new o}function e(n,s,o,a){var l=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(l,e.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function i(n,s,o){return o=o||" ",n.length>s?n:(s-=n.length,n+(o+=o.repeat(s)).slice(0,s))}function r(n,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,u={start:K4},p=K4,h="none",m=")",y=",",g="(",v="%",w="px",b="cm",_="mm",S="in",$="pt",T="pc",I="deg",C="rad",M="grad",R="turn",O="#",F=".",A="e",P=/^[ \t\n\r]/,V=/^[a-z\-]/,te=/^[0-9a-fA-F]/,re=/^[+\-]/,Q=/^[0-9]/,H=Ol("none"),ne=Ki("none",!1),fe=Ki(")",!1),Fe=Ki(",",!1),Be=Ol("whitespace"),yt=z0([" ","	",`
`,"\r"],!1,!1),$t=Ol("function"),ii=Ki("(",!1),Nt=Ol("identifier"),Dt=z0([["a","z"],"-"],!1,!1),mr=Ol("percentage"),Tr=Ki("%",!1),NI=Ol("length"),N0=Ki("px",!1),DI=Ki("cm",!1),R_=Ki("mm",!1),FI=Ki("in",!1),jI=Ki("pt",!1),N_=Ki("pc",!1),D_=Ol("angle"),zI=Ki("deg",!1),VI=Ki("rad",!1),Ll=Ki("grad",!1),tm=Ki("turn",!1),F_=Ol("number"),j_=Ol("color"),D0=Ki("#",!1),F0=z0([["0","9"],["a","f"],["A","F"]],!1,!1),j0=z0(["+","-"],!1,!1),go=z0([["0","9"]],!1,!1),z_=Ki(".",!1),Qse=Ki("e",!1),Xse=function(){return[]},eoe=function(L,W){return{type:"function",name:L,parameters:W||[]}},toe=function(L,W){return W.length>0?Poe(L,W,3):[L]},ioe=function(L){return{type:"quantity",value:L.value,unit:L.unit}},roe=function(L){return{type:"color",colorType:L.type,value:L.value}},noe=function(L){return L},soe=function(){return U_()},ooe=function(L){return{value:L,unit:"%"}},aoe=function(L){return{value:L,unit:"px"}},loe=function(L){return{value:L,unit:"cm"}},coe=function(L){return{value:L,unit:"mm"}},uoe=function(L){return{value:L,unit:"in"}},doe=function(L){return{value:L,unit:"pt"}},poe=function(L){return{value:L,unit:"pc"}},hoe=function(L){return{value:L,unit:"deg"}},foe=function(L){return{value:L,unit:"rad"}},moe=function(L){return{value:L,unit:"grad"}},yoe=function(L){return{value:L,unit:"turn"}},goe=function(L){return{value:L,unit:null}},voe=function(){return{type:"hex",value:U_()}},boe=function(L){return{type:"function",value:L}},woe=function(){return{type:"named",value:U_()}},_oe=function(){return parseFloat(U_())},U=0,qt=0,V_=[{line:1,column:1}],va=0,UI=[],ge=0;if("startRule"in s){if(!(s.startRule in u))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');p=u[s.startRule]}function U_(){return n.substring(qt,U)}function Ki(L,W){return{type:"literal",text:L,ignoreCase:W}}function z0(L,W,X){return{type:"class",parts:L,inverted:W,ignoreCase:X}}function Soe(){return{type:"end"}}function Ol(L){return{type:"other",description:L}}function Z4(L){var W,X=V_[L];if(X)return X;for(W=L-1;!V_[W];)W--;for(X={line:(X=V_[W]).line,column:X.column};W<L;)n.charCodeAt(W)===10?(X.line++,X.column=1):X.column++,W++;return V_[L]=X,X}function Y4(L,W,X){var Ge=Z4(L),$i=Z4(W),gt={source:l,start:{offset:L,line:Ge.line,column:Ge.column},end:{offset:W,line:$i.line,column:$i.column}};return X&&l&&typeof l.offset=="function"&&(gt.start=l.offset(gt.start),gt.end=l.offset(gt.end)),gt}function je(L){U<va||(U>va&&(va=U,UI=[]),UI.push(L))}function $oe(L,W,X){return new e(e.buildMessage(L,W),L,W,X)}function K4(){var L;return(L=xoe())===a&&(L=Eoe()),L}function xoe(){var L,W;return ge++,L=U,Qi(),n.substr(U,4)===h?(W=h,U+=4):(W=a,ge===0&&je(ne)),W!==a?(Qi(),qt=L,L=Xse()):(U=L,L=a),ge--,L===a&&ge===0&&je(H),L}function Eoe(){var L,W;if(L=[],(W=BI())!==a)for(;W!==a;)L.push(W),W=BI();else L=a;return L}function BI(){var L,W,X,Ge;return L=U,Qi(),(W=koe())!==a?(Qi(),(X=Toe())===a&&(X=null),Qi(),n.charCodeAt(U)===41?(Ge=m,U++):(Ge=a,ge===0&&je(fe)),Ge!==a?(Qi(),qt=L,L=eoe(W,X)):(U=L,L=a)):(U=L,L=a),L}function Toe(){var L,W,X,Ge,$i,gt,Os,B_;if(L=U,(W=GI())!==a){for(X=[],Ge=U,$i=Qi(),n.charCodeAt(U)===44?(gt=y,U++):(gt=a,ge===0&&je(Fe)),gt===a&&(gt=null),Os=Qi(),(B_=GI())!==a?Ge=$i=[$i,gt,Os,B_]:(U=Ge,Ge=a);Ge!==a;)X.push(Ge),Ge=U,$i=Qi(),n.charCodeAt(U)===44?(gt=y,U++):(gt=a,ge===0&&je(Fe)),gt===a&&(gt=null),Os=Qi(),(B_=GI())!==a?Ge=$i=[$i,gt,Os,B_]:(U=Ge,Ge=a);qt=L,L=toe(W,X)}else U=L,L=a;return L}function GI(){var L,W;return L=U,(W=Ioe())===a&&(W=Coe())===a&&(W=Moe())===a&&(W=Loe()),W!==a&&(qt=L,W=ioe(W)),(L=W)===a&&(L=U,(W=Ooe())!==a&&(qt=L,W=roe(W)),L=W),L}function Qi(){var L,W;for(ge++,L=[],P.test(n.charAt(U))?(W=n.charAt(U),U++):(W=a,ge===0&&je(yt));W!==a;)L.push(W),P.test(n.charAt(U))?(W=n.charAt(U),U++):(W=a,ge===0&&je(yt));return ge--,W=a,ge===0&&je(Be),L}function koe(){var L,W,X;return ge++,L=U,(W=Q4())!==a?(n.charCodeAt(U)===40?(X=g,U++):(X=a,ge===0&&je(ii)),X!==a?(qt=L,L=noe(W)):(U=L,L=a)):(U=L,L=a),ge--,L===a&&(W=a,ge===0&&je($t)),L}function Q4(){var L,W,X;if(ge++,L=U,W=[],V.test(n.charAt(U))?(X=n.charAt(U),U++):(X=a,ge===0&&je(Dt)),X!==a)for(;X!==a;)W.push(X),V.test(n.charAt(U))?(X=n.charAt(U),U++):(X=a,ge===0&&je(Dt));else W=a;return W!==a&&(qt=L,W=soe()),ge--,(L=W)===a&&(W=a,ge===0&&je(Nt)),L}function Ioe(){var L,W,X;return ge++,L=U,Qi(),(W=Ls())!==a?(n.charCodeAt(U)===37?(X=v,U++):(X=a,ge===0&&je(Tr)),X!==a?(qt=L,L=ooe(W)):(U=L,L=a)):(U=L,L=a),ge--,L===a&&ge===0&&je(mr),L}function Coe(){var L,W,X;return ge++,L=U,Qi(),(W=Ls())!==a?(n.substr(U,2)===w?(X=w,U+=2):(X=a,ge===0&&je(N0)),X!==a?(qt=L,L=aoe(W)):(U=L,L=a)):(U=L,L=a),L===a&&(L=U,Qi(),(W=Ls())!==a?(n.substr(U,2)===b?(X=b,U+=2):(X=a,ge===0&&je(DI)),X!==a?(qt=L,L=loe(W)):(U=L,L=a)):(U=L,L=a),L===a&&(L=U,Qi(),(W=Ls())!==a?(n.substr(U,2)===_?(X=_,U+=2):(X=a,ge===0&&je(R_)),X!==a?(qt=L,L=coe(W)):(U=L,L=a)):(U=L,L=a),L===a&&(L=U,Qi(),(W=Ls())!==a?(n.substr(U,2)===S?(X=S,U+=2):(X=a,ge===0&&je(FI)),X!==a?(qt=L,L=uoe(W)):(U=L,L=a)):(U=L,L=a),L===a&&(L=U,Qi(),(W=Ls())!==a?(n.substr(U,2)===$?(X=$,U+=2):(X=a,ge===0&&je(jI)),X!==a?(qt=L,L=doe(W)):(U=L,L=a)):(U=L,L=a),L===a&&(L=U,Qi(),(W=Ls())!==a?(n.substr(U,2)===T?(X=T,U+=2):(X=a,ge===0&&je(N_)),X!==a?(qt=L,L=poe(W)):(U=L,L=a)):(U=L,L=a)))))),ge--,L===a&&ge===0&&je(NI),L}function Moe(){var L,W,X;return ge++,L=U,(W=Ls())!==a?(n.substr(U,3)===I?(X=I,U+=3):(X=a,ge===0&&je(zI)),X!==a?(qt=L,L=hoe(W)):(U=L,L=a)):(U=L,L=a),L===a&&(L=U,(W=Ls())!==a?(n.substr(U,3)===C?(X=C,U+=3):(X=a,ge===0&&je(VI)),X!==a?(qt=L,L=foe(W)):(U=L,L=a)):(U=L,L=a),L===a&&(L=U,(W=Ls())!==a?(n.substr(U,4)===M?(X=M,U+=4):(X=a,ge===0&&je(Ll)),X!==a?(qt=L,L=moe(W)):(U=L,L=a)):(U=L,L=a),L===a&&(L=U,(W=Ls())!==a?(n.substr(U,4)===R?(X=R,U+=4):(X=a,ge===0&&je(tm)),X!==a?(qt=L,L=yoe(W)):(U=L,L=a)):(U=L,L=a)))),ge--,L===a&&(W=a,ge===0&&je(D_)),L}function Loe(){var L,W;return ge++,L=U,Qi(),(W=Ls())!==a?(qt=L,L=goe(W)):(U=L,L=a),ge--,L===a&&ge===0&&je(F_),L}function Ooe(){var L,W,X,Ge;if(ge++,L=U,n.charCodeAt(U)===35?(W=O,U++):(W=a,ge===0&&je(D0)),W!==a){if(X=[],te.test(n.charAt(U))?(Ge=n.charAt(U),U++):(Ge=a,ge===0&&je(F0)),Ge!==a)for(;Ge!==a;)X.push(Ge),te.test(n.charAt(U))?(Ge=n.charAt(U),U++):(Ge=a,ge===0&&je(F0));else X=a;X!==a?(qt=L,L=voe()):(U=L,L=a)}else U=L,L=a;return L===a&&(L=U,(W=BI())!==a&&(qt=L,W=boe(W)),(L=W)===a&&(L=U,(W=Q4())!==a&&(qt=L,W=woe()),L=W)),ge--,L===a&&(W=a,ge===0&&je(j_)),L}function Ls(){var L,W,X,Ge,$i,gt,Os;for(L=U,re.test(n.charAt(U))?(n.charAt(U),U++):ge===0&&je(j0),W=U,X=[],Q.test(n.charAt(U))?(Ge=n.charAt(U),U++):(Ge=a,ge===0&&je(go));Ge!==a;)X.push(Ge),Q.test(n.charAt(U))?(Ge=n.charAt(U),U++):(Ge=a,ge===0&&je(go));if(n.charCodeAt(U)===46?(Ge=F,U++):(Ge=a,ge===0&&je(z_)),Ge!==a){if($i=[],Q.test(n.charAt(U))?(gt=n.charAt(U),U++):(gt=a,ge===0&&je(go)),gt!==a)for(;gt!==a;)$i.push(gt),Q.test(n.charAt(U))?(gt=n.charAt(U),U++):(gt=a,ge===0&&je(go));else $i=a;$i!==a?W=X=[X,Ge,$i]:(U=W,W=a)}else U=W,W=a;if(W===a)if(W=[],Q.test(n.charAt(U))?(X=n.charAt(U),U++):(X=a,ge===0&&je(go)),X!==a)for(;X!==a;)W.push(X),Q.test(n.charAt(U))?(X=n.charAt(U),U++):(X=a,ge===0&&je(go));else W=a;if(W!==a){if(X=U,n.charCodeAt(U)===101?(Ge=A,U++):(Ge=a,ge===0&&je(Qse)),Ge!==a){if(re.test(n.charAt(U))?($i=n.charAt(U),U++):($i=a,ge===0&&je(j0)),$i===a&&($i=null),gt=[],Q.test(n.charAt(U))?(Os=n.charAt(U),U++):(Os=a,ge===0&&je(go)),Os!==a)for(;Os!==a;)gt.push(Os),Q.test(n.charAt(U))?(Os=n.charAt(U),U++):(Os=a,ge===0&&je(go));else gt=a;gt!==a?X=Ge=[Ge,$i,gt]:(U=X,X=a)}else U=X,X=a;X===a&&(X=null),qt=L,L=_oe()}else U=L,L=a;return L}function Aoe(L,W){return L.map(function(X){return X[W]})}function Poe(L,W,X){return[L].concat(Aoe(W,X))}if((o=p())!==a&&U===n.length)return o;throw o!==a&&U<n.length&&je(Soe()),$oe(UI,va<n.length?n.charAt(va):null,va<n.length?Y4(va,va+1):Y4(va,va))}return t(e,Error),e.prototype.format=function(n){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){a=n[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,p=this.location.source+":"+u.line+":"+u.column;if(a){var h=this.location.end,m=i("",u.line.toString().length," "),y=a[l.line-1],g=(l.line===h.line?h.column:y.length+1)-l.column||1;s+=`
 --> `+p+`
`+m+` |
`+u.line+" | "+y+`
`+m+" | "+i("",l.column-1," ")+i("",g,"^")}else s+=`
 at `+p}return s},e.buildMessage=function(n,s){var o={literal:function(y){return'"'+l(y.text)+'"'},class:function(y){var g=y.parts.map(function(v){return Array.isArray(v)?u(v[0])+"-"+u(v[1]):u(v)});return"["+(y.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(y){return y.description}};function a(y){return y.charCodeAt(0).toString(16).toUpperCase()}function l(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function u(y){return y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function p(y){return o[y.type](y)}function h(y){var g,v,w=y.map(p);if(w.sort(),w.length>0){for(g=1,v=1;g<w.length;g++)w[g-1]!==w[g]&&(w[v]=w[g],v++);w.length=v}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}function m(y){return y?'"'+l(y)+'"':"end of input"}return"Expected "+h(n)+" but "+m(s)+" found."},{SyntaxError:e,parse:r}},(Q8=NP).exports&&(Q8.exports=X8());var CTe=NP.exports;function LF(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=eU(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new j("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:eU(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!nY(e[i].effects,e[i+1].effects))throw new j("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});sY(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function eU(t){let e;if(!t)return[];try{e=CTe.parse(t)}catch(i){throw new j("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>MTe(i))}function MTe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return LTe(t);case"opacity":return OTe(t);case"hue-rotate":return ATe(t);case"blur":return PTe(t);case"drop-shadow":return RTe(t);case"bloom":return NTe(t)}}catch(e){throw e.details.filter=t,e}throw new j("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function LTe(t){let e=1;return A0(t.parameters,1),t.parameters.length===1&&(e=Ko(t.parameters[0])),new mA(t.name,e)}function OTe(t){let e=1;return A0(t.parameters,1),t.parameters.length===1&&(e=Ko(t.parameters[0])),new iY(e)}function ATe(t){let e=0;return A0(t.parameters,1),t.parameters.length===1&&(e=UTe(t.parameters[0])),new eY(e)}function PTe(t){let e=0;return A0(t.parameters,1),t.parameters.length===1&&(e=PF(t.parameters[0]),b_(e,t.parameters[0])),new ZZ(e)}function RTe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new j("effect:type-error","Accepts only one color",{});i=BTe(r)}else{const n=PF(r);if(Object.isFrozen(e))throw new j("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&b_(n,r)}if(e.length<2||e.length>3)throw new j("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new QZ(e[0],e[1],e[2]||0,i||HX("black"))}function NTe(t){let e=1,i=0,r=0;return A0(t.parameters,3),t.parameters[0]&&(e=Ko(t.parameters[0])),t.parameters[1]&&(i=PF(t.parameters[1]),b_(i,t.parameters[1])),t.parameters[2]&&(r=Ko(t.parameters[2])),new WZ(e,i,r)}function A0(t,e){if(t.length>e)throw new j("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function pI(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in AF)return"<length>";if(t.unit in OF)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function b_(t,e){if(t<0)throw new j("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function DTe(t){if(t.type!=="quantity"||t.unit!==null)throw new j("effect:type-error",`Expected <double>, Actual: ${pI(t)}`,{term:t})}function FTe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new j("effect:type-error",`Expected <double> or <percentage>, Actual: ${pI(t)}`,{term:t})}const OF={deg:1,grad:.9,rad:180/Math.PI,turn:360};function jTe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&OF[t.unit]!=null))throw new j("effect:type-error",`Expected <angle>, Actual: ${pI(t)}`,{term:t})}const AF={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function zTe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&AF[t.unit]!=null))throw new j("effect:type-error",`Expected <length>, Actual: ${pI(t)}`,{term:t})}function Ko(t){FTe(t);const e=t.value;return b_(e,t),t.unit==="%"?.01*e:e}function VTe(t){return DTe(t),b_(t.value,t),t.value}function UTe(t){return jTe(t),t.value*OF[t.unit]||0}function PF(t){return zTe(t),t.value*AF[t.unit]||0}function BTe(t){switch(t.colorType){case"hex":return T0e(t.value);case"named":return HX(t.value);case"function":return qTe(t.value)}}function HX(t){if(!pZ(t))throw new j("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return E0e(t)}const GTe=/^rgba?/i,HTe=/^hsla?/i;function qTe(t){if(A0(t.parameters,4),GTe.test(t.name))return[Ko(t.parameters[0]),Ko(t.parameters[1]),Ko(t.parameters[2]),t.parameters[3]?Ko(t.parameters[3]):1];if(HTe.test(t.name))return hZ(VTe(t.parameters[0]),Ko(t.parameters[1]),Ko(t.parameters[2]),t.parameters[3]?Ko(t.parameters[3]):1);throw new j("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function RF(t,e,i){var r;try{return JTe(t)}catch(n){(r=i==null?void 0:i.messages)==null||r.push(n)}return null}function NF(t,e,i,r){try{const n=WTe(t);Ji(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function WTe(t){const e=LF(t);return e?awe(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function JTe(t){if(!t||t.length===0)return null;if(ZTe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:lT(i.value)});return e}return lT(t)}function ZTe(t){const e=t[0];return!!e&&"scale"in e}function lT(t){if(!(t!=null&&t.length))return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Rl(i,"amount")];break;case"blur":r=[Rl(i,"radius","pt")];break;case"hue-rotate":r=[Rl(i,"angle","deg")];break;case"drop-shadow":r=[Rl(i,"xoffset","pt"),Rl(i,"yoffset","pt"),Rl(i,"blurRadius","pt"),YTe(i,"color")];break;case"bloom":r=[Rl(i,"strength"),Rl(i,"radius","pt"),Rl(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;LF(n),e.push(n)}return e.join(" ")}function Rl(t,e,i){if(t[e]==null)throw new j("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function YTe(t,e){if(t[e]==null)throw new j("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const tU={read:{reader:RF},write:{allowNull:!0,writer:NF}},KTe=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return c([d({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),c([d({json:{read:!1,write:!1,origins:{"web-map":tU,"portal-item":tU}}})],e.prototype,"effect",void 0),e=c([k("esri.layers.mixins.BlendLayer")],e),e},QTe=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return c([d({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=c([k("esri.layers.mixins.CustomParametersMixin")],e),e},XTe="randomUUID"in crypto;function DF(){if(XTe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function L7e(){return`{${DF().toUpperCase()}}`}function eke(){return`{${DF()}}`}const DP=eke(),tke=new Map,qX=new Map;async function O7e(t,e,i=!1){var s,o;if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=qX.get(r))==null?void 0:s.entries();if(n){for(const[a,l]of n)if(l.name===e){const u=!((o=l.stack)!=null&&o.hasForwardEdits());if(!u&&i){const[{deleteForwardEdits:p},{default:h}]=await Promise.all([Z(()=>import("./deleteForwardEdits-a7WSI_z6.js"),__vite__mapDeps([])),Z(()=>import("./DeleteForwardEditsParameters-tIYhAxOW.js"),__vite__mapDeps([]))]);return p(r,a,new h({sessionId:DP,moment:l.moment}))}return u}}return!0}function Hx(t,e){var n;if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(n=qX.get(i))==null?void 0:n.entries();if(r){for(const[s,o]of r)if(o.name===e)return o.lockType==="edit"}return!1}const FF=new Il.EventEmitter;function WX(t){return FF.on("apply-edits",new WeakRef(t))}function JX(t){return FF.on("update-moment",new WeakRef(t))}function iU(t,e,i=null,r=!1){const n=xs();return r=e==null||r,FF.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const ZX="esri.layers.mixins.EditBusLayer",YX=Symbol(ZX);function A7e(t){return t!=null&&typeof t=="object"&&YX in t}function dv(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function cw(t,e,i){const r=new URL(t).host,n=tke.get(r),s=o=>!o||o===n;return s(e)&&s(i)||e===i}const ike=t=>{var e;let i=class extends t{constructor(...r){super(...r),this[e]=!0,this._applyEditsHandler=n=>{const{serviceUrl:s,layerId:o,gdbVersion:a,mayReceiveServiceEdits:l,result:u}=n,p=s===this.url,h=o!=null&&this.layerId!=null&&o===this.layerId,m=dv(this),y=dv(this)&&cw(s,a,this.gdbVersion);if(!p||m&&!y||!h&&!l)return;const g=u.then(v=>{var b;if(h&&(v.addedFeatures.length||v.updatedFeatures.length||v.deletedFeatures.length||v.addedAttachments.length||v.updatedAttachments.length||v.deletedAttachments.length))return this.emit("edits",D(v)),v;const w=(b=v.editedFeatures)==null?void 0:b.find(({layerId:_})=>_===this.layerId);if(w){const{adds:_,updates:S,deletes:$}=w.editedFeatures,T={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:_?_.map(({attributes:I})=>({objectId:this.objectIdField&&I[this.objectIdField],globalId:this.globalIdField&&I[this.globalIdField]})):[],deletedFeatures:$?$.map(({attributes:I})=>({objectId:this.objectIdField&&I[this.objectIdField],globalId:this.globalIdField&&I[this.globalIdField]})):[],updatedFeatures:S?S.map(({current:{attributes:I}})=>({objectId:this.objectIdField&&I[this.objectIdField],globalId:this.globalIdField&&I[this.globalIdField]})):[],editedFeatures:D(v.editedFeatures),exceededTransferLimit:!1,historicMoment:D(v.historicMoment)};return this.emit("edits",T),T}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:D(v.editedFeatures),exceededTransferLimit:!1,historicMoment:D(v.historicMoment)}}).then(v=>("historicMoment"in this&&this.historicMoment!==v.historicMoment&&Hx(s,a)&&(this.historicMoment=v.historicMoment),v));this.emit("apply-edits",{result:g})},this._updateMomentHandler=n=>{const{serviceUrl:s,gdbVersion:o,moment:a}=n,l=s===this.url,u=dv(this),p=dv(this)&&cw(s,o,this.gdbVersion),h=dv(this)&&!cw(s,this.gdbVersion,null);l&&u&&p&&h&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(WX(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(JX(this._updateMomentHandler))},()=>{})}};return e=YX,i=c([k(ZX)],i),i},FP={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function of(t,e,i,r=ks){const n=new Ts(Y5(r)),s=Pe.fromJSDate(t,{zone:n}),o=i==="decades"||i==="centuries"?"year":KX(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function rU(t,e,i=ks){const r=new Ts(Y5(i)),n=Pe.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=n.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=KX(e);return n.startOf(s).toJSDate()}function rke(t,e,i){return t===0?0:t*FP[e]/FP[i]}function KX(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Do;let as=Do=class extends B{static get allTime(){return nU}static get empty(){return nke}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=(t==null?void 0:t.getTime())??null}get isAllTime(){return this.equals(Do.allTime)}get isEmpty(){return this.equals(Do.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=(t==null?void 0:t.getTime())??null}clone(){return new Do({end:this.end,start:this.start})}equals(t){var s,o,a,l;if(!t)return!1;const e=((s=this.start)==null?void 0:s.getTime())??this.start,i=((o=this.end)==null?void 0:o.getTime())??this.end,r=((a=t.start)==null?void 0:a.getTime())??t.start,n=((l=t.end)==null?void 0:l.getTime())??t.end;return e===r&&i===n}expandTo(t,e=ks){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=rU(i,t,e));let r=this.end;if(r){const n=rU(r,t,e);r=r.getTime()===n.getTime()?n:of(n,1,t,e)}return new Do({start:i,end:r})}intersection(t){var a,l,u,p;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return Do.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((a=this.start)==null?void 0:a.getTime())??-1/0,i=((l=this.end)==null?void 0:l.getTime())??1/0,r=((u=t.start)==null?void 0:u.getTime())??-1/0,n=((p=t.end)==null?void 0:p.getTime())??1/0;let s,o;if(r>=e&&r<=i?s=r:e>=r&&e<=n&&(s=e),i>=r&&i<=n?o=i:n>=e&&n<=i&&(o=n),s!=null&&o!=null&&!isNaN(s)&&!isNaN(o)){const h=new Do;return h.start=s===-1/0?null:new Date(s),h.end=o===1/0?null:new Date(o),h}return Do.empty}offset(t,e,i=ks){if(this.isEmpty||this.isAllTime)return this.clone();const r=new Do,{start:n,end:s}=this;return n!=null&&(r.start=of(n,t,e,i)),s!=null&&(r.end=of(s,t,e,i)),r}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return nU.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new Do({start:e,end:i})}};c([d({type:Date,json:{write:{allowNull:!0}}})],as.prototype,"end",void 0),c([K("end")],as.prototype,"readEnd",null),c([ee("end")],as.prototype,"writeEnd",null),c([d({readOnly:!0,json:{read:!1}})],as.prototype,"isAllTime",null),c([d({readOnly:!0,json:{read:!1}})],as.prototype,"isEmpty",null),c([d({type:Date,json:{write:{allowNull:!0}}})],as.prototype,"start",void 0),c([K("start")],as.prototype,"readStart",null),c([ee("start")],as.prototype,"writeStart",null),as=Do=c([k("esri.TimeExtent")],as);const nU=new as,nke=new as({start:void 0,end:void 0}),pn=as;var jP;let Jm=jP=class extends B{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new jP({mapLayerId:t,gdbVersion:e})}};c([he({mapLayer:"map-layer"})],Jm.prototype,"type",void 0),c([d({type:ft,json:{write:!0}})],Jm.prototype,"mapLayerId",void 0),c([d({type:String,json:{write:!0}})],Jm.prototype,"gdbVersion",void 0),Jm=jP=c([k("esri.layers.support.source.MapLayerSource")],Jm);var zP;let tc=zP=class extends B{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:n};return new zP(s)}};c([he({queryTable:"query-table"})],tc.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],tc.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],tc.prototype,"query",void 0),c([d({type:String,json:{write:!0}})],tc.prototype,"oidFields",void 0),c([d({type:Ee,json:{write:!0}})],tc.prototype,"spatialReference",void 0),c([he(n1e)],tc.prototype,"geometryType",void 0),tc=zP=c([k("esri.layers.support.source.QueryTableDataSource")],tc);var VP;let Zm=VP=class extends B{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new VP({workspaceId:t,dataSourceName:e})}};c([he({raster:"raster"})],Zm.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Zm.prototype,"dataSourceName",void 0),c([d({type:String,json:{write:!0}})],Zm.prototype,"workspaceId",void 0),Zm=VP=c([k("esri.layers.support.source.RasterDataSource")],Zm);var UP;let oh=UP=class extends B{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new UP({workspaceId:t,gdbVersion:e,dataSourceName:i})}};c([he({table:"table"})],oh.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],oh.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],oh.prototype,"gdbVersion",void 0),c([d({type:String,json:{write:!0}})],oh.prototype,"dataSourceName",void 0),oh=UP=c([k("esri.layers.support.source.TableDataSource")],oh);var BP,GP;const ske=Zi()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let es=BP=class extends B{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return sU()(t,e,i)}castLeftTableSource(t){return bl(HP(),t)}readRightTableSource(t,e,i){return sU()(t,e,i)}castRightTableSource(t){return bl(HP(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:n};return new BP(s)}};c([he({joinTable:"join-table"})],es.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],es.prototype,"leftTableKey",void 0),c([d({type:String,json:{write:!0}})],es.prototype,"rightTableKey",void 0),c([d({json:{write:!0}})],es.prototype,"leftTableSource",void 0),c([K("leftTableSource")],es.prototype,"readLeftTableSource",null),c([qe("leftTableSource")],es.prototype,"castLeftTableSource",null),c([d({json:{write:!0}})],es.prototype,"rightTableSource",void 0),c([K("rightTableSource")],es.prototype,"readRightTableSource",null),c([qe("rightTableSource")],es.prototype,"castRightTableSource",null),c([he(ske)],es.prototype,"joinType",void 0),es=BP=c([k("esri.layers.support.source.JoinTableDataSource")],es);let fM=null;function sU(){return fM||(fM=b0({types:HP()})),fM}let mM=null;function HP(){return mM||(mM={key:"type",base:null,typeMap:{"data-layer":Qo,"map-layer":Jm}}),mM}const oke={key:"type",base:null,typeMap:{"join-table":es,"query-table":tc,raster:Zm,table:oh}};let Qo=GP=class extends B{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new GP({fields:t,dataSource:e})}};c([he({dataLayer:"data-layer"})],Qo.prototype,"type",void 0),c([d({type:[m1],json:{write:!0}})],Qo.prototype,"fields",void 0),c([d({types:oke,json:{write:!0}})],Qo.prototype,"dataSource",void 0),Qo=GP=c([k("esri.layers.support.source.DataLayerSource")],Qo),Qo.from=ei(Qo);let ah=class extends Je(B){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};c([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],ah.prototype,"onFields",void 0),c([d({type:String,json:{write:!0}})],ah.prototype,"operator",void 0),c([d({type:String,json:{write:!0}})],ah.prototype,"searchTerm",void 0),c([d({type:String,json:{write:!0}})],ah.prototype,"searchType",void 0),ah=c([k("esri.rest.support.FullTextSearch")],ah);const ake=ah;var qP;const oU=new $e({upperLeft:"upper-left",lowerLeft:"lower-left"});let lh=qP=class extends B{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new qP(D({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([d({type:ct,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],lh.prototype,"extent",void 0),c([d({type:["view","edit"],json:{write:!0}})],lh.prototype,"mode",void 0),c([d({type:String,json:{read:oU.read,write:oU.write}})],lh.prototype,"originPosition",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],lh.prototype,"tolerance",void 0),lh=qP=c([k("esri.rest.support.QuantizationParameters")],lh);const QX=lh;var WP;const aU=new $e({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Fo=WP=class extends B{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=D(t))}clone(){return new WP({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:D(this.statisticParameters)})}};c([d({type:Number,json:{write:!0}})],Fo.prototype,"maxPointCount",void 0),c([d({type:Number,json:{write:!0}})],Fo.prototype,"maxRecordCount",void 0),c([d({type:Number,json:{write:!0}})],Fo.prototype,"maxVertexCount",void 0),c([d({type:String,json:{write:!0}})],Fo.prototype,"onStatisticField",void 0),c([d({type:String,json:{write:!0}})],Fo.prototype,"outStatisticFieldName",void 0),c([d({type:String,json:{read:{source:"statisticType",reader:aU.read},write:{target:"statisticType",writer:aU.write}}})],Fo.prototype,"statisticType",void 0),c([d({type:Object})],Fo.prototype,"statisticParameters",void 0),c([ee("statisticParameters")],Fo.prototype,"writeStatisticParameters",null),Fo=WP=c([k("esri.rest.support.StatisticDefinition")],Fo);const lke=Fo;var qx;const cke=new $e({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),uke=new $e({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let xe=qx=class extends B{static from(t){return Mk(qx,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const r in t){const n=t[r];Array.isArray(n)?i[r]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?i[r]=n.getTime():i[r]=n}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new qx(D({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};xe.MAX_MAX_RECORD_COUNT_FACTOR=5,c([d({json:{write:!0}})],xe.prototype,"aggregateIds",void 0),c([d({type:Boolean,json:{write:!0}})],xe.prototype,"cacheHint",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"compactGeometryEnabled",void 0),c([d({json:{write:!0}})],xe.prototype,"datumTransformation",void 0),c([qe("datumTransformation")],xe.prototype,"castDatumTransformation",null),c([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"defaultSpatialReferenceEnabled",void 0),c([d({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],xe.prototype,"distance",void 0),c([d({type:Qo,json:{write:!0}})],xe.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],xe.prototype,"formatOf3DObjects",void 0),c([d({type:[ake],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],xe.prototype,"fullText",void 0),c([d({type:String,json:{write:!0}})],xe.prototype,"gdbVersion",void 0),c([d({types:cp,json:{read:_l,write:!0}})],xe.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],xe.prototype,"geometryPrecision",void 0),c([d({type:[String],json:{write:!0}})],xe.prototype,"groupByFieldsForStatistics",void 0),c([d({type:String,json:{write:!0}})],xe.prototype,"having",void 0),c([d({type:Date})],xe.prototype,"historicMoment",void 0),c([ee("historicMoment")],xe.prototype,"writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],xe.prototype,"maxAllowableOffset",void 0),c([d({type:Number,cast:t=>t<1?1:t>xe.MAX_MAX_RECORD_COUNT_FACTOR?xe.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],xe.prototype,"maxRecordCountFactor",void 0),c([d({type:["xyFootprint"],json:{write:!0}})],xe.prototype,"multipatchOption",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],xe.prototype,"num",void 0),c([d({json:{write:!0}})],xe.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],xe.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],xe.prototype,"outFields",void 0),c([d({type:Ee,json:{name:"outSR",write:!0}})],xe.prototype,"outSpatialReference",void 0),c([d({type:[lke],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],xe.prototype,"outStatistics",void 0),c([d({json:{write:!0}})],xe.prototype,"parameterValues",void 0),c([ee("parameterValues")],xe.prototype,"writeParameterValues",null),c([d({type:Me,json:{write:!0}})],xe.prototype,"pixelSize",void 0),c([d({type:QX,json:{write:!0}})],xe.prototype,"quantizationParameters",void 0),c([d({type:[Object],json:{write:!0}})],xe.prototype,"rangeValues",void 0),c([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],xe.prototype,"relationParameter",void 0),c([d({type:String,json:{write:!0}})],xe.prototype,"resultType",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnCentroid",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnDistinctValues",void 0),c([d({type:Boolean,json:{default:!0,write:!0}})],xe.prototype,"returnExceededLimitFeatures",void 0),c([d({type:Boolean,json:{write:!0}})],xe.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnQueryGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],xe.prototype,"returnZ",void 0),c([d({type:Ee,json:{write:!0}})],xe.prototype,"sourceSpatialReference",void 0),c([he(cke,{ignoreUnknown:!1,name:"spatialRel"})],xe.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],xe.prototype,"start",void 0),c([ee("start"),ee("num")],xe.prototype,"writeStart",null),c([d({type:String,json:{write:!0}})],xe.prototype,"sqlFormat",void 0),c([d({type:String,json:{write:!0}})],xe.prototype,"text",void 0),c([d({type:pn,json:{write:!0}})],xe.prototype,"timeExtent",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],xe.prototype,"timeReferenceUnknownClient",void 0),c([he(uke,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],xe.prototype,"units",void 0),c([d({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],xe.prototype,"where",void 0),c([ee("where")],xe.prototype,"writeWhere",null),xe=qx=c([k("esri.rest.support.Query")],xe);const pp=xe;var JP;const yM=new $e({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),gM=new $e({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Da=JP=class extends B{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new pp({geometry:D(i),objectIds:D(s),spatialRelationship:r,timeExtent:D(n),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:o}=this;return new JP({geometry:D(e),objectIds:D(n),spatialRelationship:i,timeExtent:D(r),where:t,units:s,distance:o})}};c([d({type:String,json:{write:!0}})],Da.prototype,"where",void 0),c([d({types:cp,json:{write:!0}})],Da.prototype,"geometry",void 0),c([d({type:yM.apiValues,json:{name:"spatialRel",read:{reader:yM.read},write:{allowNull:!1,writer:yM.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Da.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Da.prototype,"distance",void 0),c([d({type:[Number],json:{write:!0}})],Da.prototype,"objectIds",void 0),c([d({type:gM.apiValues,json:{read:gM.read,write:{writer:gM.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Da.prototype,"units",void 0),c([d({type:pn,json:{write:!0}})],Da.prototype,"timeExtent",void 0),Da=JP=c([k("esri.layers.support.FeatureFilter")],Da);const dke=Da;var ZP;const lU={read:{reader:RF},write:{writer:NF,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},cU={read:{reader:RF},write:{writer:NF,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},uU={name:"showExcludedLabels",default:!0};let ch=ZP=class extends B{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,n;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const s=Object.keys(i.filter);if(s.length>1||s[0]!=="where")return(r=e.messages)==null||r.push(new j("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(n=e.messages)==null||n.push(new j("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new ZP({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};c([d({type:dke,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t==null?void 0:t.write({},r);n&&Object.keys(n).length!==0?Ji(i,n,e):Ji(i,null,e)}}}})],ch.prototype,"filter",void 0),c([d({json:{write:!0,origins:{"web-map":lU,"portal-item":lU}}})],ch.prototype,"includedEffect",void 0),c([d({json:{write:!0,origins:{"web-map":cU,"portal-item":cU}}})],ch.prototype,"excludedEffect",void 0),c([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":uU,"portal-item":uU}}})],ch.prototype,"excludedLabelsVisible",void 0),ch=ZP=c([k("esri.layers.support.FeatureEffect")],ch);const pke=ch,dU={write:{allowNull:!0}},hke=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return c([d({type:pke,json:{origins:{"web-map":dU,"portal-item":dU}}})],e.prototype,"featureEffect",void 0),e=c([k("esri.layers.mixins.FeatureEffectLayer")],e),e};var ab;const cT=Zi()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),XX=cT.jsonValues.slice();fW(XX,"orthometric");const uw=Zi()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let jo=ab=class extends B{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return cT.write(t,e,i)}readHeightModel(t,e,i){return cT.read(t)||(i!=null&&i.messages&&i.messages.push(fke(t,{context:i})),null)}readHeightUnit(t,e,i){return uw.read(t)||(i!=null&&i.messages&&i.messages.push(pU(t,{context:i})),null)}readHeightUnitService(t,e,i){return YJ(t)||uw.read(t)||(i!=null&&i.messages&&i.messages.push(pU(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new ab({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=dge(e);return new ab({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new ab;return e.read(t,{origin:"web-scene"}),e}};function pU(t,e){return new po("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function fke(t,e){return new po("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}c([d({type:cT.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:XX,default:"ellipsoidal"}}}})],jo.prototype,"heightModel",void 0),c([ee("web-scene","heightModel")],jo.prototype,"writeHeightModel",null),c([K(["web-scene","service"],"heightModel")],jo.prototype,"readHeightModel",null),c([d({type:uw.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:uw.jsonValues,write:uw.write}}}})],jo.prototype,"heightUnit",void 0),c([K("web-scene","heightUnit")],jo.prototype,"readHeightUnit",null),c([K("service","heightUnit")],jo.prototype,"readHeightUnitService",null),c([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],jo.prototype,"vertCRS",void 0),c([K("service","vertCRS",["vertCRS","ellipsoid","geoid"])],jo.prototype,"readVertCRS",null),jo=ab=c([k("esri.geometry.HeightModelInfo")],jo);const hI=jo;function mke(t){if(!t)return t;const{start:e,end:i}=t;return new pn({start:e!=null?of(e,-e.getTimezoneOffset(),"minutes"):e,end:i!=null?of(i,-i.getTimezoneOffset(),"minutes"):i})}function yke(t){if(!t)return t;const{start:e,end:i}=t;return new pn({start:e!=null?of(e,e.getTimezoneOffset(),"minutes"):e,end:i!=null?of(i,i.getTimezoneOffset(),"minutes"):i})}var YP;let lb=YP=class extends B{constructor(t){super(t)}async collectRequiredFields(t,e){return dn(t,e,this.expression)}clone(){return new YP({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};c([d({type:String,json:{write:!0}})],lb.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],lb.prototype,"title",void 0),lb=YP=c([k("esri.layers.support.FeatureExpressionInfo")],lb);const hU=lb;function R7e(t){return 1/(gF[t]||1)}function gke(){const t=Object.keys(gF);return t.sort(),t}const vke=gke();var KP;const GS=Zi()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),fU=new $e({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let ic=KP=class extends B{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,r){e[i]=t.write({},r),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new KP({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&Bhe(this.featureExpressionInfo,t.featureExpressionInfo)}};c([d({type:hU,json:{write:!0}})],ic.prototype,"featureExpressionInfo",void 0),c([K("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],ic.prototype,"readFeatureExpressionInfo",null),c([ee("featureExpressionInfo",{featureExpressionInfo:{type:hU},"featureExpression.value":{type:[0]}})],ic.prototype,"writeFeatureExpressionInfo",null),c([d({type:GS.apiValues,nonNullable:!0,json:{type:GS.jsonValues,read:GS.read,write:{writer:GS.write,isRequired:!0}}})],ic.prototype,"mode",null),c([d({type:Number,json:{write:!0}})],ic.prototype,"offset",void 0),c([d({type:vke,json:{type:String,read:fU.read,write:fU.write}})],ic.prototype,"unit",null),ic=KP=c([k("esri.layers.support.ElevationInfo")],ic);const bke=ic,wke={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Zr}}},jF={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},zF={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Zr}}},_ke={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Mf}}},Ske={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Zr}}},$ke={value:null,type:bke,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Zr}}};function N7e(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const eee={write:{enabled:!0,layerContainerTypes:Zr},read:!0},QP={type:Number,json:{origins:{"web-document":eee,"portal-item":{write:!0}}}},xke={...QP,json:{...QP.json,origins:{"web-document":{...eee,write:{enabled:!0,layerContainerTypes:Zr,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>{var r;return i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(r=e.layerDefinition)!=null&&r.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?r1(e.layerDefinition.drawingInfo.transparency):void 0:r1(e.drawingInfo.transparency)}}}},Eke={type:pn,readOnly:!0,get(){var a,l;if(!((a=this.layer)!=null&&a.timeInfo))return null;const{datesInUnknownTimezone:t,timeOffset:e,useViewTime:i}=this.layer,r=(l=this.view)==null?void 0:l.timeExtent;let n=this.layer.timeExtent;t&&(n=yke(n));let s=i?r&&n?r.intersection(n):r||n:n;if(!s||s.isEmpty||s.isAllTime)return s;e&&(s=s.offset(-e.value,e.unit)),t&&(s=mke(s));const o=this._get("timeExtent");return s.equals(o)?o:s}},D7e={type:ct,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=ct.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Ee.fromJSON(e.spatialReference)),i}}}},read:!1}},Tke={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},kke={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:Zr}}},name:"layerDefinition.minScale",write:!0}},Ike={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:Zr}}},name:"layerDefinition.maxScale",write:!0}},tee={json:{write:{ignoreOrigin:!0,layerContainerTypes:Zr},origins:{"web-map":{read:!1,write:!1}}}};let rc=class extends Je(B){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};c([d()],rc.prototype,"creatorField",void 0),c([d()],rc.prototype,"creationDateField",void 0),c([d()],rc.prototype,"editorField",void 0),c([d()],rc.prototype,"editDateField",void 0),c([d()],rc.prototype,"realm",void 0),c([d(KE("dateFieldsTimeReference",!0))],rc.prototype,"timeZone",void 0),rc=c([k("esri.layers.support.EditFieldsInfo")],rc);const Cke=rc;let tl=class extends Je(B){constructor(e){super(e)}};c([d({constructOnly:!0,json:{write:!0}})],tl.prototype,"name",void 0),c([d({constructOnly:!0,json:{write:!0}})],tl.prototype,"fields",void 0),c([d({constructOnly:!0,json:{write:!0}})],tl.prototype,"isAscending",void 0),c([d({constructOnly:!0,json:{write:!0}})],tl.prototype,"indexType",void 0),c([d({constructOnly:!0,json:{write:!0}})],tl.prototype,"isUnique",void 0),c([d({constructOnly:!0,json:{write:!0}})],tl.prototype,"description",void 0),tl=c([k("esri.layers.support.FeatureIndex")],tl);async function iee(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=ree(t));const r=Mke(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let s=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;e.start+=r}return s}function Mke(t){return ree(t)*Lke(t)}function Lke(t){return t.capabilities.query.maxRecordCount||2e3}function ree(t){return t.capabilities.query.supportsMaxRecordCountFactor?pp.MAX_MAX_RECORD_COUNT_FACTOR:1}var XP;let rr=XP=class extends B{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new XP(D({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};c([d({type:[String],json:{write:!0}})],rr.prototype,"attachmentTypes",void 0),c([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],rr.prototype,"attachmentsWhere",void 0),c([d({type:Boolean,json:{write:!0}})],rr.prototype,"cacheHint",void 0),c([d({type:[String],json:{write:!0}})],rr.prototype,"keywords",void 0),c([d({type:[Number],json:{write:!0}})],rr.prototype,"globalIds",void 0),c([d({json:{write:!0}})],rr.prototype,"name",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],rr.prototype,"num",void 0),c([d({type:[Number],json:{write:!0}})],rr.prototype,"objectIds",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],rr.prototype,"returnMetadata",void 0),c([d({type:[Number],json:{write:!0}})],rr.prototype,"size",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],rr.prototype,"start",void 0),c([ee("start"),ee("num")],rr.prototype,"writeStart",null),c([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],rr.prototype,"where",void 0),rr=XP=c([k("esri.rest.support.AttachmentQuery")],rr),rr.from=ei(rr);const Oke=rr;var eR;let Jt=eR=class extends B{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new eR(D({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};c([d({type:Boolean,json:{write:!0}})],Jt.prototype,"cacheHint",void 0),c([d({type:Qo,json:{write:!0}})],Jt.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],Jt.prototype,"gdbVersion",void 0),c([d({type:Number,json:{write:!0}})],Jt.prototype,"geometryPrecision",void 0),c([d({type:Date})],Jt.prototype,"historicMoment",void 0),c([ee("historicMoment")],Jt.prototype,"_writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],Jt.prototype,"maxAllowableOffset",void 0),c([d({type:[Number],json:{write:!0}})],Jt.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],Jt.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],Jt.prototype,"outFields",void 0),c([d({type:Ee,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Jt.prototype,"outSpatialReference",void 0),c([d({json:{write:!0}})],Jt.prototype,"relationshipId",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],Jt.prototype,"start",void 0),c([ee("start"),ee("num")],Jt.prototype,"writeStart",null),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Jt.prototype,"num",void 0),c([d({json:{write:!0}})],Jt.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Jt.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Jt.prototype,"returnZ",void 0),c([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Jt.prototype,"where",void 0),Jt=eR=c([k("esri.rest.support.RelationshipQuery")],Jt),Jt.from=ei(Jt);const VF=Jt,z7e=Object.freeze(Object.defineProperty({__proto__:null,default:VF},Symbol.toStringTag,{value:"Module"})),tR=new $e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function Ake(t,e,i,r){const n=await hp(t);if(await UF(t,e,r),!n.addAttachment)throw new j(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function UF(t,e,i){var s,o;const{attributes:r}=e,{objectIdField:n}=t;return(o=(s=t.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?e?r?n&&r[n]?Promise.resolve():Promise.reject(new j(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new j(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new j(i,"A feature is required to add/delete/update attachments")):Promise.reject(new j(i,"this layer doesn't support attachments"))}async function Pke(t,e,i,r,n){const s=await hp(t);if(await UF(t,e,n),!s.updateAttachment)throw new j(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,r)}async function Rke(t,e,i){const{applyEdits:r}=await Z(()=>import("./editingSupport-ZLOmiRNr.js"),__vite__mapDeps([])),n=await t.load(),{source:s,globalIdField:o}=n;let a=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&o!=null&&(a={...a,globalIdToObjectId:await Qke(t,e.deleteFeatures,o)}),r(n,s,e,i)}async function Nke(t,e,i){const{uploadAssets:r}=await Z(()=>import("./editingSupport-ZLOmiRNr.js"),__vite__mapDeps([])),n=await t.load();return r(n,n.source,e,i)}async function Dke(t,e,i,r){const n=await hp(t);if(await UF(t,e,r),!n.deleteAttachments)throw new j(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function Fke(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new j(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function jke(t,e,i,r){var y,g;e=Oke.from(e),await t.load();const n=t.source,s=t.capabilities;if(!((y=s==null?void 0:s.data)!=null&&y.supportsAttachment))throw new j(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:u,size:p,start:h,where:m}=e;if(!((g=s==null?void 0:s.operations)!=null&&g.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(l==null?void 0:l.length)>0||(p==null?void 0:p.length)>0||u||h||m))throw new j(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a!=null&&a.length||l!=null&&l.length||m))throw new j(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new j(r,"Layer source does not support queryAttachments capability",e);return n.queryAttachments(e)}async function zke(t,e,i,r){const n=await hp(t);if(!n.queryObjectIds)throw new j(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(pp.from(e)??t.createQuery(),i)}async function Vke(t,e,i,r){const n=await hp(t);if(!n.queryFeatureCount)throw new j(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(pp.from(e)??t.createQuery(),i)}async function Uke(t,e,i,r){const n=await hp(t);if(!n.queryExtent)throw new j(r,"Layer source does not support queryExtent capability");return n.queryExtent(pp.from(e)??t.createQuery(),i)}async function Bke(t,e,i,r){const n=await hp(t);if(!n.queryRelatedFeatures)throw new j(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(VF.from(e),i)}async function Gke(t,e,i,r){const n=await hp(t);if(!n.queryRelatedFeaturesCount)throw new j(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(VF.from(e),i)}async function Hke(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await FY(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function qke(t){var o,a;const e=new pp,i=(o=t.capabilities)==null?void 0:o.data,r=(a=t.capabilities)==null?void 0:a.query;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:n,timeExtent:s}=t;return e.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function nee(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function see(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function Wke(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}async function hp(t){return(await t.load()).source}async function Jke(t,e){if(!Ne||Ne.findCredential(t))return;let i;try{const r=await dZ(t,e);r&&(i=await Ne.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await Ne.getCredential(t,{signal:r})}catch{}}async function Zke(t,e,i){var n;const r=(n=t.parsedUrl)==null?void 0:n.path;r&&t.authenticationTriggerEvent===e&&await Jke(r,i)}function Yke(t){var e;return!((e=t.sourceJSON)!=null&&e.isMultiServicesView)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const vM=b0({types:HQ});function BF(t,e){var i;if(t.defaultSymbol)return(i=t.types)!=null&&i.length?new TF({defaultSymbol:vM(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(r=>({id:r.id,symbol:vM(r.symbol,r,e)}))}):new lI({symbol:vM(t.defaultSymbol,t,e)})}function Kke(t){var r,n,s;let e=(r=t.sourceJSON)==null?void 0:r.cacheMaxAge;if(!e)return!1;const i=(s=(n=t.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function Qke(t,e,i){if(e==null)return null;const r=[],{objectIdField:n}=t;if(e.forEach(u=>{let p=null;if("attributes"in u){const{attributes:h}=u;p={globalId:h[i],objectId:h[n]!=null&&h[n]!==-1?h[n]:null}}else p={globalId:u.globalId,objectId:u.objectId!=null&&u.objectId!==-1?u.objectId:null};p.globalId!=null&&(p.objectId!=null&&p.objectId!==-1||r.push(p.globalId))}),r.length===0)return null;const s=t.createQuery();s.where=r.map(u=>`${i}='${u}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,i],s.cacheHint=!1;const o=await Vye(iee(t,s));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const u of l){const p=u.attributes[i],h=u.attributes[n];p!=null&&h!=null&&h!==-1&&a.set(p,h)}return a}let Ym=class extends Je(B){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};c([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Ym.prototype,"shapeAreaField",void 0),c([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Ym.prototype,"shapeLengthField",void 0),c([d({type:String,json:{read:t=>vge.read(t)||bge.read(t)}})],Ym.prototype,"units",void 0),Ym=c([k("esri.layers.support.GeometryFieldsInfo")],Ym);const Xke=Ym;var iR;let Km=iR=class extends B{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ce}clone(){return new iR({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};c([d({type:String,json:{write:!0}})],Km.prototype,"floorField",void 0),c([d({json:{read:!1,write:!1}})],Km.prototype,"viewAllMode",void 0),c([d({json:{read:!1,write:!1}})],Km.prototype,"viewAllLevelIds",void 0),Km=iR=c([k("esri.layers.support.LayerFloorInfo")],Km);const eIe=Km,mU=new $e({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),yU=new $e({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Vs=class extends Je(B){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};c([d({json:{read:mU.read,write:mU.write}})],Vs.prototype,"cardinality",void 0),c([d({json:{read:!0,write:!0}})],Vs.prototype,"composite",void 0),c([d({json:{read:!0,write:!0}})],Vs.prototype,"id",void 0),c([d({json:{read:!0,write:!0}})],Vs.prototype,"keyField",void 0),c([d({json:{read:!0,write:!0}})],Vs.prototype,"keyFieldInRelationshipTable",void 0),c([d({json:{read:!0,write:!0}})],Vs.prototype,"name",void 0),c([d({json:{read:!0,write:!0}})],Vs.prototype,"relatedTableId",void 0),c([d({json:{read:!0,write:!0}})],Vs.prototype,"relationshipTableId",void 0),c([d({json:{read:yU.read,write:yU.write}})],Vs.prototype,"role",void 0),Vs=c([k("esri.layers.support.Relationship")],Vs);const tIe=Vs;function Te(t,e,i){return!!oee(t,e,i)}function cb(t,e,i){return oee(t,e,i)}function oee(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const iIe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function rIe(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function w_(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map(n=>n.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function aee(t,e){return{analytics:nIe(t),attachment:sIe(t),data:oIe(t),metadata:aIe(t),operations:lIe(t.capabilities,t,e),query:cIe(t,e),queryRelated:uIe(t),queryTopFeatures:dIe(t),editing:pIe(t)}}function nIe(t){return{supportsCacheHint:w_(t.advancedQueryCapabilities,"queryAnalytics")}}function sIe(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:w_(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Te(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const n=iIe[r.name];n&&(i[n]=!!r.isEnabled)}),i}function oIe(t){return{isVersioned:Te(t,"isDataVersioned",!1),supportsAttachment:Te(t,"hasAttachments",!1),supportsM:Te(t,"hasM",!1),supportsZ:Te(t,"hasZ",!1)}}function aIe(t){return{supportsAdvancedFieldProperties:Te(t,"supportsFieldDescriptionProperty",!1)}}function lIe(t,e,i){const r=t?t.toLowerCase().split(",").map(m=>m.trim()):[],n=i?Xd(i):null,s=r.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone;let a=o&&r.includes("create"),l=o&&r.includes("delete"),u=o&&r.includes("update");const p=r.includes("changetracking"),h=e.advancedQueryCapabilities;return o&&!(a||l||u)&&(a=l=u=!0),{supportsCalculate:Te(e,"supportsCalculate",!1),supportsTruncate:Te(e,"supportsTruncate",!1),supportsValidateSql:Te(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:p,supportsQuery:s,supportsQueryAnalytics:Te(h,"supportsQueryAnalytic",!1),supportsQueryAttachments:Te(h,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Te(h,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Te(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:Te(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Te(e,"supportsAsyncConvert3D",!1)}}function cIe(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,s=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),a=!o||s>=G("mapserver-pbf-version-support"),l=GX(e),u=new Set((t.supportedQueryFormats??"").split(",").map(p=>p.toLowerCase().trim()));return{supportsStatistics:Te(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:Te(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Te(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:rIe(i),supportsCentroid:Te(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Te(i,"supportsQueryWithDistance",!1),supportsDistinct:Te(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Te(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Te(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Te(i,"supportsHavingClause",!1),supportsOrderBy:Te(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Te(i,"supportsPagination",!1),supportsQuantization:Te(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Te(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Te(t,"supportsReturningQueryGeometry",!1),supportsResultType:Te(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Te(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Te(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Te(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Te(i,"supportsTopFeaturesQuery",!1),supportsQueryByAnonymous:Te(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:Te(r,"allowOthersToQuery",!0),supportsHistoricMoment:Te(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:a&&u.has("pbf"),supportsDisjointSpatialRelationship:Te(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Te(i,"supportsQueryWithCacheHint",!1)||w_(i,"query"),supportsDefaultSpatialReference:Te(i,"supportsDefaultSR",!1),supportsCompactGeometry:l,supportsFullTextSearch:Te(i,"supportsFullTextSearch",!1),maxRecordCountFactor:cb(t,"maxRecordCountFactor",void 0),maxRecordCount:cb(t,"maxRecordCount",void 0),standardMaxRecordCount:cb(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:cb(t,"tileMaxRecordCount",void 0)}}function uIe(t){const e=t.advancedQueryCapabilities,i=Te(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Te(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:w_(e,"queryRelated")}}function dIe(t){return{supportsCacheHint:w_(t.advancedQueryCapabilities,"queryTopFilter")}}function pIe(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Te(t,"allowGeometryUpdates",!0),supportsGlobalId:Te(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Te(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Te(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Te(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Te(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Te(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Te(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Te(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Te(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Te(i,"supportsAsyncApplyEdits",!1),zDefault:cb(t,"zDefault",void 0)}}let nc=class extends Je(B){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=dI(e[r]);return i}writeDomains(e,i){var n;if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};c([d({type:Number,json:{write:!0}})],nc.prototype,"code",void 0),c([d({type:Object,json:{write:!0}})],nc.prototype,"defaultValues",void 0),c([d({json:{write:!0}})],nc.prototype,"domains",void 0),c([K("domains")],nc.prototype,"readDomains",null),c([ee("domains")],nc.prototype,"writeDomains",null),c([d({type:String,json:{write:!0}})],nc.prototype,"name",void 0),nc=c([k("esri.layers.support.Subtype")],nc);const hIe=nc,fIe=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ce.ofType(tl)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Ee.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:r,operations:n,editing:s}=i;if(!r.supportsQueryByOthers||!r.supportsQueryByAnonymous||n.supportsEditing&&!(s.supportsUpdateByOthers&&s.supportsUpdateByAnonymous&&s.supportsDeleteByOthers&&s.supportsDeleteByAnonymous))return"load"}return this.userHasUpdateItemPrivileges?Kke(this)?"load":this.hasUpdateItemRestrictions?i.operations.supportsQuery?"editing":"load":null:this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions?"editing":null}readCapabilitiesFromService(i,r){return aee(r,this.url)}readEditingInfo(i,r){const{editingInfo:n}=r;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){var o;const i=this.capabilities;if(!i)return null;const r=D(i),{operations:n,editing:s}=r;return(o=this.sourceJSON)!=null&&o.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),r)}readGlobalIdFieldFromService(i,r){return nee(r)}get hasFullEditingRestrictions(){var s;const i=this.capabilities;if(!i||(s=this.sourceJSON)!=null&&s.isMultiServicesView)return!1;const{operations:r,editing:n}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){var s;const i=this.capabilities;if(!i)return!1;const{operations:r,editing:n}=i;return(s=this.sourceJSON)!=null&&s.isMultiServicesView?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return see(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=ETe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:q.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,n,s){TTe(this,i,null,r,s)}readVersion(i,r){return Wke(r)}};return c([d({readOnly:!0})],e.prototype,"authenticationTriggerEvent",null),c([d({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),c([d({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),c([K("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),c([d(KE("dateFieldsTimeReference"))],e.prototype,"dateFieldsTimeZone",void 0),c([d({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),c([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),c([d({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),c([d({readOnly:!0,type:Cke})],e.prototype,"editFieldsInfo",void 0),c([d({readOnly:!0})],e.prototype,"editingInfo",void 0),c([K("editingInfo")],e.prototype,"readEditingInfo",null),c([d({readOnly:!0})],e.prototype,"effectiveCapabilities",null),c([d((()=>{const i=D($ke),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),c([d({type:eIe,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:Zr}}}}})],e.prototype,"floorInfo",void 0),c([d({type:ct,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),c([d()],e.prototype,"gdbVersion",void 0),c([d({readOnly:!0,type:Xke,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),c([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:tR.read}}}})],e.prototype,"geometryType",void 0),c([d({type:String})],e.prototype,"globalIdField",void 0),c([K("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),c([d({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),c([d({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),c([d({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),c([d({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),c([d({readOnly:!0,type:hI})],e.prototype,"heightModelInfo",void 0),c([d({type:Date})],e.prototype,"historicMoment",void 0),c([d({type:ce.ofType(tl),readOnly:!0})],e.prototype,"indexes",void 0),c([d({readOnly:!0})],e.prototype,"isTable",void 0),c([K("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),c([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),c([d(Ike)],e.prototype,"maxScale",void 0),c([K("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),c([d(kke)],e.prototype,"minScale",void 0),c([K("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),c([d({type:String})],e.prototype,"objectIdField",void 0),c([K("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),c([d(KE("preferredTimeReference"))],e.prototype,"preferredTimeZone",void 0),c([d({type:[tIe],readOnly:!0})],e.prototype,"relationships",void 0),c([d({type:Boolean})],e.prototype,"returnM",void 0),c([d({type:Boolean})],e.prototype,"returnZ",void 0),c([d({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),c([d({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),c([K("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),c([d({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),c([d()],e.prototype,"sourceJSON",void 0),c([d({type:Ee,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),c([d({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),c([d({type:[hIe],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"subtypes",void 0),c([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),c([d(_ke)],e.prototype,"url",null),c([ee("url")],e.prototype,"writeUrl",null),c([d({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),c([K("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=c([k("esri.layers.mixins.FeatureLayerBase")],e),e};let Qm=class extends Je(B){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};c([d({type:String,json:{write:!0}})],Qm.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],Qm.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Qm.prototype,"returnType",void 0),Qm=c([k("esri.layers.support.ExpressionInfo")],Qm);const GF=Qm;var rR;let sc=rR=class extends B{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new rR({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:D(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};c([d({type:Boolean,json:{write:!0}})],sc.prototype,"isAutoGenerated",void 0),c([d({type:String,json:{write:!0}})],sc.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],sc.prototype,"alias",void 0),c([d({type:String,json:{write:!0}})],sc.prototype,"onStatisticField",void 0),c([d({type:GF,json:{write:!0}})],sc.prototype,"onStatisticExpression",void 0),c([d({type:String,json:{write:!0}})],sc.prototype,"statisticType",void 0),sc=rR=c([k("esri.layers.support.AggregateField")],sc);const Lf=sc;let Fd=class extends B{constructor(){super(...arguments),this.type=null}};c([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Fd.prototype,"type",void 0),Fd=c([k("esri.layers.support.FeatureReduction")],Fd);const HF="__begin__",qF="__end__",mIe=new RegExp(HF,"ig"),yIe=new RegExp(qF,"ig"),gU=new RegExp("^"+HF,"i"),vU=new RegExp(qF+"$","i"),uT='"',gIe=uT+" + ",vIe=" + "+uT;function bIe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function wIe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function WF(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=bIe(t.labelExpression),e.type="conventional"),e}function _Ie(t){const e=WF(t);if(!e)return null;switch(e.type){case"conventional":return nR(e.expression);case"arcade":return e.expression}return null}function SIe(t){const e=WF(t);if(!e)return null;switch(e.type){case"conventional":return xIe(e.expression);case"arcade":return lee(e.expression)}return null}function nR(t){let e;return t?(e=Sk(t,i=>HF+'$feature["'+i+'"]'+qF),e=gU.test(e)?e.replace(gU,""):uT+e,e=vU.test(e)?e.replace(vU,""):e+uT,e=e.replaceAll(mIe,gIe).replaceAll(yIe,vIe)):e='""',e}const $Ie=/^\s*\{([^}]+)\}\s*$/i;function xIe(t){const e=t==null?void 0:t.match($Ie);return(e==null?void 0:e[1].trim())||null}const EIe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,TIe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,kIe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function lee(t){if(!t)return null;let e=EIe.exec(t)||TIe.exec(t);return e?e[1]||e[3]:(e=kIe.exec(t),e?e[2]:null)}var sR;let Lu=sR=class extends B{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?nR(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=nR(this.value)),t!=null&&(e[i]=t)}clone(){return new sR({expression:this.expression,title:this.title,value:this.value})}};c([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Lu.prototype,"expression",void 0),c([K("expression",["expression","value"])],Lu.prototype,"readExpression",null),c([ee("expression")],Lu.prototype,"writeExpression",null),c([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Lu.prototype,"title",void 0),c([d({json:{read:!1,write:!1}})],Lu.prototype,"value",void 0),Lu=sR=c([k("esri.layers.support.LabelExpressionInfo")],Lu);const cee=Lu,uee=[252,146,31,255],IIe={type:"esriSMS",style:"esriSMSCircle",size:6,color:uee,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},CIe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:uee},MIe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},LIe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},OIe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},AIe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},PIe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},q7e=jn.fromJSON(IIe),W7e=qn.fromJSON(CIe),J7e=Yc.fromJSON(MIe),RIe=M0.fromJSON(LIe),Z7e=jn.fromJSON(OIe),Y7e=qn.fromJSON(AIe),K7e=Yc.fromJSON(PIe);var oR;const HS=new $e({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function qS(t,e,i){return{enabled:!uZ(i==null?void 0:i.layer)}}function dee(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function NIe(t){return(t==null?void 0:t.type)==="map-image"}function pee(t){var e,i;return!!NIe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function DIe(t){return dee(t)||pee(t==null?void 0:t.layer)}let ui=oR=class extends B{static evaluateWhere(t,e){const i=(r,n,s)=>{switch(n){case"=":return r==s;case"<>":return r!=s;case">":return r>s;case">=":return r>=s;case"<":return r<s;case"<=":return r<=s}return!1};try{if(t==null)return!0;const r=t.split(" ");if(r.length===3)return i(e[r[0]],r[1],r[2]);if(r.length===7){const n=i(e[r[0]],r[1],r[2]),s=r[3],o=i(e[r[4]],r[5],r[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{console.log("Error.: can't parse = "+t)}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=RIe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=wIe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=lee(this.labelExpressionInfo.expression);r&&(t="["+r+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,r){if(t==null&&this.labelExpression!=null&&dee(r))t=new cee({expression:this.getLabelExpressionArcade()});else if(!t)return;const n=t.toJSON(r);n.expression&&(e[i]=n)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return WF(this)}getLabelExpressionArcade(){return _Ie(this)}getLabelExpressionSingleField(){return SIe(this)}hash(){return JSON.stringify(this)}clone(){return new oR({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:D(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:D(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};c([d({type:String,json:{write:!0}})],ui.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:qS}}}}})],ui.prototype,"allowOverrun",void 0),c([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:qS}}}}})],ui.prototype,"deconflictionStrategy",void 0),c([d({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&pee(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],ui.prototype,"labelExpression",void 0),c([K("labelExpression")],ui.prototype,"readLabelExpression",null),c([ee("labelExpression")],ui.prototype,"writeLabelExpression",null),c([d({type:cee,json:{write:{overridePolicy:(t,e,i)=>DIe(i)?{allowNull:!0}:{enabled:!1}}}})],ui.prototype,"labelExpressionInfo",void 0),c([ee("labelExpressionInfo")],ui.prototype,"writeLabelExpressionInfo",null),c([d({type:HS.apiValues,json:{type:HS.jsonValues,read:HS.read,write:HS.write}})],ui.prototype,"labelPlacement",void 0),c([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ui.prototype,"labelPosition",void 0),c([d({type:Number})],ui.prototype,"maxScale",void 0),c([ee("maxScale")],ui.prototype,"writeMaxScale",null),c([d({type:Number})],ui.prototype,"minScale",void 0),c([ee("minScale")],ui.prototype,"writeMinScale",null),c([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:qS}}}}})],ui.prototype,"repeatLabel",void 0),c([d({type:Number,cast:Ke,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:qS}}}}})],ui.prototype,"repeatLabelDistance",void 0),c([d({types:Bxe,json:{origins:{"web-scene":{types:Gxe,write:w8,default:null}},write:w8,default:null}})],ui.prototype,"symbol",void 0),c([d({type:Boolean,json:{write:!0}})],ui.prototype,"useCodedValues",void 0),c([d({type:String,json:{write:!0}})],ui.prototype,"where",void 0),ui=oR=c([k("esri.layers.support.LabelClass")],ui);const fI=ui;var aR;const FIe="esri.layers.support.FeatureReductionBinning";let en=aR=class extends Fd{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Ji(i,r,e)}readRenderer(t,e,i){var n;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return r?p1(r,e,i)??void 0:BF(e,i)}clone(){return new aR({fields:D(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:D(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:D(this.popupTemplate),renderer:D(this.renderer)})}};c([he({binning:"binning"})],en.prototype,"type",void 0),c([he({geohash:"geohash"})],en.prototype,"binType",void 0),c([d({type:Number,range:{min:1,max:9},json:{write:!0}})],en.prototype,"fixedBinLevel",void 0),c([d({type:[fI],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],en.prototype,"labelingInfo",void 0),c([d(zF)],en.prototype,"labelsVisible",void 0),c([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],en.prototype,"maxScale",void 0),c([d(jF)],en.prototype,"popupEnabled",void 0),c([d({type:u_,json:{name:"popupInfo",write:!0}})],en.prototype,"popupTemplate",void 0),c([d({type:[Lf],json:{write:!0}})],en.prototype,"fields",void 0),c([ee("fields")],en.prototype,"writeFields",null),c([d({types:cI,json:{write:{target:"drawingInfo.renderer"}}})],en.prototype,"renderer",void 0),c([K("renderer",["drawingInfo.renderer"])],en.prototype,"readRenderer",null),en=aR=c([k(FIe)],en);const hee=en;var lR;const jIe="esri.layers.support.FeatureReductionCluster";function bU(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let ki=lR=class extends B{constructor(t){super(t),this.type="cluster",this.clusterRadius=Ke("80px"),this.clusterMinSize=Ke("12px"),this.clusterMaxSize=Ke("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;return(s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated?null:r?bU(r)?null:p1(r,e,i)??void 0:BF(e,i)}readSymbol(t,e,i){var n,s;const r=(n=e.drawingInfo)==null?void 0:n.renderer;if((s=r==null?void 0:r.authoringInfo)!=null&&s.isAutoGenerated)return null;if(r&&bU(r)){const o=p1(r,e,i);return o==null?void 0:o.symbol}return null}writeSymbol(t,e,i,r){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const a=new lI({symbol:t});e.drawingInfo={renderer:a.write({},r)}}}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Ji(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>Lf.fromJSON(r))}clone(){return new lR({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:D(this.labelingInfo),labelsVisible:this.labelsVisible,fields:D(this.fields),maxScale:this.maxScale,renderer:D(this.renderer),symbol:D(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:D(this.popupTemplate)})}};c([d({type:["cluster"],readOnly:!0,json:{write:!0}})],ki.prototype,"type",void 0),c([d({type:Number,cast:t=>t==="auto"?t:Ke(t),json:{write:!0}})],ki.prototype,"clusterRadius",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],ki.prototype,"clusterMinSize",void 0),c([d({type:Number,cast:Ke,json:{write:!0}})],ki.prototype,"clusterMaxSize",void 0),c([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],ki.prototype,"maxScale",void 0),c([d(jF)],ki.prototype,"popupEnabled",void 0),c([d({type:u_,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ki.prototype,"popupTemplate",void 0),c([d({types:cI,json:{write:{target:"drawingInfo.renderer"}}})],ki.prototype,"renderer",void 0),c([K("renderer",["drawingInfo.renderer"])],ki.prototype,"readRenderer",null),c([d({types:Vxe})],ki.prototype,"symbol",void 0),c([K("symbol",["drawingInfo.renderer"])],ki.prototype,"readSymbol",null),c([ee("symbol")],ki.prototype,"writeSymbol",null),c([d({type:[fI],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],ki.prototype,"labelingInfo",void 0),c([d(zF)],ki.prototype,"labelsVisible",void 0),c([d({type:[Lf],json:{write:!0}})],ki.prototype,"fields",void 0),c([ee("fields")],ki.prototype,"writeFields",null),c([K("fields")],ki.prototype,"readFields",null),ki=lR=c([k(jIe)],ki);const fee=ki;var cR;let Wx=cR=class extends Fd{constructor(t){super(t),this.type="selection"}clone(){return new cR}};c([d({type:["selection"]})],Wx.prototype,"type",void 0),Wx=cR=c([k("esri.layers.support.FeatureReductionSelection")],Wx);const wU=Wx,_U={key:"type",base:Fd,typeMap:{cluster:fee,binning:hee}},zIe={types:{key:"type",base:Fd,typeMap:{selection:wU,cluster:fee,binning:hee}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:_U},"portal-item":{types:_U},"web-scene":{types:{key:"type",base:Fd,typeMap:{selection:wU}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Zr}}}}},lm={Base64:0,Hex:1,String:2,Raw:3},bg=8,mee=(1<<bg)-1;function wd(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function VIe(t){const e=[];for(let i=0,r=t.length*bg;i<r;i+=bg)e[i>>5]|=(t.charCodeAt(i/bg)&mee)<<i%32;return e}function UIe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=bg)e.push(String.fromCharCode(t[i>>5]>>>i%32&mee));return e.join("")}function BIe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function GIe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*t.length;n<s;n+=3){const o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let a=0;a<4;a++)8*n+6*a>32*t.length?r.push(e):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function HIe(t,e){return t<<e|t>>>32-e}function mI(t,e,i,r,n,s){return wd(HIe(wd(wd(e,t),wd(r,s)),n),i)}function Mr(t,e,i,r,n,s,o){return mI(e&i|~e&r,t,e,n,s,o)}function Lr(t,e,i,r,n,s,o){return mI(e&r|i&~r,t,e,n,s,o)}function Or(t,e,i,r,n,s,o){return mI(e^i^r,t,e,n,s,o)}function Ar(t,e,i,r,n,s,o){return mI(i^(e|~r),t,e,n,s,o)}function qIe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=r,u=n,p=s;i=Mr(i,r,n,s,t[o],7,-680876936),s=Mr(s,i,r,n,t[o+1],12,-389564586),n=Mr(n,s,i,r,t[o+2],17,606105819),r=Mr(r,n,s,i,t[o+3],22,-1044525330),i=Mr(i,r,n,s,t[o+4],7,-176418897),s=Mr(s,i,r,n,t[o+5],12,1200080426),n=Mr(n,s,i,r,t[o+6],17,-1473231341),r=Mr(r,n,s,i,t[o+7],22,-45705983),i=Mr(i,r,n,s,t[o+8],7,1770035416),s=Mr(s,i,r,n,t[o+9],12,-1958414417),n=Mr(n,s,i,r,t[o+10],17,-42063),r=Mr(r,n,s,i,t[o+11],22,-1990404162),i=Mr(i,r,n,s,t[o+12],7,1804603682),s=Mr(s,i,r,n,t[o+13],12,-40341101),n=Mr(n,s,i,r,t[o+14],17,-1502002290),r=Mr(r,n,s,i,t[o+15],22,1236535329),i=Lr(i,r,n,s,t[o+1],5,-165796510),s=Lr(s,i,r,n,t[o+6],9,-1069501632),n=Lr(n,s,i,r,t[o+11],14,643717713),r=Lr(r,n,s,i,t[o],20,-373897302),i=Lr(i,r,n,s,t[o+5],5,-701558691),s=Lr(s,i,r,n,t[o+10],9,38016083),n=Lr(n,s,i,r,t[o+15],14,-660478335),r=Lr(r,n,s,i,t[o+4],20,-405537848),i=Lr(i,r,n,s,t[o+9],5,568446438),s=Lr(s,i,r,n,t[o+14],9,-1019803690),n=Lr(n,s,i,r,t[o+3],14,-187363961),r=Lr(r,n,s,i,t[o+8],20,1163531501),i=Lr(i,r,n,s,t[o+13],5,-1444681467),s=Lr(s,i,r,n,t[o+2],9,-51403784),n=Lr(n,s,i,r,t[o+7],14,1735328473),r=Lr(r,n,s,i,t[o+12],20,-1926607734),i=Or(i,r,n,s,t[o+5],4,-378558),s=Or(s,i,r,n,t[o+8],11,-2022574463),n=Or(n,s,i,r,t[o+11],16,1839030562),r=Or(r,n,s,i,t[o+14],23,-35309556),i=Or(i,r,n,s,t[o+1],4,-1530992060),s=Or(s,i,r,n,t[o+4],11,1272893353),n=Or(n,s,i,r,t[o+7],16,-155497632),r=Or(r,n,s,i,t[o+10],23,-1094730640),i=Or(i,r,n,s,t[o+13],4,681279174),s=Or(s,i,r,n,t[o],11,-358537222),n=Or(n,s,i,r,t[o+3],16,-722521979),r=Or(r,n,s,i,t[o+6],23,76029189),i=Or(i,r,n,s,t[o+9],4,-640364487),s=Or(s,i,r,n,t[o+12],11,-421815835),n=Or(n,s,i,r,t[o+15],16,530742520),r=Or(r,n,s,i,t[o+2],23,-995338651),i=Ar(i,r,n,s,t[o],6,-198630844),s=Ar(s,i,r,n,t[o+7],10,1126891415),n=Ar(n,s,i,r,t[o+14],15,-1416354905),r=Ar(r,n,s,i,t[o+5],21,-57434055),i=Ar(i,r,n,s,t[o+12],6,1700485571),s=Ar(s,i,r,n,t[o+3],10,-1894986606),n=Ar(n,s,i,r,t[o+10],15,-1051523),r=Ar(r,n,s,i,t[o+1],21,-2054922799),i=Ar(i,r,n,s,t[o+8],6,1873313359),s=Ar(s,i,r,n,t[o+15],10,-30611744),n=Ar(n,s,i,r,t[o+6],15,-1560198380),r=Ar(r,n,s,i,t[o+13],21,1309151649),i=Ar(i,r,n,s,t[o+4],6,-145523070),s=Ar(s,i,r,n,t[o+11],10,-1120210379),n=Ar(n,s,i,r,t[o+2],15,718787259),r=Ar(r,n,s,i,t[o+9],21,-343485551),i=wd(i,a),r=wd(r,l),n=wd(n,u),s=wd(s,p)}return[i,r,n,s]}function yee(t,e=lm.Hex){const i=e||lm.Base64,r=qIe(VIe(t),t.length*bg);switch(i){case lm.Raw:return r;case lm.Hex:return BIe(r);case lm.String:return UIe(r);case lm.Base64:return GIe(r)}}var uR;let ub=uR=class extends v_{writeLevels(t,e,i){for(const r in t){const n=this.levels[r];return void(e.stops=n)}}clone(){var t,e;return new uR({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:bd(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:bd(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(t=this.stops)==null?void 0:t.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(e=this.legendOptions)==null?void 0:e.clone(),levels:D(this.levels)})}};c([d()],ub.prototype,"levels",void 0),c([ee("levels")],ub.prototype,"writeLevels",null),ub=uR=c([k("esri.views.2d.engine.LevelDependentSizeVariable")],ub);const WIe=q.getLogger("esri.views.2d.layers.support.clusterUtils");G.add("esri-cluster-arcade-enabled",!0);const JIe=G("esri-cluster-arcade-enabled"),ZIe=(t,e,i,r,n)=>{const s=e.clone();if(!KIe(s))return s;if(s.authoringInfo||(s.authoringInfo=new yF),s.authoringInfo.isAutoGenerated=!0,"visualVariables"in s){const o=(s.visualVariables||[]).filter(l=>l.valueExpression!=="$view.scale"),a=gee(o);o.forEach(l=>{l.type==="rotation"?l.field?l.field=_p(t,l.field,"avg_angle","number"):l.valueExpression&&(l.field=pv(t,l.valueExpression,"avg_angle","number"),l.valueExpression=null):l.normalizationField?(l.field=_p(t,l.field,"avg_norm","number",l.normalizationField),l.normalizationField=null):l.field?l.field=_p(t,l.field,"avg","number"):l.valueExpression&&(l.field=pv(t,l.valueExpression,"avg","number"),l.valueExpression=null)}),a==null&&!YIe(o)&&n&&(o.push(vee(i,r)),s.dynamicClusterSize=!0),s.visualVariables=o}switch(s.type){case"simple":break;case"pie-chart":for(const o of s.attributes)o.field?o.field=_p(t,o.field,"sum","number"):o.valueExpression&&(o.field=pv(t,o.valueExpression,"sum","number"),o.valueExpression=null);break;case"unique-value":s.field?s.field=_p(t,s.field,"mode","string"):s.valueExpression&&(s.field=pv(t,s.valueExpression,"mode","string"),s.valueExpression=null);break;case"class-breaks":s.normalizationField?(s.field=_p(t,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=_p(t,s.field,"avg","number"):s.valueExpression&&(s.field=pv(t,s.valueExpression,"avg","number"),s.valueExpression=null)}return s},gee=t=>{for(const e of t)if(e.type==="size")return e;return null};function Q7e(t,e,i){const r=t.clone();let n=!1;if("visualVariables"in r){const s=(r.visualVariables||[]).filter(o=>o.valueExpression!=="$view.scale");gee(s)==null&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(vee(e,i)),r.dynamicClusterSize=!0,n=!0)}return{renderer:r,didInject:n}}const YIe=t=>{for(const e of t)if(e.field==="cluster_count")return!0;return!1},vee=(t,e)=>{const i=[new zm({value:0,size:0}),new zm({value:1})];if(e==null)return new v_({field:"cluster_count",stops:[...i,new zm({value:2,size:0})]});const r=Object.keys(e).reduce((n,s)=>({...n,[s]:[...i,new zm({value:Math.max(2,e[s].minValue),size:t.clusterMinSize}),new zm({value:Math.max(3,e[s].maxValue),size:t.clusterMaxSize})]}),{});return new ub({field:"cluster_count",levels:r})},KIe=t=>{const e=i=>WIe.error(new j("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!JIe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function QIe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",s=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+yee(s)}}}function pv(t,e,i,r){const n=yee(e),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(o=>o.name===s)||t.push(new Lf({name:s,isAutoGenerated:!0,onStatisticExpression:new GF({expression:e,returnType:r}),statisticType:i})),s}function _p(t,e,i,r,n){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const s=QIe(i,e,n);return t.some(o=>o.name===s)||(i==="avg_norm"?t.push(new Lf({name:s,isAutoGenerated:!0,onStatisticExpression:new GF({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new Lf({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const XIe=t=>{let e=class extends t{constructor(...i){super(...i),this.addHandles(Y(()=>this.renderer,()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},Yf))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){var a;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),n=[new Lf({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(r.fields??[]).filter(l=>!l.isAutoGenerated);if(i.renderer&&!((a=i.renderer.authoringInfo)!=null&&a.isAutoGenerated))return r.fields=[...n,...s],r;if(i.symbol)return r.fields=[...n,...s],r.renderer=null,r;if(!this.renderer)return i;const o=ZIe(n,this.renderer,i,null,!1);return r.fields=[...n,...s],r.renderer=o,r}};return c([d(zIe)],e.prototype,"featureReduction",null),e=c([k("esri.layers.mixins.FeatureReductionLayer")],e),e},SU={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},$U={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},xU={ArcGISFeatureLayer:!0},eCe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":SU,"web-map/basemap":$U,"web-map/tables":xU,"link-chart/operational-layers":{...SU,LinkChartLayer:!0},"link-chart/basemap":$U,"link-chart/tables":xU,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISImageServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0}},tCe=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,n){var s;return((s=n==null?void 0:n.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:i}writeListMode(i,r,n,s){(s&&s.layerContainerType==="ground"||i&&Ime(this,n,{},s))&&(r[n]=i)}writeOperationalLayerType(i,r,n,s){i&&(s==null?void 0:s.layerContainerType)!=="tables"&&(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}read(i,r){r&&(r.layer=this),SJ(this,i,n=>super.read(i,n),r)}write(i,r){var o,a;if(!this.persistenceEnabled)return null;if(r!=null&&r.origin){const l=`${r.origin}/${r.layerContainerType||"operational-layers"}`,u=eCe[l];let p=!!(u!=null&&u[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(p=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(p=!1),!p)return(o=r.messages)==null||o.push(new j("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(i,{...r,layer:this}),s=!!r&&!!r.messages&&!!r.messages.filter(l=>l instanceof j&&l.name==="web-document-write:property-required").length;return Ak(n==null?void 0:n.url)?((a=r==null?void 0:r.messages)==null||a.push(new j("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return c([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),c([K("id",["id"])],e.prototype,"readId",null),c([d(tee)],e.prototype,"listMode",void 0),c([ee("listMode")],e.prototype,"writeListMode",null),c([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Zr}}}}})],e.prototype,"operationalLayerType",void 0),c([ee("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),c([d(QP)],e.prototype,"opacity",void 0),c([d({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),c([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),c([ee("title"),ee(["web-scene"],"title")],e.prototype,"writeTitle",null),c([d({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:Zr}}},name:"visibility",write:!0}})],e.prototype,"visible",void 0),e=c([k("esri.layers.mixins.OperationalLayer")],e),e};var dR;const bM=new $e({asc:"ascending",desc:"descending"});let Xm=dR=class extends B{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new dR({field:this.field,valueExpression:this.valueExpression,order:this.order})}};c([d({type:String,json:{write:!0}})],Xm.prototype,"field",void 0),c([d({type:String,json:{write:!0}})],Xm.prototype,"valueExpression",void 0),c([d({type:bM.apiValues,json:{read:bM.read,write:bM.write}})],Xm.prototype,"order",void 0),Xm=dR=c([k("esri.layers.support.OrderByInfo")],Xm);const bee=Xm;function iCe(t,e,i){if(!t)return null;const r=t.find(s=>!!s.field);if(!r)return null;const n=new bee;return n.read(r,i),[n]}function rCe(t,e,i,r){const n=t.find(s=>!!s.field);n&&Ji(i,[n.toJSON()],e)}const nCe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return c([d({type:[bee],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:iCe},write:{target:"layerDefinition.orderBy",writer:rCe}}})],e.prototype,"orderBy",void 0),e=c([k("esri.layers.mixins.OrderedLayer")],e),e},du=Lt.radius,$o=Lt.eccentricitySquared,sCe={a1:du*$o,a2:du*$o*du*$o,a3:du*$o*$o/2,a4:du*$o*du*$o*2.5,a5:du*$o+du*$o*$o/2,a6:1-$o};1/294.9786982,1/298.257222101,Lt.radius,Lt.flattening,Wd.radius,Wd.flattening,1/192.0430107526882,Ic.radius,Ic.flattening,1/10.2079945799458,1/43.61604095563141,Ic.radius;var N;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(N||(N={}));const wee={[N.WGS84]:{[N.CGCS2000]:null,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:bt,[N.WGS84_COMPARABLE_LON_LAT]:bt,[N.SPHERICAL_ECEF]:qh,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:g1,[N.PLATE_CARREE]:Gh,[N.WGS84]:bt,[N.WGS84_ECEF]:Jh},[N.CGCS2000]:{[N.CGCS2000]:bt,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:bt,[N.WGS84_COMPARABLE_LON_LAT]:bt,[N.SPHERICAL_ECEF]:qh,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:Gh,[N.WGS84]:null,[N.WGS84_ECEF]:Jh},[N.GCSMARS2000]:{[N.CGCS2000]:null,[N.GCSMARS2000]:bt,[N.GCSMOON2000]:null,[N.LON_LAT]:bt,[N.WGS84_COMPARABLE_LON_LAT]:null,[N.SPHERICAL_ECEF]:null,[N.SPHERICAL_MARS_PCPF]:IU,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:null,[N.WGS84]:null,[N.WGS84_ECEF]:null},[N.GCSMOON2000]:{[N.CGCS2000]:null,[N.GCSMARS2000]:null,[N.GCSMOON2000]:bt,[N.LON_LAT]:bt,[N.WGS84_COMPARABLE_LON_LAT]:null,[N.SPHERICAL_ECEF]:null,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:kU,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:null,[N.WGS84]:null,[N.WGS84_ECEF]:null},[N.WEB_MERCATOR]:{[N.CGCS2000]:null,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:wg,[N.WGS84_COMPARABLE_LON_LAT]:wg,[N.SPHERICAL_ECEF]:aCe,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:bt,[N.PLATE_CARREE]:uCe,[N.WGS84]:wg,[N.WGS84_ECEF]:lCe},[N.WGS84_ECEF]:{[N.CGCS2000]:Zh,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:Zh,[N.WGS84_COMPARABLE_LON_LAT]:Zh,[N.SPHERICAL_ECEF]:bCe,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:wCe,[N.PLATE_CARREE]:dCe,[N.WGS84]:Zh,[N.WGS84_ECEF]:bt},[N.SPHERICAL_ECEF]:{[N.CGCS2000]:Wh,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:Wh,[N.WGS84_COMPARABLE_LON_LAT]:Wh,[N.SPHERICAL_ECEF]:bt,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:yCe,[N.PLATE_CARREE]:pCe,[N.WGS84]:Wh,[N.WGS84_ECEF]:gCe},[N.SPHERICAL_MARS_PCPF]:{[N.CGCS2000]:null,[N.GCSMARS2000]:MU,[N.GCSMOON2000]:null,[N.LON_LAT]:MU,[N.WGS84_COMPARABLE_LON_LAT]:null,[N.SPHERICAL_ECEF]:null,[N.SPHERICAL_MARS_PCPF]:bt,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:null,[N.WGS84]:null,[N.WGS84_ECEF]:null},[N.SPHERICAL_MOON_PCPF]:{[N.CGCS2000]:null,[N.GCSMARS2000]:null,[N.GCSMOON2000]:CU,[N.LON_LAT]:CU,[N.WGS84_COMPARABLE_LON_LAT]:null,[N.SPHERICAL_ECEF]:null,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:bt,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:null,[N.WGS84]:null,[N.WGS84_ECEF]:null},[N.UNKNOWN]:{[N.CGCS2000]:null,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:null,[N.WGS84_COMPARABLE_LON_LAT]:null,[N.SPHERICAL_ECEF]:null,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:bt,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:null,[N.WGS84]:null,[N.WGS84_ECEF]:null},[N.LON_LAT]:{[N.CGCS2000]:bt,[N.GCSMARS2000]:bt,[N.GCSMOON2000]:bt,[N.LON_LAT]:bt,[N.WGS84_COMPARABLE_LON_LAT]:bt,[N.SPHERICAL_ECEF]:qh,[N.SPHERICAL_MARS_PCPF]:IU,[N.SPHERICAL_MOON_PCPF]:kU,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:g1,[N.PLATE_CARREE]:Gh,[N.WGS84]:bt,[N.WGS84_ECEF]:Jh},[N.WGS84_COMPARABLE_LON_LAT]:{[N.CGCS2000]:null,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:bt,[N.WGS84_COMPARABLE_LON_LAT]:bt,[N.SPHERICAL_ECEF]:qh,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:Gh,[N.WGS84]:bt,[N.WGS84_ECEF]:Jh},[N.PLATE_CARREE]:{[N.CGCS2000]:Hh,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:Hh,[N.WGS84_COMPARABLE_LON_LAT]:Hh,[N.SPHERICAL_ECEF]:hCe,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:fCe,[N.PLATE_CARREE]:bt,[N.WGS84]:Hh,[N.WGS84_ECEF]:mCe}};function oCe(t){const e=pR(t,SCe);return wee[e][N.WGS84_COMPARABLE_LON_LAT]}function _ee(t,e,i=See()){return t==null||e==null?null:_Ce(t,e,i).projector}function pR(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Cl(t,1)),FE(t)?e.spatialReferenceId=N.SPHERICAL_ECEF:t1(t)?e.spatialReferenceId=N.WGS84:$f(t)?e.spatialReferenceId=N.WEB_MERCATOR:Yye(t)?e.spatialReferenceId=N.PLATE_CARREE:t.wkt===ige.wkt?e.spatialReferenceId=N.WGS84_ECEF:t.wkid===to.CGCS2000?e.spatialReferenceId=N.CGCS2000:t.wkt===x5.wkt?e.spatialReferenceId=N.SPHERICAL_MARS_PCPF:t.wkt===E5.wkt?e.spatialReferenceId=N.SPHERICAL_MOON_PCPF:t_(t)?e.spatialReferenceId=N.GCSMARS2000:i_(t)?e.spatialReferenceId=N.GCSMOON2000:e.spatialReferenceId=N.UNKNOWN):N.UNKNOWN}function bt(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function wg(t,e,i,r){i[r++]=Yg*(t[e++]/Lt.radius),i[r++]=Yg*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/Lt.radius))),i[r]=t[e]}function aCe(t,e,i,r){wg(t,e,i,r),qh(i,r,i,r)}function lCe(t,e,i,r){wg(t,e,i,r),Jh(i,r,i,r)}function cCe(t,e,i,r,n){const s=.4999999*Math.PI,o=Es(Zg*t[e+1],-s,s),a=Math.sin(o);i[r++]=Zg*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]}function g1(t,e,i,r){cCe(t,e,i,r,Lt)}const EU=Lt.radius*Math.PI/180,TU=180/(Lt.radius*Math.PI);function Gh(t,e,i,r){i[r]=t[e]*EU,i[r+1]=t[e+1]*EU,i[r+2]=t[e+2]}function Hh(t,e,i,r){i[r]=t[e]*TU,i[r+1]=t[e+1]*TU,i[r+2]=t[e+2]}function uCe(t,e,i,r){wg(t,e,i,r),Gh(i,r,i,r)}function dCe(t,e,i,r){Zh(t,e,i,r),Gh(i,r,i,r)}function pCe(t,e,i,r){Wh(t,e,i,r),Gh(i,r,i,r)}function hCe(t,e,i,r){Hh(t,e,i,r),qh(i,r,i,r)}function fCe(t,e,i,r){Hh(t,e,i,r),g1(i,r,i,r)}function mCe(t,e,i,r){Hh(t,e,i,r),Jh(i,r,i,r)}function JF(t,e,i,r,n){const s=n+t[e+2],o=Zg*t[e+1],a=Zg*t[e],l=Math.cos(o);i[r++]=Math.cos(a)*l*s,i[r++]=Math.sin(a)*l*s,i[r]=Math.sin(o)*s}function kU(t,e,i,r){JF(t,e,i,r,Wd.radius)}function IU(t,e,i,r){JF(t,e,i,r,Ic.radius)}function qh(t,e,i,r){JF(t,e,i,r,Lt.radius)}function ZF(t,e,i,r,n){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),u=NZ(a/(l===0?1:l)),p=Math.atan2(o,s);i[r++]=Yg*p,i[r++]=Yg*u,i[r]=l-n}function CU(t,e,i,r){ZF(t,e,i,r,Wd.radius)}function MU(t,e,i,r){ZF(t,e,i,r,Ic.radius)}function Wh(t,e,i,r){ZF(t,e,i,r,Lt.radius)}function yCe(t,e,i,r){Wh(t,e,i,r),g1(i,r,i,r)}function gCe(t,e,i,r){Wh(t,e,i,r),Jh(i,r,i,r)}function vCe(t,e,i,r,n){const s=Zg*t[e],o=Zg*t[e+1],a=t[e+2],l=Math.sin(o),u=Math.cos(o),p=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);i[r++]=(p+a)*u*Math.cos(s),i[r++]=(p+a)*u*Math.sin(s),i[r++]=(p*(1-n.eccentricitySquared)+a)*l}function Jh(t,e,i,r){vCe(t,e,i,r,Lt)}function Zh(t,e,i,r){const n=sCe,s=t[e],o=t[e+1],a=t[e+2];let l,u,p,h,m,y,g,v,w,b,_,S,$,T,I,C,M,R,O,F,A;l=Math.abs(a),u=s*s+o*o,p=Math.sqrt(u),h=u+a*a,m=Math.sqrt(h),F=Math.atan2(o,s),y=a*a/h,g=u/h,T=n.a2/m,I=n.a3-n.a4/m,g>.3?(v=l/m*(1+g*(n.a1+T+y*I)/m),O=Math.asin(v),b=v*v,w=Math.sqrt(1-b)):(w=p/m*(1-y*(n.a5-T-g*I)/m),O=Math.acos(w),b=1-w*w,v=Math.sqrt(b)),_=1-Lt.eccentricitySquared*b,S=Lt.radius/Math.sqrt(_),$=n.a6*S,T=p-S*w,I=l-$*v,M=w*T+v*I,C=w*I-v*T,R=C/($/_+M),O+=R,A=M+C*R/2,a<0&&(O=-O),i[r++]=Yg*F,i[r++]=Yg*O,i[r]=A}function bCe(t,e,i,r){Zh(t,e,i,r),qh(i,r,i,r)}function wCe(t,e,i,r){Zh(t,e,i,r),g1(i,r,i,r)}function _Ce(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const r=pR(t,i.source),n=pR(e,i.dest);return r===N.UNKNOWN&&n===N.UNKNOWN?ti(t,e)?i.projector=bt:i.projector=null:i.projector=wee[r][n],i}function See(){return{source:{spatialReference:null,spatialReferenceId:N.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:N.UNKNOWN,metersPerUnit:1},projector:bt}}const SCe={spatialReference:null,spatialReferenceId:N.UNKNOWN},X7e={spatialReference:null,spatialReferenceId:N.UNKNOWN},$ee=See(),Zg=Mv(1),Yg=RZ(1);function __(t,e,i,r,n,s,o=1){const a=_ee(e,n,$ee);if(a==null)return!1;if(a===bt){if(t===r&&i===s)return!0;const u=i+3*o;for(let p=i,h=s;p<u;p++,h++)r[h]=t[p];return!0}const l=i+3*o;for(let u=i,p=s;u<l;u+=3,p+=3)a(t,u,r,p);return!0}const eGe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:__},Symbol.toStringTag,{value:"Module"}));function LU(t,e,i,r,n,s){return WS[0]=t,WS[1]=e,WS[2]=i,__(WS,r,0,n,s,0,1)}const WS=mo();let JS=0,wM=class hR{static fromGE(e){const i=new hR;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=JS++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=JS++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=JS++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=JS++}getInverse(){const e=new hR;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},dT=class db{static cacheKey(e,i){var r,n,s,o,a,l;return[((r=e.wkid)==null?void 0:r.toString())??"-1",((n=e.wkt)==null?void 0:n.toString())??"",((s=e.wkt2)==null?void 0:s.toString())??"",((o=i.wkid)==null?void 0:o.toString())??"-1",((a=i.wkt)==null?void 0:a.toString())??"",((l=i.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(e){const i=new db;let r="";for(const n of e.steps){const s=wM.fromGE(n);i.steps.push(s),r+=s.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const i of e.steps)i instanceof wM?this.steps.push(i):this.steps.push(new wM({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new db;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[db.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const s of this.steps)r+=s.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const n=this._cachedProjection[db.cacheKey(e,i)];return n===void 0?null:n}},ca=null,ep=null,dw=null,Jx={};const YF=new e_;function fp(){return!!ca&&b5()}function xee(){return!!fp()||(Se(YF),Uc(),!1)}function Uc(t){return dw==null&&(dw=Promise.all([BJ(),Z(()=>import("./geometryEngineBase-ePaF6YfN.js"),__vite__mapDeps([])).then(e=>e.g),Z(()=>import("./hydrated-ukrTFNZ2.js"),__vite__mapDeps([]))])),dw.then(([,e,{hydratedAdapter:i}])=>{kt(t),ep=i,ca=e.default,ca._enableProjection(qye),YF.notify()})}function mp(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:fR(ep,t,t[0].spatialReference,e,i,r):fR(ep,[t],t.spatialReference,e,i,r)[0]}function fR(t,e,i,r,n=null,s=null){if(i==null||r==null)return e;if(El(i,r,n))return e.map(o=>Zx(o,i,r));if(n==null&&FE(i))return e.map(o=>Zx(o,i,Ee.WGS84)).map(o=>v1(o,r));if(n==null&&FE(r))return e.map(o=>v1(o,Ee.WGS84)).map(o=>Zx(o,Ee.WGS84,r));if(n==null){const o=dT.cacheKey(i,r);Jx[o]!==void 0?n=Jx[o]:((n=Tee(i,r,void 0))==null&&(n=new dT),Jx[o]=n)}if(ca==null||t==null)throw new yI;return s!=null?ca._project(t,e,i,r,n,s):ca._project(t,e,i,r,n)}function $Ce(t,e){const i=Eee([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Eee(t,e){if(!fp()){for(const i of t)if(i!=null&&!ti(i.spatialReference,e)&&cr(i.spatialReference)&&cr(e)&&!El(i.spatialReference,e))return Se(YF),{pending:Uc(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:ti(i.spatialReference,e)?i:cr(i.spatialReference)&&cr(e)?v1(i,e):null)}}function Tee(t,e,i=null){if(t==null||e==null)return null;if(ca==null||ep==null)throw new yI;const r=ca._getTransformation(ep,t,e,i,i==null?void 0:i.spatialReference);return r!==null?dT.fromGE(r):null}function xCe(t,e,i=null){if(ca==null||ep==null)throw new yI;const r=ca._getTransformationBySuitability(ep,t,e,i,i==null?void 0:i.spatialReference);if(r!==null){const n=[];for(const s of r)n.push(dT.fromGE(s));return n}return[]}let yI=class extends j{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function ECe(){ca=null,ep=null,dw=null,Jx={}}const TCe={get loadPromise(){return dw}};function v1(t,e){try{const i=mp(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=zX(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof yI))throw i;return null}}async function kCe(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await KF(r,e,null,i),v1(t,e)}function El(t,e,i){return!i&&(!!ti(t,e)||cr(t)&&cr(e)&&!!_ee(t,e,$ee))}async function KF(t,e,i,r){if(fp())return S6(r);if(Array.isArray(t)){for(const{source:n,dest:s,geographicTransformation:o}of t)if(!El(n,s,o))return Uc(r)}else if(!El(t,e,i))return Uc(r);return S6(r)}function Zx(t,e,i){return t?"x"in t?kee(t,e,new Me,i,0):"xmin"in t?Lee(t,e,new ct,i,0):"rings"in t?Mee(t,e,new ha,i,0):"paths"in t?Cee(t,e,new ro,i,0):"points"in t?Iee(t,e,new n_,i,0):null:null}function ICe(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&kee(t,t.spatialReference,e,i,r)!=null}function kee(t,e,i,r,n){Vr[0]=t.x,Vr[1]=t.y;const s=t.z;return Vr[2]=s!==void 0?s:n,__(Vr,e,0,Vr,r,0,1)?(i.x=Vr[0],i.y=Vr[1],i.spatialReference=r,s!==void 0||Jd(r)?(i.z=Vr[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function CCe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Iee(t,t.spatialReference,e,i,r)!=null}function Iee(t,e,i,r,n){const{points:s,hasZ:o,hasM:a}=t,l=[],u=s.length,p=[];for(const m of s)p.push(m[0],m[1],o?m[2]:n);if(!__(p,e,0,p,r,0,u))return null;const h=o||Jd(r);for(let m=0;m<u;++m){const y=3*m,g=p[y],v=p[y+1];h&&a?l.push([g,v,p[y+2],s[m][3]]):h?l.push([g,v,p[y+2]]):a?l.push([g,v,s[m][2]]):l.push([g,v])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function MCe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Cee(t,t.spatialReference,e,i,r)!=null}function Cee(t,e,i,r,n){const{paths:s,hasZ:o,hasM:a}=t,l=[];if(!Oee(s,o??!1,a??!1,e,l,r,n))return null;const u=o||Jd(r);return i.paths=l,i.spatialReference=r,i.hasZ=u,i.hasM=a,i}function LCe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Mee(t,t.spatialReference,e,i,r)!=null}function Mee(t,e,i,r,n){const{rings:s,hasZ:o,hasM:a}=t,l=[];if(!Oee(s,o??!1,a??!1,e,l,r,n))return null;const u=o||Jd(r);return i.rings=l,i.spatialReference=r,i.hasZ=u,i.hasM=a,i}function OCe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Lee(t,t.spatialReference,e,i,r)!=null}function Lee(t,e,i,r,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:p}=t,h=u?t.zmin:n;if(!LU(s,o,h,e,Vr,r))return null;const m=u||Jd(r);i.xmin=Vr[0],i.ymin=Vr[1],m&&(i.zmin=Vr[2]);const y=u?t.zmax:n;return LU(a,l,y,e,Vr,r)?(i.xmax=Vr[0],i.ymax=Vr[1],m&&(i.zmax=Vr[2]),p&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function Oee(t,e,i,r,n,s,o=0){const a=new Array;for(const p of t)for(const h of p)a.push(h[0],h[1],e?h[2]:o);if(!__(a,r,0,a,s,0,a.length/3))return!1;let l=0;n.length=0;const u=e||Jd(s);for(const p of t){const h=new Array;for(const m of p)u&&i?h.push([a[l++],a[l++],a[l++],m[3]]):u?h.push([a[l++],a[l++],a[l++]]):i?(h.push([a[l++],a[l++],m[2]]),l++):(h.push([a[l++],a[l++]]),l++);n.push(h)}return!0}function gI(t){return t!=null&&oCe(t)!=null}const Vr=mo(),iGe=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:gI,canProjectWithoutEngine:El,getTransformation:Tee,getTransformations:xCe,initializeProjection:KF,isLoaded:fp,isLoadedOrLoad:xee,load:Uc,project:mp,projectExtent:OCe,projectMany:fR,projectMultipoint:CCe,projectOrLoad:$Ce,projectOrLoadMany:Eee,projectPoint:ICe,projectPolygon:LCe,projectPolyline:MCe,projectWithZConversion:kCe,projectWithoutEngine:Zx,test:TCe,tryProjectWithZConversion:v1,unload:ECe},Symbol.toStringTag,{value:"Module"}));async function ACe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Gy(t);const i=Ee.WGS84;return await KF(e,i),mp(t,i)}function PCe(t,e){if(!Aee(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function Aee(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function rGe(t){return Aee(t,Pee.HOSTED_SERVICE)}function RCe(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function nGe(t,e,i){i?PCe(t,e):RCe(t,e)}async function sGe(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return ACe(i)}const Pee={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function OU(t){var l;const{portal:e,isOrgItem:i,itemControl:r}=t,n=(l=e.user)==null?void 0:l.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!(n!=null&&n.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const NCe=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=wt(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,n){if(r.itemId)return new ml({id:r.itemId,portal:n==null?void 0:n.portal})}writePortalItem(i,r){i!=null&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:s}=await Z(()=>import("./layersLoader-Trd-DdwV.js"),__vite__mapDeps([107,10,8,6,7,5,108]));return kt(r),await s({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(s){throw hr(s)||q.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(sl(r),!0)))}async setUserPrivileges(i,r){if(!Ze.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){sl(n)}}async _fetchUserPrivileges(i,r){let n=this.portalItem;if(!i||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(r);const s=i===n.id;if(s&&n.portal.user)return OU(n);let o,a;if(s)o=n.portal.url;else try{o=await dZ(this.url,r)}catch(h){sl(h)}if(!o||!Jme(o,n.portal.url))return this._fetchFallbackUserPrivileges(r);try{const h=r!=null?r.signal:null;a=await(Ne==null?void 0:Ne.getCredential(`${o}/sharing`,{prompt:!1,signal:h}))}catch(h){sl(h)}const l=!0,u=!1,p=!1;if(!a)return{features:{edit:l,fullEdit:u},content:{updateItem:p}};try{if(s?await n.reload():(n=new ml({id:i,portal:{url:o}}),await n.load(r)),n.portal.user)return OU(n)}catch(h){sl(h)}return{features:{edit:l,fullEdit:u},content:{updateItem:p}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(n){sl(n)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?Ne==null?void 0:Ne.findCredential(this.url):null;if(!r)return!0;const n=ZS.credential===r?ZS.user:await this._fetchEditingUser(i);return ZS.credential=r,ZS.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var p,h;const r=(h=(p=this.portalItem)==null?void 0:p.portal)==null?void 0:h.user;if(r)return r;const n=Ne.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=gi.getDefault();if(o&&o.loaded&&xr(o.restUrl)===xr(s))return o.user;const a=`${s}/community/self`,l=i!=null?i.signal:null,u=await Pk(Ve(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return u.ok?k5.fromJSON(u.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){var o;const n=r==null?void 0:r.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||gi.getDefault());return n&&s&&!IJ(s.restUrl,n.restUrl)?(r.messages&&r.messages.push(new j("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return c([d({type:ml})],e.prototype,"portalItem",null),c([K("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),c([ee("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),c([d({clonable:!1})],e.prototype,"resourceReferences",void 0),c([d({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),c([d({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),c([d({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=c([k("esri.layers.mixins.PortalLayer")],e),e},ZS={credential:null,user:null};let pb=class extends de{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};c([d()],pb.prototype,"updating",void 0),c([d()],pb.prototype,"status",void 0),pb=c([k("esri.layers.support.PublishingInfo")],pb);const DCe=pb,Ree="esri.layers.mixins.PublishableLayer",FCe=Symbol(Ree),jCe=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const n=new DCe;return this._checkPublishingStatus(n),n}_checkPublishingStatus(r){let o=0;const a=async u=>{let p;r.updating=!0;try{p=await this.fetchPublishingStatus()}catch{p="unavailable"}p!=="published"&&p!=="unavailable"||(r.status==="publishing"&&this.refresh(),l.remove()),r.status=p,r.updating=!1,l.removed||(o=setTimeout(a,u,u+125))},l={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>l.remove()),a(250),this.addHandles(l)}};return e=FCe,c([d({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=c([k(Ree)],i),i},_d=new ce,pw=new WeakMap;function zCe(t){UCe(t)&&_d.push(new WeakRef(t))}function VCe(t){const e=_d.find(i=>i.deref()===t);e&&_d.remove(e)}function UCe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function Nee(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:Nee(e,t%e):0}let _M=0,YS=0;function BCe(){const t=Date.now();let e=!1;for(const i of _d){const r=i.deref();r?r.refreshInterval&&t-(pw.get(r)??0)+5>=6e4*r.refreshInterval&&(pw.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=_d.length-1;i>=0;i--)_d.at(i).deref()||_d.removeAt(i)}QW(()=>{const t=Date.now();let e=0;for(const i of _d){const r=i.deref();r&&(e=Nee(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?pw.get(r)||pw.set(r,t):pw.delete(r))}if(e!==YS){if(YS=e,clearInterval(_M),YS===0)return void(_M=0);_M=setInterval(BCe,YS)}});const AU=.1,GCe=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Q1(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||zCe(this)},()=>{})}destroy(){VCe(this)}castRefreshInterval(i){return i>=AU?i:i<=0?0:AU}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){LO(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{q.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){const i=this;return{set refreshInterval(r){i._set("refreshInterval",r)}}}};return c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Zr}}}}})],e.prototype,"refreshInterval",void 0),c([qe("refreshInterval")],e.prototype,"castRefreshInterval",null),c([d({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),c([d({readOnly:!0})],e.prototype,"refreshParameters",null),e=c([k("esri.layers.mixins.RefreshableLayer")],e),e},HCe=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&qCe(i,r.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===i.minScale&&n.maxScale===i.maxScale?n:i}};return c([d({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),c([d({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=c([k("esri.layers.mixins.ScaleRangeLayer")],e),e};function qCe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const Dee=Zi()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let hb=class extends Je(B){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return rke(this.value,this.unit,"milliseconds")}};c([he(Dee,{nonNullable:!0})],hb.prototype,"unit",void 0),c([d({type:Number,json:{write:!0},nonNullable:!0})],hb.prototype,"value",void 0),hb=c([k("esri.TimeInterval")],hb);const Kg=hb;function PU(t,e){return Kg.fromJSON({value:t,unit:e})}let jr=class extends Je(B){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,i){if(!i.timeExtent||!Array.isArray(i.timeExtent)||i.timeExtent.length!==2)return null;const r=new Date(i.timeExtent[0]),n=new Date(i.timeExtent[1]);return new pn({start:r,end:n})}writeFullTimeExtent(e,i){(e==null?void 0:e.start)!=null&&e.end!=null?i.timeExtent=[e.start.getTime(),e.end.getTime()]:i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?PU(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?PU(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};c([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],jr.prototype,"cumulative",void 0),c([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],jr.prototype,"endField",void 0),c([d({type:pn,json:{write:{enabled:!0,allowNull:!0}}})],jr.prototype,"fullTimeExtent",void 0),c([K("fullTimeExtent",["timeExtent"])],jr.prototype,"readFullTimeExtent",null),c([ee("fullTimeExtent")],jr.prototype,"writeFullTimeExtent",null),c([d({type:Boolean,json:{write:!0}})],jr.prototype,"hasLiveData",void 0),c([d({type:Kg,json:{write:{enabled:!0,allowNull:!0}}})],jr.prototype,"interval",void 0),c([K("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],jr.prototype,"readInterval",null),c([ee("interval")],jr.prototype,"writeInterval",null),c([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],jr.prototype,"startField",void 0),c([d(KE("timeReference",!0))],jr.prototype,"timeZone",void 0),c([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],jr.prototype,"trackIdField",void 0),c([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],jr.prototype,"useTime",void 0),jr=c([k("esri.layers.support.TimeInfo")],jr);const Fee=jr,WCe=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const n=r.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=Dee.fromJSON(n.timeOffsetUnits);return s&&o?new Kg({value:s,unit:o}):null}set timeInfo(i){ZK(i,this.fieldsIndex),this._set("timeInfo",i)}};return c([d({type:pn,json:{write:!1}})],e.prototype,"timeExtent",void 0),c([d({type:Kg})],e.prototype,"timeOffset",void 0),c([K("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),c([d({value:null,type:Fee,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),c([d({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"useViewTime",void 0),e=c([k("esri.layers.mixins.TemporalLayer")],e),e},RU=new $e({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Ou=class extends Je(B){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};c([d({json:{write:!0}})],Ou.prototype,"name",void 0),c([d({json:{write:!0}})],Ou.prototype,"description",void 0),c([d({json:{read:RU.read,write:RU.write}})],Ou.prototype,"drawingTool",void 0),c([d({json:{write:!0}})],Ou.prototype,"prototype",void 0),c([d({json:{write:!0}})],Ou.prototype,"thumbnail",void 0),Ou=c([k("esri.layers.support.FeatureTemplate")],Ou);const QF=Ou;let oc=class extends Je(B){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=dI(e[r]);return i}writeDomains(e,i){var n;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=(n=e[s])==null?void 0:n.toJSON());i.domains=r}};c([d({json:{write:!0}})],oc.prototype,"id",void 0),c([d({json:{write:!0}})],oc.prototype,"name",void 0),c([d({json:{write:!0}})],oc.prototype,"domains",void 0),c([K("domains")],oc.prototype,"readDomains",null),c([ee("domains")],oc.prototype,"writeDomains",null),c([d({type:[QF],json:{write:!0}})],oc.prototype,"templates",void 0),oc=c([k("esri.layers.support.FeatureType")],oc);const jee=oc;function JCe(){return{fields:{type:[m1],value:null,set:function(t){if(t&&G("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(r=>`'${r.name}'`).join(", ");q.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return uX.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!(t!=null&&t.length))return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||q.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return X5(this.fieldsIndex,t)}}}}const SM=q.getLogger("esri.layers.support.labelingInfo"),ZCe=/\[([^\[\]]+)\]/gi;function $M(t,e,i){return t?t.map(r=>{var s;const n=new fI;if(n.read(r,i),n.labelExpression){const o=e.fields||((s=e.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(ZCe,(a,l)=>`[${YCe(l,o)}]`)}return n}):null}function YCe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const KCe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function dGe(t,e){const i=D(t);return i.some(r=>QCe(r,e))?[]:i}function QCe(t,e){const i=t.labelPlacement,r=KCe[e];if(!t.symbol)return SM.warn("No ILabelClass symbol specified."),!0;if(!r)return SM.error(new j("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!r.includes(i)){const n=r[0];i&&SM.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${n}`),t.labelPlacement=n}return!1}const ac=[];function XCe(t,e){if(GX(t.url??""))return!0;const{wkid:i}=e;for(const r of ac){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}ac.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),ac.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),ac.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),ac.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),ac.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]),ac.push([10.7,()=>{const t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let e=8065;e<=8068;e++)t.add(e);for(let e=8082;e<=8083;e++)t.add(e);for(let e=8379;e<=8385;e++)t.add(e);for(let e=8836;e<=8840;e++)t.add(e);for(let e=8857;e<=8860;e++)t.add(e);for(let e=53035;e<=53037;e++)t.add(e);for(let e=54090;e<=54091;e++)t.add(e);for(let e=102498;e<=102499;e++)t.add(e);return t}]),ac.push([10.61,()=>new Set([102497])]),ac.push([10.6,()=>{const t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let e=7755;e<=7787;e++)t.add(e);for(let e=7791;e<=7795;e++)t.add(e);for(let e=7799;e<=7801;e++)t.add(e);for(let e=7825;e<=7831;e++)t.add(e);for(let e=7877;e<=7878;e++)t.add(e);for(let e=7882;e<=7883;e++)t.add(e);for(let e=7991;e<=7992;e++)t.add(e);for(let e=8042;e<=8043;e++)t.add(e);for(let e=8058;e<=8059;e++)t.add(e);for(let e=8311;e<=8348;e++)t.add(e);for(let e=9060;e<=9067;e++)t.add(e);for(let e=102562;e<=102568;e++)t.add(e);for(let e=102799;e<=102900;e++)t.add(e);return t}]);async function eMe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await Pk(r.populateFromStyle());if(kt(i),n.ok===!1){const s=n.error;e!=null&&e.messages&&e.messages.push(new po("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}var mR;let ey=mR=class extends B{constructor(t){super(t),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new mR({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};c([d({type:[String],json:{write:!0}})],ey.prototype,"groupByFields",void 0),c([d({type:Number,json:{write:!0}})],ey.prototype,"topCount",void 0),c([d({type:[String],json:{write:!0}})],ey.prototype,"orderByFields",void 0),ey=mR=c([k("esri.rest.support.TopFilter")],ey);const tMe=ey;var yR;const NU=new $e({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),DU=new $e({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let At=yR=class extends B{constructor(t){super(t),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new yR(D({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};c([d({type:Boolean,json:{write:!0}})],At.prototype,"cacheHint",void 0),c([d({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],At.prototype,"distance",void 0),c([d({types:cp,json:{read:_l,write:!0}})],At.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],At.prototype,"geometryPrecision",void 0),c([d({type:Number,json:{write:!0}})],At.prototype,"maxAllowableOffset",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],At.prototype,"num",void 0),c([d({json:{write:!0}})],At.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],At.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],At.prototype,"outFields",void 0),c([d({type:Ee,json:{read:{source:"outSR"},write:{target:"outSR"}}})],At.prototype,"outSpatialReference",void 0),c([d({type:String,json:{write:!0}})],At.prototype,"resultType",void 0),c([d({json:{write:!0}})],At.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],At.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],At.prototype,"returnZ",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],At.prototype,"start",void 0),c([ee("start"),ee("num")],At.prototype,"writeStart",null),c([d({type:String,json:{read:{source:"spatialRel",reader:NU.read},write:{target:"spatialRel",writer:NU.write}}})],At.prototype,"spatialRelationship",void 0),c([d({type:pn,json:{write:!0}})],At.prototype,"timeExtent",void 0),c([d({type:tMe,json:{write:!0}})],At.prototype,"topFilter",void 0),c([d({type:String,json:{read:DU.read,write:{writer:DU.write,overridePolicy(t){return{enabled:t!=null&&this.distance!=null&&this.distance>0}}}}})],At.prototype,"units",void 0),c([d({type:String,json:{write:!0}})],At.prototype,"where",void 0),At=yR=c([k("esri.rest.support.TopFeaturesQuery")],At),At.from=ei(At);const KS=At;function iMe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},s){if(!i)return null;const o=oMe({editFieldsInfo:e,fields:i,objectIdField:r},s);if(!o.length)return null;const a=cMe({titleBase:n,fields:i,displayField:t}),l=lMe();return new u_({title:a,content:l,fieldInfos:o})}const rMe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):u$e(t,e);function nMe(t,e){const i=t;return e&&(t=t.filter(r=>!e.includes(r.type))),t===i&&(t=t.slice()),t.sort(sMe),t}function sMe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:FU(t)?-1:FU(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function oMe(t,e){const i=e==null?void 0:e.visibleFieldNames;return nMe(t.fields??[],(e==null?void 0:e.ignoreFieldTypes)||uMe).map(r=>new tF({fieldName:r.name,isEditable:c$e(r,t),label:r.alias,format:aMe(r),visible:rMe(r,{...t,visibleFieldNames:i})}))}function aMe(t){switch(t.type){case"small-integer":case"integer":case"single":return new cx({digitSeparator:!0,places:0});case"double":return new cx({digitSeparator:!0,places:2});case"string":return N$e(t.name)?new cx({digitSeparator:!0,places:0}):null;default:return null}}function lMe(){return[new l1,new a1]}function cMe(t){const e=XSe(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function FU(t){return(t.name&&t.name.toLowerCase())==="name"?!0:(t.alias&&t.alias.toLowerCase())==="name"}const uMe=["geometry","blob","raster","guid","xml"];var cl;(function(t){t[t.SAVE=0]="SAVE",t[t.SAVE_AS=1]="SAVE_AS"})(cl||(cl={}));const Yr="FeatureLayer",zee="esri.layers.FeatureLayer",dMe=q.getLogger(zee);function QS(t,e){return new j("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function jU(t){return t&&t instanceof ce}const xM=JCe();function EM(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let me=class extends fIe(XIe(hke(jCe(ike(KTe(nCe(WCe(HCe(GCe(kTe(tCe(NCe(Gk(QTe(bTe(Je(OY))))))))))))))))){constructor(...e){super(...e),this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Ee.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=Q1(async(i,r,n)=>{const{save:s,saveAs:o}=await Z(()=>import("./featureLayerUtils-41gKs5Y2.js"),__vite__mapDeps([109,110,111,112,108,113,10,8]));switch(i){case cl.SAVE:return s(this,r);case cl.SAVE_AS:return o(this,n,r)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var n;const i=e!=null?e.signal:null;if((n=this.portalItem)!=null&&n.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(sl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(i);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new j("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>Zke(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,i){return i=i.layerDefinition||i,aee(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return Yke(this)}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,n){n!=null&&n.writeLayerSchema&&Ji(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return nee(i.layerDefinition||i)}readObjectIdField(e,i){return see(i.layerDefinition||i)}get parsedUrl(){const e=mi(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Vg(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Vg(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){e8(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){var s;i=i.layerDefinition||i;const n=(s=i.drawingInfo)==null?void 0:s.renderer;if(n){const o=p1(n,i,r)??void 0;return o||dMe.error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),o}return BF(i,r)}set source(e){const i=this._get("source");i!==e&&(jU(i)&&this._resetMemorySource(i),jU(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ce?new gc({layer:this,items:e}):e:null}readSource(e,i){const r=y1.fromJSON(i.featureSet);return new gc({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,i){const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e=e==null?void 0:e.map(o=>QF.fromJSON(o)),this._fixTemplates(e,n),this._fixTemplates(e,s),e}readTitle(e,i){var s,o,a;const r=((s=i.layerDefinition)==null?void 0:s.name)??i.name,n=i.title||((o=i.layerDefinition)==null?void 0:o.title);if(r){const l=(a=this.portalItem)==null?void 0:a.title;if(this.sublayerTitleMode==="item-title")return this.url?$Te(this.url,r):r;let u=r;if(!u&&this.url){const p=Xd(this.url);p!=null&&(u=p.title)}return u?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==u&&(u=l+" - "+u),MF(u)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){var r;return i.title||((r=i.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find(s=>s.name.toLowerCase()===r);n&&(r=n.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r==null?void 0:r.creatorField,s=r==null?void 0:r.editorField;return e==null?void 0:e.map(o=>(o=jee.fromJSON(o),this._fixTemplates(o.templates,n),this._fixTemplates(o.templates,s),o))}readVisible(e,i){var r;return((r=i.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){return Ake(this,e,i,Yr)}async updateAttachment(e,i,r){return Pke(this,e,i,r,Yr)}async applyEdits(e,i){return Rke(this,e,i)}async uploadAssets(e,i){return Nke(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return iMe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await bfe(Z(()=>import("./FeatureLayerSource-ATlmWKlx.js"),__vite__mapDeps([114,50,53,56,115,116,36,35,117,118,60,58,59,18,16,17,119,120,15])),e);return new i({layer:this}).load({signal:e})}createQuery(){const e=qke(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=jY(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){return Dke(this,e,i,Yr)}async fetchRecomputedExtents(e){return Fke(this,e,Yr)}getFeatureType(e){const{typeIdField:i,types:r}=this;if(!i||!e)return null;const n=e.attributes?e.attributes[i]:void 0;if(n==null)return null;let s=null;return r==null||r.some(o=>{const{id:a}=o;return a!=null&&(a.toString()===n.toString()&&(s=o),!!s)}),s}getFieldDomain(e,i){const r=i==null?void 0:i.feature,n=this.getFeatureType(r);if(n){const s=n.domains&&n.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,i){return jke(this,e,i,Yr)}async queryFeatures(e,i){const r=await this.load(),n=await r.source.queryFeatures(pp.from(e)??r.createQuery(),i);if(n!=null&&n.features)for(const s of n.features)s.layer=s.sourceLayer=r;return n}async queryObjectIds(e,i){return zke(this,e,i,Yr)}async queryFeatureCount(e,i){return Vke(this,e,i,Yr)}async queryExtent(e,i){return Uke(this,e,i,Yr)}async queryRelatedFeatures(e,i){return Bke(this,e,i,Yr)}async queryRelatedFeaturesCount(e,i){return Gke(this,e,i,Yr)}async queryTopFeatures(e,i){var o;const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!((o=n==null?void 0:n.query)!=null&&o.supportsTopFeaturesQuery))throw new j(Yr,"Layer source does not support queryTopFeatures capability");const s=await r.queryTopFeatures(KS.from(e),i);if(s!=null&&s.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryTopObjectIds(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!(n!=null&&n.query.supportsTopFeaturesQuery))throw new j(Yr,"Layer source does not support queryTopObjectIds capability");return r.queryTopObjectIds(KS.from(e),i)}async queryTopFeaturesExtent(e,i){var s;const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!((s=n==null?void 0:n.query)!=null&&s.supportsTopFeaturesQuery))throw new j(Yr,"Layer source does not support queryTopExtents capability");return r.queryTopExtents(KS.from(e),i)}async queryTopFeatureCount(e,i){var s;const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!((s=n==null?void 0:n.query)!=null&&s.supportsTopFeaturesQuery))throw new j(Yr,"Layer source does not support queryFeatureCount capability");return r.queryTopCount(KS.from(e),i)}read(e,i){const r=e.featureCollection;if(r){this.resourceInfo=e;const n=r.layers;n&&n.length===1&&(super.read(n[0],i),r.showLegend!=null&&super.read({showLegend:r.showLegend},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:s}=i;if(this.dynamicDataSource)return s==null||s.push(QS(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return s==null||s.push(QS(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return s==null||s.push(QS(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return s==null||s.push(QS(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new j(Yr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||XCe(this,e))}async save(e){return this._debouncedSaveOperations(cl.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(cl.SAVE_AS,i,e)}_readEditingEnabled(e,i,r){var s;let n=(s=e.layerDefinition)==null?void 0:s.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,r,n){var s,o;if(!e){const a=(o=(s=this.capabilities)==null?void 0:s.operations)!=null&&o.supportsSync?"Query,Sync":"Query";Ji("layerDefinition.capabilities",a,i),r&&!(n!=null&&n.writeLayerSchema)&&(i.capabilities=a)}}_getLayerDomain(e){const i=this.fieldsIndex.get(e);return i?i.domain:null}_fetchFirstValidLayerId(e){return Ve(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const r=i.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),e8(this.renderer,this.fieldsIndex),ZK(this.timeInfo,this.fieldsIndex),eMe(this,{origin:"service"})}async hasDataChanged(){return Hke(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,r;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(n=>n.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(r=>{var s;const n=(s=r.prototype)==null?void 0:s.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new j("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new j("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};c([K("service","capabilities")],me.prototype,"readCapabilities",null),c([d({json:{origins:{"web-scene":{write:!1}},write:!0}})],me.prototype,"charts",void 0),c([d({readOnly:!0})],me.prototype,"createQueryVersion",null),c([d({json:{read:{source:"layerDefinition.copyrightText"}}})],me.prototype,"copyright",void 0),c([d({json:{read:{source:"layerDefinition.displayField"}}})],me.prototype,"displayField",void 0),c([d({types:sf,readOnly:!0})],me.prototype,"defaultSymbol",void 0),c([d({type:Qo})],me.prototype,"dynamicDataSource",void 0),c([d({type:Boolean})],me.prototype,"editingEnabled",null),c([K(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],me.prototype,"readEditingEnabled",null),c([K("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],me.prototype,"readEditingEnabledFromWebMap",null),c([ee(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],me.prototype,"writeEditingEnabled",null),c([ee("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],me.prototype,"writeEditingEnabledToWebMap",null),c([d({readOnly:!0})],me.prototype,"effectiveEditingEnabled",null),c([d({...xM.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:EM}}}}})],me.prototype,"fields",void 0),c([d(xM.fieldsIndex)],me.prototype,"fieldsIndex",void 0),c([d({type:DEe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],me.prototype,"formTemplate",void 0),c([d({json:{read:{source:"layerDefinition.extent"}}})],me.prototype,"fullExtent",void 0),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:EM,writer(t,e,i){const r=t?tR.toJSON(t):null;r&&Ji(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:tR.read}}})],me.prototype,"geometryType",void 0),c([d({json:{read:{source:"layerDefinition.hasM"}}})],me.prototype,"hasM",void 0),c([d({json:{read:{source:"layerDefinition.hasZ"}}})],me.prototype,"hasZ",void 0),c([d(Tke)],me.prototype,"id",void 0),c([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],me.prototype,"infoFor3D",void 0),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],me.prototype,"isTable",void 0),c([K("service","isTable",["type","geometryType"]),K("isTable",["layerDefinition.type","layerDefinition.geometryType"])],me.prototype,"readIsTable",null),c([ee("web-map","isTable")],me.prototype,"writeIsTable",null),c([d(zF)],me.prototype,"labelsVisible",void 0),c([d({type:[fI],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:$M,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:$M,write:{enabled:!0,layerContainerTypes:Zr}}},name:"layerDefinition.drawingInfo.labelingInfo",read:$M,write:!0}})],me.prototype,"labelingInfo",void 0),c([d((()=>{const t=D(xke);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Ji(r,Vk(e),i)}}},t})())],me.prototype,"opacity",void 0),c([d(Ske)],me.prototype,"legendEnabled",void 0),c([d({type:["show","hide"],json:(()=>{const t=D(tee.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],me.prototype,"listMode",void 0),c([K("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],me.prototype,"readGlobalIdField",null),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:EM}}}}})],me.prototype,"objectIdField",void 0),c([K("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],me.prototype,"readObjectIdField",null),c([d({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],me.prototype,"operationalLayerType",void 0),c([d(xM.outFields)],me.prototype,"outFields",void 0),c([d({readOnly:!0})],me.prototype,"parsedUrl",null),c([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],me.prototype,"path",void 0),c([d(jF)],me.prototype,"popupEnabled",void 0),c([d({type:u_,json:{name:"popupInfo",write:!0}})],me.prototype,"popupTemplate",void 0),c([d({readOnly:!0})],me.prototype,"defaultPopupTemplate",null),c([d({types:cI,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:mEe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Zr,overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],me.prototype,"renderer",null),c([K("service","renderer",["drawingInfo.renderer","defaultSymbol"]),K("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],me.prototype,"readRenderer",null),c([d()],me.prototype,"resourceInfo",void 0),c([d((()=>{const t=D(wke);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],me.prototype,"screenSizePerspectiveEnabled",void 0),c([d({clonable:!1})],me.prototype,"source",null),c([qe("source")],me.prototype,"castSource",null),c([K("portal-item","source",["featureSet"]),K("web-map","source",["featureSet"])],me.prototype,"readSource",null),c([d({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],me.prototype,"spatialReference",void 0),c([d({type:Number})],me.prototype,"subtypeCode",void 0),c([d({type:[QF]})],me.prototype,"templates",void 0),c([K("templates",["editFieldsInfo","creatorField","editorField","templates"])],me.prototype,"readTemplates",null),c([d({type:Fee})],me.prototype,"timeInfo",void 0),c([d()],me.prototype,"title",void 0),c([K("service","title",["name"]),K("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],me.prototype,"readTitle",null),c([K("web-map","title",["layerDefinition.name","title"])],me.prototype,"readTitleFromWebMap",null),c([d({type:String})],me.prototype,"sublayerTitleMode",void 0),c([d({json:{read:!1}})],me.prototype,"type",void 0),c([d({type:String})],me.prototype,"typeIdField",void 0),c([K("service","typeIdField"),K("typeIdField",["layerDefinition.typeIdField"])],me.prototype,"readTypeIdField",null),c([d({type:[jee]})],me.prototype,"types",void 0),c([K("service","types",["types"]),K("types",["layerDefinition.types"])],me.prototype,"readTypes",null),c([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],me.prototype,"visible",void 0),c([K("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],me.prototype,"readVisible",null),me=c([k(zee)],me);const Vee=me,hGe=Object.freeze(Object.defineProperty({__proto__:null,default:Vee},Symbol.toStringTag,{value:"Module"}));let Fa=class extends B{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.dirtyAreaCount=null,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],Fa.prototype,"moment",void 0),c([d({type:Boolean,json:{write:!0}})],Fa.prototype,"fullUpdate",void 0),c([d({type:Boolean,json:{write:!0}})],Fa.prototype,"validateErrorsCreated",void 0),c([d({type:Number,json:{write:!0}})],Fa.prototype,"dirtyAreaCount",void 0),c([d({type:Boolean,json:{write:!0}})],Fa.prototype,"exceededTransferLimit",void 0),c([d({type:[Object],json:{write:!0}})],Fa.prototype,"serviceEdits",void 0),c([d({type:[Object],json:{write:!0}})],Fa.prototype,"discoveredSubnetworks",void 0),Fa=c([k("esri.rest.networks.support.ValidateNetworkTopologyResult")],Fa);const pMe=Fa,hMe=Zi()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Au=class extends pMe{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await Ve(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(mt()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),s(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};c([d()],Au.prototype,"editsResolver",void 0),c([d({type:String,json:{write:!0}})],Au.prototype,"statusUrl",void 0),c([he(hMe)],Au.prototype,"status",void 0),c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],Au.prototype,"submissionTime",void 0),c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],Au.prototype,"lastUpdatedTime",void 0),Au=c([k("esri.networks.support.TopologyValidationJobInfo")],Au);const fMe=Au;async function zU(t,e){if(t==="Utility Network Layer"){const{default:i}=await Z(()=>Promise.resolve().then(()=>IMe),void 0);return new i({layerUrl:e})}return null}async function mMe(t){var o;let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof ml||(e={...e,portalItem:new ml(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new j("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await Ve(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if((o=n.data.type)!=null&&o.includes(s))return zU(n.data.type,r);if(n.data.layers){const a=n.data.layers.find(l=>l.type.includes(s));if(a){const l=`${r}/${a.id}`;return zU(a.type,l)}}return null}let vi=class extends Gk(Jr){static fromPortalItem(e){return mMe(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:n,result:s}=i,o=r===this.featureServiceUrl,a=cw(r,n,this.gdbVersion);o&&a&&s.then(l=>{Hx(r,n)&&(this.historicMoment=l.historicMoment)})},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:n,moment:s}=i,o=r===this.featureServiceUrl,a=cw(r,n,this.gdbVersion);o&&a&&(this.historicMoment=s)},this.when().then(()=>{this.addHandles([WX(this._applyEditsHandler),JX(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(e=>{hr(e)||q.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return mi(this.layerUrl)}get featureServiceUrl(){return Xd(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return Xd(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const i=this.dataElement.domainNetworks;for(const r of i){for(const n of r.edgeSources??[])if(n.sourceId===e)return n.layerId;for(const n of r.junctionSources??[])if(n.sourceId===e)return n.layerId}return null}return null}async queryNamedTraceConfigurations(e,i){var a;const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([Z(()=>import("./queryNamedTraceConfigurations-ihtCHUdv.js"),__vite__mapDeps([])),Z(()=>import("./QueryNamedTraceConfigurationsParameters-yIL-336U.js"),__vite__mapDeps([]))]),s=this.networkServiceUrl,o=n.from(e);return(a=await r(s,o,{...i}))==null?void 0:a.namedTraceConfigurations}async validateTopology(e,i){var p,h,m;if(!e.validateArea)throw new j("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([Z(()=>import("./validateNetworkTopology-YkR9LN2l.js"),__vite__mapDeps([])),Z(()=>import("./ValidateNetworkTopologyParameters-G9S7pPIc.js"),__vite__mapDeps([]))]),s=n.from(e);Hx(this.featureServiceUrl,this.gdbVersion||null)&&(s.sessionID=DP),s.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,l=iU(a,null,this.gdbVersion,!0),u=await r(o,s,{...i});if(u!=null&&u.serviceEdits){const y=[];for(const g of u.serviceEdits){const{editedFeatures:v}=g,w=v!=null&&v.spatialReference?new Ee(v.spatialReference):null;y.push({layerId:g.layerId,editedFeatures:{adds:((p=v==null?void 0:v.adds)==null?void 0:p.map(b=>this._createEditedFeature(b,w)))||[],updates:((h=v==null?void 0:v.updates)==null?void 0:h.map(b=>({original:this._createEditedFeature(b[0],w),current:this._createEditedFeature(b[1],w)})))||[],deletes:((m=v==null?void 0:v.deletes)==null?void 0:m.map(b=>this._createEditedFeature(b,w)))||[],spatialReference:w}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:y,exceededTransferLimit:!1,historicMoment:u.moment})}return u}async submitTopologyValidationJob(e,i){if(!e.validateArea)throw new j("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion)throw new j("network:undefined-gdb-version","version must be defined");const[{submitValidateNetworkTopologyJob:r},{default:n}]=await Promise.all([Z(()=>import("./validateNetworkTopology-YkR9LN2l.js"),__vite__mapDeps([])),Z(()=>import("./ValidateNetworkTopologyParameters-G9S7pPIc.js"),__vite__mapDeps([]))]),s=n.from(e);Hx(this.featureServiceUrl,this.gdbVersion||null)&&(s.sessionID=DP),s.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl?iU(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,l=await r(o,s,{...i});return new fMe({statusUrl:l,editsResolver:a})}_createEditedFeature(e,i){return new Vc({attributes:e.attributes,geometry:_l({...e.geometry,spatialReference:i})})}async _fetchLayerMetaData(e,i){const r=await Ve(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,i,r){if(this.dataElement)return;const n=await Ve(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then(s=>{var o;return(o=s.data.layerDataElements)==null?void 0:o[0]});n&&this.read(n,{origin:"service"})}};c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],vi.prototype,"id",void 0),c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],vi.prototype,"title",void 0),c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],vi.prototype,"layerUrl",void 0),c([d({type:Object,json:{origins:{service:{read:!0}},read:!1}})],vi.prototype,"dataElement",void 0),c([d({type:ct,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],vi.prototype,"fullExtent",void 0),c([d({type:Ee,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],vi.prototype,"spatialReference",void 0),c([d({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],vi.prototype,"type",void 0),c([d({readOnly:!0})],vi.prototype,"datasetName",null),c([d({readOnly:!0})],vi.prototype,"owner",null),c([d({readOnly:!0})],vi.prototype,"schemaGeneration",null),c([d({readOnly:!0})],vi.prototype,"parsedUrl",null),c([d({readOnly:!0})],vi.prototype,"featureServiceUrl",null),c([d({readOnly:!0})],vi.prototype,"networkServiceUrl",null),c([d({readOnly:!0})],vi.prototype,"layerId",null),c([d()],vi.prototype,"sourceJSON",void 0),c([d({readOnly:!0})],vi.prototype,"networkSystemLayers",null),c([d()],vi.prototype,"gdbVersion",void 0),c([d({type:Date})],vi.prototype,"historicMoment",void 0),vi=c([k("esri.networks.Network")],vi);const yMe=vi;var ds;(function(t){t[t.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",t[t.RTContainment=2]="RTContainment",t[t.RTAttachment=3]="RTAttachment",t[t.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",t[t.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(ds||(ds={}));const XS=new $e({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),gGe=new $e({connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),vGe=new $e({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let uh=class extends w0(Jr){constructor(e){super(e),this.request=Ve}initialize(){}async load(e){const i=this.layer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeatureSQL(e,i){var u,p;const r=e.layerId.toString(),n=(u=e.fieldsIndex)==null?void 0:u.normalizeFieldName("assetGroup"),s=(p=e.fieldsIndex)==null?void 0:p.normalizeFieldName("assetType"),o=n?i.attributes[n]:null,a=s?i.attributes[s]:null,l=this.rulesHash[r];if(l){const h=l.assetGroupHash[o];if(h)return h.assetTypeHash[a]||null}return null}async _initializeRulesTable(){var n,s,o,a,l,u,p,h,m,y,g;const e={};let i;(function(v){v[v.from=0]="from",v[v.to=1]="to",v[v.via=2]="via"})(i||(i={}));const r=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];for(const v of this.rules){if(v.ruleType!==ds.RTJunctionJunctionConnectivity&&v.ruleType!==ds.RTJunctionEdgeConnectivity&&v.ruleType!==ds.RTEdgeJunctionEdgeConnectivity)continue;let w=[[i.from,i.to],[i.to,i.from]];v.ruleType===ds.RTEdgeJunctionEdgeConnectivity&&(w=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const b of w){const _=b.shift(),S=b.shift();let $=!1;switch(v.ruleType){case ds.RTEdgeJunctionEdgeConnectivity:$=_===i.from||_===i.to;break;case ds.RTJunctionEdgeConnectivity:$=_===i.to}const T=r[_],I=((n=v[T.networkSourceId])==null?void 0:n.layerId.toString())??"",C=(o=(s=v[T.assetGroupId])==null?void 0:s.assetGroupCode)==null?void 0:o.toString(),M=v[T.assetTypeId],R=(a=M==null?void 0:M.assetTypeCode)==null?void 0:a.toString(),O=r[S],F=((l=v[O.networkSourceId])==null?void 0:l.layerId.toString())??"",A=(p=(u=v[O.assetGroupId])==null?void 0:u.assetGroupCode)==null?void 0:p.toString(),P=v[O.assetTypeId],V=(h=P==null?void 0:P.assetTypeCode)==null?void 0:h.toString(),te=e[I]??{assetGroupHash:{}};if(!(C&&R&&A&&V))continue;const re=te.assetGroupHash[C]??{assetTypeHash:{}},Q=re.assetTypeHash[R]??{};if(Q[F]=Q[F]??{},$){Q[I]=Q[I]??{};const ne=`(assetgroup = ${C} AND assettype = ${R})`;Q[I].anyVertex=Q[I].anyVertex?`${Q[I].anyVertex}`:`${ne}`,(P==null?void 0:P.connectivityPolicy)==="esriNECPEndVertex"&&(Q[I].endVertex=(m=Q[I])!=null&&m.endVertex?`${Q[I].endVertex}`:`${ne}`)}const H=`(assetgroup = ${A} AND assettype = ${V})`;Q[F].anyVertex=(y=Q[F])!=null&&y.anyVertex?`${Q[F].anyVertex} OR ${H}`:`${H}`,(P==null?void 0:P.connectivityPolicy)==="esriNECPEndVertex"&&(Q[F].endVertex=(g=Q[F])!=null&&g.endVertex?`${Q[F].endVertex} OR ${H}`:`${H}`),re.assetTypeHash[R]=Q,te.assetGroupHash[C]=re,e[I]=te}}this.rulesHash=e}};c([d({constructOnly:!0})],uh.prototype,"layer",void 0),c([d({constructOnly:!0})],uh.prototype,"rules",void 0),c([d()],uh.prototype,"rulesHash",void 0),c([d({constructOnly:!0})],uh.prototype,"request",void 0),uh=c([k("esri.networks.RulesTable")],uh);const gMe=uh;let Us=class extends B{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};c([d({type:[Object],json:{write:!0}})],Us.prototype,"conditionBarriers",void 0),c([d({type:[Object],json:{write:!0}})],Us.prototype,"outputConditions",void 0),c([d({type:[Object],json:{write:!0}})],Us.prototype,"functions",void 0),c([d({type:[Object],json:{write:!0}})],Us.prototype,"functionBarriers",void 0),c([d({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Us.prototype,"traversabilityScope",void 0),c([d({type:String,json:{write:!0}})],Us.prototype,"shortestPathNetworkAttributeName",void 0),c([d({type:Boolean,json:{write:!0}})],Us.prototype,"includeBarriers",void 0),c([d({type:Boolean,json:{write:!0}})],Us.prototype,"validateConsistency",void 0),c([d({type:Boolean,json:{write:!0}})],Us.prototype,"ignoreBarriersAtStartingPoints",void 0),Us=c([k("esri.networks.support.TraceConfiguration")],Us);const XF=Us;let Zt=class extends XF{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};c([d({type:[Object],json:{write:!0}})],Zt.prototype,"filterBarriers",void 0),c([d({type:String,json:{write:!0}})],Zt.prototype,"arcadeExpressionBarrier",void 0),c([d({type:String,json:{write:!0}})],Zt.prototype,"domainNetworkName",void 0),c([d({type:String,json:{write:!0}})],Zt.prototype,"filterBitsetNetworkAttributeName",void 0),c([d({type:[Object],json:{write:!0}})],Zt.prototype,"filterFunctionBarriers",void 0),c([d({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Zt.prototype,"filterScope",void 0),c([d({type:Boolean,json:{write:!0}})],Zt.prototype,"includeContainers",void 0),c([d({type:Boolean,json:{write:!0}})],Zt.prototype,"includeContent",void 0),c([d({type:Boolean,json:{write:!0}})],Zt.prototype,"includeIsolated",void 0),c([d({type:Boolean,json:{write:!0}})],Zt.prototype,"includeStructures",void 0),c([d({type:Boolean,json:{write:!0}})],Zt.prototype,"allowIndeterminateFlow",void 0),c([d({type:Boolean,json:{write:!0}})],Zt.prototype,"includeUpToFirstSpatialContainer",void 0),c([d({type:Object,json:{write:!0}})],Zt.prototype,"nearestNeighbor",void 0),c([d({type:[Object],json:{write:!0}})],Zt.prototype,"outputFilterCategories",void 0),c([d({type:[Object],json:{write:!0}})],Zt.prototype,"outputFilters",void 0),c([d({type:[Object],json:{write:!0}})],Zt.prototype,"propagators",void 0),c([d({type:String,json:{write:!0}})],Zt.prototype,"subnetworkName",void 0),c([d({type:String,json:{write:!0}})],Zt.prototype,"targetTierName",void 0),c([d({type:String,json:{write:!0}})],Zt.prototype,"diagramTemplateName",void 0),c([d({type:String,json:{write:!0}})],Zt.prototype,"tierName",void 0),c([d({type:Boolean,json:{write:!0}})],Zt.prototype,"validateLocatability",void 0),Zt=c([k("esri.networks.support.UNTraceConfiguration")],Zt);const vMe=Zt;let Tn=class extends $A{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?vMe.fromJSON(e):XF.fromJSON(e)}};c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],Tn.prototype,"globalId",void 0),c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],Tn.prototype,"title",void 0),c([d({type:XF,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Tn.prototype,"traceConfiguration",void 0),c([K("service","traceConfiguration")],Tn.prototype,"readTraceConfiguration",null),c([d({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Tn.prototype,"creationDate",void 0),c([d({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Tn.prototype,"creator",void 0),c([d({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Tn.prototype,"description",void 0),c([d({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],Tn.prototype,"minStartingPoints",void 0),c([d({json:{origins:{service:{read:!0,write:!0}},read:!1}})],Tn.prototype,"resultTypes",void 0),c([d({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],Tn.prototype,"tags",void 0),c([d({type:XS.apiValues,json:{type:XS.jsonValues,origins:{service:{read:XS.read,write:XS.write}},read:!1}})],Tn.prototype,"traceType",void 0),Tn=c([k("esri.networks.support.NamedTraceConfiguration")],Tn);const bMe=Tn;let lc=class extends de{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null}};c([d({constructOnly:!0})],lc.prototype,"rulesTableId",void 0),c([d({constructOnly:!0})],lc.prototype,"rulesTableUrl",void 0),c([d({constructOnly:!0})],lc.prototype,"subnetworksTableId",void 0),c([d({constructOnly:!0})],lc.prototype,"subnetworksTableUrl",void 0),c([d({constructOnly:!0})],lc.prototype,"dirtyAreasLayerId",void 0),c([d({constructOnly:!0})],lc.prototype,"dirtyAreasLayerUrl",void 0),lc=c([k("esri.networks.support.NetworkSystemLayers")],lc);const wMe=lc;let ty=class extends B{constructor(e){super(e),this.id=null,this.name=null}};c([d({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],ty.prototype,"id",void 0),c([d({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],ty.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],ty.prototype,"isUpstreamTerminal",void 0),ty=c([k("esri.networks.support.Terminal")],ty);const _Me=ty,e$=new $e({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Pu=class extends B{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};c([d({type:String,json:{write:!0}})],Pu.prototype,"defaultConfiguration",void 0),c([d({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Pu.prototype,"id",void 0),c([d({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Pu.prototype,"name",void 0),c([d({type:[_Me],json:{write:!0}})],Pu.prototype,"terminals",void 0),c([d({type:e$.apiValues,json:{type:e$.jsonValues,read:e$.read,write:e$.write}})],Pu.prototype,"traversabilityModel",void 0),Pu=c([k("esri.networks.support.TerminalConfiguration")],Pu);const VU=Pu;let iy=class extends B{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};c([d({type:ro,json:{write:!0},readOnly:!0})],iy.prototype,"line",void 0),c([d({type:n_,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],iy.prototype,"multipoint",void 0),c([d({type:ha,json:{write:!0},readOnly:!0})],iy.prototype,"polygon",void 0),iy=c([k("esri.rest.networks.support.AggregatedGeometry")],iy);const SMe=iy;let ry=class extends B{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};c([d({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],ry.prototype,"functionType",void 0),c([d({type:String,json:{write:!0},readOnly:!0})],ry.prototype,"networkAttributeName",void 0),c([d({type:Number,json:{write:!0},readOnly:!0})],ry.prototype,"result",void 0),ry=c([k("esri.rest.networks.support.FunctionResult")],ry);const $Me=ry;let zo=class extends B{constructor(e){super(e),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};c([d({type:Number,json:{write:!0}})],zo.prototype,"assetGroupCode",void 0),c([d({type:Number,json:{write:!0}})],zo.prototype,"assetTypeCode",void 0),c([d({type:String,json:{write:!0}})],zo.prototype,"globalId",void 0),c([d({type:Number,json:{write:!0}})],zo.prototype,"networkSourceId",void 0),c([d({type:Number,json:{write:!0}})],zo.prototype,"objectId",void 0),c([d({type:Number,json:{write:!0}})],zo.prototype,"positionFrom",void 0),c([d({type:Number,json:{write:!0}})],zo.prototype,"positionTo",void 0),c([d({type:Number,json:{write:!0}})],zo.prototype,"terminalId",void 0),zo=c([k("esri.rest.networks.support.NetworkElement")],zo);const xMe=zo;let cc=class extends B{constructor(e){super(e),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};c([d({type:SMe,json:{write:!0},readOnly:!0})],cc.prototype,"aggregatedGeometry",void 0),c([d({type:[xMe],json:{write:!0},readOnly:!0})],cc.prototype,"elements",void 0),c([d({type:[$Me],json:{write:!0},readOnly:!0})],cc.prototype,"globalFunctionResults",void 0),c([d({type:Boolean,json:{write:!0},readOnly:!0})],cc.prototype,"kFeaturesForKNNFound",void 0),c([d({type:Boolean,json:{write:!0},readOnly:!0})],cc.prototype,"startingPointsIgnored",void 0),c([d({type:[String],json:{write:!0},readOnly:!0})],cc.prototype,"warnings",void 0),cc=c([k("esri.rest.networks.support.TraceResult")],cc);const EMe=cc,TMe=Zi()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let dh=class extends EMe{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await Ve(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(mt()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),s(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};c([d({type:String,json:{write:!0}})],dh.prototype,"statusUrl",void 0),c([he(TMe)],dh.prototype,"status",void 0),c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],dh.prototype,"submissionTime",void 0),c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],dh.prototype,"lastUpdatedTime",void 0),dh=c([k("esri.networks.support.TraceJobInfo")],dh);const kMe=dh;let uc=class extends yMe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,i,r,n,s,o;return new wMe({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null})}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map(i=>VU.fromJSON(i)))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map(i=>i.domainNetworkName))||[]}get _utilityLayerList(){var i,r;const e=new Set;return(r=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||r.map(n=>{n.edgeSources.map(s=>{e.add(s.layerId)}),n.junctionSources.map(s=>{e.add(s.layerId)})}),e}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var u,p,h,m;let i=null,r=null;const n=e.layer;let s=null;if((n==null?void 0:n.type)==="feature"){if(s=n.layerId,s===null)return null}else if((n==null?void 0:n.type)!=="subtype-sublayer"||(s=((u=n==null?void 0:n.parent)==null?void 0:u.layerId)??null,s===null))return null;const o=e.attributes;if(o==null)return null;for(const y of Object.keys(o))y.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(y)),y.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(y));if(!this.dataElement)return null;let a=null;const l=this.dataElement.domainNetworks;for(const y of l){const g=(p=y.junctionSources)==null?void 0:p.find(v=>v.layerId===s);if(g){const v=(h=g.assetGroups)==null?void 0:h.find(w=>w.assetGroupCode===i);if(v){const w=(m=v.assetTypes)==null?void 0:m.find(b=>b.assetTypeCode===r);if(w){a=w.terminalConfigurationId;break}}}}if(a!=null){const y=this.dataElement.terminalConfigurations,g=y==null?void 0:y.find(v=>v.terminalConfigurationId===a);return g?VU.fromJSON(g):null}return null}getTierNames(e){var r;const i=(r=this.dataElement)==null?void 0:r.domainNetworks.find(n=>n.domainNetworkName===e);return(i==null?void 0:i.tiers.map(n=>n.name))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}isUtilityLayer(e){return this._utilityLayerList.has(e.layerId)}async queryAssociations(e){const[{queryAssociations:i},{default:r}]=await Promise.all([Z(()=>import("./queryAssociations-_8KmtyoE.js"),__vite__mapDeps([121,122])),Z(()=>import("./QueryAssociationsParameters-P0xcB6s4.js"),__vite__mapDeps([]))]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await i(this.networkServiceUrl,n)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([Z(()=>import("./synthesizeAssociationGeometries-8hBE1yOH.js"),__vite__mapDeps([123,122])),Z(()=>import("./SynthesizeAssociationGeometriesParameters-AzS1RxRQ.js"),__vite__mapDeps([]))]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([Z(()=>import("./trace-Xil48_Cq.js"),__vite__mapDeps([])),Z(()=>import("./TraceParameters-FRmtfFai.js"),__vite__mapDeps([]))]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([Z(()=>import("./trace-Xil48_Cq.js"),__vite__mapDeps([])),Z(()=>import("./TraceParameters-FRmtfFai.js"),__vite__mapDeps([]))]),n=r.from(e);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await i(this.networkServiceUrl,n);return new kMe({statusUrl:s})}async _loadNamedTraceConfigurationsFromNetwork(e){var n;if(((n=this.sharedNamedTraceConfigurations)==null?void 0:n.length)===0)return;const i=this.sharedNamedTraceConfigurations.map(s=>s.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const s of this.sharedNamedTraceConfigurations){const o=r==null?void 0:r.find(a=>a.globalId===s.globalId);if(o){const a=o.write({},{origin:"service"});s.read(a,{origin:"service"})}}}async _createRulesTable(){var o;const e=this.networkSystemLayers.rulesTableUrl,i=new Vee({url:e});await i.load();const r=(o=this.dataElement)==null?void 0:o.domainNetworks;if(!r)return null;const n=r.flatMap(a=>[...a.edgeSources,...a.junctionSources]),s=(await this._queryRulesTable(i)).map(a=>this._hydrateRuleInfo(i,n,a));return new gMe({layer:i,rules:s})}async _queryRulesTable(e){const i=new pp({where:"1=1",outFields:["*"]});return(await iee(e,i)).features}_hydrateRuleInfo(e,i,r){const n=e.fieldsIndex,s=n.get("RULETYPE"),o=n.get("CREATIONDATE"),a=n.get("FROMNETWORKSOURCEID"),l=n.get("FROMASSETGROUP"),u=n.get("FROMASSETTYPE"),p=n.get("FROMTERMINALID"),h=n.get("TONETWORKSOURCEID"),m=n.get("TOASSETGROUP"),y=n.get("TOASSETTYPE"),g=n.get("TOTERMINALID"),v=n.get("VIANETWORKSOURCEID"),w=n.get("VIAASSETGROUP"),b=n.get("VIAASSETTYPE"),_=n.get("VIATERMINALID"),S=r.attributes[s.name],$=new Date(r.attributes[o.name]),T=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[u.name],terminalId:r.attributes[p.name]},{networkSourceId:r.attributes[h.name],assetGroupId:r.attributes[m.name],assetTypeId:r.attributes[y.name],terminalId:r.attributes[g.name]},{networkSourceId:r.attributes[v.name],assetGroupId:r.attributes[w.name],assetTypeId:r.attributes[b.name],terminalId:r.attributes[_.name]}];let I;(function(M){M[M.from=0]="from",M[M.to=1]="to",M[M.via=2]="via"})(I||(I={}));const C={ruleType:S,creationDate:$};for(const M of[I.from,I.to,I.via]){if(S!==ds.RTEdgeJunctionEdgeConnectivity&&M===I.via)continue;const R=T[M],O=i.find(te=>te.sourceId===R.networkSourceId),F=O==null?void 0:O.assetGroups.find(te=>te.assetGroupCode===R.assetGroupId),A=F==null?void 0:F.assetTypes.find(te=>te.assetTypeCode===R.assetTypeId);let P=this._getTerminal(S,A,R);S!==ds.RTContainment&&S!==ds.RTAttachment||(P=null);let V="";switch(M){case I.from:V="from";break;case I.to:V="to";break;case I.via:V="via"}C[`${V}NetworkSource`]=O,C[`${V}AssetGroup`]=F,C[`${V}AssetType`]=A,C[`${V}Terminal`]=P==null?void 0:P.toJSON()}return C}_getTerminal(e,i,r){var o,a;if(e===ds.RTAttachment||e===ds.RTContainment)return null;const n=i==null?void 0:i.terminalConfigurationId,s=(o=this.terminalConfigurations)==null?void 0:o.find(l=>l.id===n);return((a=s==null?void 0:s.terminals)==null?void 0:a.find(l=>l.id===r.terminalId))??null}};c([d({type:[bMe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],uc.prototype,"sharedNamedTraceConfigurations",void 0),c([d({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],uc.prototype,"type",void 0),c([d({readOnly:!0})],uc.prototype,"serviceTerritoryFeatureLayerId",null),c([d({readOnly:!0})],uc.prototype,"networkSystemLayers",null),c([d({readOnly:!0})],uc.prototype,"terminalConfigurations",null),c([d({readOnly:!0})],uc.prototype,"domainNetworkNames",null),uc=c([k("esri.networks.UtilityNetwork")],uc);const Uee=uc,IMe=Object.freeze(Object.defineProperty({__proto__:null,default:Uee},Symbol.toStringTag,{value:"Module"}));let Ru=class extends B{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};c([d({type:String,json:{write:!0}})],Ru.prototype,"facilityIdField",void 0),c([d({type:String,json:{write:!0}})],Ru.prototype,"layerId",void 0),c([d({type:String,json:{write:!0}})],Ru.prototype,"nameField",void 0),c([d({type:String,json:{write:!0}})],Ru.prototype,"siteIdField",void 0),c([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Ru.prototype,"sublayerId",void 0),Ru=c([k("esri.layers.support.FacilityLayerInfo")],Ru);const CMe=Ru;let Vo=class extends B{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};c([d({type:String,json:{write:!0}})],Vo.prototype,"facilityIdField",void 0),c([d({type:String,json:{write:!0}})],Vo.prototype,"layerId",void 0),c([d({type:String,json:{write:!0}})],Vo.prototype,"levelIdField",void 0),c([d({type:String,json:{write:!0}})],Vo.prototype,"levelNumberField",void 0),c([d({type:String,json:{write:!0}})],Vo.prototype,"longNameField",void 0),c([d({type:String,json:{write:!0}})],Vo.prototype,"shortNameField",void 0),c([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Vo.prototype,"sublayerId",void 0),c([d({type:String,json:{write:!0}})],Vo.prototype,"verticalOrderField",void 0),Vo=c([k("esri.layers.support.LevelLayerInfo")],Vo);const MMe=Vo;let ph=class extends B{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};c([d({type:String,json:{write:!0}})],ph.prototype,"layerId",void 0),c([d({type:String,json:{write:!0}})],ph.prototype,"nameField",void 0),c([d({type:String,json:{write:!0}})],ph.prototype,"siteIdField",void 0),c([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ph.prototype,"sublayerId",void 0),ph=c([k("esri.layers.support.SiteLayerInfo")],ph);const LMe=ph;let ny=class extends B{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};c([d({type:MMe,json:{write:!0}})],ny.prototype,"levelLayer",void 0),c([d({type:CMe,json:{write:!0}})],ny.prototype,"facilityLayer",void 0),c([d({type:LMe,json:{write:!0}})],ny.prototype,"siteLayer",void 0),ny=c([k("esri.support.MapFloorInfo")],ny);const OMe=ny;let sy=class extends Je(B){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};c([d({type:String,json:{write:{isRequired:!0}}})],sy.prototype,"expression",void 0),c([d({type:["number","string"],json:{write:!0}})],sy.prototype,"returnType",void 0),c([d({type:String,json:{write:!0}})],sy.prototype,"title",void 0),sy=c([k("esri.webdoc.geotriggersInfo.ExpressionInfo")],sy);const Bee=sy,t$=new $e({deviceLocation:"device-location"});let fb=class extends Je(B){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};c([d({type:Bee,json:{write:!0}})],fb.prototype,"filterExpression",void 0),c([d({type:t$.apiValues,readOnly:!0,json:{type:t$.jsonValues,read:t$.read,write:t$.write}})],fb.prototype,"type",void 0),fb=c([k("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],fb);const AMe=fb;let mb=class extends Je(B){constructor(e){super(e),this.geometry=null,this.where=null}};c([d({types:cp,json:{read:_l,write:!0}})],mb.prototype,"geometry",void 0),c([d({type:String,json:{write:!0}})],mb.prototype,"where",void 0),mb=c([k("esri.webdoc.geotriggersInfo.FeatureFilter")],mb);const PMe=mb;let oy=class extends Je(B){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};c([d({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],oy.prototype,"layerId",void 0),c([d({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],oy.prototype,"layerUrl",void 0),c([he({featureLayer:"feature-layer"},{readOnly:!0})],oy.prototype,"type",void 0),oy=c([k("esri.webdoc.geotriggersInfo.FeatureLayerSource")],oy);const RMe=oy;let hh=class extends Je(B){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};c([d({type:RMe,json:{write:{isRequired:!0}}})],hh.prototype,"fenceSource",void 0),c([d({type:PMe,json:{write:!0}})],hh.prototype,"filter",void 0),c([d({type:Number,json:{write:!0}})],hh.prototype,"bufferDistance",void 0),c([he({features:"features"},{readOnly:!0})],hh.prototype,"type",void 0),hh=c([k("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],hh);const NMe=hh;let Yx=class extends Je(B){constructor(e){super(e),this.type="fence"}};c([he({fence:"fence"},{readOnly:!0})],Yx.prototype,"type",void 0),Yx=c([k("esri.webdoc.geotriggersInfo.Geotrigger")],Yx);const Gee=Yx;let yb=class extends Je(B){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};c([d({type:Bee,json:{write:!0}})],yb.prototype,"expressionInfo",void 0),c([d({type:[String],json:{write:!0}})],yb.prototype,"requestedActions",void 0),yb=c([k("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],yb);const DMe=yb,FMe=new $e({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),jMe=new $e({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),i$=new $e({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Uo=class extends Gee{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};c([he(FMe)],Uo.prototype,"enterExitRule",void 0),c([d({type:AMe,json:{write:{isRequired:!0}}})],Uo.prototype,"feed",void 0),c([he(jMe)],Uo.prototype,"feedAccuracyMode",void 0),c([d({type:i$.apiValues,json:{type:i$.jsonValues,read:i$.read,write:{writer:i$.write,isRequired:!0}}})],Uo.prototype,"fenceNotificationRule",void 0),c([d({type:NMe,json:{write:{isRequired:!0}}})],Uo.prototype,"fenceParameters",void 0),c([d({type:String,json:{write:!0}})],Uo.prototype,"name",void 0),c([d({type:DMe,json:{write:!0}})],Uo.prototype,"notificationOptions",void 0),c([he({fence:"fence"},{readOnly:!0})],Uo.prototype,"type",void 0),Uo=c([k("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Uo);const zMe=Uo,VMe={base:Gee,key:"type",typeMap:{fence:zMe}};let Kx=class extends Je(B){constructor(e){super(e),this.geotriggers=null}};c([d({types:[VMe],json:{write:{isRequired:!0}}})],Kx.prototype,"geotriggers",void 0),Kx=c([k("esri.webdoc.GeotriggersInfo")],Kx);const UMe=Kx;var gR;let ay=gR=class extends B{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new gR(D({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};c([d({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],ay.prototype,"activeRange",void 0),c([d({type:[Number],json:{write:!0}})],ay.prototype,"currentRangeExtent",void 0),c([d({type:[Number],json:{write:!0}})],ay.prototype,"fullRangeExtent",void 0),ay=gR=c([k("esri.webdoc.RangeInfo")],ay);const e4=ay;function Hee(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function ud(t){return typeof t=="string"?mi(t):D(t)}function qee(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(s!=null&&typeof s!="function")if(Array.isArray(s)){r[n]=[];for(let o=0;o<s.length;o++)r[n][o]=qee(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i==null?void 0:i[n]);r[n]=e?o:JSON.stringify(o)}else r[n]=e?s:JSON.stringify(s);else r[n]=s}return r}function pT(t,e){var i;return t?d5(t)&&(e||Ze.apiKey)?e||Ze.apiKey:(i=Ne==null?void 0:Ne.findCredential(t))==null?void 0:i.token:null}function BMe(t){return{geometryType:s_(t[0]),geometries:t.map(e=>e.toJSON())}}function Wee(t,e,i){const r=o1e(e);return t.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}let fh=class extends B{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),i=this.geometries[0],r={};return r.outSR=DE(this.outSpatialReference),r.inSR=DE(i.spatialReference),r.geometries=JSON.stringify({geometryType:s_(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};c([d()],fh.prototype,"geometries",void 0),c([d({json:{read:{source:"outSR"}}})],fh.prototype,"outSpatialReference",void 0),c([d()],fh.prototype,"transformation",void 0),c([d()],fh.prototype,"transformForward",void 0),fh=c([k("esri.rest.support.ProjectParameters")],fh);const Jee=fh,GMe=ei(Jee);async function HMe(t,e,i){e=GMe(e);const r=ud(t),n={...r.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=s_(e.geometries[0]),a=Hee(n,i);return Ve(r.path+"/project",a).then(({data:{geometries:l}})=>Wee(l,o,s))}function qMe(t,e){var i;return e.resourceInfo?Zee(e,e.resourceInfo,{origin:t.origin}):(i=e.portalItem)!=null&&i.id?WMe(t,e,e.portalItem):Promise.resolve()}function Zee(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||gi.getDefault()),Z(()=>import("./layersCreator-NYJ93n7K.js"),__vite__mapDeps([5,6,7,8])).then(({populateOperationalLayers:n})=>{const s=[],o=e.operationalLayers;o!=null&&o.length&&s.push(n(t.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l!=null&&l.length&&s.push(n(t.tables,l,a)),Promise.allSettled(s).then(()=>{})})}async function WMe(t,e,i){var o;if(await i.load().catch(a=>{throw new j(`${t.name}:load-portal-item`,"Failed to load portal item",{error:a})}),i.type!==t.itemType)throw new j(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const n={origin:t.origin,url:mi(i.itemUrl),portal:i.portal||gi.getDefault(),portalItem:i,readResourcePaths:[]};await JMe(t,e,r,n),e.resourceReferences={portalItem:i,paths:n.readResourcePaths};const s=await YMe(e.initialViewProperties,i,q.getLogger(e));if(s){const a=((o=e.initialViewProperties)==null?void 0:o.clone())??t.createInitialViewProperties();a.viewpoint=s,e.initialViewProperties=a}}function JMe(t,e,i,r){const n=ZMe(t,i);return e.read(n,r),Zee(e,n,r)}function ZMe(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function YMe(t,e,i){var s;if((s=t==null?void 0:t.viewpoint)==null?void 0:s.targetGeometry)return null;const n=await KMe(t,e,i);return n?new dr({targetGeometry:n}):null}async function KMe(t,e,i){const r=t==null?void 0:t.spatialReference,n=e==null?void 0:e.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return Rd(n);const{getGeometryServiceURL:s}=await Z(()=>import("./geometryServiceUtils-t1CtTnlo.js"),__vite__mapDeps([]));try{const o=await s(e),a=new Jee;return a.geometries=[n],a.outSpatialReference=r,(await HMe(o,a))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}var vR;let ja=vR=class extends B{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new vR(D({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};c([d({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],ja.prototype,"enabled",void 0),c([d({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],ja.prototype,"longNames",void 0),c([d({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],ja.prototype,"minimized",void 0),c([d({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],ja.prototype,"pinnedLevels",void 0),c([d({type:String,json:{read:{source:"site"},write:{target:"site"}}})],ja.prototype,"site",void 0),c([d({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],ja.prototype,"facility",void 0),c([d({type:String,json:{read:{source:"level"},write:{target:"level"}}})],ja.prototype,"level",void 0),ja=vR=c([k("esri.webdoc.widgets.FloorFilter")],ja);const QMe=ja;var bR;const r$=new $e({slider:"slider",picker:"picker"});let ly=bR=class extends B{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new bR({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};c([d({type:r$.apiValues,nonNullable:!0,json:{type:r$.jsonValues,default:null,read:{reader:r$.read},write:{isRequired:!0,writer:r$.write}}})],ly.prototype,"interactionMode",void 0),c([d({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],ly.prototype,"numStops",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],ly.prototype,"stopInterval",void 0),ly=bR=c([k("esri.webdoc.widgets.Range")],ly);const XMe=ly;var wR;let zi=wR=class extends B{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){if(!t)return;const e=t[0]!=null?new Date(t[0]):null,i=t[1]!=null?new Date(t[1]):null;return new pn({start:e,end:i})}writeCurrentTimeExtent(t,e,i){t&&Ji(i,[t.start!=null?t.start.getTime():null,t.end!=null?t.end.getTime():null],e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new pn({start:n,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,n=t.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(t,e,i){return t?Kg.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const n=t.toJSON(r);Ji(i,{interval:n.value,units:n.unit},e)}readStops(t){return t!=null&&t.length?t.map(e=>new Date(e)):null}writeStops(t,e,i){t!=null&&t.length&&Ji(i,t.map(r=>r.getTime()),e)}clone(){return new wR(D({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};c([d({type:pn,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],zi.prototype,"currentTimeExtent",void 0),c([K("currentTimeExtent")],zi.prototype,"readCurrentTimeExtent",null),c([ee("currentTimeExtent")],zi.prototype,"writeCurrentTimeExtent",null),c([d({type:pn,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],zi.prototype,"fullTimeExtent",void 0),c([K("fullTimeExtent")],zi.prototype,"readFullTimeExtent",null),c([ee("fullTimeExtent")],zi.prototype,"writeFullTimeExtent",null),c([d({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],zi.prototype,"loop",void 0),c([d({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var r;const t=!!this.stopInterval,e=!!((r=this.stops)!=null&&r.length),i=!(t||e);return{enabled:i,isRequired:i}}}}})],zi.prototype,"numStops",void 0),c([d({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],zi.prototype,"numThumbs",void 0),c([d({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],zi.prototype,"stopDelay",void 0),c([d({type:Kg,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var i;const t=this.numStops!=null,e=!!((i=this.stops)!=null&&i.length);return{enabled:!e,isRequired:!(t||e)}}}}})],zi.prototype,"stopInterval",void 0),c([K("stopInterval")],zi.prototype,"readStopInterval",null),c([ee("stopInterval")],zi.prototype,"writeStopInterval",null),c([d({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],zi.prototype,"stops",void 0),c([K("stops")],zi.prototype,"readStops",null),c([ee("stops")],zi.prototype,"writeStops",null),zi=wR=c([k("esri.webdoc.widgets.TimeSlider")],zi);const eLe=zi;var _R;let cy=_R=class extends B{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new _R(D({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};c([d({type:XMe,json:{write:!0}})],cy.prototype,"range",void 0),c([d({type:eLe,json:{write:!0}})],cy.prototype,"timeSlider",void 0),c([d({type:QMe,json:{write:!0}})],cy.prototype,"floorFilter",void 0),cy=_R=c([k("esri.webdoc.Widgets")],cy);const tLe=cy,iLe={width:600,height:400},n$=1.5;function rLe(t,e){e=e||iLe;let{width:i,height:r}=e;const n=i/r;return n<n$?r=i/n$:n>n$&&(i=r*n$),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function UU(t){return{enabled:!!(t!=null&&t.length)}}var SR;let uy=SR=class extends B{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new SR({exactMatch:this.exactMatch,type:this.type,name:this.name})}};c([d({type:Boolean,json:{write:!0}})],uy.prototype,"exactMatch",void 0),c([d({type:String,json:{write:!0}})],uy.prototype,"name",void 0),c([he(CF)],uy.prototype,"type",void 0),uy=SR=c([k("esri.webdoc.applicationProperties.SearchLayerField")],uy);const nLe=uy;var $R;let dy=$R=class extends B{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new $R(D({field:this.field,id:this.id,subLayer:this.subLayer}))}};c([d({type:nLe,json:{write:{isRequired:!0}}})],dy.prototype,"field",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],dy.prototype,"id",void 0),c([d({type:ft,json:{write:!0}})],dy.prototype,"subLayer",void 0),dy=$R=c([k("esri.webdoc.applicationProperties.SearchLayer")],dy);const sLe=dy;var xR;let py=xR=class extends B{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new xR({exactMatch:this.exactMatch,type:this.type,name:this.name})}};c([d({type:Boolean,json:{write:!0}})],py.prototype,"exactMatch",void 0),c([d({type:String,json:{write:!0}})],py.prototype,"name",void 0),c([he(CF)],py.prototype,"type",void 0),py=xR=c([k("esri.webdoc.applicationProperties.SearchTableField")],py);const oLe=py;var ER;let gb=ER=class extends B{constructor(t){super(t),this.field=null,this.id=null}clone(){return new ER(D({field:this.field,id:this.id}))}};c([d({type:oLe,json:{write:{isRequired:!0}}})],gb.prototype,"field",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],gb.prototype,"id",void 0),gb=ER=c([k("esri.webdoc.applicationProperties.SearchTable")],gb);const aLe=gb;var TR;const Yee=ce.ofType(sLe),Kee=ce.ofType(aLe);let za=TR=class extends B{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Yee,this.tables=new Kee}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new TR(D({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};c([d({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],za.prototype,"addressSearchEnabled",void 0),c([K("addressSearchEnabled")],za.prototype,"readAddressSearchEnabled",null),c([ee("addressSearchEnabled")],za.prototype,"writeAddressSearchEnabled",null),c([d({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],za.prototype,"enabled",void 0),c([d({type:String,json:{write:!0}})],za.prototype,"hintText",void 0),c([d({type:Yee,json:{write:{overridePolicy:UU},origins:{"web-scene":{write:{isRequired:!0}}}}})],za.prototype,"layers",void 0),c([d({type:Kee,json:{read:!0,write:{overridePolicy:UU}}})],za.prototype,"tables",void 0),za=TR=c([k("esri.webdoc.applicationProperties.Search")],za);const lLe=za;var kR;let Qx=kR=class extends B{constructor(t){super(t),this.search=null}clone(){return new kR(D({search:this.search}))}};c([d({type:lLe,json:{write:!0}})],Qx.prototype,"search",void 0),Qx=kR=c([k("esri.webdoc.applicationProperties.Viewing")],Qx);const cLe=Qx;var IR;let hy=IR=class extends B{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new IR(D({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};c([d({json:{write:!0}})],hy.prototype,"editing",void 0),c([d({json:{write:!0}})],hy.prototype,"offline",void 0),c([d({type:cLe,json:{write:!0}})],hy.prototype,"viewing",void 0),hy=IR=c([k("esri.webmap.ApplicationProperties")],hy);const uLe=hy;var CR;let Mc=CR=class extends B{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new CR({url:this.url})}};c([d({type:String,json:{write:{isRequired:!0}}})],Mc.prototype,"url",void 0),Mc=CR=c([k("esri.webdoc.support.SlideThumbnail")],Mc);var MR;let Va=MR=class extends Jf(B){constructor(t){super(t),this.name=null,this.thumbnail=new Mc,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new Mc({url:t}):ei(Mc,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&q.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return dr.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:n}=t;if(n==null||n.type==="extent")n!=null&&(e.extent=n.toJSON()),e[i]=t.toJSON();else{const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";r!=null&&r.messages?r.messages.push(new j("property:unsupported",s)):q.getLogger(this).error(s)}}clone(){return new MR(D({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};c([d({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Va.prototype,"name",void 0),c([d({type:Mc,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],Va.prototype,"thumbnail",void 0),c([qe("thumbnail")],Va.prototype,"castThumbnail",null),c([d({type:pn,json:{write:!0}})],Va.prototype,"timeExtent",void 0),c([d({type:dr,nonNullable:!0,json:{write:!0}})],Va.prototype,"viewpoint",null),c([K("viewpoint",["extent","viewpoint"])],Va.prototype,"readViewpoint",null),c([ee("viewpoint")],Va.prototype,"writeViewpoint",null),Va=MR=c([k("esri.webmap.Bookmark")],Va);const t4=Va;var LR;let Xx=LR=class extends B{constructor(t){super(t),this.color=new le([0,0,0,1])}clone(){return new LR(D({color:this.color}))}};c([d({type:le,json:{write:!0}})],Xx.prototype,"color",void 0),Xx=LR=c([k("esri.webmap.background.ColorBackground")],Xx);const vI=Xx;let Nu=class extends Je(de){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeZone=ks,this.viewpoint=null}};c([d({type:vI})],Nu.prototype,"background",void 0),c([d({type:e4})],Nu.prototype,"rangeInfo",void 0),c([d({type:Ee})],Nu.prototype,"spatialReference",void 0),c([d({nonNullable:!0})],Nu.prototype,"timeZone",void 0),c([d({type:dr})],Nu.prototype,"viewpoint",void 0),Nu=c([k("esri.webmap.InitialViewProperties")],Nu);const hT=Nu;let _g=class extends oT{constructor(e,i){super(e,i,"webmap")}};const hw=new _g(2,29),dLe="Web Map",pLe="webmap",OR="web-map",Qee=ce.ofType(t4),hLe=ce.ofType(Uee),fLe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),mLe="ArcGIS Pro",yLe=Pee.JSAPI,TM={currentVersion:hw,createInitialViewProperties:()=>new hT,parseVersion:_g.parse,itemType:dLe,name:pLe,origin:OR};let ht=class extends Gk(Jr.LoadableMixin(S0(AY))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new Qee,this.floorInfo=null,this.geotriggersInfo=null,this.initialViewProperties=new hT,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this._debouncedSaveOperations=Q1(async(i,r,n)=>{const{save:s,saveAs:o}=await Z(()=>import("./webdocSaveUtils-YNFf_mwh.js"),__vite__mapDeps([124,110,111,113,125,126]));switch(i){case cl.SAVE:return s(TM,this,r);case cl.SAVE_AS:return o(TM,this,n,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){if(this.portalItem=wt(this.portalItem),this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}initialize(){if(this.when().catch(e=>{q.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=yLe}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=NJ}readInitialViewProperties(e,i){var s;const r=new hT;i.background&&(r.background=vI.fromJSON(i.background));const n=(s=i.initialState)==null?void 0:s.viewpoint;return n&&(n.rotation&&_g.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===mLe&&(n.rotation*=-1),r.viewpoint=dr.fromJSON(n)),i.mapRangeInfo&&(r.rangeInfo=e4.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=Ee.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,n){var s;e&&((s=e.background)!=null&&s.color&&(i.background=e.background.write({},n)),e.viewpoint&&(i.initialState={viewpoint:e.viewpoint.write({},n)}),e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},n)),i.timeZone=e.timeZone)}writeLayers(e,i,r,n){i[r]=this._writeLayers(e,n,"operational-layers")}readSourceVersion(e,i){const[r,n]=i.version.split(".");return new _g(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,i,r){i[r]=`${hw.major}.${hw.minor}`}writeTables(e,i,r,n){const s=this._writeLayers(e,n,"tables");s.length&&(i[r]=s)}get thumbnailUrl(){var e;return((e=this.portalItem)==null?void 0:e.thumbnailUrl)||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(qMe(TM,this)),Promise.resolve(this)}loadAll(){return g5(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,i){i={...i,origin:OR};const r=this._getAuthoringPropsState();SJ(this,e,n=>super.read(e,n),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new j("webmap:not-loaded","Web map must be loaded before it can be serialized");throw q.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:OR,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(cl.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(cl.SAVE_AS,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var r,n,s,o;const i=this.resourceInfo;return this._collectAllLayersJSON([...((r=i==null?void 0:i.baseMap)==null?void 0:r.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((o=(s=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:s.data)==null?void 0:o.baseMapLayers)||[]]).find(a=>a.id===e.id)}async updateItemThumbnail(){var e;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:c5(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map(n=>uA(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i)).filter(An).toArray()}_validateJSON(e){const i=_g.parse(e.version||"","webmap");return hw.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){var s,o,a;const e=this.applicationProperties,i=(s=e==null?void 0:e.viewing)==null?void 0:s.search,r=l=>this.allLayers.some(u=>u.id===l);if(i&&i.layers&&(i.layers=i.layers.filter(l=>r(l.id))),i&&i.tables&&(i.tables=i.tables.filter(l=>this.tables.some(u=>u.id===l.id))),e){const l=(o=e.editing)==null?void 0:o.locationTracking;l!=null&&l.info&&!r(l.info.layerId)&&(e.editing=null)}const n=(a=this.presentation)==null?void 0:a.slides;n&&n.forEach(l=>{l.visibleLayers&&(l.visibleLayers=l.visibleLayers.filter(u=>r(u.id)))})}async _updateFromInternal(e,i){if(i??(i={}),await Zf(()=>e.ready),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){var r,n;if(i.backgroundExcluded||(this.initialViewProperties.background=(r=e.background)==null?void 0:r.clone()),this.initialViewProperties.spatialReference=(n=e.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new dr({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const s of e.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=rLe(e,i.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(sp(e)){const i=_f(e),r=i==null?void 0:i.mediaType,n=r&&fLe.get(r.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const i=e;if(!i)throw new j("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:i})}};ht.VERSION=hw,c([d()],ht.prototype,"_updateFromPromise",void 0),c([d({type:uLe,json:{write:!0}})],ht.prototype,"applicationProperties",void 0),c([d({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],ht.prototype,"authoringApp",null),c([ee("authoringApp")],ht.prototype,"writeAuthoringApp",null),c([d({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],ht.prototype,"authoringAppVersion",null),c([ee("authoringAppVersion")],ht.prototype,"writeAuthoringAppVersion",null),c([d({type:Qee,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],ht.prototype,"bookmarks",void 0),c([d({type:OMe,json:{name:"mapFloorInfo",write:!0}})],ht.prototype,"floorInfo",void 0),c([d({type:UMe,json:{write:!0}})],ht.prototype,"geotriggersInfo",void 0),c([d({type:hT,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:vI},"initialState.viewpoint":{type:dr},mapRangeInfo:{type:e4},spatialReference:{type:Ee},"timeZone:":{type:String}}}}})],ht.prototype,"initialViewProperties",void 0),c([K("initialViewProperties")],ht.prototype,"readInitialViewProperties",null),c([ee("initialViewProperties")],ht.prototype,"writeInitialViewProperties",null),c([d({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],ht.prototype,"layers",void 0),c([ee("layers")],ht.prototype,"writeLayers",null),c([d({type:ml})],ht.prototype,"portalItem",void 0),c([d({json:{write:!0}})],ht.prototype,"presentation",void 0),c([d()],ht.prototype,"resourceInfo",void 0),c([d({readOnly:!0,type:_g,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],ht.prototype,"sourceVersion",void 0),c([K("sourceVersion")],ht.prototype,"readSourceVersion",null),c([ee("sourceVersion")],ht.prototype,"writeSourceVersion",null),c([d({json:{read:!1,write:{ignoreOrigin:!0}}})],ht.prototype,"tables",void 0),c([ee("tables")],ht.prototype,"writeTables",null),c([d()],ht.prototype,"thumbnailUrl",null),c([d()],ht.prototype,"updatingFromView",null),c([d({type:tLe,json:{write:!0}})],ht.prototype,"widgets",void 0),c([d({type:hLe,json:{read:!0,write:!0}})],ht.prototype,"utilityNetworks",void 0),ht=c([k("esri.WebMap")],ht);const gLe=ht;var AR;let Ua=AR=class extends B{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new AR({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ua.prototype,"cols",void 0),c([d({type:ft,json:{write:!0}})],Ua.prototype,"level",void 0),c([d({type:String,json:{write:!0}})],Ua.prototype,"levelValue",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ua.prototype,"origin",void 0),c([d({type:Number,json:{write:!0}})],Ua.prototype,"resolution",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ua.prototype,"rows",void 0),c([d({type:Number,json:{write:!0}})],Ua.prototype,"scale",void 0),Ua=AR=c([k("esri.layers.support.LOD")],Ua);const eo=Ua;let vLe=class{constructor(e,i,r,n,s=void 0){this.id=e,this.level=i,this.row=r,this.col=n,this.extent=s}};var Du;const BU=new $e({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let yr=Du=class extends B{static create(t={}){const{resolutionFactor:e=1,scales:i,size:r=256,spatialReference:n=Ee.WebMercator,numLODs:s=24}=t;if(!cr(n)){const h=[];if(i)for(let m=0;m<i.length;m++){const y=i[m];h.push(new eo({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=s-1;y>=0;y--)h.unshift(new eo({level:y,scale:m,resolution:m})),m*=2}return new Du({dpi:96,lods:h,origin:new Me(0,0,n),size:[r,r],spatialReference:n})}const o=vs(n),a=t.origin?new Me({x:t.origin.x,y:t.origin.y,spatialReference:n}):new Me(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=96,u=1/(Cl(n)*39.37*l),p=[];if(i)for(let h=0;h<i.length;h++){const m=i[h],y=m*u;p.push(new eo({level:h,scale:m,resolution:y}))}else{let h=w5(n)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const m=Math.ceil(s/e);p.push(new eo({level:0,scale:h,resolution:h*u}));for(let y=1;y<m;y++){const g=h/2**e,v=g*u;p.push(new eo({level:y,scale:g,resolution:v})),h=g}}return new Du({dpi:l,lods:p,origin:a,size:[r,r],spatialReference:n})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=vs(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return Me.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const r=[],n=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(s=>{r.push(s.scale),e=s.scale>e?s.scale:e,i=s.scale<i?s.scale:i,n[s.level]=s})),this._set("scales",r),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),r=i+1;return e[i]/(e[i]/e[r])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let r=0;for(;r<i;r++){const n=e[r],s=e[r+1];if(n<=t)return r;if(s===t)return r+1;if(n>t&&s<t)return r+Math.log(n/t)/Math.log(n/s)}return r}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,r){const n=this.lodAt(t);if(!n)return null;let s,o;if(typeof e=="number")s=e,o=i;else if(ti(e.spatialReference,this.spatialReference))s=e.x,o=e.y,r=i;else{const u=Rk(e,this.spatialReference);if(u==null)return null;s=u.x,o=u.y,r=i}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return r||(r=new vLe(null,0,0,0,Bn())),r.level=t,r.row=Math.floor((this.origin.y-o)/l+.001),r.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(t,e=Du.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===Du.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<t.level&&(i=o)}if(!i)return;const r=t.level-i.level,n=i.resolution*this.size[0]/2**r,s=i.resolution*this.size[1]/2**r;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=Bn()),t.extent[0]=this.origin.x+t.col*n,t.extent[1]=this.origin.y-(t.row+1)*s,t.extent[2]=t.extent[0]+n,t.extent[3]=t.extent[1]+s}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:r}=i,n=r*this.size[0],s=r*this.size[1];return t[0]=this.origin.x+e.col*n,t[1]=this.origin.y-(e.row+1)*s,t[2]=t[0]+n,t[3]=t[1]+s,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return Du.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],r=this.lods.length;for(let n=0;n<r;n++){const s=this.lods[n],o=s.resolution*e;i.push(new eo({level:s.level,scale:s.scale,resolution:o}))}return new Du({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const r=t[i];this._upsampleLevels[r.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/r.resolution:0},e=r}}};c([d({type:Number,json:{write:!0}})],yr.prototype,"compressionQuality",void 0),c([d({type:Number,json:{write:!0}})],yr.prototype,"dpi",void 0),c([d({type:String,json:{read:BU.read,write:BU.write,origins:{"web-scene":{read:!1,write:!1}}}})],yr.prototype,"format",void 0),c([d({readOnly:!0})],yr.prototype,"isWrappable",null),c([d({type:Me,json:{write:!0}})],yr.prototype,"origin",void 0),c([K("origin")],yr.prototype,"readOrigin",null),c([d({type:[eo],value:null,json:{write:!0}})],yr.prototype,"lods",null),c([d({readOnly:!0})],yr.prototype,"scales",void 0),c([d({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],yr.prototype,"size",void 0),c([K("size",["rows","cols"])],yr.prototype,"readSize",null),c([ee("size",{cols:{type:ft},rows:{type:ft}})],yr.prototype,"writeSize",null),c([d({type:Ee,json:{write:!0}})],yr.prototype,"spatialReference",void 0),yr=Du=c([k("esri.layers.support.TileInfo")],yr),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(yr||(yr={}));const fw=yr,e2={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},kM={xsmall:544,small:768,medium:992,large:1200};function bLe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function IM(t,e){return e?e2[t].valueToClassName[e].split(" "):[]}const wLe=t=>{let e=class extends t{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=kM}initialize(){this.addHandles(Y(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Le))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=bLe(i);if(!r){const n=JSON.stringify(kM,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}i=r?i:kM,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=ln.acquire(),r=ln.acquire();let n,s=!1;for(n in e2){const o=this[n],a=e2[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,IM(n,o).forEach(l=>r.push(l)),IM(n,a).forEach(l=>i.push(l)))}s&&(this._applyClassNameChanges(i,r),ln.release(i),ln.release(r))}_applyClassNameChanges(i,r){const n=this.container;n&&(r.forEach(s=>n.classList.remove(s)),i.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in e2)IM(r,this[r]).forEach(n=>i.classList.remove(n))}};return c([d()],e.prototype,"breakpoints",null),c([d()],e.prototype,"orientation",void 0),c([d()],e.prototype,"widthBreakpoint",void 0),c([d()],e.prototype,"heightBreakpoint",void 0),e=c([k("esri.views.BreakpointsOwner")],e),e};function bI(t){return typeof t=="string"?document.getElementById(t):t??null}function Xee(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function GU(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function HU(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}function _Le(t){t.parentNode&&t.parentNode.removeChild(t)}let af=class extends de{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,Y)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Gn)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([bs(e,"after-changes",this._createSyncUpdatingCallback(),Yf),bs(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],s),Mt(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Mt(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(s$)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=n(e,i,r);return this.addHandles(o,s),Mt(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=Y(e,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(s$),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(v0(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(s$))}),s$)}}};c([d({readOnly:!0})],af.prototype,"updating",void 0),af=c([k("esri.core.support.UpdatingHandles")],af);const s$=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var SLe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Oh={exports:{}},ci={},b1={exports:{}},em={};function ete(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function $Le(t,e,i){}function xLe(t,e,i){}var ELe=/javascript\s*\:/img;function TLe(t,e){return ELe.test(e)?"":e}em.whiteList=ete();em.getDefaultWhiteList=ete;em.onAttr=$Le;em.onIgnoreAttr=xLe;em.safeAttrValue=TLe;var kLe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},hv=kLe;function ILe(t,e){t=hv.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,s=0,o="";function a(){if(!r){var p=hv.trim(t.slice(n,s)),h=p.indexOf(":");if(h!==-1){var m=hv.trim(p.slice(0,h)),y=hv.trim(p.slice(h+1));if(m){var g=e(n,o.length,m,y,p);g&&(o+=g+"; ")}}}n=s+1}for(;s<i;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var u=t.indexOf("*/",s+2);if(u===-1)break;s=u+1,n=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return hv.trim(o)}var CLe=ILe,o$=em,MLe=CLe;function qU(t){return t==null}function LLe(t){var e={};for(var i in t)e[i]=t[i];return e}function tte(t){t=LLe(t||{}),t.whiteList=t.whiteList||o$.whiteList,t.onAttr=t.onAttr||o$.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||o$.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||o$.safeAttrValue,this.options=t}tte.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=MLe(t,function(l,u,p,h,m){var y=r[p],g=!1;if(y===!0?g=y:typeof y=="function"?g=y(h):y instanceof RegExp&&(g=y.test(h)),g!==!0&&(g=!1),h=o(p,h),!!h){var v={position:u,sourcePosition:l,source:m,isWhite:g};if(g){var w=n(p,h,v);return qU(w)?p+":"+h:w}else{var w=s(p,h,v);if(!qU(w))return w}}});return a};var OLe=tte;(function(t,e){var i=em,r=OLe;function n(o,a){var l=new r(a);return l.process(o)}e=t.exports=n,e.FilterCSS=r;for(var s in i)e[s]=i[s]})(b1,b1.exports);var i4={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},ALe=b1.exports.FilterCSS,PLe=b1.exports.getDefaultWhiteList,fT=i4;function ite(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var rte=new ALe;function RLe(t,e,i){}function NLe(t,e,i){}function DLe(t,e,i){}function FLe(t,e,i){}function nte(t){return t.replace(zLe,"&lt;").replace(VLe,"&gt;")}function jLe(t,e,i,r){if(i=ute(i),e==="href"||e==="src"){if(i=fT.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(a$.lastIndex=0,a$.test(i))return""}else if(e==="style"){if(WU.lastIndex=0,WU.test(i)||(JU.lastIndex=0,JU.test(i)&&(a$.lastIndex=0,a$.test(i))))return"";r!==!1&&(r=r||rte,i=r.process(i))}return i=dte(i),i}var zLe=/</g,VLe=/>/g,ULe=/"/g,BLe=/&quot;/g,GLe=/&#([a-zA-Z0-9]*);?/gim,HLe=/&colon;?/gim,qLe=/&newline;?/gim,a$=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,WU=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,JU=/u\s*r\s*l\s*\(.*/gi;function ste(t){return t.replace(ULe,"&quot;")}function ote(t){return t.replace(BLe,'"')}function ate(t){return t.replace(GLe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function lte(t){return t.replace(HLe,":").replace(qLe," ")}function cte(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return fT.trim(e)}function ute(t){return t=ote(t),t=ate(t),t=lte(t),t=cte(t),t}function dte(t){return t=ste(t),t=nte(t),t}function WLe(){return""}function JLe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:fT.indexOf(t,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var u="[/removed]",p=l.position+u.length;return n.push([s!==!1?s:l.position,p]),s=!1,u}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return fT.forEach(n,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function ZLe(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function YLe(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}ci.whiteList=ite();ci.getDefaultWhiteList=ite;ci.onTag=RLe;ci.onIgnoreTag=NLe;ci.onTagAttr=DLe;ci.onIgnoreTagAttr=FLe;ci.safeAttrValue=jLe;ci.escapeHtml=nte;ci.escapeQuote=ste;ci.unescapeQuote=ote;ci.escapeHtmlEntities=ate;ci.escapeDangerHtml5Entities=lte;ci.clearNonPrintableCharacter=cte;ci.friendlyAttrValue=ute;ci.escapeAttrValue=dte;ci.onIgnoreTagStripAll=WLe;ci.StripTagBody=JLe;ci.stripCommentTag=ZLe;ci.stripBlankChar=YLe;ci.cssFilter=rte;ci.getDefaultCSSWhiteList=PLe;var wI={},id=i4;function KLe(t){var e=id.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=id.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function QLe(t){return t.slice(0,2)==="</"}function XLe(t,e,i){var r="",n=0,s=!1,o=!1,a=0,l=t.length,u="",p="";e:for(a=0;a<l;a++){var h=t.charAt(a);if(s===!1){if(h==="<"){s=a;continue}}else if(o===!1){if(h==="<"){r+=i(t.slice(n,a)),s=a,n=a;continue}if(h===">"){r+=i(t.slice(n,s)),p=t.slice(s,a+1),u=KLe(p),r+=e(s,r.length,u,p,QLe(p)),n=a+1,s=!1;continue}if(h==='"'||h==="'")for(var m=1,y=t.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=h;continue e}y=t.charAt(a-++m)}}else if(h===o){o=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var eOe=/[^a-zA-Z0-9\\_:.-]/gim;function tOe(t,e){var i=0,r=0,n=[],s=!1,o=t.length;function a(m,y){if(m=id.trim(m),m=m.replace(eOe,"").toLowerCase(),!(m.length<1)){var g=e(m,y||"");g&&n.push(g)}}for(var l=0;l<o;l++){var u=t.charAt(l),p,h;if(s===!1&&u==="="){s=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:rOe(t,l+1);continue}if(s!==!1&&l===r){if(h=t.indexOf(u,l+1),h===-1)break;p=id.trim(t.slice(r+1,h)),a(s,p),s=!1,l=h,i=l+1;continue}if(/\s|\n|\t/.test(u))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(h=iOe(t,l),h===-1){p=id.trim(t.slice(i,l)),a(p),s=!1,i=l+1;continue}else{l=h-1;continue}else if(h=nOe(t,l-1),h===-1){p=id.trim(t.slice(i,l)),p=ZU(p),a(s,p),s=!1,i=l+1;continue}else continue}return i<t.length&&(s===!1?a(t.slice(i)):a(s,ZU(id.trim(t.slice(i))))),id.trim(n.join(" "))}function iOe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function rOe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function nOe(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function sOe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function ZU(t){return sOe(t)?t.substr(1,t.length-2):t}wI.parseTag=XLe;wI.parseAttr=tOe;var oOe=b1.exports.FilterCSS,Jo=ci,pte=wI,aOe=pte.parseTag,lOe=pte.parseAttr,t2=i4;function l$(t){return t==null}function cOe(t){var e=t2.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=t2.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=t2.trim(t.slice(0,-1))),{html:t,closing:i}}function uOe(t){var e={};for(var i in t)e[i]=t[i];return e}function dOe(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function hte(t){t=uOe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Jo.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=dOe(t.whiteList||t.allowList):t.whiteList=Jo.whiteList,t.onTag=t.onTag||Jo.onTag,t.onTagAttr=t.onTagAttr||Jo.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Jo.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Jo.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Jo.safeAttrValue,t.escapeHtml=t.escapeHtml||Jo.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new oOe(t.css))}hte.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,u=i.escapeHtml,p=e.cssFilter;i.stripBlankChar&&(t=Jo.stripBlankChar(t)),i.allowCommentTag||(t=Jo.stripCommentTag(t));var h=!1;i.stripIgnoreTagBody&&(h=Jo.StripTagBody(i.stripIgnoreTagBody,s),s=h.onIgnoreTag);var m=aOe(t,function(y,g,v,w,b){var _={sourcePosition:y,position:g,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(r,v)},S=n(v,w,_);if(!l$(S))return S;if(_.isWhite){if(_.isClosing)return"</"+v+">";var $=cOe(w),T=r[v],I=lOe($.html,function(C,M){var R=t2.indexOf(T,C)!==-1,O=o(v,C,M,R);return l$(O)?R?(M=l(v,C,M,p),M?C+'="'+M+'"':C):(O=a(v,C,M,R),l$(O)?void 0:O):O});return w="<"+v,I&&(w+=" "+I),$.closing&&(w+=" /"),w+=">",w}else return S=s(v,w,_),l$(S)?u(w):S},u);return h&&(m=h.remove(m)),m};var pOe=hte;(function(t,e){var i=ci,r=wI,n=pOe;function s(a,l){var u=new n(l);return u.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,function(){for(var a in i)e[a]=i[a];for(var l in r)e[l]=r[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(Oh,Oh.exports);var hOe=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):Oh.exports.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(s){s==="whiteList"?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new Oh.exports.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?Oh.exports.escapeAttrValue(e):!s&&!n?Oh.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):Oh.exports.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var u=r.validate(l,i);return u.isValid?a.concat([l]):(n=!0,a.concat([u.sanitized]))},[]);else if(SLe(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var u=e[l],p=r.validate(u,i);return p.isValid?a[l]=u:(n=!0,a[l]=p.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const _I=new Map;function fte(){_I.clear()}function fOe(t){return _I.get(t)}function mOe(t,e){_I.set(t,e)}function CM(t){_I.delete(t)}const yOe=q.getLogger("esri.widgets.support.widgetUtils");function Jy(t){const e=ln.acquire();for(let r=0;r<arguments.length;r++){const n=arguments[r],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const o in n)n[o]&&e.push(o)}const i=e.join(" ");return ln.release(e),i}const gOe=(()=>{const t=new Map,e=new ResizeObserver(r=>{var n;fte();for(const s of r)(n=t.get(s.target))==null||n(s)}),i=(r,n,s)=>(t.has(r)&&yOe.error("Already observing element",r),t.set(r,n),e.observe(r,s),Mt(()=>{e.unobserve(r),t.delete(r)}));return(r,n,s)=>{let o=null;return J1([Y(()=>typeof r=="function"?r():r,a=>{o==null||o.remove(),a&&(o=i(a,n,s))},ol),Mt(()=>o==null?void 0:o.remove())])}})();function w1(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function vOe(t){return w1(t)?"rtl":"ltr"}function KGe(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function bOe(t){const e="data-node-ref";this[t.getAttribute(e)]=t}const wOe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],_Oe=wOe.reduce((t,e)=>(t[e]=[],t),{}),SOe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],r4=new hOe({whiteList:_Oe,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(SOe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function $Oe(t,e){const i=t.getBoundingClientRect(),r=e.getBoundingClientRect(),n=i.top+i.height,s=r.top+r.height,o=i.top,a=r.top;(n>s||o<a)&&t.scrollIntoView({block:"end"})}function _1(t){return t==="Enter"||t===" "}const mte="http://www.w3.org/",SI=`${mte}2000/svg`,yte=`${mte}1999/xlink`;let YU=[],n4=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},s4=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),gte=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},xOe=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(s4(t[r],e))return r}return-1},MM=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(s4(a,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},EOe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},PR=[],RR=!1,vte=t=>{(t.children||[]).forEach(vte),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},KU=()=>{RR=!1,PR.forEach(vte),PR.length=0},QU=t=>{PR.push(t),RR||(RR=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(KU,{timeout:16}):setTimeout(KU,16))},XU=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),QU(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),QU(t))},TOe=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")DR(t,l,!0);else if(a==="classes"){let u=Object.keys(l),p=u.length;for(let h=0;h<p;h++){let m=u[h];l[m]&&t.classList.add(m)}}else if(a==="styles"){let u=Object.keys(l),p=u.length;for(let h=0;h<p;h++){let m=u[h],y=l[m];y&&(gte(y),i.styleApplyer(t,m,y))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&function(){let p=l;l=function(h){p.apply(this,[h]),h.target["oninput-value"]=h.target.value}}()),t[a]=l):i.namespace===SI?a==="href"?t.setAttributeNS(yte,a,l):t.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?t[a]=r4.sanitize(l):NR(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function NR(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let mT,kOe=(t,e,i)=>{if(e)for(let r of e)Zy(r,t,void 0,i)},bte=(t,e,i)=>{kOe(t,e.children,i),e.text&&(t.textContent=e.text),TOe(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},Zy=(t,e,i,r)=>{let n,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")n=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let p=o.charAt(s-1),h=o.slice(s,l);p==="."?n.classList.add(h):p==="#"?n.id=h:(h==="svg"&&(r=n4(r,{namespace:SI})),r.namespace!==void 0?n=t.domNode=a.createElementNS(r.namespace,h):(n=t.domNode=t.domNode||a.createElement(h),h==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),s=l+1}}bte(n,t,r)}},DR=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},IOe=(t,e,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let l=s[a],u=i[l],p=e[l];if(l==="class")p!==u&&(DR(t,p,!1),DR(t,u,!0));else if(l==="classes"){let h=t.classList,m=Object.keys(u),y=m.length;for(let g=0;g<y;g++){let v=m[g],w=!!u[v];w!==!!p[v]&&(n=!0,w?h.add(v):h.remove(v))}}else if(l==="styles"){let h=Object.keys(u),m=h.length;for(let y=0;y<m;y++){let g=h[y],v=u[g];v!==p[g]&&(n=!0,v?(gte(v),r.styleApplyer(t,g,v)):r.styleApplyer(t,g,""))}}else if(u||typeof p!="string"||(u=""),l!=="value"||NR(t)){if(u!==p){let h=typeof u;h==="function"&&r.eventHandlerInterceptor||(r.namespace===SI?l==="href"?t.setAttributeNS(yte,l,u):t.setAttribute(l,u):h==="string"?l==="innerHTML"?t[l]=r4.sanitize(u):l==="role"&&u===""?t.removeAttribute(l):NR(t)&&l in t?t[l]=u:t.setAttribute(l,u):t[l]!==u&&(t[l]=u),n=!0)}}else{let h=t[l];h!==u&&(t["oninput-value"]?h===t["oninput-value"]:u!==p)&&(t[l]=u,t["oninput-value"]=void 0),u!==p&&(n=!0)}}return n},COe=(t,e,i,r,n)=>{if(i===r)return!1;r=r||YU;let s,o=(i=i||YU).length,a=r.length,l=0,u=0,p=!1;for(;u<a;){let h=l<o?i[l]:void 0,m=r[u];if(h!==void 0&&s4(h,m))p=mT(h,m,n)||p,l++;else{let y=xOe(i,m,l+1);if(y>=0){for(s=l;s<y;s++)XU(i[s]),MM(i,s,t,"removed");p=mT(i[y],m,n)||p,l=y+1}else Zy(m,e,l<o?i[l].domNode:void 0,n),EOe(m),MM(r,u,t,"added")}u++}if(o>l)for(s=l;s<o;s++)XU(i[s]),MM(i,s,t,"removed");return p};mT=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=n4(i,{namespace:SI})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=COe(e,r,t.children,e.children,i)||s,s=IOe(r,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let fv=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,mT(r,i,e)},domNode:t.domNode});const MOe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let fy=t=>n4(MOe,t),Sd={create:(t,e)=>(e=fy(e),Zy(t,document.createElement("div"),void 0,e),fv(t,e)),append:(t,e,i)=>(i=fy(i),Zy(e,t,void 0,i),fv(e,i)),insertBefore:(t,e,i)=>(i=fy(i),Zy(e,t.parentNode,t,i),fv(e,i)),merge:(t,e,i)=>(i=fy(i),e.domNode=t,bte(t,e,i),fv(e,i)),replace:(t,e,i)=>(i=fy(i),Zy(e,t.parentNode,t,i),t.parentNode.removeChild(t),fv(e,i))},wte,LOe=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};wte=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let OOe=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?wte(i.children,n=>n.domNode===r):void 0}),i},AOe=(t,e,i)=>{let r=function(n){i("domEvent",n);let s=e(),o=LOe(n.currentTarget,s.domNode);o.reverse();let a,l=OOe(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",n),a};return(n,s,o,a)=>r},yT=t=>{let e,i,r=fy(t),n=r.performanceLogger,s=!0,o=!1,a=[],l=[],u=(h,m,y)=>{let g,v=()=>g;r.eventHandlerInterceptor=AOe(e,v,n),g=h(m,y(),r),a.push(g),l.push(y)},p=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let h=0;h<a.length;h++){let m=l[h]();n("rendered",void 0),a[h].update(m),n("patched",void 0)}n("renderDone",void 0),s=!0}};return e={renderNow:p,scheduleRender:()=>{i||o||(i=requestAnimationFrame(p))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(h,m)=>{u(Sd.append,h,m)},insertBefore:(h,m)=>{u(Sd.insertBefore,h,m)},merge:(h,m)=>{u(Sd.merge,h,m)},replace:(h,m)=>{u(Sd.replace,h,m)},detach:h=>{for(let m=0;m<l.length;m++)if(l[m]===h)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},e},Fu=class extends de{constructor(){super(...arguments),this.items=new ce,this._watchUpdatingTracking=new af,this._callbacks=new Map,this._projector=yT(),this._hiddenProjector=yT()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);r.append(i,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const a=n.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([d({readOnly:!0})],Fu.prototype,"surface",void 0),c([d({readOnly:!0})],Fu.prototype,"items",void 0),c([d({readOnly:!0})],Fu.prototype,"needsRender",null),c([d({readOnly:!0})],Fu.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],Fu.prototype,"updating",null),Fu=c([k("esri.views.overlay.ViewOverlay")],Fu);const e9=Fu,LM=[0,0];function POe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return LM[0]=i.left+((e==null?void 0:e.pageXOffset)??0),LM[1]=i.top+((e==null?void 0:e.pageYOffset)??0),LM}function t9(t){t&&(Xee(t),t.parentNode&&t.parentNode.removeChild(t))}function ROe(t){const e=document.createElement("div");return t.appendChild(e),e}const mv=16,c$=750,NOe=512,DOe=2,FOe=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:mv,time:c$},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Y(()=>this.cursor,r=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",r)}),Y(()=>this.navigating,r=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",r.toString())})])}initialize(){const i=G("mac"),r=async()=>{i&&(await Zf(()=>this.ready),this.messagesCommon=await Fk("esri/t9n/common").catch(()=>{}))};r(),this.addHandles([Y(()=>this.ui,(n,s)=>this._handleUIChange(n,s),Le),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused")),Dk(r)])}destroy(){this.destroyed||(this.ui=wt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),n=bI(i);if(n||typeof i!="string"||q.getLogger(this).error("#container",`element with id '${i}' not found`),r===n)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(t9(this.root),this._set("root",null)),this.userContent&&(HU(this.userContent,r),t9(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",HU(n,s),n.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new e9;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(Y(()=>l.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=zg({render:()=>{var p;return(p=this.overlay)==null?void 0:p.render()}}):this._overlayRenderTaskHandle=Xt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,n){const s=this.position;return i-=s?s[0]:0,r-=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}containerToPage(i,r,n){const s=this.position;return i+=s?s[0]:0,r+=s?s[1]:0,n?(n[0]=i,n[1]=r):n=[i,r],n}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(Y(()=>this.root,n=>{i.container=n?ROe(n):null},Le),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=mv,i.time=c$,this.addHandles([g0(window,"resize",()=>{i.freq=mv,i.time=c$}),zg({prepare:r=>{const n=this._measure(),s=this._freqInfo;if(s.time+=r.deltaTime,n&&(s.freq=mv,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||n?mv:Math.min(c$,s.freq*DOe),!n&&s.freq>=NOe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,n=i?i.clientHeight:0;if(r===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return r===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:r,height:n}),!0)}_position(){const i=this.container,r=this.position,n=i&&POe(i);return!!n&&(!r||n[0]!==r[0]||n[1]!==r[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return c([d()],e.prototype,"container",null),c([d({readOnly:!0})],e.prototype,"focused",null),c([d({readOnly:!0})],e.prototype,"height",void 0),c([d()],e.prototype,"messagesCommon",void 0),c([d({type:e9})],e.prototype,"overlay",void 0),c([d({readOnly:!0})],e.prototype,"position",void 0),c([d({readOnly:!0})],e.prototype,"resizing",void 0),c([d({readOnly:!0})],e.prototype,"root",void 0),c([d({value:null,readOnly:!0})],e.prototype,"size",null),c([d({readOnly:!0})],e.prototype,"surface",void 0),c([d({readOnly:!0})],e.prototype,"suspended",void 0),c([d()],e.prototype,"ui",void 0),c([d({readOnly:!0})],e.prototype,"userContent",void 0),c([d({readOnly:!0})],e.prototype,"width",void 0),c([d()],e.prototype,"widthBreakpoint",void 0),e=c([k("esri.views.DOMContainer")],e),e};let jOe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],s=new GW(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=Dfe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)E6(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)E6(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}};const zOe=G("mac")?"Meta":"Ctrl",$I={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)$I[t]=String.fromCharCode(t);for(let t=1;t<25;t++)$I[111+t]=`F${t}`;for(let t=65;t<91;t++)$I[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function VOe(t){if(t.key!==void 0)return K1(t);const e=$I[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function UOe(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let BOe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}};const i9=q.getLogger("esri.views.input.InputHandler");let Yi=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?i9.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof e=="string"?new BOe(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=p=>{const h=this._incoming[p.match.eventType];if(h){const m=h.indexOf(p);h.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new GOe(s,r,{onPause:a,onRemove:a,onResume:p=>{const h=this._incoming[p.match.eventType];h&&!h.includes(p)&&(h.push(p),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[s.eventType];return u||(u=[],this._incoming[s.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new HOe(e,{onEmit:(r,n,s,o)=>{var a;(a=this._manager)==null||a.emit(r.eventType,n,s,o)},onRemove:r=>{var n;delete this._outgoing[r.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):i9.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const n of i)if(n.match.matches(e)&&((r=n.callback)==null||r.call(n,e),e.shouldStopPropagation()))break}}},GOe=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},HOe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},qOe=class extends Yi{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=e;i===this._value&&this._x===r&&this._y===n||(this._value=i,this._x=r,this._y=n,this._onChange(i,r,n))}},WOe=class{constructor(e,i){this._observable=new e_,this._value=e,this._equalityFunction=i}get value(){return Se(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function S1(t,e=kW){return new WOe(t,e)}let JOe=class extends Yi{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=S1(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Bs=class extends de{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=zOe,this._latestPointerType="mouse",this._propertiesPool=new jOe({latestPointerLocation:KOe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=jd.INTERNAL){if(this._nameToGroup[e])return void q.getLogger(this).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void q.getLogger(this).error("Can't register a group of zero handlers");const n={name:e,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,u,p,h)=>{this._emitInputEvent(o.priorityIndex+1,a,l,u,h,p)},setPointerCapture:(a,l)=>{this._setPointerCapture(n,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{var n;r.removed=!0,(n=r.uninstallCallback)==null||n.call(r)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):q.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)UOe(a)||i.add(a)}n.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==i||n.y!==r){const s=this._propertiesPool.get("latestPointerLocation");s.x=i,s.y=r,this._set("latestPointerLocation",s)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,n=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{if(!r){const a=new Set;this._activeKeyModifiers.forEach(l=>{a.add(l)}),this._activeKeyModifiers=a,r=!0}},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(n(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(n(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=i.native;s("Alt",!(!o||!o.altKey)),s("Ctrl",!(!o||!o.ctrlKey)),s("Shift",!(!o||!o.shiftKey)),s("Meta",!(!o||!o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new qOe((e,i,r)=>this._setLatestPointer(e,i,r)),this._multiTouchHandler=new JOe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],jd.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,jd.INTERNAL)}_setPointerCapture(e,i,r,n){const s=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,s,o){const a=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,u={event:new ZOe(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new aT,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r,n;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:s,priorityIndex:o}=e.events.pop(),a=(i=s.data)==null?void 0:i.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((n=(r=e.currentHandler).eventCallback)==null||n.call(r,s)),s.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new aT;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e(()=>{this._onEventReceived(i,r)})},disablePointerCapture:e}}};c([d({readOnly:!0})],Bs.prototype,"hasPendingInputs",null),c([d({constructOnly:!0})],Bs.prototype,"eventSource",void 0),c([d({constructOnly:!0})],Bs.prototype,"recognizers",void 0),c([d()],Bs.prototype,"_latestPointerType",void 0),c([d()],Bs.prototype,"latestPointerType",null),c([d()],Bs.prototype,"multiTouchActive",null),c([d({readOnly:!0})],Bs.prototype,"latestPointerLocation",void 0),c([d()],Bs.prototype,"_paused",void 0),c([d({readOnly:!0})],Bs.prototype,"updating",null),Bs=c([k("esri.views.input.InputManager")],Bs);let ZOe=class{constructor(e,i,r,n,s){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=rd.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=rd.STOPPED}shouldStopPropagation(){return(this._propagationState&rd.STOPPED)!=0}async(e){this._propagationState|=rd.PAUSED;const i=(r,n)=>{this._propagationState&=~rd.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&rd.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var rd;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(rd||(rd={}));const jd={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let YOe=class{};const KOe=YOe;function $a(t){return t!=null&&"open"in t&&"declaredClass"in t}function r9(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const QOe=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Y(()=>[this.ui,this.popup],([i,r],n)=>{const s="popup",o="manual";if(n){const[a,l]=n;a&&$a(l)&&(l.view=null,r9(l)&&a.remove(l,s))}i&&$a(r)&&(r.view=this,r9(r)&&i.add(r,{key:s,position:o,internal:!0}))},Le),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(!$a(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||($a(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),$a(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))},jd.WIDGET)]),Zf(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{Z(()=>import("./Popup-W2vCMybQ.js"),__vite__mapDeps([127,128,4,129,119,60,58,59,18,16,17,15]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if($a(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void q.getLogger(this).error(new j("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),$a(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){await this.when();const{location:n,queryArea:s,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(i,r),l=Promise.resolve(a),u=this._queryLayerPopupFeatures(s,o,r),p=u.map(h=>h.promise);return{location:n,clientOnlyGraphics:a,allGraphicsPromise:wfe([l,...p]).then(h=>Array.from(new Set(h.flat()))),promisesPerLayerView:u}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!$a(this.popup))return this._popupSetupTask=y5(async r=>{const{default:n}=await Z(()=>import("./Popup-W2vCMybQ.js"),__vite__mapDeps([127,128,4,129,119,60,58,59,18,16,17,15]));if(kt(r),!this.popup||$a(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new n(s)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,r,n){return r.map(({layerView:s,graphics:o})=>{const a={clientGraphics:o,event:n!=null?n.event:void 0,signal:n!=null?n.signal:void 0,defaultPopupTemplateEnabled:n!=null&&!!n.defaultPopupTemplateEnabled},l=s.fetchPopupFeatures(i,a);return{layerView:s,promise:l}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r!=null&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:n,queryArea:s,location:o}=await this._popupHitTestGraphics(i,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:u}=this._graphicsPerFetchPopupLayerView(n,a);return{clientOnlyGraphics:u,layerViewsAndGraphics:l,queryArea:s,location:o}}async _popupHitTestGraphics(i,r){const n=await this.popupHitTest(i),s=n.results,o=n.mapPoint,a=s.filter(u=>u.type==="graphic"&&this._isValidPopupGraphic(u.graphic,r)),l=a.length?a[0].mapPoint:null;return{clientGraphics:a.map(u=>u.graphic),queryArea:o,location:o||l}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const n=[],s=new Map,o=r.map(a=>{const l=[];return"layer"in a?s.set(a.layer,l):s.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of i){const l=s.get(a.layer)||s.get(a.sourceLayer)||null;l?l.push(a):n.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:n}}};return c([d({cast(i){return!i||$a(i)||typeof i=="object"&&(i.open=r=>(Fg(q.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(r)),i.close=()=>(Fg(q.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],e.prototype,"popup",void 0),c([d()],e.prototype,"popupEnabled",void 0),e=c([k("esri.views.PopupView")],e),e};let mw=class extends ce{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(ce.ofType(this.itemType.Type))(e):new ce(e)}};function n9(t,e){return{type:t,cast:VJ,set(i){const r=Sf(i,this._get(e),t);r.owner=this,this._set(e,r)}}}c([d()],mw.prototype,"owner",null),mw=c([k("esri.core.support.OwningCollection")],mw);let gT=class extends mw{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(q.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};gT=c([k("esri.support.AnalysesCollection")],gT);let yw=class extends mw{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};c([h5({Type:Vc,ensureType:ei(Vc)})],yw.prototype,"itemType",void 0),yw=c([k("esri.support.GraphicsCollection")],yw);let ju=class extends de{constructor(e){super(e),this.view=null,this.baseLayerViews=new ce,this.referenceLayerViews=new ce,this._loadingHandle=Y(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},Le)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,r;if(this.view&&this.view.suspended)return!1;const e=(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};c([d({constructOnly:!0})],ju.prototype,"view",void 0),c([d({readOnly:!0})],ju.prototype,"baseLayerViews",void 0),c([d({readOnly:!0})],ju.prototype,"referenceLayerViews",void 0),c([d({readOnly:!0})],ju.prototype,"suspended",null),c([d({type:Boolean,readOnly:!0})],ju.prototype,"updating",null),ju=c([k("esri.views.BasemapView")],ju);function XOe(t){return"tryRecycleWith"in t}let eAe=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=xs(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,ys(this._controller.signal,()=>{const n=new j("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!XOe(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let n=0;n<e.length;n++){const s=e[n];if(s.type!==i)continue;const o=this.layerView.tryRecycleWith(s,{signal:r});if(o){e.splice(n,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(kt(this._controller.signal),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((u,p)=>ys(this._controller.signal,()=>p(mt())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,s;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:r}=this;this._map=r.map;try{let o,a;if(await i.load({signal:e}),i.prefetchResources&&await i.prefetchResources({signal:e}),iAe(i))o=await i.createLayerView(r,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new j("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(i);kt(e),o="default"in p?new p.default({layer:i,view:r}):new p({layer:i,view:r})}const l=()=>{a=Xt(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=ys(e,l),kt(e);try{await o.when()}catch(p){throw l(),p}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(i)))return l(),void this._deferred.reject(new j("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=o,i.emit("layerview-create",{view:r,layerView:o}),r.emit("layerview-create",{layer:i,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){i.emit("layerview-create-error",{view:r,error:o}),r.emit("layerview-create-error",{layer:i,error:o}),this.done=!0,this._deferred.reject(new j("layerview:create-error","layerview creation failed",{layer:i,error:o}))}}},Gs=class extends de{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new af,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const n of i)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=xs(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(v0(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,u,p;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,o=h=>{if(h!=null){for(const m of h)if(m){r.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&s?y.start():y||this._recyclingInfoMap.has(m)||n.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const h of this._rootCollectionNames)o(Hr(this,h));for(const[h,m]of this._layerLayerViewInfoMap)if(!r.has(h)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(n);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[h,m]of this._recyclingInfoMap)r.has(h)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const h of n)this._createLayerView(h);this._refreshCollections();const a=[(l=i==null?void 0:i.ground)==null?void 0:l.layers,(u=i==null?void 0:i.basemap)==null?void 0:u.baseLayers,(p=i==null?void 0:i.basemap)==null?void 0:p.referenceLayers,i==null?void 0:i.layers].filter(h=>!!h);r.forEach(h=>"layers"in h&&a.push(h.layers)),this.addHandles(a.map(h=>this._watchUpdatingTracking.addOnCollectionChange(()=>h,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([bs(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Y(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),ol)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),zC(this._recyclingInfoMap),zC(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(mt()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Ck(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(zC(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new j("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Hr(this,e),Hr(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i&&i.removeAll());let n=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=s,a.parent=r,i.at(n)!==a&&i.splice(n,0,a),s.layers&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),n+=1}n<i.length&&i.splice(n,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new eAe(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(hr(r)||r.name==="cancelled:layerview-create")||q.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([d()],Gs.prototype,"_workPromise",void 0),c([d({readOnly:!0})],Gs.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],Gs.prototype,"_layersToLayerViews",null),c([d({readOnly:!0})],Gs.prototype,"_rootCollectionNames",null),c([d()],Gs.prototype,"layerViewImporter",void 0),c([d()],Gs.prototype,"supportsGround",void 0),c([d({readOnly:!0})],Gs.prototype,"updating",null),c([d({readOnly:!0})],Gs.prototype,"updatingRemaining",null),c([d({constructOnly:!0})],Gs.prototype,"view",void 0),Gs=c([k("esri.views.LayerViewManager")],Gs);const tAe=Gs;function iAe(t){return"createLayerView"in t&&t.createLayerView!=null}let ts=class extends de{constructor(e){super(e),this.factor=1.5,this.offset=qr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([d({type:Number})],ts.prototype,"factor",void 0),c([d({nonNullable:!0})],ts.prototype,"offset",void 0),c([d()],ts.prototype,"position",void 0),c([d({type:Number,range:{min:0}})],ts.prototype,"size",void 0),c([d()],ts.prototype,"maskUrl",void 0),c([d()],ts.prototype,"maskEnabled",void 0),c([d()],ts.prototype,"overlayUrl",void 0),c([d()],ts.prototype,"overlayEnabled",void 0),c([d({readOnly:!0})],ts.prototype,"version",null),c([d({type:Boolean})],ts.prototype,"visible",void 0),ts=c([k("esri.views.Magnifier")],ts);const _te=ts;let vb=class extends Je(de){constructor(e){super(e),this.accentColor=new le([255,127,0]),this.textColor=new le([255,255,255])}};c([d({type:le,nonNullable:!0})],vb.prototype,"accentColor",void 0),c([d({type:le,nonNullable:!0})],vb.prototype,"textColor",void 0),vb=c([k("esri.views.Theme")],vb);const FR=vb;var s9;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(s9||(s9={}));const Ste=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],$te={};function xte(t){return!!$te[t]}function rAe(t){for(const e of t)if(!xte(e))return!1;return!0}Ste.forEach(t=>{$te[t]=!0});let nAe=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const s=Array.isArray(e)?e:e.split(",");if(!rAe(s))return s.some(xte)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:n=r,n=n??jd.DEFAULT;const l=this._createUniqueGroupName(),u=new sAe(this.view,s,a,o);this._handlers.set(l,{handler:u,priority:n});for(const p of s){const h=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,h+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],n),Mt(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},sAe=class extends Yi{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,o=>n(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",r,o=>n(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>n(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>n(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",r,o=>n(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>n(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>n(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>n(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>n(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>n(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>n(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>n(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>n(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>n(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{n(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",r,o=>{n(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",r,o=>{n(this._wrapBlur(o))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:p}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:p,screenPoint:qr(s,o),mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:p}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:p,timestamp:h}=e;return{type:"immediate-click",pointerId:u,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:p,timestamp:h}=e;return{type:"immediate-double-click",pointerId:u,pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:u}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:o,native:a,timestamp:u,mapPoint:this._getMapPoint(s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(qr(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,u=i.buttons,{cancelable:p,timestamp:h}=e,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:m,pointerType:o,button:a,buttons:u,radius:i.radius,angle:RZ(i.angle),native:l,timestamp:h,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:r,native:n}=e.data,{cancelable:s,timestamp:o}=e;return{type:"key-down",key:i,repeat:r,native:n,timestamp:o,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:a=>e.async(a),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:r}=e.data,{cancelable:n,timestamp:s}=e;return{type:"key-up",key:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:r,y:n,button:s,buttons:o,native:a,eventId:l}=e.data,u=a.pointerId,p=a.pointerType,{cancelable:h,timestamp:m}=e;return{type:i,x:r,y:n,pointerId:u,pointerType:p,button:s,buttons:o,native:a,timestamp:m,eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:r,buttons:n,native:s,eventId:o}=e.data.currentEvent,{button:a}=e.data.startEvent,l=e.data.startEvent.native.pointerId,u=e.data.startEvent.native.pointerType,p=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:m,timestamp:y}=e;return{type:"pointer-drag",x:i,y:r,pointerId:l,pointerType:u,button:a,buttons:n,action:p,origin:h,native:s,timestamp:y,eventId:o,cancelable:m,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:r,timestamp:n}=e,{x:s,y:o,deltaY:a,native:l}=r;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:l,timestamp:n,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:r,device:n}=e.data,{cancelable:s,timestamp:o}=e,{buttons:a,axes:l}=r;return{type:"gamepad",device:n,timestamp:o,action:i,buttons:a,axes:l,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}};var $1,o9,a9;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})($1||($1={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(o9||(o9={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(a9||(a9={}));function oAe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return q.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function jR(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag($1.USER)&&t.getEditableFlag($1.MANAGER)}function Ba(t){return qr(t.x,t.y)}function Ete(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?qr(e.clientX-i.left,e.clientY-i.top):qr(0,0)}function Tte(t,e){return e instanceof Event?Ete(t,e):Ba(e)}function kte(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let aAe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":l9(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!c9(e))break;const n=Ba(e),s=this._intersect(n,e.pointerType,i.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!c9(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const a=Ba(e);a.x=Es(a.x,0,i.view.width),a.y=Es(a.y,0,i.view.height);const l=n.start,u=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,u?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,u&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=Ba(e),s=this._intersect(n,e.pointerType,i.forEachTool);if(lAe(e)||i.forEachTool(u=>{if((s==null||s.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let p=!1;u.manipulators.forEach(({manipulator:h})=>{h.selected&&(h.selected=!1,p=!0)}),p&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),OM(o,r);break}case"click":{const n=Ba(e),s=this._intersect(n,e.pointerType,i.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const n=Ba(e),s=this._intersect(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),OM(o,r);break}case"immediate-double-click":{const n=Ba(e),s=this._intersect(n,e.pointerType,i.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),OM(o,r);break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Ba(i)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(e,i){var n;const r=(n=this._grabbedManipulators.get(e.pointerId))==null?void 0:n.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Ba(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return Ck(e,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>{i.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{r.add(n)}),e(n=>{n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),o=Uhe(s,({tool:a})=>a===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:r},n=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:u},p)=>{o(a,l)&&(this._grabbedManipulators.delete(p),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._draggedManipulators.delete(u),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._hoveredManipulators.delete(u),l.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(e,i,r){let n=null;return r(s=>{if(s.manipulators==null||!jR(s))return!1;const o=s.manipulators.intersect(e,i);return o!=null&&(n={tool:s,manipulator:o},!0)}),n}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(qr(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!l9(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Ba(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){var a;let s=this._intersect(e,r,n);const o=(a=this._hoveredManipulators.get(i))==null?void 0:a.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function l9(t){return t==="mouse"}function c9(t){return t.pointerType!=="mouse"||t.button===0}function lAe(t){return!!t.native.shiftKey}function OM(t,e){t!=null&&t.consumesClicks&&e()}const u9="attached",AM="tools",d9=1e3;let Ga=class extends de{constructor(e){super(e),this._updatingHandles=new af,this._clock=y0,this._manipulatorState=new aAe,this.tools=new ce,this.cursor=null,this._interacting=!1,this._interactingTimeout=d9,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(Ste,e=>{this._handleInputEvent(e)},jd.TOOL),...oAe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void q.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=jR(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Xt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var e;this.view.type==="3d"?this.addHandles([Y(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i)))],u9):this.addHandles(Y(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(u9),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))})}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(n=>{!i&&n.visible&&n.handleInputEvent(r)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(AM),this._forEachTool(e=>{if(e instanceof de){const i=Y(()=>[e.cursor,e.visible,e.editable],()=>{jR(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,AM)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],AM)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,$1.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){const e=this;return{setClock:i=>this._clock=i,set interactingTimeoutEnabled(i){e._interactingTimeout=i?d9:0},get interactingTimeoutEnabled(){return e._interactingTimeout!==0}}}};c([d({constructOnly:!0,nonNullable:!0})],Ga.prototype,"view",void 0),c([d({value:null})],Ga.prototype,"activeTool",null),c([d({readOnly:!0,type:ce})],Ga.prototype,"tools",void 0),c([d({readOnly:!0})],Ga.prototype,"cursor",void 0),c([d({readOnly:!0})],Ga.prototype,"updating",null),c([d()],Ga.prototype,"_interacting",void 0),c([d({readOnly:!0})],Ga.prototype,"interacting",null),Ga=c([k("esri.views.ToolViewManager")],Ga);let my=class extends de{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":cAe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return uAe[this.deviceType]}};c([d({nonNullable:!0,readOnly:!0})],my.prototype,"nativeIndex",void 0),c([d({type:String,readOnly:!0})],my.prototype,"deviceType",null),c([d({type:Number,readOnly:!0})],my.prototype,"axisThreshold",null),my=c([k("esri.views.input.gamepad.GamepadInputDevice")],my);const cAe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),uAe={standard:.15,spacemouse:.025,unknown:0},o4=my;let bb=class extends de{constructor(...e){super(...e),this.devices=new ce,this.enabledFocusMode="document"}};c([d({type:ce.ofType(o4),readOnly:!0})],bb.prototype,"devices",void 0),c([d({type:["document","view","none"]})],bb.prototype,"enabledFocusMode",void 0),bb=c([k("esri.views.input.gamepad.GamepadSettings")],bb);const dAe=bb;let i2=class extends de{constructor(){super(...arguments),this.gamepad=new dAe}};c([d({readOnly:!0})],i2.prototype,"gamepad",void 0),i2=c([k("esri.views.input.Input")],i2);const pAe=i2;let zu=class extends de{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([d({type:Boolean,nonNullable:!0})],zu.prototype,"enabled",void 0),c([d({type:o4})],zu.prototype,"device",void 0),c([d({type:["pan","zoom"],nonNullable:!0})],zu.prototype,"mode",void 0),c([d({type:["forward-down","forward-up"],nonNullable:!0})],zu.prototype,"tiltDirection",void 0),c([d({type:Number,nonNullable:!0})],zu.prototype,"velocityFactor",void 0),zu=c([k("esri.views.navigation.gamepad.GamepadSettings")],zu);const Ite=zu;let mh=class extends de{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Ite,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};c([d({type:Boolean})],mh.prototype,"browserTouchPanEnabled",void 0),c([d({type:Ite,nonNullable:!0})],mh.prototype,"gamepad",void 0),c([d({type:Boolean})],mh.prototype,"momentumEnabled",void 0),c([d({type:Boolean})],mh.prototype,"mouseWheelZoomEnabled",void 0),mh=c([k("esri.views.navigation.Navigation")],mh);const Cte=mh;var p9;function hAe(t){var r;const e=t.url?Xd(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&Mte(t)&&t.heightModelInfo?t.heightModelInfo:fAe(t)?hI.deriveUnitFromSR(yAe,t.spatialReference):null}function Mte(t){return"heightModelInfo"in t}function Lte(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function fAe(t){return Lte(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Ote(t)}function mAe(t){return t.layers!=null||Ote(t)||Lte(t)||Mte(t)}function Ote(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(p9||(p9={}));const yAe=new hI({heightModel:"gravity-related-height"});var Bc;function h9(t){return t===Bc.Global?"global":"local"}(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(Bc||(Bc={}));let zR,PM=null;async function gAe(t){PM||(PM=Z(()=>import("./geometryServiceUtils-t1CtTnlo.js"),__vite__mapDeps([])).then(e=>zR=e)),await PM,kt(t)}async function Ate(t,e,i,r){if(!t)return null;const n=t.spatialReference;return fp()||El(n,e)?mp(t,e):zR?zR.projectGeometry(t,e,i,r):(await Promise.race([gAe(r),Uc(r)]),Ate(t,e,i,r))}let vt=class extends de{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=jg(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,n,s,o;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let r=null;for(const s of e){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(r,o);a!=null&&(r=a)}if(r!=null&&r.length===1)break}if(i&&(r==null||r.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(r);return{spatialReference:n!=null?n.spatialReference:null,viewingMode:n!=null?n.viewingMode:null,updating:!1}}get _tileInfoTask(){var r,n,s,o,a,l,u;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(n=(r=this.map)==null?void 0:r.call(this))==null?void 0:n.basemap,layers:(a=(o=(s=this.map)==null?void 0:s.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(u=(l=this.map)==null?void 0:l.call(this))==null?void 0:u.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const p=e[0].tileInfo;return{tileInfo:p&&p.spatialReference.equals(this.spatialReference)?p:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var r,n,s;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const o of e)if(mAe(o)){const a=hAe(o);if(a)return{heightModelInfo:a,vcsWkid:(n=o.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(s=o.spatialReference)==null?void 0:s.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,r=[];for(const n of e.layers){const s="fullExtents"in n&&n.fullExtents||(n.fullExtent!=null?[n.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:s[0],a=s.find(l=>l.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const l of s)r.push({extent:l,layer:n})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=jg(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:y5(async s=>{try{const o=await Ate(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(pa(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=[],n=(s,o)=>s!=null?o!=null?s===o&&s:s:o;for(const s of e)for(const o of i){if(!s.spatialReference.equals(o.spatialReference))continue;const a=n(s.viewingMode,o.viewingMode);if(a!==!1){r.push({spatialReference:s.spatialReference,viewingMode:a});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==Bc.Local)&&(e=e.filter(({viewingMode:r})=>r!==Bc.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport({spatialReference:n,layer:e});if(s!=null){const o=s.constraints!=null?s.constraints:[{spatialReference:n,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e){var r;if(this._loadMaybe((r=this.map)==null?void 0:r.call(this))!=="loaded")return{layers:[],updating:!0};const i=new vAe;for(const n of e)if(this._collectCollection(n,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{hr(i)||console.log(i)}),"loading"):e.loadStatus:"loaded"}};c([d()],vt.prototype,"required",void 0),c([d({constructOnly:!0})],vt.prototype,"map",void 0),c([d({constructOnly:!0})],vt.prototype,"getSpatialReferenceSupport",void 0),c([d()],vt.prototype,"defaultSpatialReference",void 0),c([d()],vt.prototype,"userSpatialReference",void 0),c([d()],vt.prototype,"sourcePreloadCount",void 0),c([d()],vt.prototype,"priorityCollection",void 0),c([d()],vt.prototype,"requiresExtentInSpatialReference",void 0),c([d()],vt.prototype,"suspended",void 0),c([d({readOnly:!0})],vt.prototype,"ready",null),c([d({readOnly:!0})],vt.prototype,"heightModelInfoReady",null),c([d({readOnly:!0})],vt.prototype,"spatialReference",null),c([d({readOnly:!0})],vt.prototype,"extent",null),c([d({readOnly:!0})],vt.prototype,"heightModelInfo",null),c([d({readOnly:!0})],vt.prototype,"vcsWkid",null),c([d({readOnly:!0})],vt.prototype,"latestVcsWkid",null),c([d({readOnly:!0})],vt.prototype,"viewingMode",null),c([d({readOnly:!0})],vt.prototype,"tileInfo",null),c([d({readOnly:!0})],vt.prototype,"mapCollections",null),c([d({readOnly:!0})],vt.prototype,"_allLayers",null),c([d({readOnly:!0})],vt.prototype,"_spatialReferenceTask",null),c([d({readOnly:!0})],vt.prototype,"_tileInfoTask",null),c([d({readOnly:!0})],vt.prototype,"_heightModelInfoTask",null),c([d({readOnly:!0})],vt.prototype,"_extentCandidatesTask",null),c([d()],vt.prototype,"_extentTask",null),c([d()],vt.prototype,"_projectExtentTask",void 0),vt=c([k("esri.views.support.DefaultsFromMap")],vt);let vAe=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var wb;let be=wb=class extends Il.EventedMixin(S0(de)){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.handles=new $k,this.updatingHandles=new af,this.allLayerViews=new n1({getCollections:()=>{var e,i,r;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:wAe}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new yw,this.analyses=new gT,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ce,this.magnifier=new _te,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new pAe,this.navigation=new Cte,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new nAe(this),this.persistableViewModels=new ce,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(Y(()=>this.preconditionsReady,e=>{var i,r;e?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,wb.views.add(this)):(this._lockedSpatialReference=null,wb.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(r=this.layerViewManager)==null||r.clear(),this._teardown()):e&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Yf))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Zf(()=>this.ready)))),this.basemapView=new ju({view:this}),this.layerViewManager=new tAe({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new Ga({view:this}),this._setupSpatialReferenceLogger(),this.addHandles([Y(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),Y(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),Y(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.addHandles([Y(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const n=Mt(()=>t=jg(t));t=y5(async s=>{try{await qW(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{t=null}q.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(n,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(wb.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=wt(this.graphics),this.analyses=wt(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),wt(this.analysisViewManager),this.toolViewManager=wt(this.toolViewManager),this.layerViewManager=wt(this.layerViewManager),this.basemapView=wt(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=wt(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return q.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new vt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Jr.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(q.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),Jr.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;let t=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;return t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!ti(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??ks}set timeZone(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));this._userTimeZone=t,t===ks||t===If||e.has(t.toLowerCase())||i.has(t.toLowerCase())||q.getLogger(this).warn("#timeZone",`the parsed value '${t}' may not be a valid IANA time zone`)}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){var t;return((t=this.toolViewManager)==null?void 0:t.cursor)??this._cursor??"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new FR}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}getDefaultTimeZone(){return null}importLayerView(t){throw new j("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport({spatialReference:t})!=null}when(t,e){return this.isResolved()&&!this.ready&&q.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Gn(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};be.views=new ce,c([d()],be.prototype,"_userSpatialReference",void 0),c([d()],be.prototype,"activeTool",null),c([d({readOnly:!0})],be.prototype,"allLayerViews",void 0),c([d()],be.prototype,"groundView",void 0),c([d()],be.prototype,"animation",null),c([d()],be.prototype,"basemapView",void 0),c([d()],be.prototype,"center",null),c([d({readOnly:!0})],be.prototype,"_defaultsFromMapSettings",null),c([d()],be.prototype,"defaultsFromMap",null),c([d()],be.prototype,"fatalError",void 0),c([d({type:ct})],be.prototype,"extent",null),c([d(n9(yw,"graphics"))],be.prototype,"graphics",void 0),c([d(n9(gT,"analyses"))],be.prototype,"analyses",void 0),c([d({readOnly:!0,type:hI})],be.prototype,"heightModelInfo",null),c([d({readOnly:!0})],be.prototype,"interacting",null),c([d({readOnly:!0})],be.prototype,"navigating",null),c([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],be.prototype,"preconditionsReady",null),c([d({readOnly:!0})],be.prototype,"typeSpecificPreconditionsReady",void 0),c([d({type:ce,readOnly:!0})],be.prototype,"layerViews",void 0),c([d()],be.prototype,"resolution",null),c([d({type:_te})],be.prototype,"magnifier",void 0),c([d({value:null,type:AY})],be.prototype,"map",null),c([d()],be.prototype,"padding",void 0),c([d({readOnly:!0})],be.prototype,"ready",void 0),c([d({type:Ee})],be.prototype,"spatialReference",null),c([d()],be.prototype,"spatialReferenceWarningDelay",void 0),c([d()],be.prototype,"stationary",null),c([d({readOnly:!0})],be.prototype,"supportsGround",void 0),c([d({type:pn})],be.prototype,"timeExtent",void 0),c([d({type:String,nonNullable:!0})],be.prototype,"timeZone",null),c([d()],be.prototype,"tools",null),c([d()],be.prototype,"toolViewManager",void 0),c([d({readOnly:!0})],be.prototype,"type",void 0),c([d({type:Number})],be.prototype,"scale",void 0),c([d({readOnly:!0})],be.prototype,"updating",void 0),c([d({readOnly:!0})],be.prototype,"initialExtentRequired",void 0),c([d({readOnly:!0})],be.prototype,"initialExtent",null),c([d()],be.prototype,"cursor",null),c([d({readOnly:!0})],be.prototype,"input",void 0),c([d({type:Cte,nonNullable:!0})],be.prototype,"navigation",void 0),c([d()],be.prototype,"layerViewManager",void 0),c([d()],be.prototype,"analysisViewManager",void 0),c([d()],be.prototype,"width",void 0),c([d()],be.prototype,"height",void 0),c([d({readOnly:!0})],be.prototype,"resizing",void 0),c([d({value:null,readOnly:!0})],be.prototype,"size",null),c([d({readOnly:!0})],be.prototype,"suspended",void 0),c([d({readOnly:!0})],be.prototype,"viewEvents",void 0),c([d({readOnly:!0})],be.prototype,"persistableViewModels",void 0),c([d()],be.prototype,"_isValid",void 0),c([d()],be.prototype,"_readyCycleForced",void 0),c([d()],be.prototype,"_lockedSpatialReference",void 0),c([d()],be.prototype,"_userTimeZone",void 0),c([d()],be.prototype,"_lockedTimeZone",void 0),c([d({type:FR})],be.prototype,"theme",void 0),c([d({readOnly:!0,type:FR})],be.prototype,"effectiveTheme",null),be=wb=c([k("esri.views.View")],be);const bAe=be;function wAe(t){return t.layerViews}let Vu=class extends OE{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=xs(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new j("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=Zc(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};c([d({readOnly:!0})],Vu.prototype,"done",null),c([d({readOnly:!0,type:String})],Vu.prototype,"state",void 0),c([d()],Vu.prototype,"target",void 0),Vu=c([k("esri.views.ViewAnimation")],Vu),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Vu||(Vu={}));const VR=Vu;function Ah(t,e,i,r){const n=3*t,s=3*(i-t)-n,o=1-n-s,a=3*e,l=3*(r-e)-a,u=1-a-l;function p(g){return((o*g+s)*g+n)*g}function h(g){return((u*g+l)*g+a)*g}function m(g){return(3*o*g+2*s)*g+n}function y(g,v){let w,b,_,S,$,T;for(_=g,T=0;T<8;T++){if(S=p(_)-g,Math.abs(S)<v)return _;if($=m(_),Math.abs($)<1e-6)break;_-=S/$}if(w=0,b=1,_=g,_<w)return w;if(_>b)return b;for(;w<b;){if(S=p(_),Math.abs(S-g)<v)return _;g>S?w=_:b=_,_=.5*(b-w)+w}return _}return function(g,v=1e-6){return h(y(g,v))}}const _Ae=/^cubic-bezier\((.*)\)/,Ys={};function SAe(t){let e=Ys[t]||null;if(!e){const i=_Ae.exec(t);if(i){const r=i[1].split(",").map(n=>parseFloat(n.trim()));r.length!==4||r.some(n=>isNaN(n))||(e=Ah.apply(Ah,r))}}return e}Ys.ease=Ah(.25,.1,.25,1),Ys.linear=Ah(0,0,1,1),Ys.easeIn=Ys["ease-in"]=Ah(.42,0,1,1),Ys.easeOut=Ys["ease-out"]=Ah(0,0,.58,1),Ys.easeInOut=Ys["ease-in-out"]=Ah(.42,0,.58,1);function $Ae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function xI(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function xAe(t,e,i,r,n,s,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t}function a4(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5];let l=i*s-r*n;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*a-s*o)*l,t[5]=(r*o-i*a)*l,t):null}function EAe(t){return t[0]*t[3]-t[1]*t[2]}function Ph(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],p=i[1],h=i[2],m=i[3],y=i[4],g=i[5];return t[0]=r*u+s*p,t[1]=n*u+o*p,t[2]=r*h+s*m,t[3]=n*h+o*m,t[4]=r*y+s*g+a,t[5]=n*y+o*g+l,t}function S_(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=Math.sin(i),p=Math.cos(i);return t[0]=r*p+s*u,t[1]=n*p+o*u,t[2]=r*-u+s*p,t[3]=n*-u+o*p,t[4]=a,t[5]=l,t}function EI(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],p=i[1];return t[0]=r*u,t[1]=n*u,t[2]=s*p,t[3]=o*p,t[4]=a,t[5]=l,t}function Qg(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],p=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=r*u+s*p+a,t[5]=n*u+o*p+l,t}function Pte(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function Rte(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function l4(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function TAe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function kAe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function IAe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function Nte(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function CAe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function MAe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function LAe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function OAe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=e[0],u=e[1],p=e[2],h=e[3],m=e[4],y=e[5],g=yo();return Math.abs(i-l)<=g*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=g*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-p)<=g*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(s-h)<=g*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-m)<=g*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=g*Math.max(1,Math.abs(a),Math.abs(y))}const AAe=Ph,PAe=Nte;Object.freeze(Object.defineProperty({__proto__:null,add:IAe,copy:$Ae,determinant:EAe,equals:OAe,exactEquals:LAe,frob:kAe,fromRotation:Pte,fromScaling:Rte,fromTranslation:l4,identity:xI,invert:a4,mul:AAe,multiply:Ph,multiplyScalar:CAe,multiplyScalarAndAdd:MAe,rotate:S_,scale:EI,set:xAe,str:TAe,sub:PAe,subtract:Nte,translate:Qg},Symbol.toStringTag,{value:"Module"}));function zd(){return[1,0,0,1,0,0]}function RAe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function NAe(t,e,i,r,n,s){return[t,e,i,r,n,s]}function DAe(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:RAe,create:zd,createView:DAe,fromValues:NAe},Symbol.toStringTag,{value:"Module"}));function x1(t,e){return t[0]=e[0],t[1]=e[1],t}function sr(t,e,i){return t[0]=e,t[1]=i,t}function Dte(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function E1(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function Fte(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function jte(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function FAe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function jAe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function zAe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function VAe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function UAe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function $_(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function BAe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function TI(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function vT(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function bT(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function zte(t){const e=t[0],i=t[1];return e*e+i*i}function Vte(t,e){return t[0]=-e[0],t[1]=-e[1],t}function GAe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function UR(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function Ute(t,e){return t[0]*e[0]+t[1]*e[1]}function Bte(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function HAe(t,e,i,r){const n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function qAe(t,e){e=e||1;const i=2*zk()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function WAe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function Xo(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function JAe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function ZAe(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function YAe(t,e,i,r){const n=e[0]-i[0],s=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=n*a-s*o+i[0],t[1]=n*o+s*a+i[1],t}function KAe(t,e){const i=t[0],r=t[1],n=e[0],s=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(i*n+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function QAe(t){return"vec2("+t[0]+", "+t[1]+")"}function XAe(t,e){return t[0]===e[0]&&t[1]===e[1]}function e3e(t,e){const i=t[0],r=t[1],n=e[0],s=e[1],o=yo();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function t3e(t,e,i,r,n){let s=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const i3e=bT,c4=E1,r3e=Fte,n3e=jte,s3e=TI,o3e=vT,a3e=zte;Object.freeze(Object.defineProperty({__proto__:null,add:Dte,angle:KAe,ceil:FAe,copy:x1,cross:Bte,dist:s3e,distance:TI,div:n3e,divide:jte,dot:Ute,equals:e3e,exactEquals:XAe,floor:jAe,inverse:GAe,len:i3e,length:bT,lerp:HAe,max:VAe,min:zAe,mul:r3e,multiply:Fte,negate:Vte,normalize:UR,projectAndScale:t3e,random:qAe,rotate:YAe,round:UAe,scale:$_,scaleAndAdd:BAe,set:sr,sqrDist:o3e,sqrLen:a3e,squaredDistance:vT,squaredLength:zte,str:QAe,sub:c4,subtract:E1,transformMat2:WAe,transformMat2d:Xo,transformMat3:JAe,transformMat4:ZAe},Symbol.toStringTag,{value:"Module"}));function yi(){return[0,0]}function l3e(t){return[t[0],t[1]]}function x_(t,e){return[t,e]}function c3e(t,e=yi()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function u3e(t,e){return new Float64Array(t,e,2)}function Gte(){return yi()}function Hte(){return x_(1,1)}function qte(){return x_(1,0)}function Wte(){return x_(0,1)}const d3e=Gte(),p3e=Hte(),h3e=qte(),f3e=Wte();Object.freeze(Object.defineProperty({__proto__:null,ONES:p3e,UNIT_X:h3e,UNIT_Y:f3e,ZEROS:d3e,clone:l3e,create:yi,createView:u3e,fromArray:c3e,fromValues:x_,ones:Hte,unitX:qte,unitY:Wte,zeros:Gte},Symbol.toStringTag,{value:"Module"}));const u$={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new ro({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ee.WebMercator}),minus180Line:new ro({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ee.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new ro({paths:[[[180,-180],[180,180]]],spatialReference:Ee.WGS84}),minus180Line:new ro({paths:[[[-180,-180],[-180,180]]],spatialReference:Ee.WGS84})}};function Yh(t,e){return Math.ceil((t-e)/(2*e))}function Jte(t,e){const i=gw(t);for(const r of i)for(const n of r)n[0]+=e;return t}function gw(t){return fg(t)?t.rings:t.paths}async function m3e(t,e,i,r){const n=ud(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...n.query,f:"json",sr:DE(s),target:JSON.stringify({geometryType:s_(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await Ve(n.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(p=>{const h=_l(p);return h.spatialReference=s,h})}}async function y3e(t,e,i){const r=typeof t=="string"?mi(t):t,n=e[0].spatialReference,s=s_(e[0]),o={...i,query:{...r.query,f:"json",sr:DE(n),geometries:JSON.stringify(BMe(e))}},{data:a}=await Ve(r.path+"/simplify",o);return Wee(a.geometries,s,n)}const Zte=q.getLogger("esri.geometry.support.normalizeUtils");function g3e(t){return t.type==="polygon"}function v3e(t){return t[0].type==="polygon"}function b3e(t){return t[0].type==="polyline"}function f9(t){const e=[];let i=0,r=0;for(let n=0;n<t.length;n++){const s=t[n];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&e.push([(i+r)/2,0])}return e}function w3e(t,e){if(!(t instanceof ro||t instanceof ha)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw Zte.error(n),new j(n)}const i=gw(t),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],u=n[o+1][0],p=n[o+1][1],h=Math.sqrt((u-a)*(u-a)+(p-l)*(p-l)),m=(p-l)/h,y=(u-a)/h,g=h/e;if(g>1){for(let _=1;_<=g-1;_++){const S=_*e,$=y*S+a,T=m*S+l;s.push([$,T])}const v=(h+Math.floor(g-1)*e)/2,w=y*v+a,b=m*v+l;s.push([w,b])}s.push([u,p])}}return g3e(t)?new ha({rings:r,spatialReference:t.spatialReference}):new ro({paths:r,spatialReference:t.spatialReference})}function m9(t,e,i){if(e){const r=w3e(t,1e6);t=Gy(r,!0)}return i&&(t=Jte(t,i)),t}function y9(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=Yh(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=Yh(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=Yh(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=Yh(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function _3e(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],s=e.geometries[r],o=gw(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let p=0;for(let m=0;m<l.length;m++){const y=l[m][0];p=y>p?y:p}p=Number(p.toFixed(9));const h=-360*Yh(p,180);for(let m=0;m<l.length;m++){const y=s.getPoint(a,m);s.setPoint(a,m,y.clone().offset(h,0))}return!0}})}if(n===i){if(v3e(t))for(const a of gw(s))t[n]=t[n].addRing(a);else if(b3e(t))for(const a of gw(s))t[n]=t[n].addPath(a)}else i=n,t[n]=s}return t}async function Yte(t,e,i){if(!Array.isArray(t))return Yte([t],e);e&&typeof e!="string"&&Zte.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??Ze.geometryServiceUrl;let n,s,o,a,l,u,p,h,m=0;const y=[],g=[];for(const $ of t)if($!=null)if(n||(n=$.spatialReference,s=vs(n),o=n.isWebMercator,u=o?102100:4326,a=u$[u].maxX,l=u$[u].minX,p=u$[u].plus180Line,h=u$[u].minus180Line),s)if($.type==="mesh")g.push($);else if($.type==="point")g.push(y9($.clone(),a,l));else if($.type==="multipoint"){const T=$.clone();T.points=T.points.map(I=>y9(I,a,l)),g.push(T)}else if($.type==="extent"){const T=$.clone()._normalize(!1,!1,s);g.push(T.rings?new ha(T):T)}else if($.extent){const T=$.extent,I=Yh(T.xmin,l)*(2*a);let C=I===0?$.clone():Jte($.clone(),I);T.offset(I,0),T.intersects(p)&&T.xmax!==a?(m=T.xmax>m?T.xmax:m,C=m9(C,o),y.push(C),g.push("cut")):T.intersects(h)&&T.xmin!==l?(m=T.xmax*(2*a)>m?T.xmax*(2*a):m,C=m9(C,o,360),y.push(C),g.push("cut")):g.push(C)}else g.push($.clone());else g.push($);else g.push($);let v=Yh(m,a),w=-90;const b=v,_=new ro;for(;v>0;){const $=360*v-180;_.addPath([[$,w],[$,-1*w]]),w*=-1,v--}if(y.length>0&&b>0){const $=_3e(y,await m3e(r,y,_,i)),T=[],I=[];for(let R=0;R<g.length;R++){const O=g[R];if(O!=="cut")I.push(O);else{const F=$.shift(),A=t[R];A!=null&&A.type==="polygon"&&A.rings&&A.rings.length>1&&F.rings.length>=A.rings.length?(T.push(F),I.push("simplify")):I.push(o?Rd(F):F)}}if(!T.length)return I;const C=await y3e(r,T,i),M=[];for(let R=0;R<I.length;R++){const O=I[R];O!=="simplify"?M.push(O):M.push(o?Rd(C.shift()):C.shift())}return M}const S=[];for(let $=0;$<g.length;$++){const T=g[$];if(T!=="cut")S.push(T);else{const I=y.shift();S.push(o===!0?Rd(I):I)}}return S}function S3e(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&vs(t.spatialReference);if(!i)return e;const[r,n]=i.valid,s=2*n,{width:o}=e;let a,{xmin:l,xmax:u}=e;if([l,u]=[u,l],t.type==="extent"||o===0||o<=n||o>s||l<r||u>n)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=f9(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=f9(t.paths);break;case"multipoint":a=t.points}const p=e.clone();for(let h=0;h<a.length;h++){let m=a[h][0];m<0?(m+=n,u=Math.max(m,u)):(m-=n,l=Math.min(m,l))}return p.xmin=l,p.xmax=u,p.width<o?(p.xmin-=n,p.xmax-=n,p):e}function Kte(t,e,i){const r=vs(i);if(r==null)return t;const[n,s]=r.valid,o=2*s;let a=0,l=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<n&&(a=-Math.ceil(Math.abs(e-n)/o)),t>s?l=Math.ceil(Math.abs(t-s)/o):t<n&&(l=-Math.ceil(Math.abs(t-n)/o));let u=t+(a-l)*o;const p=u-e;return p>s?u-=o:p<n&&(u+=o),u}function MHe(t,e){const i=vs(e);if(i){const[r,n]=i.valid,s=n-r;if(t<r)for(;t<r;)t+=s;if(t>n)for(;t>n;)t-=s}return t}const Qte=96,Xte=39.37,$3e=180/Math.PI;function eie(t){return t.wkid?t:t.spatialReference||Ee.WGS84}function u4(t,e){return e.type?sr(t,e.x,e.y):x1(t,e)}function tie(t){return Cl(t)}function Sg(t,e){const i=Math.max(1,e[0]),r=Math.max(1,e[1]);return Math.max(t.width/i,t.height/r)*O3e(t.spatialReference)}async function _b(t,e,i,r){var a,l;let n,s;if(!t||Array.isArray(t)&&!t.length)return null;if(ce.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const u=t.every(m=>"attributes"in m),p=t.some(m=>!m.geometry);let h=t;if(u&&p&&e&&e.allLayerViews){const m=new Map;for(const w of t){const b=w.layer,_=m.get(b)||[],S=w.attributes[b.objectIdField];S!=null&&_.push(S),m.set(b,_)}const y=[];m.forEach((w,b)=>{const _=e.allLayerViews.find(S=>S.layer.id===b.id);if(_&&"queryFeatures"in _){const S=b.createQuery();S.objectIds=w,S.returnGeometry=!0,y.push(_.queryFeatures(S))}});const g=await Promise.all(y),v=[];for(const w of g)if(w&&w.features&&w.features.length)for(const b of w.features)b.geometry!=null&&v.push(b.geometry);h=v}for(const m of h)r=await _b(m,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new Me(t);else if(t instanceof op)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const u=t.layer,p=e.allLayerViews.find(h=>h.layer.id===u.id);if(p&&"queryFeatures"in p){const h=u.createQuery();h.objectIds=[t.attributes[u.objectIdField]],h.returnGeometry=!0;const m=await p.queryFeatures(h);n=(l=(a=m==null?void 0:m.features)==null?void 0:a[0])==null?void 0:l.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new ct({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=S3e(n);break;default:s=n.extent}if(!s)return null;fp()||El(s.spatialReference,i)||await Uc();const o=mp(s,i);return o?r=r?r.union(o):o:null}function x3e(t){var e;if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&((e=t.layer)==null?void 0:e.minScale)!=null&&t.layer.maxScale!=null){const i=t.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(t)&&t.length&&t.every(i=>"layer"in i)){let i=0,r=0;for(const n of t){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(i=s.minScale<i?s.minScale:i,r=s.maxScale>r?s.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function RM(t,e){return ti(eie(t),e)?t:mp(t,e)}async function E3e(t,e){var v;if(!t||!e)return new dr({targetGeometry:new Me,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:o}=e,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;t instanceof dr?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let u=null;l!=null&&l.targetGeometry?u=l.targetGeometry:t instanceof ct?u=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(u=await _b(t.center,e,i)||await _b(t.extent,e,i)||await _b(t.target,e,i)||await _b(t,e,i)),!u&&(s!=null&&s.targetGeometry)?u=s.targetGeometry:!u&&e.extent&&(u=e.extent),i||(i=eie(e.spatialReference||e.extent||u)),fp()||ti(u.spatialReference,i)||El(u.spatialReference,i)||await Uc();const p=RM("center"in u?u.center:u,i);e.pickClosestTarget!==!1&&p.type==="point"&&((v=s.targetGeometry)==null?void 0:v.type)==="point"&&(p.x=Kte(p.x,s.targetGeometry.x,p.spatialReference));let h=0;if((l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point")h=l.scale;else if("scale"in t&&t.scale)h=t.scale;else if("zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs)h=r.zoomToScale(t.zoom);else if(Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0){const w=RM(e.extent,i);h=w!=null?Sg(w,a):e.extent?Sg(e.extent,a):s.scale}else h=Sg(RM(u.extent,i),a);const m=x3e(t.target??t);m&&(m.min&&m.min<h?h=m.min:m.max&&m.max>h&&(h=m.max));let y=0;l?y=l.rotation:t.hasOwnProperty("rotation")?y=t.rotation:s&&(y=s.rotation);let g=new dr({targetGeometry:p,scale:h,rotation:y});return r&&(g=r.fit(g),r.constrainByGeometry(g),r.rotationEnabled||(g.rotation=s.rotation)),g}function ga(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function T3e(t,e,i){return i?sr(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):$_(t,e,.5)}const k3e=function(){const t=yi();return function(e,i,r){const n=i.targetGeometry;u4(t,n);const s=.5*P0(i);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=n.spatialReference,e}}();function I3e(t,e,i,r,n){var s;return BR(t,e,i.center),t.scale=Sg(i,r),(s=n==null?void 0:n.constraints)==null||s.constrain(t),t}function C3e(t,e,i,r){return h4(t,e,i,r),a4(t,t)}const iie=function(){const t=yi();return function(e,i,r){return c4(e,A3e(e,i),T3e(t,i,r))}}(),M3e=function(){const t=zd(),e=yi();return function(i,r,n,s){const o=P0(r),a=d4(r);return sr(e,o,o),Rte(t,e),S_(t,t,a),Qg(t,t,iie(e,n,s)),Qg(t,t,[0,s.top-s.bottom]),sr(i,t[4],t[5])}}();function P0(t){return t.scale*L3e(t.targetGeometry)}function L3e(t){return t!=null&&cr(t.spatialReference)?1/(tie(t.spatialReference)*Xte*Qte):1}function d4(t){return M5(t.rotation)||0}function O3e(t){return cr(t)?tie(t)*Xte*Qte:1}function A3e(t,e){return $_(t,e,.5)}const p4=function(){const t=yi(),e=yi(),i=yi();return function(r,n,s,o,a,l){return Vte(t,n),$_(e,s,.5*l),sr(i,1/o*l,-1/o*l),l4(r,e),a&&S_(r,r,a),EI(r,r,i),Qg(r,r,t),r}}(),h4=function(){const t=yi();return function(e,i,r,n){const s=P0(i),o=d4(i);return u4(t,i.targetGeometry),p4(e,t,r,s,o,n)}}(),P3e=function(){const t=yi();return function(e,i,r,n){const s=P0(i);return u4(t,i.targetGeometry),p4(e,t,r,s,0,n)}}();function R3e(t){const e=vs(t);return e?e.valid[1]-e.valid[0]:0}function N3e(t,e){return Math.round(R3e(t)/e)}const D3e=function(){const t=yi(),e=yi(),i=[0,0,0];return function(r,n,s){E1(t,r,n),UR(t,t),E1(e,r,s),UR(e,e),Bte(i,t,e);let o=Math.acos(Ute(t,e)/(bT(t)*bT(e)))*$3e;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),F3e=function(){const t=yi();return function(e,i,r,n){const s=e.targetGeometry;return ga(e,i),M3e(t,i,r,n),s.x+=t[0],s.y+=t[1],e}}(),BR=function(t,e,i){ga(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},j3e=function(){const t=yi();return function(e,i,r,n,s){s||(s="center"),c4(t,r,n),$_(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":sr(t,0,0);break;case"left":sr(t,-o,0);break;case"top":sr(t,0,a);break;case"right":sr(t,o,0);break;case"bottom":sr(t,0,-a);break;case"top-left":sr(t,-o,a);break;case"bottom-left":sr(t,-o,-a);break;case"top-right":sr(t,o,a);break;case"bottom-right":sr(t,o,-a)}return kI(e,i,t),e}}();function LHe(t,e,i){return ga(t,e),t.rotation+=i,t}function z3e(t,e,i){return ga(t,e),t.rotation=i,t}const V3e=function(){const t=yi();return function(e,i,r,n,s){return ga(e,i),isNaN(r)||r===0||(nie(t,n,i,s),e.scale=i.scale*r,sie(t,t,e,s),kI(e,e,sr(t,t[0]-n[0],n[1]-t[1]))),e}}();function g9(t,e,i){return ga(t,e),t.scale=i,t}const rie=function(){const t=yi();return function(e,i,r,n,s,o){return ga(e,i),isNaN(r)||r===0||(nie(t,s,i,o),e.scale=i.scale*r,e.rotation+=n,sie(t,t,e,o),kI(e,e,sr(t,t[0]-s[0],s[1]-t[1]))),e}}(),OHe=function(){const t=yi(),e=yi();return function(i,r,n,s,o,a,l){return iie(e,a,l),Dte(t,o,e),s?rie(i,r,n,s,t,a):V3e(i,r,n,t,a)}}(),nie=function(){const t=zd();return function(e,i,r,n){return Xo(e,i,C3e(t,r,n,1))}}(),sie=function(){const t=zd();return function(e,i,r,n){return Xo(e,i,h4(t,r,n,1))}}(),kI=function(){const t=yi(),e=zd();return function(i,r,n){ga(i,r);const s=P0(r),o=i.targetGeometry;return Pte(e,d4(r)),EI(e,e,x_(s,s)),Xo(t,n,e),o.x+=t[0],o.y+=t[1],i}}();let U3e=class{constructor(e,i,r,n){const s=e.targetGeometry,o=i.targetGeometry;n?typeof n=="string"&&(n=SAe(n)||Ys.ease):n=Ys.ease,this.easing=n,this.duration=r,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const r=this.easing(i);let n,s,o,a;i>=1?(n=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(n=this.sCenterX+r*this.dCenterX,s=this.sCenterY+r*this.dCenterY,o=this.sRotation+r*this.dRotation,a=this.sScale+r*this.dScale),e.targetGeometry.x=n,e.targetGeometry.y=s,e.scale=a,e.rotation=o}},dc=class extends de{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Ys.ease,this.view=null,this.viewpoint=new dr({targetGeometry:new Me,scale:0,rotation:0}),this._updateTask=zg({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=Xt(this._updateTask)}animate(e,i,r){this.stop();const n=this.viewpoint;ga(n,i),this.transition=new U3e(this.viewpoint,e.target,(r==null?void 0:r.duration)||this.duration,(r==null?void 0:r.easing)||this.easing);const s=()=>{var o,a;this.animation===e&&this._updateTask&&(e.state==="finished"&&((o=this.transition)==null||o.applyRatio(this.viewpoint,1),(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new VR({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,n;const i=this.animation;if(i&&i.state!==VR.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const s=this.transition,o=(performance.now()-this._startTime)/s.duration,a=o>=1;s.applyRatio(this.viewpoint,o),a&&((r=this.animation)==null||r.finish())}(n=this.view)!=null&&n.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};c([d()],dc.prototype,"animation",void 0),c([d()],dc.prototype,"duration",void 0),c([d()],dc.prototype,"transition",void 0),c([d()],dc.prototype,"easing",void 0),c([d()],dc.prototype,"view",void 0),c([d()],dc.prototype,"viewpoint",void 0),dc=c([k("esri.views.2d.AnimationManager")],dc);const B3e=dc;let G3e=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var o,a;if(this._updateRequested=!1,(o=this.view)==null?void 0:o.destroyed)return;const{allLayerViews:i,graphicsView:r,labelManager:n,state:{id:s}}=this.view;i.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==s&&(n.viewChange(),n.lastUpdateId=s),n.updateRequested&&n.processUpdate(this._updateParameters)),r!=null&&(r.lastUpdateId!==s&&(r.viewChange(),r.lastUpdateId=s),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((a=this._frameTaskHandle)==null||a.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Y(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=zg(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var n;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((n=e.layerViews)==null||n.forEach(this._updateLayerView,this))}},r2=class extends de{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void q.getLogger(this).error("#goTo()","target cannot be null or undefined");this.view.animation&&(this.view.animation=null);const r=this._createAnimation();await Zf(()=>this.view.ready,i);const n={animate:!0,...i},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:p,allLayerViews:h}=this.view,m=E3e(e,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:p,allLayerViews:h,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(m),this._gotoTask={},n.animate?this._gotoAnimated(m,n):this._gotoImmediate(m,n)}_gotoImmediate(e,i){const r=this._gotoTask,n=this.view.animation,s=e.then(o=>{if(kt(i),r!==this._gotoTask)throw new j("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(r,n,s)}_gotoAnimated(e,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=e.then(o=>{if(kt(i),r!==this._gotoTask)throw new j("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,s)}_createAnimation(){return this.view.animation&&!this.view.animation.done||(this.view.animation=new VR),this.view.animation}_cancellableGoTo(e,i,r){const n=()=>e===this._gotoTask;return r.finally(()=>{n()&&(i.done||i.stop(),this.view.animation=null)})}};c([d({constructOnly:!0})],r2.prototype,"view",void 0),r2=c([k("esri.views.2d.GoToManager")],r2);function ni(){return Promise.all([Z(()=>import("./webglDeps-flB-dAyJ.js"),__vite__mapDeps([130,131,132,45,133,134])),Z(()=>import("./mapViewDeps-FV7iZGZ-.js"),__vite__mapDeps([135,136,137,138,139,72,45,132,140,141,142,74,75,46,76,143,131,133,144,145,102,101,105,15,16,17,18,73,146,106,71,99,100,21,147,148,149,98,130,134,150,151,152,59,153,154,155,103,69,156,128,70,12,157,158,159,160,161,162,33,26,163,164,165,166,81,167]))])}const yv=()=>ni().then(()=>Z(()=>import("./TileLayerView2D-kNTkB0TW.js"),__vite__mapDeps([168,139,72,45,132,140,141,142,74,75,46,76,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,98,150,151,152,59,153,154,155,103,69,156,128,70,12,158,159,161,162,33,26,81,169,170,171,166,172,173,164,165,174,175,176]))),cm=()=>ni().then(()=>Z(()=>import("./FeatureLayerView2D-IlI8C7q2.js"),__vite__mapDeps([177,72,172,139,45,132,141,142,74,75,46,76,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,170,171,166,69,140,165,176,174]))),v9={"base-dynamic":()=>ni().then(()=>Z(()=>import("./BaseDynamicLayerView2D-koDJqo6u.js"),__vite__mapDeps([178,179,143,72,131,132,45,133,46,74,75,76,144,145,102,101,139,105,15,16,17,18,172,180,171,174]))),"base-tile":yv,"bing-maps":yv,csv:cm,"geo-rss":()=>ni().then(()=>Z(()=>import("./GeoRSSLayerView2D-ytuwRnJb.js"),__vite__mapDeps([181,172,139,72,45,132,163,74,75,46,76,164,165,141,142,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,166,81,161,162,33,26,154,155,103,70,12]))),feature:cm,geojson:cm,graphics:()=>ni().then(()=>Z(()=>import("./GraphicsLayerView2D-lnEQNsL8.js"),__vite__mapDeps([182,172,139,72,45,132,163,74,75,46,76,164,165,141,142,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,166,81,161,162,33,26,154,155,103,70,12]))),group:()=>ni().then(()=>Z(()=>import("./GroupLayerView2D-gAw5ejUd.js"),__vite__mapDeps([183,172,139,72,45,132]))),imagery:()=>ni().then(()=>Z(()=>import("./ImageryLayerView2D-6flWPNA0.js"),__vite__mapDeps([184,185,131,132,45,133,46,85,143,72,74,75,76,144,145,102,101,139,105,15,16,17,18,172,161,146,137,106,71,99,100,21,147,162,33,26,141,142,73,148,149,154,155,103,70,12,173,164,165,166,81,179,171,180,88,176,174]))),"imagery-tile":()=>ni().then(()=>Z(()=>import("./ImageryTileLayerView2D-Yfvkm1bN.js"),__vite__mapDeps([186,187,185,131,132,45,133,46,85,143,72,74,75,76,144,145,102,101,139,105,15,16,17,18,172,188,142,166,189,88,149,176,174]))),kml:()=>ni().then(()=>Z(()=>import("./KMLLayerView2D-uyuiTUpC.js"),__vite__mapDeps([190,191,171,139,72,45,132,179,143,131,133,46,74,75,76,144,145,102,101,105,15,16,17,18,172,163,164,165,141,142,73,146,137,106,71,99,100,21,147,148,149,166,81,161,162,33,26,154,155,103,70,12,88,157,130,134,158,159,156,160,188]))),"knowledge-graph":()=>ni().then(()=>Z(()=>import("./KnowledgeGraphLayerView2D-qf2Q-YDj.js"),__vite__mapDeps([192,172,139,72,45,132]))),"link-chart":()=>ni().then(()=>Z(()=>import("./KnowledgeGraphLayerView2D-qf2Q-YDj.js"),__vite__mapDeps([192,172,139,72,45,132]))),"knowledge-graph-sublayer":cm,"map-image":()=>ni().then(()=>Z(()=>import("./MapImageLayerView2D-kb_BjM5a.js"),__vite__mapDeps([193,179,143,72,131,132,45,133,46,74,75,76,144,145,102,101,139,105,15,16,17,18,172,161,146,137,106,71,99,100,21,147,162,33,26,141,142,73,148,149,154,155,103,70,12,173,164,165,166,81,180,171,174,175,176]))),"map-notes":()=>ni().then(()=>Z(()=>import("./MapNotesLayerView2D-Pz4S0oE2.js"),__vite__mapDeps([194,172,139,72,45,132,163,74,75,46,76,164,165,141,142,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,166,81,161,162,33,26,154,155,103,70,12]))),media:()=>ni().then(()=>Z(()=>import("./MediaLayerView2D-3MeXSRLp.js"),__vite__mapDeps([195,196,162,49,139,72,45,132,140,141,142,74,75,46,76,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,98,150,151,152,59,153,154,155,103,69,156,128,70,12,158,159,161,33,26,81,172]))),"ogc-feature":()=>ni().then(()=>Z(()=>import("./OGCFeatureLayerView2D-12UBoTI6.js"),__vite__mapDeps([197,177,72,172,139,45,132,141,142,74,75,46,76,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,170,171,166,69,140,165,176,174]))),"open-street-map":yv,"oriented-imagery":cm,route:()=>ni().then(()=>Z(()=>import("./RouteLayerView2D-kfQiB08P.js"),__vite__mapDeps([198,199,172,139,72,45,132,163,74,75,46,76,164,165,141,142,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,166,81,161,162,33,26,154,155,103,70,12]))),stream:()=>ni().then(()=>Z(()=>import("./StreamLayerView2D-aBAYjGzJ.js"),__vite__mapDeps([200,177,72,172,139,45,132,141,142,74,75,46,76,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,170,171,166,69,140,165,176,174]))),"subtype-group":()=>ni().then(()=>Z(()=>import("./SubtypeGroupLayerView2D-qMNY8rYd.js"),__vite__mapDeps([201,177,72,172,139,45,132,141,142,74,75,46,76,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,170,171,166,69,140,165,176,174]))),tile:yv,"vector-tile":()=>ni().then(()=>Z(()=>import("./VectorTileLayerView2D-OhcTU5CY.js"),__vite__mapDeps([202,98,100,45,132,59,152,147,131,133,101,142,139,72,102,75,74,46,76,166,143,144,145,105,15,16,17,18,104,99,172]))),video:()=>ni().then(()=>Z(()=>import("./VideoLayerView2D-VpdgyixZ.js"),__vite__mapDeps([203,204,172,139,72,45,132,163,74,75,46,76,164,165,141,142,143,131,133,144,145,102,101,105,15,16,17,18,73,146,137,106,71,99,100,21,147,148,149,166,81,161,162,33,26,154,155,103,70,12]))),wcs:()=>ni().then(()=>Z(()=>import("./ImageryTileLayerView2D-Yfvkm1bN.js"),__vite__mapDeps([186,187,185,131,132,45,133,46,85,143,72,74,75,76,144,145,102,101,139,105,15,16,17,18,172,188,142,166,189,88,149,176,174]))),"web-tile":yv,wfs:cm,wms:()=>ni().then(()=>Z(()=>import("./WMSLayerView2D-zZITza7H.js"),__vite__mapDeps([205,179,143,72,131,132,45,133,46,74,75,76,144,145,102,101,139,105,15,16,17,18,172,180,171,174,206]))),wmts:()=>ni().then(()=>Z(()=>import("./WMTSLayerView2D-GS8jVX6a.js"),__vite__mapDeps([207,169,170,171,139,72,45,132,142,143,131,133,46,74,75,76,144,145,102,101,105,15,16,17,18,166,172,174]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function H3e(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new j(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const b9={hasLayerViewModule:t=>v9[t.type]!=null,importLayerView:t=>{const e=v9[t.type];if(e==null)throw H3e(t);return e(t)}};function q3e(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const u of l)for(let p=0;p<u.length-1;p++){Cwe(a,r,u,p);const h=TI(r,a);h<n&&(n=h,s=a[0],o=a[1])}return{coordinate:new Me({x:s,y:o,spatialReference:i}),distance:n}}var GR;let Rh=GR=class extends F5(de){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return mp(this.geometry,this.spatialReference)}catch(t){return q.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?Nk(this.normalizedGeometry,i):tZ(this.normalizedGeometry,i))return t;const{coordinate:r}=q3e(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new GR({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};c([d({constructOnly:!0})],Rh.prototype,"geometry",void 0),c([d({readOnly:!0})],Rh.prototype,"normalizedGeometry",null),c([d({constructOnly:!0})],Rh.prototype,"spatialReference",void 0),Rh=GR=c([k("esri.views.2d.constraints.GeometryConstraint")],Rh);var HR;let Sb=HR=class extends F5(de){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new HR({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([d()],Sb.prototype,"enabled",void 0),c([d()],Sb.prototype,"rotationEnabled",void 0),Sb=HR=c([k("esri.views.2d.constraints.RotationConstraint")],Sb);const oie=Sb;var qR;let kn=qR=class extends F5(de){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,u=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(e!=null&&e.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(p=>p.clone()),e.sort((p,h)=>h.scale-p.scale),e.forEach((p,h)=>p.level=h);for(const p of e)!l&&i>0&&i>=p.scale&&(o=p.level,l=!0),!u&&r>0&&r>=p.scale&&(a=t?t.level:-1,u=!0),t=p;n===-1&&(n=i===0?0:o),s===-1&&(s=r===0?e.length-1:a),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),i=e[n].scale,r=e[s].scale,e.splice(0,n),e.splice(s-n+1,e.length),e.forEach((p,h)=>{this._lodByScale[p.scale]=p,this._scales[h]=p.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const l=a?i:r;if(e&&s){const u=(l-e.scale)/(t.scale-e.scale);n.x=s.x+(n.x-s.x)*u,n.y=s.y+(n.y-s.y)*u}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),r=Math.round(t);return e[r]+(r-t)*(e[i]-e[r])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new qR({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};c([d({readOnly:!0})],kn.prototype,"effectiveLODs",void 0),c([d({readOnly:!0})],kn.prototype,"effectiveMinZoom",void 0),c([d({readOnly:!0})],kn.prototype,"effectiveMaxZoom",void 0),c([d({readOnly:!0})],kn.prototype,"effectiveMinScale",void 0),c([d({readOnly:!0})],kn.prototype,"effectiveMaxScale",void 0),c([d()],kn.prototype,"lods",void 0),c([d()],kn.prototype,"minZoom",void 0),c([d()],kn.prototype,"maxZoom",void 0),c([d()],kn.prototype,"minScale",void 0),c([d()],kn.prototype,"maxScale",void 0),c([d()],kn.prototype,"snapToZoom",void 0),kn=qR=c([k("esri.views.2d.constraints.ZoomConstraint")],kn);const aie=kn,W3e={base:null,key:"type",typeMap:{extent:ct,polygon:ha}};let di=class extends de{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new ce}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new Rh({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new oie({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const e=this._get("_zoom"),i=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),r=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new aie({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,e)}),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};c([d({readOnly:!0})],di.prototype,"effectiveLODs",null),c([d({readOnly:!0})],di.prototype,"effectiveMinScale",null),c([d({readOnly:!0})],di.prototype,"effectiveMaxScale",null),c([d({readOnly:!0})],di.prototype,"effectiveMinZoom",null),c([d({readOnly:!0})],di.prototype,"effectiveMaxZoom",null),c([d({types:W3e,value:null})],di.prototype,"geometry",null),c([d({type:[eo]})],di.prototype,"lods",void 0),c([d()],di.prototype,"minScale",void 0),c([d()],di.prototype,"maxScale",void 0),c([d()],di.prototype,"minZoom",void 0),c([d()],di.prototype,"maxZoom",void 0),c([d()],di.prototype,"rotationEnabled",void 0),c([d()],di.prototype,"snapToZoom",void 0),c([d({type:ce})],di.prototype,"customConstraints",void 0),c([d()],di.prototype,"view",void 0),c([d({readOnly:!0})],di.prototype,"version",null),c([d({type:Rh,readOnly:!0})],di.prototype,"_geometry",null),c([d({type:oie})],di.prototype,"_rotation",null),c([d({readOnly:!0,type:aie})],di.prototype,"_zoom",null),di=c([k("esri.views.2d.MapViewConstraints")],di);const lie=di;let Of=class yh{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new yh(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new yh(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new yh(e,i,r,n),new yh(e,i,r+1,n),new yh(e,i+1,r,n),new yh(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};Of.pool=new Wf(Of,null,null,25,50);function pu(t,e){return[t,e]}function Sp(t,e,i){return t[0]=e,t[1]=i,t}function J3e(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const xo=new Of("0/0/0/0");let Z3e=class cie{static create(e,i,r=null){const n=vs(e.spatialReference),s=i.origin||pu(e.origin.x,e.origin.y),o=pu(e.size[0]*i.resolution,e.size[1]*i.resolution),a=pu(-1/0,-1/0),l=pu(1/0,1/0),u=pu(1/0,1/0);r!=null&&(Sp(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),Sp(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),Sp(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:p,rows:h}=i;let m,y,g,v;return!r&&p&&h&&(Sp(a,p[0],h[0]),Sp(l,p[1],h[1]),Sp(u,p[1]-p[0]+1,h[1]-h[0]+1)),e.isWrappable?(m=pu(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),u[1]),y=pu(Math.floor((n.origin[0]-s[0])/o[0]),a[1]),g=pu(m[0]+y[0]-1,l[1]),v=!0):(y=a,g=l,m=u,v=!1),new cie(i.level,i.resolution,i.scale,s,a,l,u,o,y,g,m,v)}constructor(e,i,r,n,s,o,a,l,u,p,h,m){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldStart=u,this.worldEnd=p,this.worldSize=h,this.wrap=m}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){xo.set(i);const n=r?xo.col:this.denormalizeCol(xo.col,xo.world),s=xo.row;return J3e(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,i,r=!1){xo.set(i);const n=r?xo.col:this.denormalizeCol(xo.col,xo.world);return Array.isArray(e)?Sp(e,this.getXForColumn(n),this.getYForRow(xo.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(xo.row)),e}},T1=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++)e.call(i,s,o,n.normalizeCol(u),n.getWorldForColumn(u))}};T1.pool=new Wf(T1);let NM=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const Ft=new Of("0/0/0/0");let Y3e=class uie{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[s,o]=i,a=s-r,l=o-n,u=l!==0?a/l:0,p=(Math.ceil(n)-n)*u,h=(Math.floor(n)-n)*u;return new uie(r,Math.floor(n),Math.ceil(o),u,a<0?p:h,a<0?h:p,a<0?s:r,a<0?r:s)}constructor(e,i,r,n,s,o,a,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Wn=[[0,0],[0,0],[0,0],[0,0]],K3e=1e-6;let Q3e=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(a=>a.level>=r&&a.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>Z3e.create(e,a,i));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){Ft.set(i);const n=this._infoByLevel[Ft.level];return n?n.getTileBounds(e,Ft,r):e}getTileCoords(e,i,r=!1){Ft.set(i);const n=this._infoByLevel[Ft.level];return n?n.getTileCoords(e,Ft,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=T1.pool.acquire(s),a=this._wrap;let l,u,p,h=1/0,m=-1/0;const y=o.spans;Wn[0][0]=Wn[0][1]=Wn[1][1]=Wn[3][0]=-i,Wn[1][0]=Wn[2][0]=e.size[0]+i,Wn[2][1]=Wn[3][1]=e.size[1]+i;for(const b of Wn)e.toMap(b,b),b[0]=s.getColumnForX(b[0]),b[1]=s.getRowForY(b[1]);const g=[];let v=3;for(let b=0;b<4;b++){if(Wn[b][1]===Wn[v][1]){v=b;continue}const _=Y3e.create(Wn[b],Wn[v]);h=Math.min(_.ymin,h),m=Math.max(_.ymax,m),g[_.ymin]===void 0&&(g[_.ymin]=[]),g[_.ymin].push(_),v=b}if(h==null||m==null||m-h>100)return null;let w=[];for(l=h;l<m;){g[l]!=null&&(w=w.concat(g[l])),u=1/0,p=-1/0;for(let b=w.length-1;b>=0;b--){const _=w[b];u=Math.min(u,_.getLeftCol()),p=Math.max(p,_.getRightCol())}if(u=Math.floor(u),p=Math.floor(p),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const b=Math.floor(p/s.worldSize[0]);for(let _=Math.floor(u/s.worldSize[0]);_<=b;_++)y.push(new NM(l,Math.max(s.getFirstColumnForWorld(_),u),Math.min(s.getLastColumnForWorld(_),p)))}else y.push(new NM(l,u,p));else u>s.last[0]||p<s.first[0]||(u=Math.max(u,s.first[0]),p=Math.min(p,s.last[0]),y.push(new NM(l,u,p)));l+=1;for(let b=w.length-1;b>=0;b--){const _=w[b];_.ymax>=l?_.incrRow():w.splice(b,1)}}return o}getTileParentId(e){Ft.set(e);const i=this._infoByLevel[Ft.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Ft,this._lodInfos[r],Ft),Ft.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Ft.set(i);const r=this._infoByLevel[Ft.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(Ft,n,Ft);const o=n.denormalizeCol(Ft.col,Ft.world);for(const a of e.spans)if(a.row===Ft.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<r.resolution){const[o,a,l,u]=e.spans.reduce((v,w)=>(v[0]=Math.min(v[0],w.row),v[1]=Math.max(v[1],w.row),v[2]=Math.min(v[2],w.colFrom),v[3]=Math.max(v[3],w.colTo),v),[1/0,-1/0,1/0,-1/0]),p=r.denormalizeCol(Ft.col,Ft.world),h=n.getColumnForX(r.getXForColumn(p)),m=n.getRowForY(r.getYForRow(Ft.row)),y=n.getColumnForX(r.getXForColumn(p+1))-1,g=n.getRowForY(r.getYForRow(Ft.row+1))-1;return!(h>u||y<l||m>a||g<o)}const s=n.denormalizeCol(Ft.col,Ft.world);return e.spans.some(o=>o.row===Ft.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=vs(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+K3e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}},DM=class{constructor(){this._map=new Map,this._observable=new e_}get size(){return Se(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return Se(this._observable),this._map.entries()}forEach(e,i){Se(this._observable),this._map.forEach((r,n)=>e.call(i,r,n,this),i)}get(e){return Se(this._observable),this._map.get(e)}has(e){return Se(this._observable),this._map.has(e)}keys(){return Se(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return Se(this._observable),this._map.values()}[Symbol.iterator](){return Se(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}},X3e=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},ePe=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new DM,this._controllers=new DM,this._processingItems=new DM,this._pausedSignal=S1(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new aT(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Xt(this._schedule),this._task=Xt(this._task)}get updating(){var e;return!!((e=this._task)!=null&&e.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let s=null;i&&(s=ys(i,()=>n.abort()));const o=()=>{const p=this._processingItems.get(e);p&&p.controller.abort(),a(),u.reject(mt())},a=()=>{l.remove(),s!=null&&s.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},l=JD(n.signal,o),u=xs();return this._deferreds.set(e,u),this._controllers.set(e,n),u.promise.then(a,a),this._queue.push(e),this._scheduleNext(),u.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=v0(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new X3e(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(s){this._processError(n,s)}Zc(i)?(n.promise=i,i.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,i)}get test(){return{update:e=>this.runTask(e)}}};function tPe(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const FM=new Set,d$=[],um=new Map,w9=[0,0];let Uu=class extends de{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:r}=this;this._queue=new ePe({concurrency:e,process:(n,s)=>{const o=this._keyToItem.get(n);return i(o,{signal:s})},peeker:r==="scale-first"?n=>this._peekByScaleFirst(n):n=>this._peekByCenterFirst(n)})}destroy(){this.clear(),this._queue=wt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=()=>{this._keyToItem.delete(i)};return this._keyToItem.set(i,e),r.then(n,n),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;e.forEach(p=>{const h=this._keyToItem.get(p),m=this.tileInfoView.getTileScale(h.key);um.has(m)||(um.set(m,[]),r=Math.max(m,r),n=Math.min(m,n)),um.get(m).push(h.key),FM.add(m)});let s=this.state.scale;um.has(s)||(tPe(d$,FM),d$.sort((p,h)=>p-h),s=d$.reduce((p,h)=>Math.abs(h-s)<Math.abs(p-s)?h:p,d$[0])),s=Math.min(s,r),s=Math.max(s,n);const o=um.get(s),a=i.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((p,h)=>{const m=a.denormalizeCol(p.col,p.world),y=a.denormalizeCol(h.col,h.world);return Math.sqrt((l-m)*(l-m)+(u-p.row)*(u-p.row))-Math.sqrt((l-y)*(l-y)+(u-h.row)*(u-h.row))}),FM.clear(),um.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let n,s=Number.POSITIVE_INFINITY;return e.forEach(o=>{const a=this._keyToItem.get(o);i.getTileCoords(w9,a.key);const l=TI(w9,r);l<s&&(s=l,n=a.key)}),n.id}};c([d({constructOnly:!0})],Uu.prototype,"concurrency",void 0),c([d({constructOnly:!0})],Uu.prototype,"process",void 0),c([d()],Uu.prototype,"state",void 0),c([d({constructOnly:!0})],Uu.prototype,"strategy",void 0),c([d({constructOnly:!0})],Uu.prototype,"tileInfoView",void 0),Uu=c([k("esri.views.2d.tiling.TileQueue")],Uu);const HHe=Uu;let iPe=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];_9(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],u=r*o[1],p=[0,0],h=[0,0];for(s.sort((m,y)=>(p[0]=a.x+l*(m.col+.5),p[1]=a.y-u*(m.row+.5),h[0]=a.x+l*(y.col+.5),h[1]=a.y-u*(y.row+.5),vT(p,i)-vT(h,i)));s.length>0;){const m=s.pop();if(this._removeTile(m.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),_9(this._tilePerId,e)}};function _9(t,e){t.delete(e)}const $p=new Of(0,0,0,0),Nl=new Map,xp=[],jM=[];let WHe=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new iPe(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var b,_;const{resampling:i,tileIndex:r}=this,{scale:n,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,u=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>a||n<l))return this.tiles.length=0,void this.clear();const p=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!p)return this.tiles.length=0,void this.clear();const{spans:h,lodInfo:m}=p,{level:y}=m;this.tiles.length=0,r.forEach(S=>S.visible=!0);let g=0,v=0;if(h.length>0)for(const{row:S,colFrom:$,colTo:T}of h)for(let I=$;I<=T;I++){g++;const C=$p.set(y,S,m.normalizeCol(I),m.getWorldForColumn(I)).id;let M=r.get(C);if(M)M.isReady?(Nl.set(C,M),v++):u||this._addParentTile(C,Nl);else{if((b=this._tileCache)!=null&&b.has(C)){if(M=this._tileCache.pop(C),this.tileIndex.set(C,M),M.isReady){Nl.set(C,M),v++;continue}}else M=this.acquireTile($p),this.tileIndex.set(C,M);u||this._addParentTile(C,Nl)}}const w=v===g;for(const[S,$]of r){if(Nl.has(S))continue;$p.set(S);const T=this.tileInfoView.intersects(p,$p),I=this.cachePolicy==="purge"?$p.level!==y:$p.level>y;!T||!u&&w?!I&&T||xp.push($):$.isReady?I&&this.cachePolicy==="purge"&&this._hasReadyAncestor($p,y)?xp.push($):jM.push($):I&&xp.push($)}for(const S of jM)S.isReady&&Nl.set(S.key.id,S);for(const S of xp)this._tileCache?this._tileCache.add(S):this.releaseTile(S),r.delete(S.key.id);for(const S of Nl.values())this.tiles.push(S);for(const S of r.values())Nl.has(S.key.id)||(S.visible=!1);(_=this._tileCache)==null||_.prune(y,s,o),T1.pool.release(p),jM.length=0,xp.length=0,Nl.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())this.tiles.includes(r)?e(r):xp.push(r);for(const r of xp)this.releaseTile(r),this.tileIndex.delete(r.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var s;let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n==null?void 0:n.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n==null?void 0:n.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=Bn();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const s=Bn();if(this.tileInfoView.getTileBounds(s,n.key,!0),Wwe(s,r))return!0}return!1}};function wT(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function rPe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function nPe(t,e,i,r,n,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function sPe(t,e){return new Float32Array(t,e,6)}function die(t,e,i,r){const n=e[r],s=e[r+1];t[r]=i[0]*n+i[2]*s+i[4],t[r+1]=i[1]*n+i[3]*s+i[5]}function oPe(t,e,i,r=0,n=0,s=2){const o=n||e.length/s;for(let a=r;a<o;a++)die(t,e,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:rPe,create:wT,createView:sPe,fromValues:nPe,transform:die,transformMany:oPe},Symbol.toStringTag,{value:"Module"}));function aPe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function lPe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function pie(t,e,i,r,n,s,o,a,l,u){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t}function hie(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function cPe(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function uPe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],h=p*o-a*u,m=-p*s+a*l,y=u*s-o*l;let g=i*h+r*m+n*y;return g?(g=1/g,t[0]=h*g,t[1]=(-p*r+n*u)*g,t[2]=(a*r-n*o)*g,t[3]=m*g,t[4]=(p*i-n*l)*g,t[5]=(-a*i+n*s)*g,t[6]=y*g,t[7]=(-u*i+r*l)*g,t[8]=(o*i-r*s)*g,t):null}function dPe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8];return t[0]=o*p-a*u,t[1]=n*u-r*p,t[2]=r*a-n*o,t[3]=a*l-s*p,t[4]=i*p-n*l,t[5]=n*s-i*a,t[6]=s*u-o*l,t[7]=r*l-i*u,t[8]=i*o-r*s,t}function pPe(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8];return e*(u*s-o*l)+i*(-u*n+o*a)+r*(l*n-s*a)}function f4(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],h=e[8],m=i[0],y=i[1],g=i[2],v=i[3],w=i[4],b=i[5],_=i[6],S=i[7],$=i[8];return t[0]=m*r+y*o+g*u,t[1]=m*n+y*a+g*p,t[2]=m*s+y*l+g*h,t[3]=v*r+w*o+b*u,t[4]=v*n+w*a+b*p,t[5]=v*s+w*l+b*h,t[6]=_*r+S*o+$*u,t[7]=_*n+S*a+$*p,t[8]=_*s+S*l+$*h,t}function WR(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],h=e[8],m=i[0],y=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=m*r+y*o+u,t[7]=m*n+y*a+p,t[8]=m*s+y*l+h,t}function fie(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],p=e[7],h=e[8],m=Math.sin(i),y=Math.cos(i);return t[0]=y*r+m*o,t[1]=y*n+m*a,t[2]=y*s+m*l,t[3]=y*o-m*r,t[4]=y*a-m*n,t[5]=y*l-m*s,t[6]=u,t[7]=p,t[8]=h,t}function hPe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function fPe(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function mPe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function yPe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function gPe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function vPe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function bPe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,u=i*o,p=r*o,h=r*a,m=n*o,y=n*a,g=n*l,v=s*o,w=s*a,b=s*l;return t[0]=1-h-g,t[3]=p-b,t[6]=m+w,t[1]=p+b,t[4]=1-u-g,t[7]=y-v,t[2]=m-w,t[5]=y+v,t[8]=1-u-h,t}function wPe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],p=e[10],h=p*o-a*u,m=-p*s+a*l,y=u*s-o*l,g=i*h+r*m+n*y;if(!g)return null;const v=1/g;return t[0]=h*v,t[1]=(-p*r+n*u)*v,t[2]=(a*r-n*o)*v,t[3]=m*v,t[4]=(p*i-n*l)*v,t[5]=(-a*i+n*s)*v,t[6]=y*v,t[7]=(-u*i+r*l)*v,t[8]=(o*i-r*s)*v,t}function _Pe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],p=e[8],h=e[9],m=e[10],y=e[11],g=e[12],v=e[13],w=e[14],b=e[15],_=i*a-r*o,S=i*l-n*o,$=i*u-s*o,T=r*l-n*a,I=r*u-s*a,C=n*u-s*l,M=p*v-h*g,R=p*w-m*g,O=p*b-y*g,F=h*w-m*v,A=h*b-y*v,P=m*b-y*w;let V=_*P-S*A+$*F+T*O-I*R+C*M;return V?(V=1/V,t[0]=(a*P-l*A+u*F)*V,t[1]=(l*O-o*P-u*R)*V,t[2]=(o*A-a*O+u*M)*V,t[3]=(n*A-r*P-s*F)*V,t[4]=(i*P-n*O+s*R)*V,t[5]=(r*O-i*A-s*M)*V,t[6]=(v*C-w*I+b*T)*V,t[7]=(w*$-g*C-b*S)*V,t[8]=(g*I-v*$+b*_)*V,t):null}function SPe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function $Pe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function xPe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function EPe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function mie(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function TPe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function kPe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function IPe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function CPe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],p=t[8],h=e[0],m=e[1],y=e[2],g=e[3],v=e[4],w=e[5],b=e[6],_=e[7],S=e[8],$=yo();return Math.abs(i-h)<=$*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-m)<=$*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(n-y)<=$*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(s-g)<=$*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=$*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-w)<=$*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-b)<=$*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(u-_)<=$*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(p-S)<=$*Math.max(1,Math.abs(p),Math.abs(S))}function MPe(t){const e=yo(),i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],p=t[8];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+u*u))<=e&&Math.abs(1-(n*n+a*a+p*p))<=e}const LPe=f4,OPe=mie;Object.freeze(Object.defineProperty({__proto__:null,add:EPe,adjoint:dPe,copy:lPe,determinant:pPe,equals:CPe,exactEquals:IPe,frob:xPe,fromMat2d:vPe,fromMat4:aPe,fromQuat:bPe,fromRotation:yPe,fromScaling:gPe,fromTranslation:mPe,identity:hie,invert:uPe,isOrthoNormal:MPe,mul:LPe,multiply:f4,multiplyScalar:TPe,multiplyScalarAndAdd:kPe,normalFromMat4:_Pe,normalFromMat4Legacy:wPe,projection:SPe,rotate:fie,scale:hPe,scaleByVec2:fPe,set:pie,str:$Pe,sub:OPe,subtract:mie,translate:WR,transpose:cPe},Symbol.toStringTag,{value:"Module"}));function n2(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function APe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function PPe(t,e,i,r,n,s,o,a,l){const u=new Float32Array(9);return u[0]=t,u[1]=e,u[2]=i,u[3]=r,u[4]=n,u[5]=s,u[6]=o,u[7]=a,u[8]=l,u}function RPe(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:APe,create:n2,createView:RPe,fromValues:PPe},Symbol.toStringTag,{value:"Module"}));function yie(){return new Float32Array(2)}function NPe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function Xg(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function DPe(t,e){return new Float32Array(t,e,2)}function gie(){return yie()}function vie(){return Xg(1,1)}function bie(){return Xg(1,0)}function wie(){return Xg(0,1)}const FPe=gie(),jPe=vie(),zPe=bie(),VPe=wie();Object.freeze(Object.defineProperty({__proto__:null,ONES:jPe,UNIT_X:zPe,UNIT_Y:VPe,ZEROS:FPe,clone:NPe,create:yie,createView:DPe,fromValues:Xg,ones:vie,unitX:bie,unitY:wie,zeros:gie},Symbol.toStringTag,{value:"Module"}));function UPe(t){return t instanceof Float32Array&&t.length>=2}function BPe(t){return Array.isArray(t)&&t.length>=2}function p$(t){return UPe(t)||BPe(t)}var JR;const Pr=[0,0];let Bu=JR=class extends B{constructor(t){super(t),this._viewpoint2D={center:yi(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new ct,this.id=0,this.inverseTransform=zd(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=zd(),this.transformNoRotation=zd(),this.displayMat3=n2(),this.displayViewMat3=n2(),this.viewMat3=n2(),this.viewMat2d=wT(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=ga(i,t.viewpoint),this._set("size",x1(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new JR({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return p$(e)?Xo(t,e,this.inverseTransform):(Pr[0]=e,Pr[1]=i,Xo(t,Pr,this.inverseTransform))}toScreen(t,e,i){return p$(e)?Xo(t,e,this.transform):(Pr[0]=e,Pr[1]=i,Xo(t,Pr,this.transform))}toScreenNoRotation(t,e,i){return p$(e)?Xo(t,e,this.transformNoRotation):(Pr[0]=e,Pr[1]=i,Xo(t,Pr,this.transformNoRotation))}toScreenClosest(t,e,i){p$(e)?(Pr[0]=e[0],Pr[1]=e[1]):(Pr[0]=e,Pr[1]=i);const[r]=Pr,{center:n,extent:s,spatialReference:o,transform:a}=this;return(r<s.xmin||r>s.xmax)&&(Pr[0]=Kte(r,n[0],o)),Xo(t,Pr,a)}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return p4(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new dr({targetGeometry:new Me(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!e||!i)return;this.resolution=P0(o),this.rotation=r,this.scale=i,this.spatialReference=e,x1(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;pie(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=hie(this.viewMat3),p=Xg(s[0]/2,s[1]/2),h=Xg(-s[0]/2,-s[1]/2),m=M5(r);WR(u,u,p),fie(u,u,m),WR(u,u,h),f4(this.displayViewMat3,this.displayMat3,u);const y=l4(this.viewMat2d,p);return S_(y,y,m),Qg(y,y,h),k3e(this.extent,o,s),h4(this.transform,o,s,n),a4(this.inverseTransform,this.transform),P3e(this.transformNoRotation,o,s,n),this.worldScreenWidth=N3e(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};c([d({readOnly:!0})],Bu.prototype,"id",void 0),c([d({value:1,json:{write:!0}})],Bu.prototype,"pixelRatio",null),c([d({json:{write:!0}})],Bu.prototype,"size",null),c([d()],Bu.prototype,"spatialReference",void 0),c([d({type:dr,json:{write:!0}})],Bu.prototype,"viewpoint",null),Bu=JR=c([k("esri.views.2d.ViewState")],Bu);const S9=Bu;var ZR,YR;let _c=ZR=class extends de{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new ZR({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([d()],_c.prototype,"left",void 0),c([d()],_c.prototype,"top",void 0),c([d()],_c.prototype,"right",void 0),c([d()],_c.prototype,"bottom",void 0),_c=ZR=c([k("esri.views.2d.PaddedViewState.Padding")],_c);let yy=YR=class extends S9{constructor(...t){super(...t),this.paddedViewState=new S9,this._updateContent=(()=>{const e=yi();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;sr(e,r.left+r.right,r.top+r.bottom),E1(e,i,e),x1(n.size,e);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(Y(()=>[this.size,this.padding],()=>this._updateContent(),Yf)),this.padding=new _c,this.size=[0,0]}set padding(t){this._set("padding",t||new _c)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,F3e(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=e.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new YR({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([d()],yy.prototype,"paddedViewState",void 0),c([d({type:_c})],yy.prototype,"padding",null),c([d()],yy.prototype,"viewpoint",null),yy=YR=c([k("esri.views.2d.PaddedViewState")],yy);const GPe=yy;let tn=class extends de{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Y(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Yf)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Me({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void q.getLogger(this).error(new j("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;BR(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void q.getLogger(this).error(new j("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void q.getLogger(this).error(new j("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;I3e(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;z3e(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;g9(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var s;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new j("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new j("mapview:invalid-viewpoint","geometry not defined"))}catch(o){r=new j("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(r)return void q.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new dr({targetGeometry:new Me,scale:0,rotation:0});ga(n,i),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var n,s;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const i=((n=this.constraints)==null?void 0:n.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;g9(r,r,i),this.viewpoint=r,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),u=this._get("zoom"),p=u!=null&&r!=null&&r.zoomToScale(u)||void 0;let h,m,y;const g=l==null?void 0:l.rotation,v=l==null?void 0:l.targetGeometry;(v==null?void 0:v.type)==="extent"?h=v:(v==null?void 0:v.type)==="point"&&(m=v,y=l==null?void 0:l.scale);const w=s??h;return{center:n??m??(w==null?void 0:w.center),rotation:a??g,scale:(o??p??y??(w&&Sg(w,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){var o;const s=e.targetGeometry;try{this._project(e,r)}catch(a){q.getLogger(this).warn(new po("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:a})),e.targetGeometry=n||new Me({x:0,y:0,spatialReference:r})}(o=this.constraints)==null||o.fit(e),this._set("state",new GPe({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:s}=this.state.paddedViewState,o=new Me({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){var l;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const u=i.viewpoint.clone();u.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=u}const r=i.clone(),[n,s]=i.center;let o=null;try{o=this._project(new Me({x:n,y:s,spatialReference:i.spatialReference}),e)}catch(u){b5()||q.getLogger(this).warn(new po("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:u}))}o||(o=new Me({x:0,y:0,spatialReference:e}));const a=BR(new dr({targetGeometry:new Me,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const p=[i.size[0]/2,i.size[1]/2],h=[p[0]+20,p[1]],m=i.toMap([0,0],h),{x:y,y:g}=this._project(new Me({x:m[0],y:m[1],spatialReference:i.spatialReference}),e);m[0]=y,m[1]=g,r.toScreen(m,m);const v=D3e(p,m,h),w=Math.hypot(m[0]-p[0],m[1]-p[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(a.rotation=0,a.targetGeometry=new Me({x:0,y:0,spatialReference:e})):(a.scale*=w,a.scale>G("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){var o;if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();r.size=[e,i],j3e(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new Me({x:r,y:n,spatialReference:s})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),n=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1?this.state.toScreen(n,n):this.state.toScreenClosest(n,n),qr(n[0],n[1])}_project(e,i){var s;const r=(e==null?void 0:e.targetGeometry)||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(s=r.spatialReference)!=null&&s.imageCoordinateSystem||ti(i,r.spatialReference))return e;const n=mp(r,i);if(!n)throw new j("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return HPe(e)?(e.targetGeometry=n,e):n}};function HPe(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}c([d({type:Me})],tn.prototype,"center",null),c([d()],tn.prototype,"constraints",void 0),c([d({type:ct})],tn.prototype,"extent",null),c([d({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],tn.prototype,"padding",null),c([d()],tn.prototype,"ready",void 0),c([d()],tn.prototype,"resizeAlign",void 0),c([d({readOnly:!0})],tn.prototype,"resolution",null),c([d({type:Number})],tn.prototype,"rotation",null),c([d({type:Number})],tn.prototype,"scale",null),c([d({readOnly:!0})],tn.prototype,"state",void 0),c([d({type:dr})],tn.prototype,"viewpoint",null),c([d()],tn.prototype,"zoom",null),tn=c([k("esri.views.2d.ViewStateManager")],tn);function m4(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let $9=class extends Yi{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){m4(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},qPe=class extends Yi{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,u=this._startScale*l,p=u/this._currentScale;a.setViewpointImmediate(p),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:p}=l;if(!p||!u)return void a.end();const h=l.snapScale(this._currentScale),m=(s.y>0?Math.max(h,l.snapToPreviousScale(this._startScale)):Math.min(h,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m);break}}}},II=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},WPe=class extends Yi{constructor(e,i,r){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new II({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&m4(r.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},JPe=class extends Yi{constructor(e,i,r){super(!0),this._view=e,this.pointerAction=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new II({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&m4(o.data,this.pointerAction)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function Eo(t){let e=t*t;return t<0&&(e*=-1),e}function ZPe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function YPe(t,e,i){const r=i,n=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=Eo(n.axes[0]),r.translation[1]=Eo(n.axes[1]),r.translation[2]=Eo(n.buttons[7])-Eo(n.buttons[6]),r.heading=Eo(n.axes[2]),r.tilt=Eo(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Eo(n.axes[0]),r.translation[1]=1.2*Eo(n.axes[1]),r.translation[2]=2*-Eo(n.axes[2]),r.heading=1.2*Eo(n.axes[5]),r.tilt=1.2*Eo(n.axes[3])),r.tilt*=o,O5(r.translation,r.translation,a),r}function KPe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let QPe=class extends Yi{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new $k,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Y(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=zg({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Le)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,ZPe(this._transformation)):(this._currentDevice=e.data.device,YPe(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(KPe(i))return;const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=eRe*n*e;kI(r,r,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*tRe*e,a=this._view.constraints.rotationEnabled?-i.heading*XPe*e:0,l=this._view.size,u=[l[0]/2,l[1]];rie(r,r,o,a,u,l);const p=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=p}};const XPe=.06,eRe=.7,tRe=6e-4;function _ie(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),{remove:()=>document.addEventListener("visibilitychange",e)}}let iRe=class extends Yi{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Ctrl"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=_ie(n=>n?null:this._stopMovement())}onUninstall(){var e;this._stopMovement(),(e=this._visibilityHandle)==null||e.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},rRe=class extends Yi{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=_ie(n=>n?null:this._handleStop())}onUninstall(){var e;(e=this._visibilityHandle)==null||e.remove(),this._handleStop()}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[e.data.key];if(this._pressed=n!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var Yy;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(Yy||(Yy={}));let nRe=class extends Yi{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=Yy.IN),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=Yy.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(n){case Yy.IN:o=s.zoomIn();break;case Yy.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const sRe=.6;let oRe=class extends Yi{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=e.data,o=1/sRe**(1/60*s),a=i.zoom(o,[r,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},aRe=class extends Yi{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new II({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function x9(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>uRe(i,t.axisThreshold))}:{buttons:[],axes:[]}}function lRe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function cRe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function uRe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let dRe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,x9(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new o4(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=zg({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],a=x9(s),l=r||cRe(a);o&&(o.timestamp===n.timestamp||!o.active&&l||lRe(o.state,a))||this._emitGamepadEvent(n,a,!l)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const n=i[r];this._validate(n)&&e(n)}}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const E9=G("edge"),pRe=G("chrome"),hRe=G("ff"),fRe=G("safari"),T9="esri-view-surface",dm={touchNone:`${T9}--touch-none`,touchPan:`${T9}--touch-pan`};let Sie=class $ie{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new dRe(e,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=wt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(zM[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&zM[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(zM[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?dm.touchNone:dm.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?dm.touchPan:dm.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(dm.touchNone),this._element.classList.remove(dm.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=Ete(this._element,e);return $ie.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const r=VOe(i);r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_handleMouseWheel(e,i){let r=i.deltaY;switch(i.deltaMode){case 0:E9&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}E9?r*=.7:pRe||fRe?r*=.6:hRe&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};Sie.test={disableSubpixelCoordinates:!1};const zM={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let mRe=class extends Yi{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};const _r={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function _T(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function yRe(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function gRe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:qr()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[S,$]=t,[T,I]=[$.x-S.x,$.y-S.y];return e.radius=Math.sqrt(T*T+I*I)/2,e.center.x=(S.x+$.x)/2,e.center.y=(S.y+$.y)/2,e}let i=0,r=0;for(let S=0;S<t.length;S++)i+=t[S].x,r+=t[S].y;i/=t.length,r/=t.length;const n=t.map(S=>S.x-i),s=t.map(S=>S.y-r);let o=0,a=0,l=0,u=0,p=0,h=0,m=0;for(let S=0;S<n.length;S++){const $=n[S],T=s[S],I=$*$,C=T*T;o+=I,a+=C,l+=$*T,u+=I*$,p+=C*T,h+=$*C,m+=T*I}const y=.5*(u+h),g=.5*(p+m),v=o*a-l*l,w=(y*a-g*l)/v,b=(o*g-l*y)/v,_=qr(w+i,b+r);return{radius:Math.sqrt(w*w+b*b+(o+a)/t.length),center:_}}function lf(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}let vRe=class extends Yi{constructor(e=_r.maximumDoubleClickDelay,i=_r.maximumDoubleClickDistance,r=_r.maximumDoubleTouchDelay,n=_r.maximumDoubleTouchDistance,s=y0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=qr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new II({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Xt(e.doubleTapTimeout)})}get hasPendingInputs(){return Ck(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=Xt(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,r){const{button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}=r;return{action:e,delta:i,button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",qr(0,0),r);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=qr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,i);this._doubleTapDrag.emit(o,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=qr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,i);this._doubleTapDrag.emit(o,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=lf(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),_T(n.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=lf(i),s=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}},bRe=class extends Yi{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:wRe(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=h$(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=s2(n,xie(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=h$(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=h$(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=s2(r,i)-e,r.lastAngle=s2(r,i)-e})}_emitEvent(e,i,r){const n=h$(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function xie(t){const e=[];return t.forEach(i=>{e.push(qr(i.event.x,i.event.y))}),gRe(e)}function h$(t){const e=xie(t);let i=0;return t.forEach(r=>{let n=s2(r,e),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const o=n-r.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function wRe(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function s2(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}var k9;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(k9||(k9={}));let _Re=class extends Yi{constructor(e=_r.maximumDoubleClickDelay,i=_r.maximumDoubleClickDistance,r=_r.maximumDoubleTouchDelay,n=_r.maximumDoubleTouchDistance,s=y0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=lf(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=lf(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),_T(s,e.data)>o?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))):_T(n,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=lf(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},SRe=class extends Yi{constructor(e=_r.maximumClickDelay,i=_r.movementUntilMouseDrag,r=_r.movementUntilPenDrag,n=_r.movementUntilTouchDrag,s=_r.holdDelay,o=y0){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=n,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Xt(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,r){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,i),void 0,n.modifiers):yRe(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,i)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}},$Re=class extends Yi{constructor(e=_r.maximumDoubleClickDelay,i=_r.maximumDoubleClickDistance,r=_r.maximumDoubleTouchDelay,n=_r.maximumDoubleTouchDistance,s=y0){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Xt(e.doubleClickTimer))}get hasPendingInputs(){return Ck(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=Xt(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:r,button:n}=e.native;return r==="mouse"?`${i}:${n}`:`${r}`}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=this._getPointerId(i);if(!this._pointerState.has(n))return void this._startClick(e);const s=this._pointerState.get(n),{data:o,modifiers:a}=s.event,l=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;_T(o,i)>l?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=lf(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=lf(i),s=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s),a=1;this._pointerState.set(n,{event:e,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}};const f$={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let gh=class extends de{initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([Gn(()=>!e(),()=>this._disconnect()),Gn(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=wt(this._inputManager)}_connect(){const e=this.view.surface,i=new Sie(e,this.view.input),r=[new _Re,new SRe,new $Re,new bRe(this.view.navigation),new vRe],n=new Bs({eventSource:i,recognizers:r});n.installHandlers("prevent-context-menu",[new mRe],jd.INTERNAL),n.installHandlers("navigation",[new aRe(this.view),new QPe(this.view),new oRe(this.view),new $9(this.view),new $9(this.view,[f$.counter]),new WPe(this.view,"primary"),new iRe(this.view,f$.pan),new nRe(this.view,f$.zoom),new rRe(this.view,f$.rotate),new JPe(this.view,"secondary"),new qPe(this.view,"touch")],jd.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,Y(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},Le)}get test(){return{inputManager:this._inputManager}}};c([d()],gh.prototype,"view",void 0),c([d()],gh.prototype,"latestPointerType",null),c([d()],gh.prototype,"latestPointerLocation",null),c([d()],gh.prototype,"multiTouchActive",null),gh=c([k("esri.views.2d.input.MapViewInputManager")],gh);const xRe=gh;var I9,C9,M9,KR={exports:{}};KR.exports,I9=KR,C9=function(){function t(n,s,o,a,l){e(n,s,o||0,a||n.length-1,l||r)}function e(n,s,o,a,l){for(;a>o;){if(a-o>600){var u=a-o+1,p=s-o+1,h=Math.log(u),m=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*m*(u-m)/u)*(p-u/2<0?-1:1);e(n,s,Math.max(o,Math.floor(s-p*m/u+y)),Math.min(a,Math.floor(s+(u-p)*m/u+y)),l)}var g=n[s],v=o,w=a;for(i(n,o,s),l(n[a],g)>0&&i(n,o,a);v<w;){for(i(n,v,w),v++,w--;l(n[v],g)<0;)v++;for(;l(n[w],g)>0;)w--}l(n[o],g)===0?i(n,o,w):i(n,++w,a),w<=s&&(o=w+1),s<=w&&(a=w-1)}}function i(n,s,o){var a=n[s];n[s]=n[o],n[o]=a}function r(n,s){return n<s?-1:n>s?1:0}return t},(M9=C9())!==void 0&&(I9.exports=M9);const ERe=ITe(KR.exports);function ST(t,e){if(!(this instanceof ST))return new ST(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function TRe(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function pm(t,e){$b(t,0,t.children.length,e,t)}function $b(t,e,i,r,n){n||(n=gy(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],xb(n,t.leaf?r(s):s);return n}function xb(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function L9(t,e){return t.minX-e.minX}function O9(t,e){return t.minY-e.minY}function VM(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m$(t){return t.maxX-t.minX+(t.maxY-t.minY)}function kRe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function IRe(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function UM(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y$(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function gy(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function A9(t,e,i,r,n){for(var s,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,ERe(t,s,e,i,n),o.push(e,s,s,i))}ST.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!y$(t,e))return i;for(var n,s,o,a,l=[];e;){for(n=0,s=e.children.length;n<s;n++)o=e.children[n],y$(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):UM(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!y$(t,e))return!1;for(var r,n,s,o,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],y$(t,o=e.leaf?i(s):s)){if(e.leaf||UM(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=gy([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,s,o=this.data,a=this.toBBox(t),l=[],u=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=u.pop(),s=!0),o.leaf&&(n=TRe(t,o.children,e))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!UM(o,a)?r?(i++,o=r.children[i],s=!1):o=null:(l.push(o),u.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:L9,compareMinY:O9,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,o=this._maxEntries;if(s<=o)return pm(n=gy(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(n=gy([])).leaf=!1,n.height=r;var a,l,u,p,h=Math.ceil(s/o),m=h*Math.ceil(Math.sqrt(o));for(A9(t,e,i,m,this.compareMinX),a=e;a<=i;a+=m)for(A9(t,a,u=Math.min(a+m-1,i),h,this.compareMinY),l=a;l<=u;l+=h)p=Math.min(l+h-1,u),n.children.push(this._build(t,l,p,r-1));return pm(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,o,a,l,u,p,h;r.push(e),!e.leaf&&r.length-1!==i;){for(p=h=1/0,n=0,s=e.children.length;n<s;n++)l=VM(o=e.children[n]),(u=kRe(t,o)-l)<h?(h=u,p=l<p?l:p,a=o):u===h&&l<p&&(p=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),xb(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),o=gy(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,pm(i,this.toBBox),pm(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=gy([t,e]),this.data.height=t.height+1,this.data.leaf=!1,pm(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,o,a,l,u,p;for(l=u=1/0,r=e;r<=i-e;r++)o=IRe(n=$b(t,0,r,this.toBBox),s=$b(t,r,i,this.toBBox)),a=VM(n)+VM(s),o<l?(l=o,p=r,u=a<u?a:u):o===l&&a<u&&(u=a,p=r);return p},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:L9,n=t.leaf?this.compareMinY:O9;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,o=this.toBBox,a=$b(t,0,e,o),l=$b(t,i-e,i,o),u=m$(a)+m$(l);for(n=e;n<i-e;n++)s=t.children[n],xb(a,t.leaf?o(s):s),u+=m$(a);for(n=i-e-1;n>=e;n--)s=t.children[n],xb(l,t.leaf?o(s):s),u+=m$(l);return u},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)xb(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():pm(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};let P9=class Eie{constructor(e,i){this.key=new Of(0,0,0,0),this.bounds=Bn(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return ct.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=ln.acquire();for(let r=0;r<e.length;r++)i[r]=new Eie(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return QX.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Ep={added:[],removed:[]},BM=new Set,CRe=new Of(0,0,0,0);let MRe=class extends Il{constructor(e){super(),this._tiles=new Map,this._index=ST(9,G("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new P9(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++){const p=CRe.set(s,o,n.normalizeCol(u),n.getWorldForColumn(u)).id;if(BM.add(p),!this.has(p)){const h=new P9(this.tileScheme,p);this._tiles.set(p,h),this._index.insert(h),this.tiles.push(h),Ep.added.push(h)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];BM.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Ep.removed.push(a))}(Ep.added.length||Ep.removed.length)&&this.emit("update",Ep),T1.pool.release(i),BM.clear(),Ep.added.length=0,Ep.removed.length=0}},vh=class extends de{constructor(){super(...arguments),this.color=new le([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};c([d({type:le})],vh.prototype,"color",void 0),c([d({type:le})],vh.prototype,"haloColor",void 0),c([d()],vh.prototype,"haloOpacity",void 0),c([d()],vh.prototype,"fillOpacity",void 0),vh=c([k("esri.views.2d.support.HighlightOptions")],vh);const Tie=vh;async function LRe(t,e,i){const r=kte(e)?Tte(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const s=new Set;let o=!1,a=null,l=null;i!=null&&i.include?N9(i.include,R9(t,m=>{n.add(m),GM(m,y=>s.add(y))},(m,y)=>{s.add(m),n.add(y)},m=>{a||(a=new Set),a.add(m)},m=>n.add(m),()=>o=!0)):(o=!0,n=new Set(t.allLayerViews),n.forEach(m=>{GM(m,y=>s.add(y))})),i!=null&&i.exclude&&N9(i.exclude,R9(t,m=>{n.delete(m),GM(m,y=>s.delete(y))},m=>s.delete(m),m=>{l||(l=new Set),l.add(m)}));const u=t.allLayerViews.filter(m=>!m.suspended&&n.has(m)).reverse(),p=t.toMap(r);let h=[...o?t.graphicsView.hitTest(p).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:p})):[],...await Promise.all(u.map(m=>m.hitTest(p,r)).toArray())].filter(An).flat().filter(An);return h=h.filter(m=>{var y;return m.type!=="graphic"||((y=m.layer)==null?void 0:y.type)!=="subtype-group"||s.has(m.graphic.layer)}),a&&(h=h.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(QR(m.graphic))))),l&&(h=h.filter(m=>!("graphic"in m)||!m.graphic||!(l!=null&&l.has(QR(m.graphic))))),{screenPoint:r,results:h}}function R9(t,e,i,r,n,s){return o=>{if(o instanceof Vc){if(o.layer===t)s==null||s();else{const a=t.allLayerViews.find(l=>l.layer===o.layer);a&&(n==null||n(a))}r(QR(o))}else if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(l=>l.layer===o.parent);a&&i(o,a)}else{const a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function N9(t,e){if(t)if(pE(t))for(const i of t)if(pE(i))for(const r of i)e(r);else e(i);else e(t)}function QR(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function GM({layer:t},e){t.type==="subtype-group"&&t.sublayers.forEach(i=>{e(i)})}function ORe(t,e,i){const{ctx:r,canvas:n}=kie(t,i),s=r.getImageData(0,0,t.width,t.height),o=RRe(n,e);return Iie(n),{dataUrl:o,data:s}}function ARe(t,e){const{ctx:i,canvas:r}=kie(t,e),n=i.getImageData(0,0,t.width,t.height);return Iie(r),n}function kie(t,e){const i=PRe();e.premultipliedAlpha&&zRe(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&jRe(r),{ctx:r,canvas:i}}function Iie(t){t.width=0,t.height=0}function PRe(){return HM==null&&(HM=document.createElement("canvas")),HM}let HM=null;function RRe(t,e){const i=VRe[e.format],r=e.quality/100;return t.toDataURL(i,r)}function NRe(t,e){const i=FRe(t),r=BRe[i];return{format:i,quality:Es(e??r,0,100)}}function DRe(t,e){return e/Math.max(t[0],t[1])}function gqe(t,e,i,r=0,n=0,s=t.width-r,o=t.height-n,a=!1){const{data:l}=t,{width:u,height:p,data:h}=e,m=s/u,y=o/p,g=Math.ceil(m/2),v=Math.ceil(y/2),w=t.width;for(let b=0;b<p;b++)for(let _=0;_<u;_++){const S=4*(_+(a?p-b-1:b)*u);let $=0,T=0,I=0,C=0,M=0,R=0;const O=(b+.5)*y;for(let F=Math.floor(b*y);F<(b+1)*y;F++){const A=Math.abs(O-(F+.5))/v,P=(_+.5)*m,V=A*A;for(let te=Math.floor(_*m);te<(_+1)*m;te++){const re=Math.abs(P-(te+.5))/g,Q=Math.sqrt(V+re*re);if(Q>=1)continue;let H=2*Q*Q*Q-3*Q*Q+1;const ne=4*(r+te+(n+F)*w);R+=H*l[ne+3],T+=H,!i&&l[ne+3]<255&&(H=H*l[ne+3]/255),I+=H*l[ne],C+=H*l[ne+1],M+=H*l[ne+2],$+=H}}h[S]=I/$,h[S+1]=C/$,h[S+2]=M/$,h[S+3]=R/T}return e}function FRe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return URe}}function jRe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function zRe(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const s=255/n;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const VRe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},D9=98,URe="png",BRe={png:100,jpg:D9,jpeg:D9},Cie={flipY:!0,premultipliedAlpha:!0};async function GRe(t,e){const i=await Mie(t,e),{format:r,quality:n}=NRe(e==null?void 0:e.format,e==null?void 0:e.quality);return ORe(i,{format:r,quality:n,rotation:0,disableDecorations:!1},Cie)}async function HRe(t,e){const i=await Mie(t,e);return ARe(i,Cie)}function Mie(t,e){const i=JRe(e||{},WRe(t.stage,t.size),t.size,t.padding),r=qRe(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e==null?void 0:e.rotation)}function qRe(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(r=>{const n=e.find(s=>s.layer.id===r.id);n!=null&&n.container&&i.push(n.container)}),i}function WRe(t,e){return Math.min(4,DRe(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function JRe(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;t.width!=null&&t.height!=null?n=[t.width,t.height]:t.width==null&&t.height!=null?n=[t.height,t.height]:t.width!=null&&t.height==null?n=[t.width,t.width]:t.width==null&&t.height==null&&(n=null);const s=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,l,u=t.area||{x:0,y:0,width:s,height:o};if(n){const p=s/o,h=n[0]/n[1];if(h>p){const m=u.width/h;u={x:u.x,y:Math.round(u.y+(u.height-m)/2),width:u.width,height:Math.round(m)}}else{const m=u.height*h;u={x:Math.round(u.x+(u.width-m)/2),y:u.y,width:Math.round(m),height:u.height}}}else n=[u.width,u.height];return n[0]>u.width?(a=Math.min(n[0]/u.width,e),l=n[0]/u.width/a):(a=1,l=n[0]/u.width),{cropArea:{x:Math.round((u.x+r.left)*a),y:Math.round((u.y+r.top)*a),width:Math.round(u.width*a),height:Math.round(u.height*a)},outputScale:l,resolutionScale:a}}const F9=160;let Eb=class extends de{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=F9&&this.clear()},F9))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};c([d()],Eb.prototype,"_timer",void 0),c([d()],Eb.prototype,"stationary",null),Eb=c([k("esri.views.2d.support.StationaryManager")],Eb);const ZRe=t=>t.includes("Brush");let Lie=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),ZRe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};var Ai;function XR(t,e,i={}){const r=e===Ai.WEBGL1?"webgl":"webgl2";return t.getContext(r,i)||null}function wqe(t,e,i={}){const r=Oie(t);for(const n of r){const s=XR(e,n,i);if(s)return s}return null}function Oie(t){if(t==="3d")return[Ai.WEBGL2];const e=G("esri-force-webgl");return e===Ai.WEBGL1||e===Ai.WEBGL2?[e]:G("mac")&&G("chrome")?[Ai.WEBGL1,Ai.WEBGL2]:[Ai.WEBGL2,Ai.WEBGL1]}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(Ai||(Ai={}));let qM,WM;function YRe(t){const e=Oie(t);for(;e.length>1;){const i=j9(e.shift());if(i.available)return i}return j9(e.shift())}function j9(t){switch(t){case Ai.WEBGL1:return KRe();case Ai.WEBGL2:return QRe()}}function KRe(){return qM||(qM=tNe()),qM}function QRe(){return WM||(WM=iNe()),WM}let Aie=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},XRe=class extends Aie{constructor(){super(...arguments),this.type=Ai.WEBGL1}},eNe=class extends Aie{constructor(){super(...arguments),this.type=Ai.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function Pie(t,e){if(t===Ai.WEBGL1&&typeof WebGLRenderingContext>"u"||t===Ai.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let r=XR(i,t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=XR(i,t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;if(t===Ai.WEBGL1){const s=r.getParameter(r.VERSION),o=s==null?void 0:s.match(/^WebGL\s+([\d.]*)/);if(o){const a=parseFloat(o[1]);e.available=a>=.94}}else e.available=!0;e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return n&&(e.supportsHighPrecisionFragment=n.precision>0),r}function tNe(){const t=new XRe,e=Pie(Ai.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function iNe(){const t=new eNe,e=Pie(Ai.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function rNe(t){const e=YRe(t);if(!e.available)return new j("webgl:required",t==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(t==="3d"&&e.majorPerformanceCaveat)return new j("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new j("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new j("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Ai.WEBGL1){if(!e.supportsElementIndexUint)return new j("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new j("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new j("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function nNe(t){return t&&"nodeType"in t}function sNe(t){return t&&typeof t.render=="function"}const z9={component:"esri-component"};let bh=class extends de{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){var e,i;return this._get("id")??((e=this.widget)==null?void 0:e.id)??((i=this.node)==null?void 0:i.id)}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(z9.component),i&&i.classList.remove(z9.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||nNe(e)?(this._set("widget",null),bI(e)):(sNe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};c([d()],bh.prototype,"id",null),c([d()],bh.prototype,"node",null),c([qe("node")],bh.prototype,"castNode",null),c([d({readOnly:!0})],bh.prototype,"widget",void 0),bh=c([k("esri.views.ui.Component")],bh);const o2=bh,Rie="calcite-mode-";function oNe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function Nie(){return oNe().startsWith("dark")}function aNe(){return`${Rie}${Nie()?"dark":"light"}`}function lNe(t){cNe(t),t.classList.add(aNe())}function cNe(t){Array.from(t.classList).forEach(e=>{e.startsWith(Rie)&&t.classList.remove(e)})}const uNe={left:0,top:0,bottom:0,right:0},Die={bottom:30,top:15,right:15,left:15},Dl="esri-ui",gn={ui:Dl,corner:`${Dl}-corner`,innerContainer:`${Dl}-inner-container`,manualContainer:`${Dl}-manual-container`,cornerContainer:`${Dl}-corner-container`,topLeft:`${Dl}-top-left`,topRight:`${Dl}-top-right`,bottomLeft:`${Dl}-bottom-left`,bottomRight:`${Dl}-bottom-right`};function dNe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function g$(t){return t===0?"0":`${t}px`}function JM(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function ZM(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let Ha=class extends Il.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=Fn(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&ZM(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&ZM(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Y(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,Le),Y(()=>this.padding,this._applyUIPadding,Le),Y(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},Le),Dk(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(gn.ui),lNe(e),this._attachContainers(e)),i&&(i.classList.remove(gn.ui),ZM(i,{top:"",bottom:"",left:"",right:""}),Xee(i)),this._set("container",e))}get height(){var s;const e=((s=this.view)==null?void 0:s.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Die,...e}}get width(){var s;const e=((s=this.view)==null?void 0:s.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,s;if(Array.isArray(e))return void e.forEach(a=>this.add(a,i));const o=JM(e);o&&({index:r,position:i,component:e,key:n}=o),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r,n,s)}remove(e,i){var n;if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const r=this._find(e);if(r){if(this._componentMap.has(r)&&((n=this._componentMap.get(r))==null?void 0:n.key)!==i)return;const s=this._components.indexOf(r),o=r.node.parentNode;return o==null||o.removeChild(r.node),this._componentMap.delete(r),this._components.splice(s,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||i.removeInternal});for(const s of n)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let r;const n=JM(e)||JM(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(e,i):this._components.filter(r=>{var n;return i.includeInternal||!((n=this._componentMap.get(r))!=null&&n.internal)}).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,s){e instanceof o2||(e=new o2({node:e})),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,internal:s})}_find(e){return e?e instanceof o2?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??uNe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(gn.innerContainer,gn.cornerContainer);const i=document.createElement("div");i.classList.add(gn.innerContainer,gn.manualContainer);const r=document.createElement("div");r.classList.add(gn.topLeft,gn.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(gn.topRight,gn.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(gn.bottomLeft,gn.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(gn.bottomRight,gn.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=w1();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":a?n:r,"top-trailing":a?r:n,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:n}=e,s=this._positionNameToContainerLookup[i],o=n!=null&&n>-1;if(dNe(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(n===0)return void(s.firstChild?GU(r.node,s.firstChild):s.appendChild(r.node));n>=a.length?s.appendChild(r.node):GU(r.node,a[n])}_toPixelPosition(e){return{top:g$(e.top),left:g$(e.left),right:g$(e.right),bottom:g$(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(An).filter(n=>{var s;return i.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}};c([d()],Ha.prototype,"_locale",void 0),c([d()],Ha.prototype,"container",null),c([d()],Ha.prototype,"height",null),c([d({value:Die})],Ha.prototype,"padding",null),c([qe("padding")],Ha.prototype,"castPadding",null),c([d()],Ha.prototype,"view",void 0),c([d()],Ha.prototype,"width",null),Ha=c([k("esri.views.ui.UI")],Ha);const pNe=Ha,hNe={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},fNe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}},mNe=t=>({...fNe,...t}),yNe=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},gNe=(t,e)=>t.find(e),V9=(t,e,i=!1)=>{let r=t;return e.forEach((n,s)=>{const o=r!=null&&r.children?gNe(r.children,a=>a.domNode===n):void 0;i&&!o&&s!==e.length-1||(r=o)}),r},vNe=t=>{let e;const i={...hNe,...t},r=mNe(i),n=r.performanceLogger;let s,o=!0,a=!1;const l=[],u=[],p=(m,y,g)=>{var b;let v;r.eventHandlerInterceptor=(_,S,$,T)=>function(I){let C;n("domEvent",I);const M=yNe(I.currentTarget,v.domNode),R=M.some(F=>{var A;return customElements.get((A=F==null?void 0:F.tagName)==null?void 0:A.toLowerCase())});if(I.eventPhase===Event.CAPTURING_PHASE||!R)M.reverse(),C=V9(v.getLastRender(),M);else{const F=I.composedPath(),A=F.slice(F.indexOf(I.currentTarget),F.indexOf(v.domNode)).reverse();C=V9(v.getLastRender(),A,!0)}let O;return C&&(O=i.handleInterceptedEvent(e,C,this,I)),n("domEventProcessed",I),O},(b=i.postProcessProjectionOptions)==null||b.call(i,r);const w=g();v=m(y,w,r),r.eventHandlerInterceptor=void 0,l.push(v),u.push(g),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,w)};let h=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let m=0;m<l.length;m++){const y=u[m]();n("rendered",void 0),l[m].update(y),n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(h=i.modifyDoRenderImplementation(h,l,u)),e={renderNow:h,scheduleRender:()=>{s||a||(s=requestAnimationFrame(h))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(m,y)=>{p(Sd.append,m,y)},insertBefore:(m,y)=>{p(Sd.insertBefore,m,y)},merge:(m,y)=>{p(Sd.merge,m,y)},replace:(m,y)=>{p(Sd.replace,m,y)},detach:m=>{for(let y=0;y<u.length;y++)if(u[y]===m)return u.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},e},vy={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let by,Fie,CI,jie=!1,$T=!1,y4=!1,us=!1,U9=null,eN=!1;const bNe=t=>{const e=new URL(t,fr.$resourcesUrl$);return e.origin!==k_.location.origin?e.href:e.pathname},wNe=t=>fr.$resourcesUrl$=t,Af=(t,e="")=>()=>{},B9="http://www.w3.org/1999/xlink",G9={},_Ne="http://www.w3.org/2000/svg",SNe="http://www.w3.org/1999/xhtml",$Ne=t=>t!=null,g4=t=>(t=typeof t,t==="object"||t==="function");function xNe(t){var e,i,r;return(r=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&r!==void 0?r:void 0}const zie=(t,e,...i)=>{let r=null,n=null,s=null,o=!1,a=!1;const l=[],u=h=>{for(let m=0;m<h.length;m++)r=h[m],Array.isArray(r)?u(r):r!=null&&typeof r!="boolean"&&((o=typeof t!="function"&&!g4(r))&&(r=String(r)),o&&a?l[l.length-1].$text$+=r:l.push(o?xT(null,r):r),a=o)};if(u(i),e){e.key&&(n=e.key),e.name&&(s=e.name);{const h=e.className||e.class;h&&(e.class=typeof h!="object"?h:Object.keys(h).filter(m=>h[m]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,kNe);const p=xT(t,null);return p.$attrs$=e,l.length>0&&(p.$children$=l),p.$key$=n,p.$name$=s,p},xT=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},ENe={},TNe=t=>t&&t.$tag$===ENe,kNe={forEach:(t,e)=>t.map(H9).forEach(e),map:(t,e)=>t.map(H9).map(e).map(INe)},H9=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),INe=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),zie(t.vtag,i,...t.vchildren||[])}const e=xT(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},CNe=t=>iDe.map(e=>e(t)).find(e=>!!e),MNe=(t,e)=>t!=null&&!g4(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,LNe=t=>t,Tqe=(t,e,i)=>{const r=LNe(t);return{emit:n=>ONe(r,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:n})}},ONe=(t,e,i)=>{const r=fr.ce(e,i);return t.dispatchEvent(r),r},q9=new WeakMap,ANe=(t,e,i)=>{let r=TT.get(t);sDe&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,TT.set(t,r)},PNe=(t,e,i,r)=>{var n;let s=Vie(e,i);const o=TT.get(s);if(t=t.nodeType===11?t:ua,o)if(typeof o=="string"){t=t.head||t;let a=q9.get(t),l;if(a||q9.set(t,a=new Set),!a.has(s)){{l=ua.createElement("style"),l.innerHTML=o;const u=(n=fr.$nonce$)!==null&&n!==void 0?n:xNe(ua);u!=null&&l.setAttribute("nonce",u),t.insertBefore(l,t.querySelector("link"))}a&&a.add(s)}}else t.adoptedStyleSheets.includes(o)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,o]);return s},RNe=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,r=e.$flags$,n=Af("attachStyles",e.$tagName$),s=PNe(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);r&10&&(i["s-sc"]=s,i.classList.add(s+"-h"),r&2&&i.classList.add(s+"-s")),n()},Vie=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),W9=(t,e,i,r,n,s)=>{if(i!==r){let o=K9(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,u=J9(i),p=J9(r);l.remove(...u.filter(h=>h&&!p.includes(h))),l.add(...p.filter(h=>h&&!u.includes(h)))}else if(e==="style"){for(const l in i)(!r||r[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in r)(!i||r[l]!==i[l])&&(l.includes("-")?t.style.setProperty(l,r[l]):t.style[l]=r[l])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):K9(k_,a)?e=a.slice(2):e=a[2]+e.slice(3),i&&fr.rel(t,e,i,!1),r&&fr.ael(t,e,r,!1);else{const l=g4(r);if((o||l&&r!==null)&&!n)try{if(t.tagName.includes("-"))t[e]=r;else{const p=r??"";e==="list"?o=!1:(i==null||t[e]!=p)&&(t[e]=p)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,u=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(u?t.removeAttributeNS(B9,e):t.removeAttribute(e)):(!o||s&4||n)&&!l&&(r=r===!0?"":r,u?t.setAttributeNS(B9,e,r):t.setAttribute(e,r))}}},NNe=/\s/,J9=t=>t?t.split(NNe):[],Uie=(t,e,i,r)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||G9,o=e.$attrs$||G9;for(r in s)r in o||W9(n,r,s[r],void 0,i,e.$flags$);for(r in o)W9(n,r,s[r],o[r],i,e.$flags$)},ET=(t,e,i,r)=>{const n=e.$children$[i];let s=0,o,a,l;if(jie||(y4=!0,n.$tag$==="slot"&&(by&&r.classList.add(by+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)o=n.$elm$=ua.createTextNode(n.$text$);else if(n.$flags$&1)o=n.$elm$=ua.createTextNode("");else{if(us||(us=n.$tag$==="svg"),o=n.$elm$=ua.createElementNS(us?_Ne:SNe,n.$flags$&2?"slot-fb":n.$tag$),us&&n.$tag$==="foreignObject"&&(us=!1),Uie(null,n,us),$Ne(by)&&o["s-si"]!==by&&o.classList.add(o["s-si"]=by),n.$children$)for(s=0;s<n.$children$.length;++s)a=ET(t,n,s,o),a&&o.appendChild(a);n.$tag$==="svg"?us=!1:o.tagName==="foreignObject"&&(us=!0)}return o["s-hn"]=CI,n.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=Fie,o["s-sn"]=n.$name$||"",l=t&&t.$children$&&t.$children$[i],l&&l.$tag$===n.$tag$&&t.$elm$&&k1(t.$elm$,!1)),o},k1=(t,e)=>{fr.$flags$|=1;const i=t.childNodes;for(let r=i.length-1;r>=0;r--){const n=i[r];n["s-hn"]!==CI&&n["s-ol"]&&(Hie(n).insertBefore(n,v4(n)),n["s-ol"].remove(),n["s-ol"]=void 0,y4=!0),e&&k1(n,e)}fr.$flags$&=-2},Bie=(t,e,i,r,n,s)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(o.shadowRoot&&o.tagName===CI&&(o=o.shadowRoot);n<=s;++n)r[n]&&(a=ET(null,i,n,t),a&&(r[n].$elm$=a,o.insertBefore(a,v4(e))))},Gie=(t,e,i,r,n)=>{for(;e<=i;++e)(r=t[e])&&(n=r.$elm$,Jie(r),$T=!0,n["s-ol"]?n["s-ol"].remove():k1(n,!0),n.remove())},DNe=(t,e,i,r)=>{let n=0,s=0,o=0,a=0,l=e.length-1,u=e[0],p=e[l],h=r.length-1,m=r[0],y=r[h],g,v;for(;n<=l&&s<=h;)if(u==null)u=e[++n];else if(p==null)p=e[--l];else if(m==null)m=r[++s];else if(y==null)y=r[--h];else if(v$(u,m))wy(u,m),u=e[++n],m=r[++s];else if(v$(p,y))wy(p,y),p=e[--l],y=r[--h];else if(v$(u,y))(u.$tag$==="slot"||y.$tag$==="slot")&&k1(u.$elm$.parentNode,!1),wy(u,y),t.insertBefore(u.$elm$,p.$elm$.nextSibling),u=e[++n],y=r[--h];else if(v$(p,m))(u.$tag$==="slot"||y.$tag$==="slot")&&k1(p.$elm$.parentNode,!1),wy(p,m),t.insertBefore(p.$elm$,u.$elm$),p=e[--l],m=r[++s];else{for(o=-1,a=n;a<=l;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===m.$key$){o=a;break}o>=0?(v=e[o],v.$tag$!==m.$tag$?g=ET(e&&e[s],i,o,t):(wy(v,m),e[o]=void 0,g=v.$elm$),m=r[++s]):(g=ET(e&&e[s],i,s,t),m=r[++s]),g&&Hie(u.$elm$).insertBefore(g,v4(u.$elm$))}n>l?Bie(t,r[h+1]==null?null:r[h+1].$elm$,i,r,s,h):s>h&&Gie(e,n,l)},v$=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,v4=t=>t&&t["s-ol"]||t,Hie=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,wy=(t,e)=>{const i=e.$elm$=t.$elm$,r=t.$children$,n=e.$children$,s=e.$tag$,o=e.$text$;let a;o===null?(us=s==="svg"?!0:s==="foreignObject"?!1:us,s==="slot"||Uie(t,e,us),r!==null&&n!==null?DNe(i,r,e,n):n!==null?(t.$text$!==null&&(i.textContent=""),Bie(i,null,e,n,0,n.length-1)):r!==null&&Gie(r,0,r.length-1),us&&s==="svg"&&(us=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:t.$text$!==o&&(i.data=o)},qie=t=>{const e=t.childNodes;let i,r,n,s,o,a;for(r=0,n=e.length;r<n;r++)if(i=e[r],i.nodeType===1){if(i["s-sr"]){for(o=i["s-sn"],i.hidden=!1,s=0;s<n;s++)if(a=e[s].nodeType,e[s]["s-hn"]!==i["s-hn"]||o!==""){if(a===1&&o===e[s].getAttribute("slot")){i.hidden=!0;break}}else if(a===1||a===3&&e[s].textContent.trim()!==""){i.hidden=!0;break}}qie(i)}},ta=[],Wie=t=>{let e,i,r,n,s,o,a=0;const l=t.childNodes,u=l.length;for(;a<u;a++){if(e=l[a],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=e["s-sn"],o=r.length-1;o>=0;o--)i=r[o],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(Z9(i,n)?(s=ta.find(p=>p.$nodeToRelocate$===i),$T=!0,i["s-sn"]=i["s-sn"]||n,s?s.$slotRefNode$=e:ta.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&ta.map(p=>{Z9(p.$nodeToRelocate$,i["s-sn"])&&(s=ta.find(h=>h.$nodeToRelocate$===i),s&&!p.$slotRefNode$&&(p.$slotRefNode$=s.$slotRefNode$))})):ta.some(p=>p.$nodeToRelocate$===i)||ta.push({$nodeToRelocate$:i}));e.nodeType===1&&Wie(e)}},Z9=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",Jie=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(Jie)},FNe=(t,e)=>{const i=t.$hostElement$,r=t.$cmpMeta$,n=t.$vnode$||xT(null,null),s=TNe(e)?e:zie(null,null,e);CI=i.tagName,r.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},r.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=i[o])),s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=n.$elm$=i.shadowRoot||i,by=i["s-sc"],Fie=i["s-cr"],jie=(r.$flags$&1)!==0,$T=!1,wy(n,s);{if(fr.$flags$|=1,y4){Wie(s.$elm$);let o,a,l,u,p,h,m=0;for(;m<ta.length;m++)o=ta[m],a=o.$nodeToRelocate$,a["s-ol"]||(l=ua.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(m=0;m<ta.length;m++)if(o=ta[m],a=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,p=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(h=l["s-nr"],h&&h["s-sn"]===a["s-sn"]&&u===h.parentNode&&(h=h.nextSibling,!h||!h["s-nr"])){p=h;break}(!p&&u!==a.parentNode||a.nextSibling!==p)&&a!==p&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),u.insertBefore(a,p))}else a.nodeType===1&&(a.hidden=!0)}$T&&qie(s.$elm$),fr.$flags$&=-2,ta.length=0}},jNe=(t,e)=>{},b4=(t,e)=>(t.$flags$|=16,jNe(t,t.$ancestorComponent$),aDe(()=>zNe(t,e))),zNe=(t,e)=>{const i=t.$hostElement$,r=Af("scheduleUpdate",t.$cmpMeta$.$tagName$),n=i;let s;return e?s=$g(n,"componentWillLoad"):s=$g(n,"componentWillUpdate"),s=Y9(s,()=>$g(n,"componentWillRender")),r(),Y9(s,()=>VNe(t,n,e))},VNe=async(t,e,i)=>{const r=t.$hostElement$,n=Af("update",t.$cmpMeta$.$tagName$);r["s-rc"],i&&RNe(t);const s=Af("render",t.$cmpMeta$.$tagName$);UNe(t,e,r),s(),n(),BNe(t)},UNe=(t,e,i)=>{try{U9=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(vy.hasRenderFn||vy.reflect)&&(vy.vdomRender||vy.reflect)&&(vy.hydrateServerSide||FNe(t,e))}catch(a){T_(a,t.$hostElement$)}return U9=null,null},BNe=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,r=Af("postUpdate",e),n=i;t.$ancestorComponent$,$g(n,"componentDidRender"),t.$flags$&64?($g(n,"componentDidUpdate"),r()):(t.$flags$|=64,$g(n,"componentDidLoad"),r())},kqe=t=>{{const e=E_(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&b4(e,!1),i}},$g=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(r){T_(r)}},Y9=(t,e)=>t&&t.then?t.then(e):e(),GNe=(t,e)=>E_(t).$instanceValues$.get(e),HNe=(t,e,i,r)=>{const n=E_(t),s=t,o=n.$instanceValues$.get(e),a=n.$flags$,l=s;i=MNe(i,r.$members$[e][0]);const u=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!u){n.$instanceValues$.set(e,i);{if(r.$watchers$&&a&128){const h=r.$watchers$[e];h&&h.map(m=>{try{l[m](i,o,e)}catch(y){T_(y,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,e)===!1)return;b4(n,!1)}}}},qNe=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),n=t.prototype;r.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(n,s,{get(){return GNe(this,s)},set(a){HNe(this,s,a,e)},configurable:!0,enumerable:!0})});{const s=new Map;n.attributeChangedCallback=function(o,a,l){fr.jmp(()=>{const u=s.get(o);if(this.hasOwnProperty(u))l=this[u],delete this[u];else if(n.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==l)return;this[u]=l===null&&typeof this[u]=="boolean"?!1:l})},t.observedAttributes=r.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return s.set(l,o),a[0]&512&&e.$attrsToReflect$.push([o,l]),l})}}return t},WNe=async(t,e,i,r,n)=>{if(!(e.$flags$&32)&&(n=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),n.style)){let o=n.style;typeof o!="string"&&(o=o[e.$modeName$=CNe(t)]);const a=Vie(i,e.$modeName$);if(!TT.has(a)){const l=Af("registerStyles",i.$tagName$);ANe(a,o,!!(i.$flags$&1)),l()}}e.$ancestorComponent$,b4(e,!0)},JNe=t=>{},ZNe=t=>{if(!(fr.$flags$&1)){const e=E_(t),i=e.$cmpMeta$,r=Af("connectedCallback",i.$tagName$);e.$flags$&1?(Zie(t,e,i.$listeners$),JNe(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&YNe(t),i.$members$&&Object.entries(i.$members$).map(([n,[s]])=>{if(s&31&&t.hasOwnProperty(n)){const o=t[n];delete t[n],t[n]=o}}),WNe(t,e,i)),r()}},YNe=t=>{const e=t["s-cr"]=ua.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},KNe=t=>{if(!(fr.$flags$&1)){const e=E_(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},Iqe=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const r=t.prototype.connectedCallback,n=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){tDe(this,i)},connectedCallback(){ZNe(this),r&&r.call(this)},disconnectedCallback(){KNe(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,qNe(t,i)},Cqe=(t,e)=>e,Zie=(t,e,i,r)=>{i&&i.map(([n,s,o])=>{const a=XNe(t,n),l=QNe(e,o),u=eDe(n);fr.ael(a,s,l,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>fr.rel(a,s,l,u))})},QNe=(t,e)=>i=>{try{vy.lazyLoad||t.$hostElement$[e](i)}catch(r){T_(r)}},XNe=(t,e)=>e&4?ua:e&8?k_:e&16?ua.body:t,eDe=t=>rDe?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,Yie=new WeakMap,E_=t=>Yie.get(t),tDe=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return Zie(t,i,e.$listeners$),Yie.set(t,i)},K9=(t,e)=>e in t,T_=(t,e)=>(0,console.error)(t,e),TT=new Map,iDe=[],k_=typeof window<"u"?window:{},ua=k_.document||{head:{}},Mqe=k_.HTMLElement||class{},fr={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,r)=>t.addEventListener(e,i,r),rel:(t,e,i,r)=>t.removeEventListener(e,i,r),ce:(t,e)=>new CustomEvent(t,e)},rDe=(()=>{let t=!1;try{ua.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),nDe=t=>Promise.resolve(t),sDe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),tN=[],Kie=[],Qie=(t,e)=>i=>{t.push(i),eN||(eN=!0,e&&fr.$flags$&4?oDe(iN):fr.raf(iN))},Q9=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){T_(i)}t.length=0},iN=()=>{Q9(tN),Q9(Kie),(eN=tN.length>0)&&fr.raf(iN)},oDe=t=>nDe().then(t),Lqe=Qie(tN,!1),aDe=Qie(Kie,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */const Xie="calcite-mode-auto",ere="calcite-mode-dark",lDe="calcite-mode-light",Oqe={autoMode:Xie,darkMode:ere,lightMode:lDe,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var tre=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],kT=tre.join(","),ire=typeof Element>"u",Pf=ire?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,IT=!ire&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},CT=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},cDe=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},rre=function(e,i,r){if(CT(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(kT));return i&&Pf.call(e,kT)&&n.unshift(e),n=n.filter(r),n},nre=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!CT(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,r);r.flatten?n.push.apply(n,u):n.push({scopeParent:o,candidates:u})}else{var p=Pf.call(o,kT);p&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!CT(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&m){var y=t(h===!0?o.children:h.children,!0,r);r.flatten?n.push.apply(n,y):n.push({scopeParent:o,candidates:y})}else s.unshift.apply(s,o.children)}}return n},sre=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ore=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||cDe(e))&&!sre(e)?0:e.tabIndex},uDe=function(e,i){var r=ore(e);return r<0&&i&&!sre(e)?0:r},dDe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},are=function(e){return e.tagName==="INPUT"},pDe=function(e){return are(e)&&e.type==="hidden"},hDe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},fDe=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},mDe=function(e){if(!e.name)return!0;var i=e.form||IT(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=fDe(n,e.form);return!s||s===e},yDe=function(e){return are(e)&&e.type==="radio"},gDe=function(e){return yDe(e)&&!mDe(e)},vDe=function(e){var i,r=e&&IT(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=n)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&n;){var u,p,h;r=IT(n),n=(u=r)===null||u===void 0?void 0:u.host,s=!!((p=n)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(n))}}return s},X9=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},bDe=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Pf.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Pf.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var l=e.parentElement,u=IT(e);if(l&&!l.shadowRoot&&n(l)===!0)return X9(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(vDe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return X9(e);return!1},wDe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return Pf.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},MT=function(e,i){return!(i.disabled||CT(i)||pDe(i)||bDe(i,e)||hDe(i)||wDe(i))},rN=function(e,i){return!(gDe(i)||ore(i)<0||!MT(e,i))},_De=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},SDe=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,a=o?n.scopeParent:n,l=uDe(a,o),u=o?t(n.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):r.push({documentOrder:s,tabIndex:l,item:n,isScope:o,content:u})}),r.sort(dDe).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},$De=function(e,i){i=i||{};var r;return i.getShadowRoot?r=nre([e],i.includeContainer,{filter:rN.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:_De}):r=rre(e,i.includeContainer,rN.bind(null,i)),SDe(r)},Aqe=function(e,i){i=i||{};var r;return i.getShadowRoot?r=nre([e],i.includeContainer,{filter:MT.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=rre(e,i.includeContainer,MT.bind(null,i)),r},Pqe=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Pf.call(e,kT)===!1?!1:rN(i,e)},xDe=tre.concat("iframe").join(","),Rqe=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Pf.call(e,xDe)===!1?!1:MT(i,e)};const EDe={getShadowRoot:!0};function Nqe(t){const e="dir",i=`[${e}]`,r=TDe(t,i);return r?r.getAttribute(e):"ltr"}function w4(t){return t.getRootNode()}function Dqe(t){const e=w4(t);return"host"in e?e:null}function lre(t){return t.host||null}function Fqe(t,{selector:e,id:i}){function r(n){if(!n)return null;n.assignedSlot&&(n=n.assignedSlot);const s=w4(n),o=i?"getElementById"in s?s.getElementById(i):null:e?s.querySelector(e):null,a=lre(s);return o||(a?r(a):null)}return r(t)}function TDe(t,e){function i(r){return r?r.closest(e)||i(lre(w4(r))):null}return i(t)}function kDe(t,e){return cre(t,e)}function cre(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:r}=t;return cre(r instanceof ShadowRoot?r.host:r,e)}function jqe(t,e){return!!kDe(e,i=>i===t?!0:void 0)}function IDe(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function zqe(t){if(t)return IDe(t)?t.setFocus():t.focus()}function Vqe(t){t&&($De(t,EDe)[0]||t).focus()}const I1=":not([slot])";function Uqe(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const r=e?Array.isArray(e)?e.map(n=>`[slot="${n}"]`).join(","):`[slot="${e}"]`:I1;return i!=null&&i.all?CDe(t,r,i):MDe(t,r,i)}function ure(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function CDe(t,e,i){let r=e===I1?ure(t,I1):Array.from(t.querySelectorAll(e));r=i&&i.direct===!1?r:r.filter(s=>s.parentElement===t),r=i!=null&&i.matches?r.filter(s=>s==null?void 0:s.matches(i.matches)):r;const n=i==null?void 0:i.selector;return n?r.map(s=>Array.from(s.querySelectorAll(n))).reduce((s,o)=>[...s,...o],[]).filter(s=>!!s):r}function MDe(t,e,i){let r=e===I1?ure(t,I1)[0]||null:t.querySelector(e);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===t?r:null,r=i!=null&&i.matches?r!=null&&r.matches(i.matches)?r:null:r;const n=i==null?void 0:i.selector;return n?r==null?void 0:r.querySelector(n):r}function Bqe(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function Gqe(t){return(!!t).toString()}function Hqe(t){return PDe(t)||ODe(t)}function LDe(t){return ADe(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function ODe(t){return!!LDe(t)}function ADe(t){return t.target.assignedNodes({flatten:!0})}function PDe(t){return!!RDe(t).length}function RDe(t){return t.target.assignedElements({flatten:!0})}function qqe(t){return!!(t.isPrimary&&t.button===0)}function Wqe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */function eB(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(ere)||t.contains(Xie)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&r(o),s=o};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function NDe(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?eB():document.addEventListener("DOMContentLoaded",()=>eB(),{once:!0}))}const DDe=NDe;DDe();let dre;function FDe(){try{bNe(".")}catch{wNe(Ln(it(dre)))}}function I_(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return e.length>0?Promise.all(e):null}dre="components/assets";const pre=Symbol("widget"),hre=Symbol("widget-test-data"),jDe=[],zDe={},LT=new WeakMap;function fre(t,e){let i=e.children;if(i!=null&&i.length)for(let n=0;n<i.length;++n)i[n]=fre(t,i[n]);else i=jDe;const r=e.vnodeSelector;if(OT(r)){const n=e.properties||zDe,s=n.key||r;return{vnodeSelector:"div",properties:{key:s,afterCreate:VDe,afterUpdate:UDe,afterRemoved:mre,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}},children:void 0,text:void 0,domNode:null}}return e}function VDe(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=t,LT.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),r.addHandles(Mt(()=>mre(t))),queueMicrotask(()=>{o[hre].projector.renderNow()})}function UDe(t,e,i,{widgetProperties:r}){var s;const n=LT.get(t);n&&(n.set(r),(s=n.afterUpdate)==null||s.call(n,n,t))}function mre(t){var i;const e=LT.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),LT.delete(t))}function OT(t){return typeof t=="function"&&t[pre]}const Re={arrowDown:"esri-icon-arrow-down",arrowUp:"esri-icon-arrow-up",basemap:"esri-icon-basemap",bookmark:"esri-icon-bookmark",calendar:"esri-icon-calendar",checkMark:"esri-icon-check-mark",checkboxUnchecked:"esri-icon-checkbox-unchecked",close:"esri-icon-close",collapse:"esri-icon-collapse",defaultAction:"esri-icon-default-action",description:"esri-icon-description",directions:"esri-icon-directions",dockBottom:"esri-icon-dock-bottom",dockLeft:"esri-icon-dock-left",dockRight:"esri-icon-dock-right",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",download:"esri-icon-download",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",edit:"esri-icon-edit",elevationProfile:"esri-icon-elevation-profile",environmentSettings:"esri-icon-environment-settings",erase:"esri-icon-erase",error:"esri-icon-error",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",gear:"esri-icon-gear",handleHorizontal:"esri-icon-handle-horizontal",handleVertical:"esri-icon-handle-vertical",home:"esri-icon-home",icon:"esri-icon",launchLinkExternal:"esri-icon-launch-link-external",layerList:"esri-icon-layer-list",layers:"esri-icon-layers",left:"esri-icon-left",leftArrows:"esri-icon-left-arrow",leftTriangleArrow:"esri-icon-left-triangle-arrow",lineOfSight:"esri-icon-line-of-sight",link:"esri-icon-link",linkExternal:"esri-icon-link-external",linkHorizontal:"esri-icon-link-horizontal",loadingIndicator:"esri-icon-loading-indicator",locate:"esri-icon-locate",locateCircled:"esri-icon-locate-circled",locked:"esri-icon-locked",mapPin:"esri-icon-map-pin",maximize:"esri-icon-maximize",measure:"esri-icon-measure",measureArea:"esri-icon-measure-area",measureBuildingHeightShadow:"esri-icon-measure-building-height-shadow",measureLine:"esri-icon-measure-line",menu:"esri-icon-menu",minimize:"esri-icon-minimize",minus:"esri-icon-minus",nonVisible:"esri-icon-non-visible",northNavigation:"esri-icon-north-navigation",noticeTriangle:"esri-icon-notice-triangle",organization:"esri-icon-organization",pan:"esri-icon-pan",pan2:"esri-icon-pan2",partlyCloudy:"esri-icon-partly-cloudy",pause:"esri-icon-pause",play:"esri-icon-play",playCircled:"esri-icon-play-circled",plus:"esri-icon-plus",polyline:"esri-icon-polyline",printer:"esri-icon-printer",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",rightArrow:"esri-icon-right-arrow",rightTriangleArrow:"esri-icon-right-triangle-arrow",rotate:"esri-icon-rotate",save:"esri-icon-save",search:"esri-icon-search",settings2:"esri-icon-settings2",slice:"esri-icon-slice",swap:"esri-icon-swap",table:"esri-icon-table",timeClock:"esri-icon-time-clock",tracking:"esri-icon-tracking",trash:"esri-icon-trash",unlockedLinkHorizontal:"esri-icon-unlocked-link-horizontal",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",vertexGps:"esri-icon-vertex-gps",visible:"esri-icon-visible",zoomInFixed:"esri-icon-zoom-in-fixed",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomOutFixed:"esri-icon-zoom-out-fixed",zoomToObject:"esri-icon-zoom-to-object"},tB=new Set;function BDe(t){tB.add(t),t.finally(()=>tB.delete(t))}var yre;const GDe="esri.widgets.Widget";let HDe=0;const qDe={widgetIcon:Re.checkboxUnchecked};function gre(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?gre(t[i],e==null?void 0:e[i]):t[i]=e[i]);return t}const WDe=vNe({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,s,o)=>{const a=e==null?void 0:e(r,n,s,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||l){const u=r[2].toLowerCase()+r.slice(3),p=y=>a==null?void 0:a.call(s,y);s.addEventListener(u,p,l);const h=()=>s.removeEventListener(u,p,l),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),h()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(fte(),t.scheduleRender(),l[a].call(l.bind||i,r))}});let YM=!1,Ii=class extends S0(Il.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._projector=WDe,this._readyForTrueRender=!1,this.iconClass=qDe.widgetIcon,this.icon=null,this.key=this,this._loadLocale=Q1(async()=>{var a;if((a=this._messageBundleProps)!=null&&a.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:u,propertyName:p})=>{if(this.destroyed)return;let h=await Fk(u);this.uiStrings&&Object.keys(this.uiStrings)&&(h=gre(D(h),this.uiStrings)),this[p]=h}));if(this.destroyed)return;for(const u of l)u.status==="rejected"&&q.getLogger(this).error("widget-intl:locale-error",this.declaredClass,u.reason)}await this.loadLocale()}),FDe();const r="esri-widget-uid-"+DF(),n=this.render.bind(this);this._trackingTarget=new Ik(()=>this.scheduleRender());const s=()=>{var h;if(!this._readyForTrueRender||this.destroyed)return null;const a=n();let{properties:l}=a;l||(a.properties=l={});const{key:u}=l;if(u||(l.key=r),OT(a.vnodeSelector)){if(!this.visible)return{vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}}else this.visible?l.styles||(l.styles={}):(l.class="",l.styles={display:"none"}),l.styles.display||(l.styles.display="");let p=0;return(h=a.children)==null||h.forEach(m=>{if(OT(m.vnodeSelector))return;let{properties:y}=m;y||(m.properties=y={}),y.key||(y.key=`${this.id}--${p++}`)}),fre(this,a)};this.render=()=>{if(YM)return s();let a=fOe(this)??null;if(a)return a;this._trackingTarget.clear(),YM=!0;try{a=zc(this._trackingTarget,s)}catch(l){throw console.error(l),l}finally{YM=!1}return a&&mOe(this,a),a};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),BDe(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const e=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(_6):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(wt(this._trackingTarget),wt(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,CM(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return bI(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+HDe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(yre=pre,hre)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(CM(this),this._projector.scheduleRender())}own(e){OW(q.getLogger(this.declaredClass),"`Widget.own()` is deprecated in favor of Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return Jy.apply(this,e)}renderNow(){CM(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(Y(()=>this.viewModel,(r,n)=>{n&&this.removeHandles("delegated-events"),r&&Ek(r)&&this.addHandles(this._delegatedEventNames.map(s=>g0(r,s,o=>{this.emit(s,o)})),"delegated-events")},ol)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(_6),this.scheduleRender()};this.addHandles([Dk(e),Y(()=>this.uiStrings,e),Gn(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};Ii[yre]=!0,c([d()],Ii.prototype,"_readyForTrueRender",void 0),c([d({value:null})],Ii.prototype,"container",null),c([qe("container")],Ii.prototype,"castContainer",null),c([d()],Ii.prototype,"iconClass",void 0),c([d()],Ii.prototype,"icon",void 0),c([d()],Ii.prototype,"id",null),c([d()],Ii.prototype,"label",null),c([d()],Ii.prototype,"renderable",null),c([d()],Ii.prototype,"uiStrings",void 0),c([d()],Ii.prototype,"viewModel",void 0),c([d({value:!0})],Ii.prototype,"visible",null),c([d()],Ii.prototype,"key",void 0),c([d()],Ii.prototype,"children",void 0),c([d()],Ii.prototype,"afterCreate",void 0),c([d()],Ii.prototype,"afterUpdate",void 0),c([d()],Ii.prototype,"afterRemoved",void 0),Ii=c([k(GDe)],Ii);const yn=Ii;function iB(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function JDe(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function b$(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function ZDe(t){return t.type==="bing-maps"}const hu=[];let _y=class extends de{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ce,this.view=null,this._allLayerViewsChange=i=>{var n;this.removeHandles("suspension");const r=(n=this.view)==null?void 0:n.allLayerViews;r&&this.addHandles(r.map(s=>Y(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),i!=null&&i.removed&&i.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([bs(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Gn(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;hu.length=0,e&&i?(i.forEach(r=>{var o,a;if(r.suspended||!((o=r.layer)!=null&&o.attributionVisible))return;const n=r.layer;if(iB(n,"user"))return void b$(hu,r,n.copyright);if(n.hasAttributionData){if(this._fetchedAttributionData.has(r)){const l=this._fetchedAttributionData.get(r);return void(l?b$(hu,r,this._getDynamicAttribution(l,e,n)):iB(n)&&b$(hu,r,n.copyright))}return void this._fetchAttributionData(r)}const s="portalItem"in n?(a=n.portalItem)==null?void 0:a.accessInformation:void 0;b$(hu,r,s||n.copyright)}),JDe(this.items,hu)&&(this.items.removeAll(),this.items.addMany(hu)),hu.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await Pk(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,ZDe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let s=0;s<r.length;s++){const o=r[s],a=o.coverageAreas;if(!a)return;for(const l of a){const u=l.bbox,p=l.zoomMin-(i&&l.zoomMin?1:0),h=l.zoomMax-(i&&l.zoomMax?1:0),m=new ct({xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:Ee.WGS84}),y={extent:Rd(m),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let g=p;g<=h;g++)n[g]??(n[g]=[]),n[g].push(y)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){var p;const{extent:n,scale:s}=i;let o=((p=r.tileInfo)==null?void 0:p.scaleToZoom(s))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const a=e[o],l=Rk(n.center.clone().normalize(),i.spatialReference),u=new Set;return a?a.filter(h=>{const m=h.id,y=!u.has(m)&&l&&h.extent&&Nk(h.extent,l);return y&&u.add(m),y}).sort((h,m)=>m.score-h.score||h.objectId-m.objectId).map(h=>h.attribution).join(", "):""}};c([d({readOnly:!0,type:ce})],_y.prototype,"items",void 0),c([d({readOnly:!0})],_y.prototype,"state",null),c([d()],_y.prototype,"view",void 0),_y=c([k("esri.widgets.Attribution.AttributionViewModel")],_y);const vre=_y,oe={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",disabledElement:"esri-disabled-element",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",noBookmarksIcon:"esri-widget__no-bookmark-icon",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function ia(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:KDe(t[e])}}}function YDe(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function KDe(t){return function(e,...i){YDe(e)?_1(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function hn(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var QDe=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},bre=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?bre(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=QDe(n)),e.push(n))}},XDe=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return bre(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function x(t,e,...i){return typeof t!="function"||OT(t)?XDe(t,e,...i):t(e,...i)}function Yqe(...t){return t}const hm="esri-attribution",Tp={base:hm,poweredBy:`${hm}__powered-by`,sources:`${hm}__sources`,open:`${hm}--open`,sourcesOpen:`${hm}__sources--open`,link:`${hm}__link`,widgetIcon:Re.description};let zr=class extends yn{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.iconClass=Tp.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new vre}initialize(){this.addHandles(bs(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Tp.open]:this._isOpen};return x("div",{bind:this,class:this.classes(Tp.base,oe.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return x("div",{class:Tp.poweredBy},"Powered by"," ",x("a",{class:Tp.link,href:"http://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,s={[Tp.sourcesOpen]:e,[oe.interactive]:i};return x("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Tp.sources,s),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,o=s>n,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([d()],zr.prototype,"_isOpen",void 0),c([d()],zr.prototype,"_isInteractive",null),c([d()],zr.prototype,"_attributionTextOverflowed",void 0),c([d()],zr.prototype,"_prevSourceNodeHeight",void 0),c([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],zr.prototype,"attributionText",null),c([d()],zr.prototype,"iconClass",void 0),c([d()],zr.prototype,"icon",void 0),c([d()],zr.prototype,"itemDelimiter",void 0),c([d()],zr.prototype,"label",null),c([d(),hn("esri/widgets/Attribution/t9n/Attribution")],zr.prototype,"messages",void 0),c([d()],zr.prototype,"view",null),c([d({type:vre})],zr.prototype,"viewModel",void 0),c([ia()],zr.prototype,"_toggleState",null),zr=c([k("esri.widgets.Attribution")],zr);const e5e=zr;function t5e(t){var e,i;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((i=t==null?void 0:t.spatialReference)==null?void 0:i.isGeographic)||!1}const wre=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return W1(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return c([d()],e.prototype,"goToOverride",void 0),c([d()],e.prototype,"view",void 0),e=c([k("esri.widgets.support.GoTo")],e),e},i5e="esri.widgets.CompassViewModel";let wh=class extends wre(de){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(Y(()=>this.view,this._updateRotationWatcher,Le))}destroy(){this.view=null}get canShowNorth(){return t5e(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var i,r;if(!((i=this.view)!=null&&i.ready))return;const e={};((r=this.view)==null?void 0:r.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?Y(()=>e==null?void 0:e.rotation,this._updateForRotation,Le):Y(()=>e==null?void 0:e.camera,this._updateForCamera,Le))}};c([d({readOnly:!0})],wh.prototype,"canShowNorth",null),c([d()],wh.prototype,"orientation",void 0),c([d({readOnly:!0})],wh.prototype,"state",null),c([d()],wh.prototype,"view",void 0),wh=c([k(i5e)],wh);const _re=wh,rB="esri-compass",KM={base:rB,widgetIcon:Re.locateCircled,iconContainer:`${rB}__icon-container`};let qa=class extends yn{constructor(e,i){super(e,i),this.iconClass=KM.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new _re,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return I_({button:()=>Z(()=>import("./calcite-button-AgDMVj7S.js"),__vite__mapDeps([208,209,210,211,212,213,214,215,216,217,218,219])),icon:()=>Z(()=>import("./calcite-icon-CWBBFVdI.js"),__vite__mapDeps([220,217,215]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,r=i==="rotation"?"arrow-up":"compass-needle",{messages:n}=this;return x("div",{class:this.classes(KM.base,oe.widget)},x("calcite-button",{"aria-label":n.reset,class:oe.widgetButton,disabled:i==="disabled",kind:"neutral",onclick:this._reset,round:!0,scale:"s",title:n.reset},x("div",{"aria-hidden":"true",class:KM.iconContainer,title:n.reset},x("calcite-icon",{icon:r,scale:"m",styles:this._toRotationTransform(e)}))))}};c([d()],qa.prototype,"goToOverride",null),c([d()],qa.prototype,"iconClass",void 0),c([d()],qa.prototype,"icon",void 0),c([d()],qa.prototype,"label",null),c([d(),hn("esri/widgets/Compass/t9n/Compass")],qa.prototype,"messages",void 0),c([d()],qa.prototype,"view",null),c([d({type:_re})],qa.prototype,"viewModel",void 0),qa=c([k("esri.widgets.Compass")],qa);const r5e=qa,fm="esri-navigation-toggle",Fl={base:fm,widgetIcon:Re.pan2,button:`${fm}__button`,activeButton:`${fm}__button--active`,panButton:`${fm}__button--pan`,rotateButton:`${fm}__button--rotate`,isLayoutHorizontal:`${fm}--horizontal`};let Sy=class extends de{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.addHandles(Gn(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e,i;return(e=this.view)!=null&&e.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){var i;const e=(i=this.view)==null?void 0:i.inputManager;e&&(e.primaryDragAction=this.navigationMode==="pan"?"pan":"rotate")}};c([d({readOnly:!0})],Sy.prototype,"state",null),c([d()],Sy.prototype,"navigationMode",void 0),c([d()],Sy.prototype,"view",void 0),Sy=c([k("esri.widgets.NavigationToggleViewModel")],Sy);const Sre=Sy;let Bo=class extends yn{constructor(e,i){super(e,i),this.iconClass=Fl.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new Sre}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){var l,u;const e=((l=this.viewModel)==null?void 0:l.state)==="disabled",i=((u=this.viewModel)==null?void 0:u.navigationMode)==="pan",r={[oe.disabled]:e,[Fl.isLayoutHorizontal]:this.layout==="horizontal"},n={[Fl.activeButton]:i},s={[Fl.activeButton]:!i},o=e?-1:0,a=this.messages.toggle;return x("div",{"aria-label":a,bind:this,class:this.classes(Fl.base,oe.widget,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,title:a},x("div",{class:this.classes(Fl.button,oe.widgetButton,Fl.panButton,n)},x("span",{class:Re.pan})),x("div",{class:this.classes(Fl.button,oe.widgetButton,Fl.rotateButton,s)},x("span",{class:Re.rotate})))}_toggle(){this.toggle()}};c([d()],Bo.prototype,"iconClass",void 0),c([d()],Bo.prototype,"icon",void 0),c([d()],Bo.prototype,"label",null),c([d({value:"vertical"})],Bo.prototype,"layout",null),c([d(),hn("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Bo.prototype,"messages",void 0),c([d()],Bo.prototype,"view",null),c([d({type:Sre})],Bo.prototype,"viewModel",void 0),c([ia()],Bo.prototype,"_toggle",null),Bo=c([k("esri.widgets.NavigationToggle")],Bo);const n5e=Bo,er="esri-feature",s5e={base:er,container:`${er}__size-container`,title:`${er}__title`,main:`${er}__main-container`,btn:`${er}__button`,icon:`${er}__icon`,content:`${er}__content`,contentNode:`${er}__content-node`,contentNodeText:`${er}__content-node--text`,contentElement:`${er}__content-element`,text:`${er}__text`,lastEditedInfo:`${er}__last-edited-info`,fields:`${er}__fields`,fieldHeader:`${er}__field-header`,fieldData:`${er}__field-data`,fieldDataDate:`${er}__field-data--date`,loadingSpinnerContainer:`${er}__loading-container`,spinner:`${er}__loading-spinner`};let pc=class extends yn{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const e=this.enabled?0:-1,i={[oe.disabled]:!this.enabled,[oe.interactive]:this.enabled};return x("div",{bind:this,class:this.classes(oe.widgetButton,oe.widget,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},x("span",{"aria-hidden":"true",class:this.classes(s5e.icon,this.iconClass??""),role:"presentation"}),x("span",{class:Re.fontFallbackText},this.title))}_triggerAction(){this.action.call(this)}};c([d()],pc.prototype,"action",void 0),c([d()],pc.prototype,"enabled",void 0),c([d()],pc.prototype,"iconClass",void 0),c([d()],pc.prototype,"icon",void 0),c([d()],pc.prototype,"title",void 0),c([ia()],pc.prototype,"_triggerAction",null),pc=c([k("esri.widgets.IconButton")],pc);const nB=pc;let _h=class extends de{get canZoomIn(){var r,n,s;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var n;const{view:e}=this;if(!(e==null?void 0:e.ready))return!1;const r=(n=e.constraints)==null?void 0:n.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,n;const e=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(e&&"then"in e||e==null?void 0:e.scale)??((n=this.view)==null?void 0:n.scale)??0}};c([d({readOnly:!0})],_h.prototype,"canZoomIn",null),c([d({readOnly:!0})],_h.prototype,"canZoomOut",null),c([d()],_h.prototype,"view",void 0),c([d()],_h.prototype,"_scale",null),_h=c([k("esri.widgets.Zoom.ZoomConditions2D")],_h);const o5e=_h;let $y=class extends de{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([d({readOnly:!0})],$y.prototype,"canZoomIn",null),c([d({readOnly:!0})],$y.prototype,"canZoomOut",null),c([d()],$y.prototype,"view",void 0),$y=c([k("esri.widgets.Zoom.ZoomConditions3D")],$y);const a5e=$y;let Gu=class extends de{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new o5e({view:e}):e.type==="3d"&&(this._zoomConditions=new a5e({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():LO(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():LO(e.goTo({zoomFactor:.5}))}};c([d()],Gu.prototype,"_zoomConditions",void 0),c([d()],Gu.prototype,"canZoomIn",null),c([d()],Gu.prototype,"canZoomOut",null),c([d({readOnly:!0})],Gu.prototype,"state",null),c([d()],Gu.prototype,"view",null),Gu=c([k("esri.widgets.Zoom.ZoomViewModel")],Gu);const $re=Gu,QM={base:"esri-zoom",widgetIcon:Re.zoomInMagnifyingGlass,horizontalLayout:"esri-zoom--horizontal"};let Wa=class extends yn{constructor(e,i){super(e,i),this.iconClass=QM.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new $re}initialize(){this._zoomInButton=new nB({action:this.zoomIn.bind(this),iconClass:Re.plus}),this._zoomOutButton=new nB({action:this.zoomOut.bind(this),iconClass:Re.minus})}destroy(){this._zoomInButton=wt(this._zoomInButton),this._zoomOutButton=wt(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[QM.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:n}=e;this._zoomInButton.enabled=r,this._zoomOutButton.enabled=n;const{zoomIn:s,zoomOut:o}=this.messages;return this._zoomInButton.title=s,this._zoomOutButton.title=o,x("div",{class:this.classes(QM.base,oe.widget,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};c([d()],Wa.prototype,"iconClass",void 0),c([d()],Wa.prototype,"icon",void 0),c([d()],Wa.prototype,"label",null),c([d({value:"vertical"})],Wa.prototype,"layout",null),c([d(),hn("esri/widgets/Zoom/t9n/Zoom")],Wa.prototype,"messages",void 0),c([d()],Wa.prototype,"view",null),c([d({type:$re})],Wa.prototype,"viewModel",void 0),Wa=c([k("esri.widgets.Zoom")],Wa);const l5e=Wa;function c5e(t){return(t==null?void 0:t.view)!==void 0}let a2=class extends pNe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),s=n==null?void 0:n.widget;c5e(s)&&(s.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Y(()=>this.components,this._componentsWatcher,Le),Y(()=>this.view,this._updateViewAwareWidgets,Le)])}_add(e,i,r,n,s){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,n,s)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new o2({id:e,node:i})}_createWidget(e){const{view:i}=this;switch(e){case"attribution":return new e5e({view:i});case"compass":return new r5e({view:i});case"navigation-toggle":return new n5e({view:i});case"zoom":return new l5e({view:i})}}};c([d()],a2.prototype,"components",void 0),a2=c([k("esri.views.ui.DefaultUI")],a2);const xre=a2;let l2=class extends xre{constructor(e){super(e),this.components=["attribution","zoom"]}};c([d()],l2.prototype,"components",void 0),l2=c([k("esri.views.ui.2d.DefaultUI2D")],l2);const Ere=l2;let Tre,kre,Ire,Cre,Mre,Lre;async function u5e(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,Stage:s}]=await Promise.all([Z(()=>import("./webglDeps-flB-dAyJ.js"),__vite__mapDeps([130,131,132,45,133,134])),Z(()=>import("./mapViewDeps-FV7iZGZ-.js"),__vite__mapDeps([135,136,137,138,139,72,45,132,140,141,142,74,75,46,76,143,131,133,144,145,102,101,105,15,16,17,18,73,146,106,71,99,100,21,147,148,149,98,130,134,150,151,152,59,153,154,155,103,69,156,128,70,12,157,158,159,160,161,162,33,26,163,164,165,166,81,167]))]);kre=t,Ire=e,Cre=i,Mre=r,Lre=n,Tre=s}let Oe=class extends wLe(QOe(FOe(bAe))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new n1({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new r2({view:this}),this.graphicsView=null,this.stateManager=new tn({constraints:new lie({view:this})}),this.stationaryManager=new Eb,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new G3e(this),this.floors=new ce,this.highlightOptions=new Tie,this.inputManager=new xRe({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Lie,this.type="2d",this.ui=new Ere,this.test={takeScreenshot:async i=>HRe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Y(()=>this.viewpoint,()=>this.stationaryManager.flip(),Yf),this.on("resize",i=>this.stateManager.resize(i.width,i.height)),Y(()=>{var i;return(i=this.animationManager)==null?void 0:i.animation},i=>{this.animation=i})]),aTe()}destroy(){this._set("preconditionsReady",!1),this.frameTask=wt(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new MRe(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(i)?e.lods:null,spatialReference:i}}get state(){return this.stateManager.state}get initialExtentRequired(){var a;if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(i!=null&&i.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=this.spatialReference,r=e.targetGeometry;return!!El(r.spatialReference,i)||xee()}set animation(e){const i=this._get("animation");if(e===i)return;if(i&&i.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;const r=()=>{var n;e===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame()),this.frameTask.animationInProgress=!1};e.when(r,r)}get background(){return sB(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=e,i==null||i.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=i}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get updating(){var i,r,n;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0));if(G("esri-2d-log-updating")){const s=this.allLayerViews.reduce((o,a)=>({...o,[a.layer.id]:!a.destroyed&&!("layerViews"in a)&&a.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(i=this.layerViewManager)==null?void 0:i.updating}
-> labelManager.updating: ${(r=this.labelManager)==null?void 0:r.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(s)}
`)}return e}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}goTo(e,i){return this.goToManager.goTo(e,i)}async hitTest(e,i){return LRe(this,e,i)}async takeScreenshot(e){return GRe(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const i=kte(e)?Tte(this,e):e;return this.stateManager.toMap(i)}toScreen(e,i){return this.stateManager.toScreen(e,i)}on(e,i,r,n){return this.inputManager&&this.viewEvents.on(e,i,r,n)||super.on(e,i)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,i,r;return this.map&&"initialViewProperties"in this.map&&((i=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:i.spatialReference)||((r=this.defaultsFromMap)==null?void 0:r.spatialReference)||null}getDefaultTimeZone(){return sB(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return b9.hasLayerViewModule(e)}importLayerView(e){return b9.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(q.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(i=>({...i,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=rNe(this.type);if(G("safari")&&G("safari")<9&&(e=new j("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:G("safari")})),e!=null)throw q.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return u5e()}_getDefaultViewpoint(){var w;const{constraints:e,initialExtent:i,map:r,padding:n,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o==null?void 0:o.viewpoint,u=((w=l==null?void 0:l.targetGeometry)==null?void 0:w.extent)??i,p=u==null?void 0:u.center,h=(l==null?void 0:l.rotation)??0,m=(l==null?void 0:l.scale)||u&&Sg(u,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),y=a.center??p,g=a.rotation??h,v=a.scale??m;return y&&v?new dr({targetGeometry:y,scale:v,rotation:g}):null}_startup(){var a;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(a=this.defaultsFromMap.extent)==null?void 0:a.center),this.graphics.owner=this;const i=new Tre(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new Lre,this._magnifierView.magnifier=this.magnifier;const r=new Cre({view:this});this._set("labelManager",r);const n=new B3e({view:this});this._set("animationManager",n);const s=new Mre({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",l=>this.fatalError=l.error),Y(()=>this.stationary,l=>i.stationary=l,ol),Y(()=>this.background,l=>{i.backgroundColor=l==null?void 0:l.color,this._magnifierView.backgroundColor=l==null?void 0:l.color},ol),Y(()=>this.magnifier,l=>this._magnifierView.magnifier=l,ol),Y(()=>this.renderingOptions,l=>i.renderingOptions=l,ol),Y(()=>this.highlightOptions,l=>i.highlightOptions=l,ol),Y(()=>this.state.id,()=>i.state=this.state,ol)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Q3e(fw.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new kre({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Ire(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var o;const{allLayerViews:i,padding:r,size:n,stage:s}=this;return{allLayerViews:i,backgroundColor:e!=null&&e.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:r,size:n,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Oe.type="2d",c([d({readOnly:!0})],Oe.prototype,"animationManager",void 0),c([d({constructOnly:!0})],Oe.prototype,"deactivatedWebGLExtensions",void 0),c([d({constructOnly:!0})],Oe.prototype,"debugWebGLExtensions",void 0),c([d({readOnly:!0})],Oe.prototype,"featuresTilingScheme",void 0),c([d({readOnly:!0})],Oe.prototype,"fullOpacity",void 0),c([d()],Oe.prototype,"goToManager",void 0),c([d({readOnly:!0})],Oe.prototype,"graphicsTileStore",null),c([d()],Oe.prototype,"graphicsView",void 0),c([d()],Oe.prototype,"stateManager",void 0),c([d()],Oe.prototype,"constraintsInfo",null),c([d({readOnly:!0})],Oe.prototype,"state",null),c([d()],Oe.prototype,"initialExtentRequired",null),c([d()],Oe.prototype,"labelManager",void 0),c([d({readOnly:!0})],Oe.prototype,"mapViewNavigation",void 0),c([d({constructOnly:!0})],Oe.prototype,"renderCanvas",void 0),c([d()],Oe.prototype,"renderingOptions",void 0),c([d({constructOnly:!0})],Oe.prototype,"supersampleScreenshotsEnabled",void 0),c([d({readOnly:!0})],Oe.prototype,"supportsGround",void 0),c([d()],Oe.prototype,"_defaultsFromMapSettings",null),c([d({readOnly:!0})],Oe.prototype,"typeSpecificPreconditionsReady",null),c([d()],Oe.prototype,"animation",null),c([d({type:vI})],Oe.prototype,"background",null),c([d()],Oe.prototype,"center",null),c([d({type:lie})],Oe.prototype,"constraints",null),c([d()],Oe.prototype,"extent",null),c([d()],Oe.prototype,"floors",void 0),c([d({type:Tie})],Oe.prototype,"highlightOptions",void 0),c([d({readOnly:!0})],Oe.prototype,"inputManager",void 0),c([d()],Oe.prototype,"map",void 0),c([d()],Oe.prototype,"padding",null),c([d({readOnly:!0})],Oe.prototype,"rendering",null),c([d()],Oe.prototype,"resizeAlign",null),c([d({readOnly:!0})],Oe.prototype,"resolution",null),c([d()],Oe.prototype,"rotation",null),c([d()],Oe.prototype,"scale",null),c([d({constructOnly:!0})],Oe.prototype,"spatialReferenceLocked",void 0),c([d()],Oe.prototype,"stationary",null),c([d({type:Lie,readOnly:!0})],Oe.prototype,"timeline",void 0),c([d({readOnly:!0})],Oe.prototype,"type",void 0),c([d({readOnly:!0})],Oe.prototype,"updating",null),c([d()],Oe.prototype,"viewpoint",null),c([d()],Oe.prototype,"zoom",null),c([d({readOnly:!0})],Oe.prototype,"navigating",null),c([d(),qe(t=>t instanceof xre?t:Mk(Ere,t))],Oe.prototype,"ui",void 0),Oe=c([k("esri.views.MapView")],Oe);const d5e=Oe;function sB(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}let Hu=class extends de{constructor(e){super(e)}get editedBookmark(){const{bookmark:e}=this;return e?this._get("editedBookmark")||e.clone():null}get state(){return this._get("state")}set state(e){this.validationState=void 0,this.loading=void 0,this._set("state",e)}};c([d()],Hu.prototype,"bookmark",void 0),c([d({readOnly:!0})],Hu.prototype,"editedBookmark",null),c([d()],Hu.prototype,"state",null),c([d()],Hu.prototype,"validationState",void 0),c([d()],Hu.prototype,"loading",void 0),Hu=c([k("esri.widgets.Bookmarks.UserState")],Hu);const nN=Hu,Ore=ce.ofType(t4),p5e={width:128,height:128,format:"png"},w$={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0,captureTimeExtent:!0},XM={time:!0},Are="esri.widgets.Bookmarks.BookmarksViewModel",oB=q.getLogger(Are);let is=class extends wre(Il.EventedAccessor){constructor(e){super(e),this.capabilities={...XM},this.activeBookmark=null,this.view=null}destroy(){this.view=null,this._set("activeBookmark",null)}get abilities(){return Yw(oB,"abilities",{replacement:"capabilities",version:"4.27"}),this.capabilities}set abilities(e){Yw(oB,"abilities",{replacement:"capabilities",version:"4.27"}),this.capabilities=e}castAbilities(e){return{...XM,...e}}castCapabilities(e){return{...XM,...e}}get bookmarks(){var e,i;return((i=(e=this.view)==null?void 0:e.map)==null?void 0:i.bookmarks)??new Ore}set bookmarks(e){this._overrideIfSome("bookmarks",e)}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...w$,...e})}get defaultCreateOptions(){return w$}set defaultEditOptions(e){this._set("defaultEditOptions",{...w$,...e})}get defaultEditOptions(){return w$}get state(){const{view:e}=this;return e&&!e.ready?"loading":"ready"}async createBookmark(e){const{view:i,defaultCreateOptions:r,capabilities:n}=this;if(!i)throw new j("create-bookmark:invalid-view","Cannot create a bookmark without a view.");const{takeScreenshot:s,screenshotSettings:o,captureViewpoint:a,captureRotation:l,captureScale:u,captureTimeExtent:p}={...r,...e},h=s?await this._createThumbnail(o):void 0,m=n.time&&p&&i.timeExtent!=null?i.timeExtent.clone():void 0;return new t4({...h&&{thumbnail:h},...p&&{timeExtent:m},...a&&{viewpoint:this._createViewpoint({view:i,captureScale:u,captureRotation:l})}})}async editBookmark(e,i){if(!e)return e;const{view:r,defaultEditOptions:n}=this;if(!r)throw new j("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");const{takeScreenshot:s,screenshotSettings:o,captureViewpoint:a,captureRotation:l,captureScale:u,captureTimeExtent:p}={...n,...i},h=s?await this._createThumbnail(o):void 0;return h&&(e.thumbnail=h),a&&(e.viewpoint=this._createViewpoint({view:r,captureScale:u,captureRotation:l})),p&&r.timeExtent!=null&&(e.timeExtent=r.timeExtent.clone()),this.emit("bookmark-edit",{bookmark:e}),e}goTo(e){const{capabilities:i,view:r}=this;if(!r)throw new j("go-to:invalid-view","Cannot go to a bookmark without a view");const n=e==null?void 0:e.viewpoint;if(!n)throw new j("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:e});this._set("activeBookmark",e);const s={target:n},o=this.callGoTo(s),a=e==null?void 0:e.timeExtent;return i.time&&a&&(r.timeExtent=a),this.emit("bookmark-select",{bookmark:e}),o.catch(()=>{}).then(()=>this._set("activeBookmark",null)),o}async _createThumbnail(e){const{view:i}=this;if(!i)throw new j("bookmark:invalid-view","Cannot create slide thumbnail without a view");const r=await i.takeScreenshot({...p5e,...e});return new Mc({url:r.dataUrl})}_createViewpoint({view:e,captureRotation:i,captureScale:r}){var s,o;const n=(s=e.viewpoint)==null?void 0:s.clone();return new dr({targetGeometry:(o=e.extent)==null?void 0:o.clone(),rotation:(i?n==null?void 0:n.rotation:null)??0,scale:(r?n==null?void 0:n.scale:null)??0})}};c([d()],is.prototype,"abilities",null),c([qe("abilities")],is.prototype,"castAbilities",null),c([d()],is.prototype,"capabilities",void 0),c([qe("capabilities")],is.prototype,"castCapabilities",null),c([d({readOnly:!0})],is.prototype,"activeBookmark",void 0),c([d({type:Ore})],is.prototype,"bookmarks",null),c([d()],is.prototype,"defaultCreateOptions",null),c([d()],is.prototype,"defaultEditOptions",null),c([d({readOnly:!0})],is.prototype,"state",null),c([d()],is.prototype,"view",void 0),is=c([k(Are)],is);const Pre=is,nr="esri-bookmarks",xa=`${nr}__authoring`,To=`${nr}__bookmark`,gv=`${nr}__time-extent`,we={base:nr,widgetIcon:Re.bookmark,loaderContainer:`${nr}__loader-container`,loader:`${nr}__loader`,fadeIn:`${nr}--fade-in`,bookmarkList:`${nr}__list`,bookmarkListSortable:`${nr}__list--sortable`,bookmark:To,bookmarkButton:`${To}-button`,bookmarkImageContainer:`${To}-image-container`,bookmarkImageContainerHasImage:`${To}-image-container--has-image`,bookmarkEditButtonContainer:`${To}-edit-button-container`,bookmarkEditButton:`${To}-edit-button`,bookmarkDragHandle:`${nr}_bookmark-drag-handle`,bookmarkDragHandleIcon:`${nr}_bookmark-drag-handle-icon`,bookmarkIcon:`${To}-icon`,bookmarkImage:`${nr}__image`,bookmarkLabel:`${To}-label`,bookmarkName:`${To}-name`,bookmarkTimeExtent:`${To}-time-extent`,bookmarkActive:`${To}--active`,noBookmarksHeader:`${nr}__no-bookmarks-heading`,noBookmarksDescription:`${nr}__no-bookmarks-description`,addingBookmark:`${nr}__adding-bookmark`,addBookmark:`${nr}__add-bookmark`,addBookmarkButton:`${nr}__add-bookmark-button`,addBookmarkIcon:`${nr}__add-bookmark-icon`,authoringCard:`${xa}-card`,authoringContainer:`${xa}-container`,authoringForm:`${xa}-form`,authoringFormAdding:`${xa}-form--adding`,authoringLabel:`${xa}-label`,authoringLabelStartPadding:`${xa}-label--start-padding`,authoringActions:`${xa}-actions`,authoringInputInvalid:`${xa}-input--invalid`,authoringDeleteButton:`${xa}-delete-button`,authoringCancelButton:`${xa}-cancel-button`,timeExtentContainer:`${gv}-container`,timeExtent:gv,timeExtentGroup:`${gv}-group`,timeExtentDate:`${gv}-date`,timeExtentTime:`${gv}-time`};var c2;let Hs=c2=class extends de{constructor(t){super(t),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(t){return t?t.map(e=>e instanceof c2?e:new c2(e)):null}};c([d()],Hs.prototype,"autoCloseMenu",void 0),c([d()],Hs.prototype,"iconClass",void 0),c([d()],Hs.prototype,"items",void 0),c([qe("items")],Hs.prototype,"castItems",null),c([d()],Hs.prototype,"label",void 0),c([d()],Hs.prototype,"open",void 0),c([d()],Hs.prototype,"selected",void 0),c([d()],Hs.prototype,"selectionEnabled",void 0),c([d()],Hs.prototype,"clickFunction",void 0),Hs=c2=c([k("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],Hs);const vw=Hs;let xy=class extends de{constructor(e){super(e),this.items=null,this.open=!1}castItems(e){return e?e.map(i=>i instanceof vw?i:new vw(i)):null}};c([d()],xy.prototype,"items",void 0),c([qe("items")],xy.prototype,"castItems",null),c([d()],xy.prototype,"open",void 0),xy=c([k("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],xy);const h5e=xy,vn="esri-button-menu",Jn={base:vn,content:`${vn}__content`,itemWrapper:`${vn}__item-wrapper`,label:`${vn}__label`,icon:`${vn}__icon`,item:`${vn}__item`,itemLabel:`${vn}__item-label`,itemLabelContent:`${vn}__item-label-content`,selectableMenuItem:`${vn}__item--selectable`,selectedMenuItem:`${vn}__item--selected`,checkbox:`${vn}__checkbox`,embeddedContentWrapper:`${vn}__embedded-content-wrapper`,button:`${vn}__button`,buttonSelected:`${vn}__button--selected`};let qu=class extends yn{constructor(e,i){super(e,i),this._popover=null,this.disabled=!1,this.iconClass="",this.viewModel=new h5e}loadDependencies(){return I_({button:()=>Z(()=>import("./calcite-button-AgDMVj7S.js"),__vite__mapDeps([208,209,210,211,212,213,214,215,216,217,218,219])),popover:()=>Z(()=>import("./calcite-popover-o4wMeL5q.js"),__vite__mapDeps([221,222,223,224,219,225,213,214,215,212,216,226,210,217,218]))})}destroy(){this._popover=null}get items(){return this.viewModel.items}set items(e){this.viewModel.items=e}get open(){return this.viewModel.open}set open(e){this.viewModel.open=e}render(){const{open:e}=this,i=`${this.id}-button`;return x("div",{class:this.classes(Jn.base,oe.widget),key:"menu"},x("calcite-button",{appearance:"transparent",bind:this,class:this.classes(Jn.button,e&&Jn.buttonSelected),disabled:this.disabled,iconStart:e?"x":"ellipsis",id:i,kind:"neutral",label:this.label||"button",onclick:()=>this._toggleOpen(e),tabIndex:0}),x("calcite-popover",{afterCreate:bOe,afterUpdate:()=>{var r;return(r=this._popover)==null?void 0:r.reposition()},autoClose:!0,bind:this,"data-node-ref":"_popover",label:this.label||"menu",open:e,overlayPositioning:"fixed",placement:"bottom",pointerDisabled:!0,referenceElement:i,onCalcitePopoverClose:this._onPopoverClose},this._renderMenuContent()))}_onPopoverClose(){this.open=!1}_renderMenuContent(){var r;const{id:e,open:i}=this;return x("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:Jn.content,hidden:!i,key:"esri-button-menu-content"},x("ul",{"aria-labelledby":`${e}-button`,bind:this,class:Jn.itemWrapper,id:`${e}-menu`,role:"menu"},(r=this.items)!=null&&r.length?this._renderItems():null))}_renderItems(){var e;return(e=this.items)==null?void 0:e.map((i,r)=>this._renderItem(i,r))}_renderItem(e,i,r){var a;const n=r!=null?`${this.id}-menu-item-${i}-${r}`:`${this.id}-menu-item-${i}`,s=`${n}-label`,o=this.classes(Jn.item,e.selectionEnabled?Jn.selectableMenuItem:null,e.selectionEnabled&&e.selected?Jn.selectedMenuItem:null);return x("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:o,"data-item-index":i,"data-item-subIndex":r,for:n,key:n,onclick:l=>this._handleMenuItemInteraction(l,e),onkeydown:l=>this._handleMenuItemKeydown(l,e),role:"menuitem",tabIndex:this.disabled?-1:0},x("input",{checked:e.selected,class:Jn.checkbox,disabled:!0,id:n,name:n,tabIndex:-1,type:"checkbox"}),x("label",{class:Jn.itemLabel,for:n,id:s},x("span",{"aria-hidden":"true",class:this.classes(Jn.icon,e.iconClass)}),x("span",{class:Jn.itemLabelContent},r4.sanitize(e.label))),x("ul",{"aria-labelledby":s,class:Jn.embeddedContentWrapper,id:`${this.id}-submenu`,role:"menu"},(a=e==null?void 0:e.items)==null?void 0:a.map((l,u)=>this._renderItem(l,i,u))))}_handleMenuItemInteraction(e,i){i.selected=!i.selected,i.open=!(!i.selected||!i.items),i.autoCloseMenu&&this.set("open",!1),i.clickFunction&&i.clickFunction({event:e,item:i}),e.stopPropagation()}_handleMenuItemKeydown(e,i){const r=K1(e);_1(r)&&this._handleMenuItemInteraction(e,i),r==="Escape"&&(this.open=!1,e.preventDefault(),e.stopPropagation())}_afterMenuContentNodeCreate(e){e.focus()}_toggleOpen(e){this.open=!e}_afterMenuItemCreate(e){e["data-item-index"]===0&&e.focus()}};c([d()],qu.prototype,"disabled",void 0),c([d()],qu.prototype,"iconClass",void 0),c([d()],qu.prototype,"items",null),c([d()],qu.prototype,"open",null),c([d()],qu.prototype,"viewModel",void 0),qu=c([k("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],qu);const f5e=qu;function Vd({level:t,class:e,...i},r){const n=Rre(t);return x(`h${n}`,{...i,"aria-level":String(n),class:Jy(oe.heading,e),role:"heading"},r)}function Rre(t){return Es(Math.ceil(t),1,6)}function m5e(t,e=1){return Rre(t+e)}function Nre(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,r=Array.isArray(t)?t:y5e(t);i.push(...r)}}function y5e(t){return t.split(",").map(e=>e.trim())}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function aB(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Tl(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?aB(Object(i),!0).forEach(function(r){g5e(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):aB(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function u2(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u2=function(e){return typeof e}:u2=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u2(t)}function g5e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Gc(){return Gc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Gc.apply(this,arguments)}function v5e(t,e){if(t==null)return{};var i={},r=Object.keys(t),n,s;for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&(i[n]=t[n]);return i}function b5e(t,e){if(t==null)return{};var i=v5e(t,e),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var w5e="1.15.0";function Lc(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Xc=Lc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),C_=Lc(/Edge/i),lB=Lc(/firefox/i),bw=Lc(/safari/i)&&!Lc(/chrome/i)&&!Lc(/android/i),Dre=Lc(/iP(ad|od|hone)/i),Fre=Lc(/chrome/i)&&Lc(/android/i),jre={capture:!1,passive:!1};function dt(t,e,i){t.addEventListener(e,i,!Xc&&jre)}function tt(t,e,i){t.removeEventListener(e,i,!Xc&&jre)}function AT(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function _5e(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function rl(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&AT(t,e):AT(t,e))||r&&t===i)return t;if(t===i)break}while(t=_5e(t))}return null}var cB=/\s+/g;function rs(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(cB," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(cB," ")}}function Ae(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function xg(t,e){var i="";if(typeof t=="string")i=t;else do{var r=Ae(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function zre(t,e,i){if(t){var r=t.getElementsByTagName(e),n=0,s=r.length;if(i)for(;n<s;n++)i(r[n],n);return r}return[]}function yl(){var t=document.scrollingElement;return t||document.documentElement}function qi(t,e,i,r,n){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,u,p,h;if(t!==window&&t.parentNode&&t!==yl()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,p=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,p=window.innerHeight,h=window.innerWidth),(e||i)&&t!==window&&(n=n||t.parentNode,!Xc))do if(n&&n.getBoundingClientRect&&(Ae(n,"transform")!=="none"||i&&Ae(n,"position")!=="static")){var m=n.getBoundingClientRect();o-=m.top+parseInt(Ae(n,"border-top-width")),a-=m.left+parseInt(Ae(n,"border-left-width")),l=o+s.height,u=a+s.width;break}while(n=n.parentNode);if(r&&t!==window){var y=xg(n||t),g=y&&y.a,v=y&&y.d;y&&(o/=v,a/=g,h/=g,p/=v,l=o+p,u=a+h)}return{top:o,left:a,bottom:l,right:u,width:h,height:p}}}function uB(t,e,i){for(var r=$d(t,!0),n=qi(t)[e];r;){var s=qi(r)[i],o=void 0;if(i==="top"||i==="left"?o=n>=s:o=n<=s,!o)return r;if(r===yl())break;r=$d(r,!1)}return!1}function e0(t,e,i,r){for(var n=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Ce.ghost&&(r||o[s]!==Ce.dragged)&&rl(o[s],i.draggable,t,!1)){if(n===e)return o[s];n++}s++}return null}function _4(t,e){for(var i=t.lastElementChild;i&&(i===Ce.ghost||Ae(i,"display")==="none"||e&&!AT(i,e));)i=i.previousElementSibling;return i||null}function Js(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ce.clone&&(!e||AT(t,e))&&i++;return i}function dB(t){var e=0,i=0,r=yl();if(t)do{var n=xg(t),s=n.a,o=n.d;e+=t.scrollLeft*s,i+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,i]}function S5e(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function $d(t,e){if(!t||!t.getBoundingClientRect)return yl();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=Ae(i);if(i.clientWidth<i.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return yl();if(r||e)return i;r=!0}}while(i=i.parentNode);return yl()}function $5e(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function eL(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var ww;function Vre(t,e){return function(){if(!ww){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),ww=setTimeout(function(){ww=void 0},e)}}}function x5e(){clearTimeout(ww),ww=void 0}function Ure(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function Bre(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}var ps="Sortable"+new Date().getTime();function E5e(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(Ae(n,"display")==="none"||n===Ce.ghost)){t.push({target:n,rect:qi(n)});var s=Tl({},t[t.length-1].rect);if(n.thisAnimationDuration){var o=xg(n,!0);o&&(s.top-=o.f,s.left-=o.e)}n.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(S5e(t,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,u=a.target,p=u.fromRect,h=qi(u),m=u.prevFromRect,y=u.prevToRect,g=a.rect,v=xg(u,!0);v&&(h.top-=v.f,h.left-=v.e),u.toRect=h,u.thisAnimationDuration&&eL(m,h)&&!eL(p,h)&&(g.top-h.top)/(g.left-h.left)===(p.top-h.top)/(p.left-h.left)&&(l=k5e(g,m,y,n.options)),eL(h,p)||(u.prevFromRect=p,u.prevToRect=h,l||(l=n.options.animation),n.animate(u,g,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,n,s,o){if(o){Ae(r,"transition",""),Ae(r,"transform","");var a=xg(this.el),l=a&&a.a,u=a&&a.d,p=(n.left-s.left)/(l||1),h=(n.top-s.top)/(u||1);r.animatingX=!!p,r.animatingY=!!h,Ae(r,"transform","translate3d("+p+"px,"+h+"px,0)"),this.forRepaintDummy=T5e(r),Ae(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Ae(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Ae(r,"transition",""),Ae(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function T5e(t){return t.offsetWidth}function k5e(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var mm=[],tL={initializeByDefault:!0},M_={mount:function(e){for(var i in tL)tL.hasOwnProperty(i)&&!(i in e)&&(e[i]=tL[i]);mm.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),mm.push(e)},pluginEvent:function(e,i,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var s=e+"Global";mm.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][s]&&i[o.pluginName][s](Tl({sortable:i},r)),i.options[o.pluginName]&&i[o.pluginName][e]&&i[o.pluginName][e](Tl({sortable:i},r)))})},initializePlugins:function(e,i,r,n){mm.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,i,e.options);u.sortable=e,u.options=e.options,e[l]=u,Gc(r,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,i){var r={};return mm.forEach(function(n){typeof n.eventProperties=="function"&&Gc(r,n.eventProperties.call(i[n.pluginName],e))}),r},modifyOption:function(e,i,r){var n;return mm.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[i]=="function"&&(n=s.optionListeners[i].call(e[s.pluginName],r))}),n}};function I5e(t){var e=t.sortable,i=t.rootEl,r=t.name,n=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,u=t.newIndex,p=t.oldDraggableIndex,h=t.newDraggableIndex,m=t.originalEvent,y=t.putSortable,g=t.extraEventProperties;if(e=e||i&&i[ps],!!e){var v,w=e.options,b="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Xc&&!C_?v=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(r,!0,!0)),v.to=o||i,v.from=a||i,v.item=n||i,v.clone=s,v.oldIndex=l,v.newIndex=u,v.oldDraggableIndex=p,v.newDraggableIndex=h,v.originalEvent=m,v.pullMode=y?y.lastPutMode:void 0;var _=Tl(Tl({},g),M_.getEventProperties(r,e));for(var S in _)v[S]=_[S];i&&i.dispatchEvent(v),w[b]&&w[b].call(e,v)}}var C5e=["evt"],bn=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,s=b5e(r,C5e);M_.pluginEvent.bind(Ce)(e,i,Tl({dragEl:ae,parentEl:pi,ghostEl:Ue,rootEl:Yt,nextEl:Sh,lastDownEl:d2,cloneEl:si,cloneHidden:dd,dragStarted:Tb,putSortable:vr,activeSortable:Ce.active,originalEvent:n,oldIndex:Ky,oldDraggableIndex:_w,newIndex:ss,newDraggableIndex:nd,hideGhostForTarget:Wre,unhideGhostForTarget:Jre,cloneNowHidden:function(){dd=!0},cloneNowShown:function(){dd=!1},dispatchSortableEvent:function(a){rn({sortable:i,name:a,originalEvent:n})}},s))};function rn(t){I5e(Tl({putSortable:vr,cloneEl:si,targetEl:ae,rootEl:Yt,oldIndex:Ky,oldDraggableIndex:_w,newIndex:ss,newDraggableIndex:nd},t))}var ae,pi,Ue,Yt,Sh,d2,si,dd,Ky,ss,_w,nd,_$,vr,Ey=!1,PT=!1,RT=[],kp,ko,iL,rL,pB,hB,Tb,ym,Sw,$w=!1,S$=!1,p2,Rr,nL=[],sN=!1,NT=[],MI=typeof document<"u",$$=Dre,fB=C_||Xc?"cssFloat":"float",M5e=MI&&!Fre&&!Dre&&"draggable"in document.createElement("div"),Gre=function(){if(MI){if(Xc)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Hre=function(e,i){var r=Ae(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=e0(e,0,i),o=e0(e,1,i),a=s&&Ae(s),l=o&&Ae(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+qi(s).width,p=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+qi(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=n&&r[fB]==="none"||o&&r[fB]==="none"&&u+p>n)?"vertical":"horizontal"},L5e=function(e,i,r){var n=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?i.left:i.top,l=r?i.right:i.bottom,u=r?i.width:i.height;return n===a||s===l||n+o/2===a+u/2},O5e=function(e,i){var r;return RT.some(function(n){var s=n[ps].options.emptyInsertThreshold;if(!(!s||_4(n))){var o=qi(n),a=e>=o.left-s&&e<=o.right+s,l=i>=o.top-s&&i<=o.bottom+s;if(a&&l)return r=n}}),r},qre=function(e){function i(s,o){return function(a,l,u,p){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return i(s(a,l,u,p),o)(a,l,u,p);var m=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===m||s.join&&s.indexOf(m)>-1}}var r={},n=e.group;(!n||u2(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=i(n.pull,!0),r.checkPut=i(n.put),r.revertClone=n.revertClone,e.group=r},Wre=function(){!Gre&&Ue&&Ae(Ue,"display","none")},Jre=function(){!Gre&&Ue&&Ae(Ue,"display","")};MI&&!Fre&&document.addEventListener("click",function(t){if(PT)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),PT=!1,!1},!0);var Ip=function(e){if(ae){e=e.touches?e.touches[0]:e;var i=O5e(e.clientX,e.clientY);if(i){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[ps]._onDragOver(r)}}},A5e=function(e){ae&&ae.parentNode[ps]._isOutsideThisEl(e.target)};function Ce(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Gc({},e),t[ps]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Hre(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ce.supportPointer!==!1&&"PointerEvent"in window&&!bw,emptyInsertThreshold:5};M_.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);qre(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:M5e,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?dt(t,"pointerdown",this._onTapStart):(dt(t,"mousedown",this._onTapStart),dt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(dt(t,"dragover",this),dt(t,"dragenter",this)),RT.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Gc(this,E5e())}Ce.prototype={constructor:Ce,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ym=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,ae):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,n=this.options,s=n.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,p=n.filter;if(V5e(r),!ae&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||n.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&bw&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=rl(l,n.draggable,r,!1),!(l&&l.animated)&&d2!==l)){if(Ky=Js(l),_w=Js(l,n.draggable),typeof p=="function"){if(p.call(this,e,l,this)){rn({sortable:i,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),bn("filter",i,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(p&&(p=p.split(",").some(function(h){if(h=rl(u,h.trim(),r,!1),h)return rn({sortable:i,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),bn("filter",i,{evt:e}),!0}),p)){s&&e.cancelable&&e.preventDefault();return}n.handle&&!rl(u,n.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,i,r){var n=this,s=n.el,o=n.options,a=s.ownerDocument,l;if(r&&!ae&&r.parentNode===s){var u=qi(r);if(Yt=s,ae=r,pi=ae.parentNode,Sh=ae.nextSibling,d2=r,_$=o.group,Ce.dragged=ae,kp={target:ae,clientX:(i||e).clientX,clientY:(i||e).clientY},pB=kp.clientX-u.left,hB=kp.clientY-u.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,ae.style["will-change"]="all",l=function(){if(bn("delayEnded",n,{evt:e}),Ce.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!lB&&n.nativeDraggable&&(ae.draggable=!0),n._triggerDragStart(e,i),rn({sortable:n,name:"choose",originalEvent:e}),rs(ae,o.chosenClass,!0)},o.ignore.split(",").forEach(function(p){zre(ae,p.trim(),sL)}),dt(a,"dragover",Ip),dt(a,"mousemove",Ip),dt(a,"touchmove",Ip),dt(a,"mouseup",n._onDrop),dt(a,"touchend",n._onDrop),dt(a,"touchcancel",n._onDrop),lB&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ae.draggable=!0),bn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(C_||Xc))){if(Ce.eventCanceled){this._onDrop();return}dt(a,"mouseup",n._disableDelayedDrag),dt(a,"touchend",n._disableDelayedDrag),dt(a,"touchcancel",n._disableDelayedDrag),dt(a,"mousemove",n._delayedDragTouchMoveHandler),dt(a,"touchmove",n._delayedDragTouchMoveHandler),o.supportPointer&&dt(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ae&&sL(ae),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;tt(e,"mouseup",this._disableDelayedDrag),tt(e,"touchend",this._disableDelayedDrag),tt(e,"touchcancel",this._disableDelayedDrag),tt(e,"mousemove",this._delayedDragTouchMoveHandler),tt(e,"touchmove",this._delayedDragTouchMoveHandler),tt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?dt(document,"pointermove",this._onTouchMove):i?dt(document,"touchmove",this._onTouchMove):dt(document,"mousemove",this._onTouchMove):(dt(ae,"dragend",this),dt(Yt,"dragstart",this._onDragStart));try{document.selection?h2(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Ey=!1,Yt&&ae){bn("dragStarted",this,{evt:i}),this.nativeDraggable&&dt(document,"dragover",A5e);var r=this.options;!e&&rs(ae,r.dragClass,!1),rs(ae,r.ghostClass,!0),Ce.active=this,e&&this._appendGhost(),rn({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(ko){this._lastX=ko.clientX,this._lastY=ko.clientY,Wre();for(var e=document.elementFromPoint(ko.clientX,ko.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ko.clientX,ko.clientY),e!==i);)i=e;if(ae.parentNode[ps]._isOutsideThisEl(e),i)do{if(i[ps]){var r=void 0;if(r=i[ps]._onDragOver({clientX:ko.clientX,clientY:ko.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=i.parentNode);Jre()}},_onTouchMove:function(e){if(kp){var i=this.options,r=i.fallbackTolerance,n=i.fallbackOffset,s=e.touches?e.touches[0]:e,o=Ue&&xg(Ue,!0),a=Ue&&o&&o.a,l=Ue&&o&&o.d,u=$$&&Rr&&dB(Rr),p=(s.clientX-kp.clientX+n.x)/(a||1)+(u?u[0]-nL[0]:0)/(a||1),h=(s.clientY-kp.clientY+n.y)/(l||1)+(u?u[1]-nL[1]:0)/(l||1);if(!Ce.active&&!Ey){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Ue){o?(o.e+=p-(iL||0),o.f+=h-(rL||0)):o={a:1,b:0,c:0,d:1,e:p,f:h};var m="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Ae(Ue,"webkitTransform",m),Ae(Ue,"mozTransform",m),Ae(Ue,"msTransform",m),Ae(Ue,"transform",m),iL=p,rL=h,ko=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ue){var e=this.options.fallbackOnBody?document.body:Yt,i=qi(ae,!0,$$,!0,e),r=this.options;if($$){for(Rr=e;Ae(Rr,"position")==="static"&&Ae(Rr,"transform")==="none"&&Rr!==document;)Rr=Rr.parentNode;Rr!==document.body&&Rr!==document.documentElement?(Rr===document&&(Rr=yl()),i.top+=Rr.scrollTop,i.left+=Rr.scrollLeft):Rr=yl(),nL=dB(Rr)}Ue=ae.cloneNode(!0),rs(Ue,r.ghostClass,!1),rs(Ue,r.fallbackClass,!0),rs(Ue,r.dragClass,!0),Ae(Ue,"transition",""),Ae(Ue,"transform",""),Ae(Ue,"box-sizing","border-box"),Ae(Ue,"margin",0),Ae(Ue,"top",i.top),Ae(Ue,"left",i.left),Ae(Ue,"width",i.width),Ae(Ue,"height",i.height),Ae(Ue,"opacity","0.8"),Ae(Ue,"position",$$?"absolute":"fixed"),Ae(Ue,"zIndex","100000"),Ae(Ue,"pointerEvents","none"),Ce.ghost=Ue,e.appendChild(Ue),Ae(Ue,"transform-origin",pB/parseInt(Ue.style.width)*100+"% "+hB/parseInt(Ue.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,n=e.dataTransfer,s=r.options;if(bn("dragStart",this,{evt:e}),Ce.eventCanceled){this._onDrop();return}bn("setupClone",this),Ce.eventCanceled||(si=Bre(ae),si.removeAttribute("id"),si.draggable=!1,si.style["will-change"]="",this._hideClone(),rs(si,this.options.chosenClass,!1),Ce.clone=si),r.cloneId=h2(function(){bn("clone",r),!Ce.eventCanceled&&(r.options.removeCloneOnHide||Yt.insertBefore(si,ae),r._hideClone(),rn({sortable:r,name:"clone"}))}),!i&&rs(ae,s.dragClass,!0),i?(PT=!0,r._loopId=setInterval(r._emulateDragOver,50)):(tt(document,"mouseup",r._onDrop),tt(document,"touchend",r._onDrop),tt(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(r,n,ae)),dt(document,"drop",r),Ae(ae,"transform","translateZ(0)")),Ey=!0,r._dragStartId=h2(r._dragStarted.bind(r,i,e)),dt(document,"selectstart",r),Tb=!0,bw&&Ae(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,n,s,o,a=this.options,l=a.group,u=Ce.active,p=_$===l,h=a.sort,m=vr||u,y,g=this,v=!1;if(sN)return;function w(H,ne){bn(H,g,Tl({evt:e,isOwner:p,axis:y?"vertical":"horizontal",revert:o,dragRect:n,targetRect:s,canSort:h,fromSortable:m,target:r,completed:_,onMove:function(Fe,Be){return x$(Yt,i,ae,n,Fe,qi(Fe),e,Be)},changed:S},ne))}function b(){w("dragOverAnimationCapture"),g.captureAnimationState(),g!==m&&m.captureAnimationState()}function _(H){return w("dragOverCompleted",{insertion:H}),H&&(p?u._hideClone():u._showClone(g),g!==m&&(rs(ae,vr?vr.options.ghostClass:u.options.ghostClass,!1),rs(ae,a.ghostClass,!0)),vr!==g&&g!==Ce.active?vr=g:g===Ce.active&&vr&&(vr=null),m===g&&(g._ignoreWhileAnimating=r),g.animateAll(function(){w("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(r===ae&&!ae.animated||r===i&&!r.animated)&&(ym=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(ae.parentNode[ps]._isOutsideThisEl(e.target),!H&&Ip(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function S(){ss=Js(ae),nd=Js(ae,a.draggable),rn({sortable:g,name:"change",toEl:i,newIndex:ss,newDraggableIndex:nd,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=rl(r,a.draggable,i,!0),w("dragOver"),Ce.eventCanceled)return v;if(ae.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||g._ignoreWhileAnimating===r)return _(!1);if(PT=!1,u&&!a.disabled&&(p?h||(o=pi!==Yt):vr===this||(this.lastPutMode=_$.checkPull(this,u,ae,e))&&l.checkPut(this,u,ae,e))){if(y=this._getDirection(e,r)==="vertical",n=qi(ae),w("dragOverValid"),Ce.eventCanceled)return v;if(o)return pi=Yt,b(),this._hideClone(),w("revert"),Ce.eventCanceled||(Sh?Yt.insertBefore(ae,Sh):Yt.appendChild(ae)),_(!0);var $=_4(i,a.draggable);if(!$||D5e(e,y,this)&&!$.animated){if($===ae)return _(!1);if($&&i===e.target&&(r=$),r&&(s=qi(r)),x$(Yt,i,ae,n,r,s,e,!!r)!==!1)return b(),$&&$.nextSibling?i.insertBefore(ae,$.nextSibling):i.appendChild(ae),pi=i,S(),_(!0)}else if($&&N5e(e,y,this)){var T=e0(i,0,a,!0);if(T===ae)return _(!1);if(r=T,s=qi(r),x$(Yt,i,ae,n,r,s,e,!1)!==!1)return b(),i.insertBefore(ae,T),pi=i,S(),_(!0)}else if(r.parentNode===i){s=qi(r);var I=0,C,M=ae.parentNode!==i,R=!L5e(ae.animated&&ae.toRect||n,r.animated&&r.toRect||s,y),O=y?"top":"left",F=uB(r,"top","top")||uB(ae,"top","top"),A=F?F.scrollTop:void 0;ym!==r&&(C=s[O],$w=!1,S$=!R&&a.invertSwap||M),I=F5e(e,r,s,y,R?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,S$,ym===r);var P;if(I!==0){var V=Js(ae);do V-=I,P=pi.children[V];while(P&&(Ae(P,"display")==="none"||P===Ue))}if(I===0||P===r)return _(!1);ym=r,Sw=I;var te=r.nextElementSibling,re=!1;re=I===1;var Q=x$(Yt,i,ae,n,r,s,e,re);if(Q!==!1)return(Q===1||Q===-1)&&(re=Q===1),sN=!0,setTimeout(R5e,30),b(),re&&!te?i.appendChild(ae):r.parentNode.insertBefore(ae,re?te:r),F&&Ure(F,0,A-F.scrollTop),pi=ae.parentNode,C!==void 0&&!S$&&(p2=Math.abs(C-qi(r)[O])),S(),_(!0)}if(i.contains(ae))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){tt(document,"mousemove",this._onTouchMove),tt(document,"touchmove",this._onTouchMove),tt(document,"pointermove",this._onTouchMove),tt(document,"dragover",Ip),tt(document,"mousemove",Ip),tt(document,"touchmove",Ip)},_offUpEvents:function(){var e=this.el.ownerDocument;tt(e,"mouseup",this._onDrop),tt(e,"touchend",this._onDrop),tt(e,"pointerup",this._onDrop),tt(e,"touchcancel",this._onDrop),tt(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(ss=Js(ae),nd=Js(ae,r.draggable),bn("drop",this,{evt:e}),pi=ae&&ae.parentNode,ss=Js(ae),nd=Js(ae,r.draggable),Ce.eventCanceled){this._nulling();return}Ey=!1,S$=!1,$w=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),oN(this.cloneId),oN(this._dragStartId),this.nativeDraggable&&(tt(document,"drop",this),tt(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),bw&&Ae(document.body,"user-select",""),Ae(ae,"transform",""),e&&(Tb&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Ue&&Ue.parentNode&&Ue.parentNode.removeChild(Ue),(Yt===pi||vr&&vr.lastPutMode!=="clone")&&si&&si.parentNode&&si.parentNode.removeChild(si),ae&&(this.nativeDraggable&&tt(ae,"dragend",this),sL(ae),ae.style["will-change"]="",Tb&&!Ey&&rs(ae,vr?vr.options.ghostClass:this.options.ghostClass,!1),rs(ae,this.options.chosenClass,!1),rn({sortable:this,name:"unchoose",toEl:pi,newIndex:null,newDraggableIndex:null,originalEvent:e}),Yt!==pi?(ss>=0&&(rn({rootEl:pi,name:"add",toEl:pi,fromEl:Yt,originalEvent:e}),rn({sortable:this,name:"remove",toEl:pi,originalEvent:e}),rn({rootEl:pi,name:"sort",toEl:pi,fromEl:Yt,originalEvent:e}),rn({sortable:this,name:"sort",toEl:pi,originalEvent:e})),vr&&vr.save()):ss!==Ky&&ss>=0&&(rn({sortable:this,name:"update",toEl:pi,originalEvent:e}),rn({sortable:this,name:"sort",toEl:pi,originalEvent:e})),Ce.active&&((ss==null||ss===-1)&&(ss=Ky,nd=_w),rn({sortable:this,name:"end",toEl:pi,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){bn("nulling",this),Yt=ae=pi=Ue=Sh=si=d2=dd=kp=ko=Tb=ss=nd=Ky=_w=ym=Sw=vr=_$=Ce.dragged=Ce.ghost=Ce.clone=Ce.active=null,NT.forEach(function(e){e.checked=!0}),NT.length=iL=rL=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ae&&(this._onDragOver(e),P5e(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,n=0,s=r.length,o=this.options;n<s;n++)i=r[n],rl(i,o.draggable,this.el,!1)&&e.push(i.getAttribute(o.dataIdAttr)||z5e(i));return e},sort:function(e,i){var r={},n=this.el;this.toArray().forEach(function(s,o){var a=n.children[o];rl(a,this.options.draggable,n,!1)&&(r[s]=a)},this),i&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(n.removeChild(r[s]),n.appendChild(r[s]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return rl(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var n=M_.modifyOption(this,e,i);typeof n<"u"?r[e]=n:r[e]=i,e==="group"&&qre(r)},destroy:function(){bn("destroy",this);var e=this.el;e[ps]=null,tt(e,"mousedown",this._onTapStart),tt(e,"touchstart",this._onTapStart),tt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(tt(e,"dragover",this),tt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),RT.splice(RT.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!dd){if(bn("hideClone",this),Ce.eventCanceled)return;Ae(si,"display","none"),this.options.removeCloneOnHide&&si.parentNode&&si.parentNode.removeChild(si),dd=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(dd){if(bn("showClone",this),Ce.eventCanceled)return;ae.parentNode==Yt&&!this.options.group.revertClone?Yt.insertBefore(si,ae):Sh?Yt.insertBefore(si,Sh):Yt.appendChild(si),this.options.group.revertClone&&this.animate(ae,si),Ae(si,"display",""),dd=!1}}};function P5e(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function x$(t,e,i,r,n,s,o,a){var l,u=t[ps],p=u.options.onMove,h;return window.CustomEvent&&!Xc&&!C_?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=i,l.draggedRect=r,l.related=n||e,l.relatedRect=s||qi(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),p&&(h=p.call(u,l,o)),h}function sL(t){t.draggable=!1}function R5e(){sN=!1}function N5e(t,e,i){var r=qi(e0(i.el,0,i.options,!0)),n=10;return e?t.clientX<r.left-n||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-n||t.clientY<r.bottom&&t.clientX<r.left}function D5e(t,e,i){var r=qi(_4(i.el,i.options.draggable)),n=10;return e?t.clientX>r.right+n||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+n}function F5e(t,e,i,r,n,s,o,a){var l=r?t.clientY:t.clientX,u=r?i.height:i.width,p=r?i.top:i.left,h=r?i.bottom:i.right,m=!1;if(!o){if(a&&p2<u*n){if(!$w&&(Sw===1?l>p+u*s/2:l<h-u*s/2)&&($w=!0),$w)m=!0;else if(Sw===1?l<p+p2:l>h-p2)return-Sw}else if(l>p+u*(1-n)/2&&l<h-u*(1-n)/2)return j5e(e)}return m=m||o,m&&(l<p+u*s/2||l>h-u*s/2)?l>p+u/2?1:-1:0}function j5e(t){return Js(ae)<Js(t)?1:-1}function z5e(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function V5e(t){NT.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&NT.push(r)}}function h2(t){return setTimeout(t,0)}function oN(t){return clearTimeout(t)}MI&&dt(document,"touchmove",function(t){(Ce.active||Ey)&&t.cancelable&&t.preventDefault()});Ce.utils={on:dt,off:tt,css:Ae,find:zre,is:function(e,i){return!!rl(e,i,e,!1)},extend:$5e,throttle:Vre,closest:rl,toggleClass:rs,clone:Bre,index:Js,nextTick:h2,cancelNextTick:oN,detectDirection:Hre,getChild:e0};Ce.get=function(t){return t[ps]};Ce.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ce.utils=Tl(Tl({},Ce.utils),r.utils)),M_.mount(r)})};Ce.create=function(t,e){return new Ce(t,e)};Ce.version=w5e;var Li=[],kb,aN,lN=!1,oL,aL,DT,Ib;function U5e(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?dt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?dt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?dt(document,"touchmove",this._handleFallbackAutoScroll):dt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?tt(document,"dragover",this._handleAutoScroll):(tt(document,"pointermove",this._handleFallbackAutoScroll),tt(document,"touchmove",this._handleFallbackAutoScroll),tt(document,"mousemove",this._handleFallbackAutoScroll)),mB(),f2(),x5e()},nulling:function(){DT=aN=kb=lN=Ib=oL=aL=null,Li.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var n=this,s=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,a=document.elementFromPoint(s,o);if(DT=i,r||this.options.forceAutoScrollFallback||C_||Xc||bw){lL(i,this.options,a,r);var l=$d(a,!0);lN&&(!Ib||s!==oL||o!==aL)&&(Ib&&mB(),Ib=setInterval(function(){var u=$d(document.elementFromPoint(s,o),!0);u!==l&&(l=u,f2()),lL(i,n.options,u,r)},10),oL=s,aL=o)}else{if(!this.options.bubbleScroll||$d(a,!0)===yl()){f2();return}lL(i,this.options,$d(a,!1),!1)}}},Gc(t,{pluginName:"scroll",initializeByDefault:!0})}function f2(){Li.forEach(function(t){clearInterval(t.pid)}),Li=[]}function mB(){clearInterval(Ib)}var lL=Vre(function(t,e,i,r){if(e.scroll){var n=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=yl(),u=!1,p;aN!==i&&(aN=i,f2(),kb=e.scroll,p=e.scrollFn,kb===!0&&(kb=$d(i,!0)));var h=0,m=kb;do{var y=m,g=qi(y),v=g.top,w=g.bottom,b=g.left,_=g.right,S=g.width,$=g.height,T=void 0,I=void 0,C=y.scrollWidth,M=y.scrollHeight,R=Ae(y),O=y.scrollLeft,F=y.scrollTop;y===l?(T=S<C&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),I=$<M&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(T=S<C&&(R.overflowX==="auto"||R.overflowX==="scroll"),I=$<M&&(R.overflowY==="auto"||R.overflowY==="scroll"));var A=T&&(Math.abs(_-n)<=o&&O+S<C)-(Math.abs(b-n)<=o&&!!O),P=I&&(Math.abs(w-s)<=o&&F+$<M)-(Math.abs(v-s)<=o&&!!F);if(!Li[h])for(var V=0;V<=h;V++)Li[V]||(Li[V]={});(Li[h].vx!=A||Li[h].vy!=P||Li[h].el!==y)&&(Li[h].el=y,Li[h].vx=A,Li[h].vy=P,clearInterval(Li[h].pid),(A!=0||P!=0)&&(u=!0,Li[h].pid=setInterval((function(){r&&this.layer===0&&Ce.active._onTouchMove(DT);var te=Li[this.layer].vy?Li[this.layer].vy*a:0,re=Li[this.layer].vx?Li[this.layer].vx*a:0;typeof p=="function"&&p.call(Ce.dragged.parentNode[ps],re,te,t,DT,Li[this.layer].el)!=="continue"||Ure(Li[this.layer].el,re,te)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&m!==l&&(m=$d(m,!1)));lN=u}},30),Zre=function(e){var i=e.originalEvent,r=e.putSortable,n=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(i){var u=r||s;a();var p=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,h=document.elementFromPoint(p.clientX,p.clientY);l(),u&&!u.el.contains(h)&&(o("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function S4(){}S4.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=e0(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(i,n):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:Zre};Gc(S4,{pluginName:"revertOnSpill"});function $4(){}$4.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,n=r||this.sortable;n.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),n.animateAll()},drop:Zre};Gc($4,{pluginName:"removeOnSpill"});Ce.mount(new U5e);Ce.mount($4,S4);function B5e(t,e,i){t.splice(i,0,t.splice(e,1)[0])}const G5e="bookmarks",Cp="data-bookmark-uid",yB={addBookmark:!0,thumbnail:!0,time:!0},cL=/^https:\/\/.*/i,H5e="esri.widgets.Bookmarks";let Pt=class extends yn{constructor(e,i){super(e,i),this._tooltipReferenceMap=new Map,this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._addBookmarkButtonNode=null,this._focusAddBookmarkButton=!1,this._focusEditInputBox=!1,this._focusAddInputBox=!1,this._focusUrlEditInputBox=!1,this._sortable=null,this._sortableNode=null,this._focusSortUid=null,this._selectedSortUid=null,this._sortableSavedItems=[],this._editIncludeTimeExtent=void 0,this._userState=null,this.disabled=!1,this.editingEnabled=!1,this.headingLevel=2,this.iconClass=we.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.viewModel=new Pre,this.visibleElements={...yB}}initialize(){this.addHandles([Y(()=>{var e;return(e=this.viewModel)==null?void 0:e.bookmarks},()=>this._bookmarksInitialized(),Le),Y(()=>this.editingEnabled,()=>this._toggleSorting(),Le)])}destroy(){this._destroySortable(),this._editMenu.destroy(),this._tooltipReferenceMap.clear()}loadDependencies(){return I_({label:()=>Z(()=>import("./calcite-label-h5HkNlYy.js"),__vite__mapDeps([227,211])),switch:()=>Z(()=>import("./calcite-switch-A7JQBShj.js"),__vite__mapDeps([228,209,210,214,211,212])),tooltip:()=>Z(()=>import("./calcite-tooltip-DBUo9Rpf.js"),__vite__mapDeps([229,223,224,219,225]))})}get _editMenuItems(){var n,s;const{messages:e,_userState:i}=this,r=(s=(n=i==null?void 0:i.editedBookmark)==null?void 0:n.thumbnail)==null?void 0:s.url;return[new vw({label:e==null?void 0:e.menu.refreshThumbnail,iconClass:Re.refresh,clickFunction:()=>this._refreshThumbnail()}),new vw({label:r&&cL.test(r)?e==null?void 0:e.menu.editImageUrl:e==null?void 0:e.menu.useImageUrl,iconClass:Re.link,clickFunction:()=>this._startUseImageUrl()}),r?new vw({label:e==null?void 0:e.menu.removeThumbnail,iconClass:Re.erase,clickFunction:()=>this._removeThumbnail()}):null].filter(An)}get _editMenu(){const{_editMenuItems:e,messages:i,disabled:r}=this,n=this._get("_editMenu");n&&n.destroy();const s=new f5e({disabled:r,iconClass:Re.handleHorizontal,label:i==null?void 0:i.menu.label});return s.items=e,s}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultEditOptions(){return this.viewModel.defaultEditOptions}set defaultEditOptions(e){this.viewModel.defaultEditOptions=e}get bookmarks(){return this.viewModel.bookmarks}set bookmarks(e){this.viewModel.bookmarks=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...yB,...e}}endAddBookmark(){this._userState=null}goTo(e){return this.viewModel.goTo(e)}render(){const{state:e}=this.viewModel,i=e==="loading"?this._renderLoading():this._renderBookmarks();return x("div",{class:this.classes(we.base,oe.widget,oe.panel,{[oe.widgetDisabled]:this.disabled})},i)}startAddBookmark(){this._userState=new nN({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()}_renderBookmarkTooltips(e){return e.toArray().map(i=>this._renderBookmarkTooltip(i))??[]}_renderBookmarkTooltip(e){const{_tooltipReferenceMap:i,messagesCommon:r}=this,n=this._getBookmarkTitle(e),s=`${r==null?void 0:r.dragHandleTitle} ${n}`;return e?x("calcite-tooltip",{key:`tooltip-${e.uid}`,referenceElement:i.get(e.uid)},s):null}_renderLoading(){return x("div",{class:we.loaderContainer,key:"loader",tabIndex:this.disabled?-1:void 0},x("div",{class:we.loader}))}_renderNoBookmarksContainer(){const{messages:e,disabled:i}=this;return x("div",{class:oe.empty,key:"no-bookmarks",tabIndex:i?-1:void 0},x("span",{"aria-hidden":"true",class:this.classes(oe.noBookmarksIcon,we.widgetIcon)}),x(Vd,{class:this.classes(oe.heading,we.noBookmarksHeader),level:this.headingLevel},e==null?void 0:e.noBookmarksHeading),x("p",{class:we.noBookmarksDescription},e==null?void 0:e.noBookmarksDescription))}_renderAddBookmarkLoading(){var e;return x("div",{class:we.addingBookmark,key:"adding-bookmark"},x("span",{"aria-hidden":"true",class:this.classes(Re.loadingIndicator,oe.rotating)}),(e=this.messages)==null?void 0:e.addingBookmark)}_renderBookmarkItems(e){if(!e)return[];const{_userState:i,editingEnabled:r}=this;return e.map(n=>r&&n&&i&&(i.state==="edit"||i.state==="edit-thumbnail")&&i.bookmark===n?i.state==="edit-thumbnail"?this._renderEditingBookmarkUrl(i.editedBookmark):this._renderEditingBookmark(i.editedBookmark):this._renderBookmark(n)).toArray()}_renderBookmarksContainer(e){var u;const{_userState:i,editingEnabled:r,disabled:n,view:s}=this,o=(i==null?void 0:i.state)==="add",a=s&&r&&!o?this._renderAddBookmarkButton():null,l=r?o&&i.loading?this._renderAddBookmarkLoading():(i==null?void 0:i.state)==="add"?this._renderAddingBookmark():null:null;return[x("ul",{afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"aria-label":(u=this.messages)==null?void 0:u.widgetLabel,bind:this,class:this.classes(we.bookmarkList,{[we.bookmarkListSortable]:this.editingEnabled}),"data-node-ref":"_sortableNode",key:"bookmark-list",tabIndex:n?-1:void 0},this._renderBookmarkItems(e)),a,l]}_renderAddBookmarkButton(){var e;return this.visibleElements.addBookmark?x("div",{class:we.addBookmark,key:"add-bookmark-item"},x("button",{afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,bind:this,class:this.classes(oe.button,oe.buttonTertiary,we.addBookmarkButton),"data-node-ref":"_addBookmarkButtonNode",disabled:this.disabled,onclick:this.startAddBookmark,type:"button"},x("span",{"aria-hidden":"true",class:this.classes(we.addBookmarkIcon,Re.plus)}),(e=this.messages)==null?void 0:e.addBookmark)):null}_renderBookmarks(){const{bookmarks:e}=this.viewModel,i=e&&e.filter(Boolean),r=i&&i.length,n=r||this.editingEnabled?this._renderBookmarksContainer(i):null;return[r?null:this._renderNoBookmarksContainer(),n,this._renderBookmarkTooltips(e)]}_renderEditContainer(e){const{messagesCommon:i,disabled:r}=this,n=this._getBookmarkTitle(e);return x("div",{class:we.bookmarkEditButtonContainer,key:"edit-container"},x("button",{"aria-label":`${i==null?void 0:i.edit} ${n}`,bind:this,class:we.bookmarkEditButton,"data-bookmark":e,disabled:r,onclick:this._showEditBookmarkForm,title:`${i==null?void 0:i.edit} ${n}`,type:"button"},x("span",{"aria-hidden":"true",class:Re.edit})))}_renderDragHandle(e){const{messagesCommon:i,disabled:r}=this,n=this._getBookmarkTitle(e),s={[Cp]:e.uid};return x("div",{afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,"aria-label":`${i==null?void 0:i.dragHandleTitle} ${n}`,"aria-pressed":this._selectedSortUid===e.uid?"true":"false",bind:this,class:we.bookmarkDragHandle,"data-bookmark":e,key:"drag-handle",onblur:this._dragHandleBlur,onkeydown:this._dragHandleKeydown,role:"button",tabIndex:r?-1:0,...s},x("span",{"aria-hidden":"true",class:this.classes(we.bookmarkDragHandleIcon,Re.handleVertical)}))}_renderBookmarkImageIcon(){return x("span",{"aria-hidden":"true",class:this.classes(we.bookmarkIcon,we.widgetIcon)})}_renderBookmarkImage(e){const{visibleElements:i}=this,{thumbnail:r}=e,n=(r==null?void 0:r.url)||"";return i.thumbnail&&n?x("img",{alt:"",class:we.bookmarkImage,src:n}):null}_renderBookmarkTimeSwitch(e){const{messages:i,disabled:r}=this,{timeExtent:n}=e,{view:s}=this.viewModel;return(s==null?void 0:s.timeExtent)??n?x("calcite-label",{layout:"inline-space-between"},i==null?void 0:i.includeTimeExtent,x("calcite-switch",{checked:!!n,disabled:r,scale:"s",onCalciteSwitchChange:o=>{this._editIncludeTimeExtent=!!o.target.checked}})):null}_renderBookmarkTimeExtent(e){const{visibleElements:i}=this,{timeExtent:r}=e;return r?x("span",{class:we.timeExtent},[r.start!=null&&x("span",{class:we.timeExtentGroup,key:"start-date-group"},x("span",{class:we.timeExtentDate,key:"start-date"},this._formatDate(r.start)),i.time?x("span",{class:we.timeExtentTime,key:"start-time"},this._formatTime(r.start)):null),r.end!=null&&(r.start==null||r.start.getTime()!==r.end.getTime())&&x("span",{class:we.timeExtentGroup,key:"end-date-group"},x("span",{class:we.timeExtentDate,key:"end-date"},this._formatDate(r.end)),i.time?x("span",{class:we.timeExtentTime,key:"end-time"},this._formatTime(r.end)):null)]):null}_renderBookmarkButton(e){const{disabled:i}=this,{timeExtent:r}=e,{capabilities:n}=this.viewModel,s=this._getBookmarkTitle(e),{thumbnail:o}=e,a=x("div",{class:this.classes(we.bookmarkImageContainer,o!=null&&o.url?we.bookmarkImageContainerHasImage:null)},this._renderBookmarkImage(e)||this._renderBookmarkImageIcon()),l=n.time&&r?x("span",{class:we.bookmarkTimeExtent,key:"time-extent"},this._renderBookmarkTimeExtent(e)):null;return x("button",{bind:this,class:we.bookmarkButton,"data-bookmark":e,disabled:i,key:"bookmark-button",onclick:this._goToBookmark,type:"button"},a,x("div",{class:we.bookmarkLabel},x("span",{class:we.bookmarkName,key:"bookmark-title"},s),l))}_renderBookmark(e){const{activeBookmark:i}=this.viewModel,r={[we.bookmarkActive]:i===e},n=this.editingEnabled?this._renderEditContainer(e):null,s={[Cp]:e.uid},o=this.editingEnabled?this._renderDragHandle(e):null;return x("li",{class:this.classes(we.bookmark,r),key:e,...s},o,this._renderBookmarkButton(e),n)}_renderEditingBookmarkName(e){var o;const{messages:i,_userState:r,disabled:n}=this,s=(r==null?void 0:r.validationState)==="name-required";return x("label",{class:this.classes({[we.authoringLabel]:!0,[we.authoringLabelStartPadding]:!!((o=this.visibleElements)!=null&&o.thumbnail)})},i==null?void 0:i.title,s?x("strong",null,i==null?void 0:i.invalidTitle):null,x("input",{afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,bind:this,class:this.classes(oe.input,s?we.authoringInputInvalid:null),"data-bookmark":e,"data-node-ref":"_editInputNode",disabled:n,placeholder:i==null?void 0:i.titlePlaceholder,required:!0,type:"text",value:e.name}))}_renderEditingBookmarkUrlActions(){const{messagesCommon:e,disabled:i}=this;return x("div",{class:we.authoringActions},x("input",{bind:this,class:this.classes(oe.button,oe.buttonTertiary),disabled:i,onclick:this._closeUrlEditBookmarkForm,type:"button",value:e==null?void 0:e.back}),x("input",{class:oe.button,disabled:i,type:"submit",value:e==null?void 0:e.add}))}_renderEditingBookmarkActions(){var n;const{messagesCommon:e,disabled:i}=this,r=(n=this._userState)==null?void 0:n.bookmark;return x("div",{class:we.authoringActions},x("input",{bind:this,class:this.classes(oe.button,oe.buttonTertiary,we.authoringDeleteButton),"data-bookmark":r,disabled:i,onclick:this._deleteBookmark,type:"button",value:e==null?void 0:e.delete}),x("input",{bind:this,class:this.classes(oe.button,oe.buttonTertiary),disabled:i,onclick:this._closeEditBookmarkForm,type:"button",value:e==null?void 0:e.cancel}),x("input",{class:oe.button,disabled:i,type:"submit",value:e==null?void 0:e.save}))}_renderEditingBookmarkUrlInput(e){var l,u;const{messages:i,_userState:r,disabled:n}=this,s=(l=e.thumbnail)==null?void 0:l.url,o=s&&cL.test(s)?s:void 0,a=(r==null?void 0:r.validationState)==="absolute-url-required";return x("label",{class:this.classes({[we.authoringLabel]:!0,[we.authoringLabelStartPadding]:!!((u=this.visibleElements)!=null&&u.thumbnail)})},a?x("strong",null,i==null?void 0:i.invalidImageUrl):null,x("input",{afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,bind:this,class:this.classes(oe.input,a?we.authoringInputInvalid:null),"data-bookmark":e,"data-node-ref":"_urlEditInputNode",disabled:n,placeholder:i?`https://<${i.imageUrlPlaceholder}>`:void 0,required:!0,title:i==null?void 0:i.imageUrlTooltip,type:"text",value:o}))}_renderEditingBookmarkUrl(e){if(!e)return null;const i={[Cp]:e.uid};return x("li",{class:we.authoringCard,key:"edit-bookmark-url-form",...i},x("form",{bind:this,class:we.authoringForm,disabled:this.disabled,onsubmit:this._editBookmarkUrlSubmit},this._renderEditingBookmarkUrlInput(e),this._renderEditingBookmarkUrlActions()))}_renderEditingBookmark(e){if(!e)return null;const i={[Cp]:e.uid},{capabilities:r}=this.viewModel,n=r.time?x("div",{class:we.timeExtentContainer,key:"edit-bookmark-time-container"},this._renderBookmarkTimeSwitch(e),this._editIncludeTimeExtent?this._renderBookmarkTimeExtent(e):null):null;return x("li",{class:we.authoringCard,key:"edit-bookmark-form",...i},x("form",{bind:this,class:we.authoringForm,disabled:this.disabled,onsubmit:this._editBookmarkSubmit},x("div",{class:we.authoringContainer},this.visibleElements.thumbnail?x("div",{class:we.bookmarkImageContainer},this._renderBookmarkImage(e),this._editMenu.render()):null,this._renderEditingBookmarkName(e)),n,this._renderEditingBookmarkActions()))}_renderAddingBookmarkName(){const{_userState:e,messages:i,disabled:r}=this,n=(e==null?void 0:e.validationState)==="name-required";return x("label",{class:we.authoringLabel},i==null?void 0:i.title,n?x("strong",null,i==null?void 0:i.invalidTitle):null,x("input",{afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,bind:this,class:this.classes(oe.input,n?we.authoringInputInvalid:null),"data-node-ref":"_addInputNode",disabled:r,placeholder:i==null?void 0:i.titlePlaceholder,required:!0,type:"text",value:""}))}_renderAddingBookmarkActions(){const{messagesCommon:e,disabled:i}=this;return x("div",{class:this.classes(we.authoringActions)},x("input",{bind:this,class:this.classes(oe.button,oe.buttonTertiary,we.authoringCancelButton),disabled:i,onclick:this._endAddBookmark.bind(this),type:"button",value:e==null?void 0:e.cancel}),x("input",{class:oe.button,disabled:i,type:"submit",value:e==null?void 0:e.add}))}_renderAddingBookmark(){return x("div",{class:we.authoringCard,key:"add-bookmark-form"},x("form",{bind:this,class:this.classes(we.authoringForm,we.authoringFormAdding),onsubmit:this._addBookmarkSubmit},this._renderAddingBookmarkName(),this._renderAddingBookmarkActions()))}_setTooltipReference(e,i){this._tooltipReferenceMap.set(i.uid,e),this.scheduleRender()}_getBookmarkTitle(e){var i;return((e==null?void 0:e.name)||((i=this.messagesCommon)==null?void 0:i.untitled))??""}_formatDate(e){var i;return e?Pn(e,{...cd("short-date"),timeZone:((i=this.view)==null?void 0:i.timeZone)??ks}):""}_formatTime(e){var i;return e?Pn(e,{...cd("long-time"),timeZone:((i=this.view)==null?void 0:i.timeZone)??ks}):""}_dragHandleBlur(){this._selectedSortUid=null,this.scheduleRender()}_dragHandleKeydown(e){const{_sortableSavedItems:i}=this,r=["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"],n=K1(e);if(!r.includes(n))return;const{_sortable:s,_selectedSortUid:o}=this;if(!s)return;const a=s.toArray(),l=e.target.getAttribute(Cp),u=a.indexOf(l);if(_1(n)){const h=o&&o===l;return this._selectedSortUid=h?null:l,this._sortableSavedItems=h?[]:s.toArray(),void this.scheduleRender()}if(n==="Tab")return this._selectedSortUid=null,void this.scheduleRender();if(n==="Escape"&&i.length!==0)return e.stopPropagation(),this._selectedSortUid=null,this._updateSortItems(i,s,l),void this.scheduleRender();if(u===-1||!o)return;const p=n==="ArrowUp"?u-1:u+1;p>=a.length||p<=-1||(B5e(a,u,p),this._updateSortItems(a,s,l))}_updateSortItems(e,i,r){i.sort(e),this._sortBookmarks(i),this._focusSortUid=r,this._selectedSortUid=r}_focusDragHandle(e){const i=E$(e);if(!i)return;this._setTooltipReference(e,i);const{_focusSortUid:r}=this;!e||!r||e.getAttribute(Cp)===r&&(e.focus(),this._focusSortUid=null)}_toggleSorting(){const{_sortable:e,_sortableNode:i,editingEnabled:r,disabled:n}=this;if(i)if(e)e.option("disabled",n||!r);else{const s=Ce.create(i,{dataIdAttr:Cp,handle:`.${we.bookmarkDragHandle}`,group:G5e,disabled:n||!r,onSort:()=>this._sortBookmarks(s)});this._sortable=s}}_sortNodeCreated(e){this._sortableNode=e,this._toggleSorting()}_sortBookmarks(e){const{bookmarks:i}=this.viewModel;if(!i)return;const r=e.toArray();i.sort((n,s)=>{const o=r.indexOf(n.uid),a=r.indexOf(s.uid);return o>a?1:o<a?-1:0})}_destroySortable(){const{_sortable:e}=this;e&&e.destroy(),this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=!0,this.endAddBookmark()}_bookmarksInitialized(){const e="bookmarks-init";this.removeHandles(e),this.addHandles(bs(()=>{var i;return(i=this.viewModel)==null?void 0:i.bookmarks},"change",()=>this._bookmarksChanged()),e)}_bookmarksChanged(){const e="bookmarks-change",{bookmarks:i}=this.viewModel;this.removeHandles(e);const r=i.map(n=>Y(()=>{var s;return[n==null?void 0:n.name,(s=n==null?void 0:n.thumbnail)==null?void 0:s.url]},()=>this.scheduleRender()));this.addHandles(r.toArray(),e),this.scheduleRender()}_showEditBookmarkForm(e){const i=E$(e.currentTarget);i&&(this._editIncludeTimeExtent=!!i.timeExtent,this._focusEditInputBox=!0,this._userState=new nN({bookmark:i,state:"edit"}),this.viewModel.goTo(i),this.scheduleRender())}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0,this._userState&&(this._userState.state="edit")}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(e){e.preventDefault();const{_addInputNode:i,_userState:r}=this;if(!r)return;const n=i?i.value.trim():null;n?(r.loading=!0,this.viewModel.createBookmark().then(s=>{s.name=n,this.viewModel.bookmarks.add(s),this._endAddBookmark()})):r.validationState="name-required"}async _editBookmarkAndClose(e,i){const{viewModel:r}=this;await r.editBookmark(e,{...r.defaultEditOptions,...i}),this._closeEditBookmarkForm()}_editBookmarkSubmit(e){e.preventDefault();const{_editInputNode:i,_userState:r,_editIncludeTimeExtent:n}=this;if(!(r!=null&&r.bookmark)||!r.editedBookmark)return;const s=i&&i.value.trim();s?(r.bookmark.name=s,r.bookmark.thumbnail=r.editedBookmark.thumbnail,n||(r.bookmark.timeExtent=null),this._editBookmarkAndClose(r.bookmark,{takeScreenshot:!1,captureTimeExtent:n})):r.validationState="name-required"}_storeAddBookmarkButton(e){this._addBookmarkButtonNode=e,this._focusAddBookmark()}_storeEditInput(e){this._editInputNode=e,this._focusEditInput()}_storeAddInput(e){this._addInputNode=e,this._focusAddInput()}_storeUrlEditInput(e){this._urlEditInputNode=e,this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(e){const i=E$(e.currentTarget);i&&this.viewModel.bookmarks.remove(i)}_goToBookmark(e){const i=E$(e.currentTarget);i&&(this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(i))}async _refreshThumbnail(){const{_userState:e,_editMenu:i,viewModel:r}=this;e&&(e.validationState=void 0,await r.editBookmark(e.editedBookmark,{takeScreenshot:!0,captureViewpoint:!1,captureRotation:!1,captureScale:!1,captureTimeExtent:!1}),i.open=!1,this._focusEditInputBox=!0,this.scheduleRender())}_removeThumbnail(){const{_userState:e,_editMenu:i}=this;e!=null&&e.editedBookmark&&(e.editedBookmark.thumbnail=null,e.validationState=void 0,i.open=!1,this._focusEditInputBox=!0,this.scheduleRender())}_startUseImageUrl(){this._userState&&(this._userState.state="edit-thumbnail"),this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()}_editBookmarkUrlSubmit(e){e.preventDefault();const{_urlEditInputNode:i,_userState:r}=this;if(!i||!r)return;const n=i.value;cL.test(n)?(n&&r.editedBookmark&&(r.editedBookmark.thumbnail=new Mc({url:n})),this._closeUrlEditBookmarkForm()):r.validationState="absolute-url-required"}};function E$(t){return t["data-bookmark"]}c([d()],Pt.prototype,"_editIncludeTimeExtent",void 0),c([d({type:nN})],Pt.prototype,"_userState",void 0),c([d({readOnly:!0})],Pt.prototype,"_editMenuItems",null),c([d({readOnly:!0})],Pt.prototype,"_editMenu",null),c([d()],Pt.prototype,"defaultCreateOptions",null),c([d()],Pt.prototype,"defaultEditOptions",null),c([d()],Pt.prototype,"bookmarks",null),c([d()],Pt.prototype,"disabled",void 0),c([d()],Pt.prototype,"editingEnabled",void 0),c([d()],Pt.prototype,"headingLevel",void 0),c([d()],Pt.prototype,"goToOverride",null),c([d()],Pt.prototype,"iconClass",void 0),c([d()],Pt.prototype,"icon",void 0),c([d()],Pt.prototype,"label",null),c([d(),hn("esri/widgets/Bookmarks/t9n/Bookmarks")],Pt.prototype,"messages",void 0),c([d(),hn("esri/t9n/common")],Pt.prototype,"messagesCommon",void 0),c([d()],Pt.prototype,"uiStrings",void 0),c([d()],Pt.prototype,"view",null),c([d({type:Pre}),Nre(["select-bookmark","bookmark-edit","bookmark-select"])],Pt.prototype,"viewModel",void 0),c([d()],Pt.prototype,"visibleElements",void 0),c([qe("visibleElements")],Pt.prototype,"castVisibleElements",null),c([d()],Pt.prototype,"endAddBookmark",null),c([d()],Pt.prototype,"startAddBookmark",null),Pt=c([k(H5e)],Pt);const q5e=Pt;let W5e=class{constructor(e){this.message=e}toString(){return`AssertException: ${this.message}`}};function Yre(t,e){if(!t){e=e||"Assertion";const i=new Error(e).stack;throw new W5e(`${e} at ${i}`)}}function yWe(t,e,i,r){let n,s=(i[0]-t[0])/e[0],o=(r[0]-t[0])/e[0];s>o&&(n=s,s=o,o=n);let a=(i[1]-t[1])/e[1],l=(r[1]-t[1])/e[1];if(a>l&&(n=a,a=l,l=n),s>l||a>o)return!1;a>s&&(s=a),l<o&&(o=l);let u=(i[2]-t[2])/e[2],p=(r[2]-t[2])/e[2];return u>p&&(n=u,u=p,p=n),!(s>p||u>o)&&(p<o&&(o=p),!(o<0))}let J5e=class{constructor(e){this.client=e,this._cancelled=!1,this.size=0,this.duration=0}},Z5e=class{constructor(e){this.typeWorkerQuota=e,this.tasks=new Array,this.numWorkers=0,this.statistics=new Y5e}},Y5e=class{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}},K5e=class{constructor(e,i,r,n){this._workerFunc=e,this._callbackFunc=i,this._maxTotalNumWorkers=r,this._totalNumWorkers=0,this._clients=n.map(s=>new Z5e(s))}destroy(){this._clients.length=0}hasQuota(e){const i=this._clients[e];return!!i&&(this._totalNumWorkers<this._maxTotalNumWorkers||i.numWorkers+i.tasks.length<i.typeWorkerQuota)}push(e){const i=this._clients[e.client];i&&(this._totalNumWorkers<this._maxTotalNumWorkers?(i.numWorkers++,this._totalNumWorkers++,this._workerFunc(e,(r,n)=>this._taskCallback(r,n))):i.tasks.push(e))}cancel(e){this._taskFinished(e),e._cancelled=!0}_taskFinished(e){const i=this._clients[e.client];this._totalNumWorkers--,i&&(i.numWorkers--,i.statistics.requests++,i.statistics.size+=e.size||0,i.statistics.duration+=e.duration||0,i.statistics.speed=i.statistics.duration>0?i.statistics.size/i.statistics.duration:0,Yre(i.numWorkers>=0)),this._next()}_next(){for(const e of this._clients)if(e&&e.numWorkers<e.typeWorkerQuota&&this._processQueue(e))return;for(const e of this._clients)if(e&&this._processQueue(e))return}_processQueue(e){for(;e.tasks.length>0;)if(this._workerFunc(e.tasks.shift(),(i,r)=>this._taskCallback(i,r)))return e.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(e,i){e._cancelled||(this._callbackFunc(e,i),this._taskFinished(e))}getStatsForType(e){const i=this._clients[e];return i?{quota:i.typeWorkerQuota,workers:i.numWorkers,queueSize:i.tasks.length,requestStats:i.statistics}:null}get test(){const e=this;return{set workerFunc(i){e._workerFunc=i}}}},Q5e=class{constructor(){this._tasks=new Array,this._running=S1(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._running.value=!0,new Promise((n,s)=>this._tasks.push(new gB(n,s,e,i,r)))}unshift(e,i,r){return this._running.value=!0,new Promise((n,s)=>this._tasks.unshift(new gB(n,s,e,i,r)))}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const n=pa(i.signal);if(n&&!i.abortCallback)i.reject(mt());else{const s=n?(r=i.abortCallback)==null?void 0:r.call(i,mt()):i.callback(e);Zc(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(n){i.reject(n)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=mt();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._running.value=!1}},gB=class{constructor(e,i,r,n=void 0,s=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=n,this.abortCallback=s}},Cb=class extends de{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([d()],Cb.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),c([d()],Cb.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Cb=c([k("esri.views.support.DebugFlags")],Cb);const X5e=new Cb;var os;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(os||(os={}));var cN,He;(function(t){t[t.YIELD=1]="YIELD"})(cN||(cN={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"}(He||(He={}));const nl=0,vB=new Map([[He.RESOURCE_CONTROLLER_IMMEDIATE,nl],[He.RESOURCE_CONTROLLER,4],[He.SLIDE,nl],[He.STREAM_DATA_LOADER,nl],[He.ELEVATION_QUERY,nl],[He.TERRAIN_SURFACE,1],[He.SURFACE_GEOMETRY_UPDATES,1],[He.LOD_RENDERER,2],[He.GRAPHICS_CORE,2],[He.I3S_CONTROLLER,2],[He.POINT_CLOUD_LAYER,2],[He.FEATURE_TILE_FETCHER,2],[He.OVERLAY,4],[He.STAGE,4],[He.GRAPHICS_DECONFLICTOR,4],[He.FILTER_VISIBILITY,4],[He.SCALE_VISIBILITY,4],[He.FRUSTUM_VISIBILITY,4],[He.CLOUDS_GENERATOR,4],[He.POINT_OF_INTEREST_FREQUENT,6],[He.POINT_OF_INTEREST_INFREQUENT,30],[He.LABELER,8],[He.FEATURE_QUERY_ENGINE,8],[He.FEATURE_TILE_TREE,16],[He.FEATURE_TILE_TREE_ACTIVE,nl],[He.ELEVATION_ALIGNMENT,12],[He.TEXT_TEXTURE_ATLAS,12],[He.TEXTURE_UNLOAD,12],[He.LINE_OF_SIGHT_TOOL,16],[He.LINE_OF_SIGHT_TOOL_INTERACTIVE,nl],[He.SNAPPING,nl],[He.SHADOW_ACCUMULATOR,30]]);function bB(t){return vB.has(t)?vB.get(t):typeof t=="number"?t:1}const wB=6.5,_B=1,eFe=30,SB=1e3/30,$B=100,xB=.9;var uN,Mp;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=S1(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Wb("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=os.INTERACTING,this._tasks=new ef,this._runQueue=new ef,this._load=0,this._idleStateCallbacks=new ef,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Y(()=>X5e.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,Le);for(const o of Object.keys(He))this.performanceInfo.tasks.set(He[o],new Wb(He[o]));const s=this;this._test={FRAME_SAFETY_BUDGET:wB,INTERACTING_BUDGET:SB,IDLE_BUDGET:$B,get availableBudget(){return s._budget.budget},usedBudget:0,getBudget:()=>s._budget,setBudget:o=>s._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),Xt(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(s,o){const a=bB(s),l=new i(this,s,o,a);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new Wb(s)),l}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===os.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(u){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===os.IDLE&&u()),a.idleBegin=u},set idleEnd(u){a.idleEnd=u}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==os.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(s){this._test.usedBudget=0,++this._frameNumber;let o=wB,a=s.frameDuration,l=_B;switch(this.state){case os.IDLE:o=0,a=Math.max($B,s.frameDuration),l=eFe;break;case os.INTERACTING:a=Math.max(SB,s.frameDuration);case os.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==os.IDLE&&a<_B&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case os.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case os.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return Mp.SCHEDULED;let o=Mp.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=Mp.READY:o!==Mp.READY&&(o=Mp.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*xB+s*(1-xB)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===nl&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==nl&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===cN.YIELD&&(a.blockFrame=this._frameNumber)}catch(u){q.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,u),a.blockFrame=this._frameNumber}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,He.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const l=this._budget.now()-o;if(a.runtime+=l,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+l),this._debug&&l>2*this._budget.budget&&console.log("Task",a.name,"used",l,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(He))this._frameTaskTimes.set(He[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).record(o)),this.performanceInfo.total.record(s)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a,l){this._scheduler=s,this.name=o,this._basePriority=l,this.blockFrame=0,this.runtime=0,this._queue=new Q5e,this._handles=new $k,this.schedulePriority=this._basePriority,this._task=S1(a??this._queue),this._handles.add(Gn(()=>this.task.running,u=>s.taskRunningChanged(u)))}remove(){this.processQueue(Kre),this._scheduler.removeTask(this),this.schedule=EB.schedule,this.reschedule=EB.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){this.name=s;const o=bB(s);this._basePriority!==nl&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){this._queue.runTask(s)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=os.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(uN||(uN={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Mp||(Mp={}));const Kre=(()=>{const t=new uN.Budget;return t.enabled=!1,t})();let tFe=class{remove(){}processQueue(){}schedule(e,i,r){try{if(pa(i)){const n=mt();return r?Promise.resolve(r(n)):Promise.reject(n)}return OO(e(Kre))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const EB=new tFe;let uL=class extends de{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,i,r){this._loadQueue=new K5e((n,s)=>this._startLoading(n,s),(n,s)=>this._doneLoadingCB(n,s),e,i),r&&(this._frameTask=r.registerTask(He.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=Xt(this._frameTask),this._tasks.forEach(e=>jg(e.abortController)),this._loadQueue=wt(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,i,r,n={}){const s=xs();s.__signal=n!=null?n.signal:null;const o=this._createOrUpdateTask(e,i,r,n,s);return ys(n,()=>this._cancelRequest(o,s)),s.promise}_createTask(e,i,r,n,s,o){const a=new sFe(e,i,r,n,s);return this._updateTask(a,o),this._tasks.set(s,a),this._tasks.size===1&&this._set("updating",!0),this._loadQueue.push(a),a}_cancelRequest(e,i){var r;fW(e.resolvers,i),i.reject(mt()),e.resolvers.length===0&&(e.status===Zs.DOWNLOADING&&(e.status=Zs.CANCELLED,this._loadQueue.cancel(e),(r=e.abortController)==null||r.abort(),e.request=null,e.abortController=null),e.status=Zs.CANCELLED,this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1))}_updateTask(e,i){e.resolvers.push(i)}_createOrUpdateTask(e,i,r,n,s){const o=oFe((n==null?void 0:n.uid)||e,i,r),a=this._tasks.get(o);return a?(this._updateTask(a,s),a):this._createTask(e,n,i,r,o,s)}_doneLoadingCB(e,i){this._loadQueue&&(Yre(e.status===Zs.DOWNLOADING),e.status=Zs.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:i}):this._doneLoading(e,i))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const i=this._onLoadQueue.shift();kt(i.task.abortController),i.task.abortController=null,i.callback(i.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const i=this._doneQueue.shift();i.task.status!==Zs.DOWNLOADED&&(i.err=i.err||mt()),this._doneLoading(i.task,i.err),e.madeProgress()}}_doneLoading(e,i){if(i&&!hr(i)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let r=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const n of e.resolvers)if(i)hr(i)?n.reject(i):n.reject(new j("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${i}`,{url:e.url,error:i}));else{--r;const s=r>0?D(e.result):e.result;n.resolve(s)}this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1)}_startLoading(e,i){if(e.status===Zs.CANCELLED)return!1;let r,n;switch(e.startTime=performance.now(),e.status=Zs.DOWNLOADING,e.docType){case"binary":n="array-buffer",r=0;break;case"image":n="image";break;case"image+type":n="array-buffer";break;default:n="json"}e.abortController=new AbortController;const s=e.abortController.signal;e.request=Ve(e.url,{...e.options,responseType:n,timeout:r,signal:s});let o=()=>{};const a=u=>{e.duration=performance.now()-e.startTime,e.size=u instanceof ArrayBuffer?u.byteLength:e.size||0,e.result=u,this._frameTask?this._onLoadQueue.push({callback:i,task:e}):(e.abortController=null,i(e))},l=u=>{e.status===Zs.DOWNLOADING&&i(e,u),o()};return e.docType!=="image+type"?(e.request.then(u=>a(u.data),l),!0):(e.request.then(u=>{const p=u.data,h=rFe(p);if(n="image",e.size=p.byteLength,h==="unknown")return e.request=Ve(e.url,{responseType:n,timeout:r,signal:s}),void e.request.then(g=>a(g.data),l);const m=new Blob([p],{type:h}),y=window.URL.createObjectURL(m);o=()=>window.URL.revokeObjectURL(y),e.request=Ve(y,{responseType:n,timeout:r,signal:s}),e.request.then(g=>a(new nFe(g.data,h,o)),l)},l),!0)}get test(){return{loadQueue:this._loadQueue}}};c([d({readOnly:!0})],uL.prototype,"updating",void 0),uL=c([k("esri.views.3d.support.StreamDataLoader")],uL);const iFe={numRetries:0};function rFe(t){if(t.byteLength<2)return"unknown";const e=new Uint8Array(t,0,t.byteLength);return e[0]===137&&e[1]===80?"image/png":e[0]===71&&e[1]===73?"image/gif":e[0]===66&&e[1]===77?"image/bmp":e[0]===255&&e[1]===216?"image/jpeg":"unknown"}let nFe=class{constructor(e,i,r){this.image=e,this.type=i,this.release=r}get isOpaque(){return this.type==="image/jpeg"}},sFe=class extends J5e{constructor(e,i,r,n,s){super(n),this.url=e,this.options=i,this.docType=r,this.key=s,this.result=null,this.status=Zs.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=iFe.numRetries}};function oFe(t,e,i){return`${t}:${e}:${i}`}var Zs;(function(t){t[t.QUEUED=1]="QUEUED",t[t.DOWNLOADING=2]="DOWNLOADING",t[t.DOWNLOADED=3]="DOWNLOADED",t[t.CANCELLED=4]="CANCELLED"})(Zs||(Zs={}));var TB,ul;(function(t){t[t.INSIDE=0]="INSIDE",t[t.INTERSECTS=1]="INTERSECTS",t[t.OUTSIDE=2]="OUTSIDE"})(TB||(TB={})),function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"}(ul||(ul={}));const aFe=12;let Oc=class nn{constructor(e){const i=nn.checkUnsupported(e);if(i!=null)throw i;const r=e;this.spatialReference=r.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=gI(this.spatialReference)||t_(this.spatialReference)||i_(this.spatialReference),this.origin=[r.origin.x,r.origin.y],this.pixelSize=r.size[0],this.dpi=r.dpi;const n=r.lods.reduce((u,p,h)=>(p.level<u.min&&(u.min=p.level,u.minIndex=h),u.max=Math.max(u.max,p.level),u),{min:1/0,minIndex:0,max:-1/0}),s=r.lods[n.minIndex],o=2**s.level;let a=s.resolution*o,l=s.scale*o;this.levels=new Array(n.max+1);for(let u=0;u<this.levels.length;u++)this.levels[u]={resolution:a,scale:l,tileSize:[a*r.size[0],a*r.size[1]]},a/=2,l/=2}clone(){return new nn(this.toTileInfo())}toTileInfo(){return new fw({dpi:this.dpi,origin:new Me({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((e,i)=>new eo({level:i,scale:e.scale,resolution:e.resolution}))})}getExtent(e,i,r,n){const s=this.levels[e],o=s.tileSize[0],a=s.tileSize[1];n[0]=this.origin[0]+r*o,n[2]=this.origin[0]+(r+1)*o,n[3]=this.origin[1]-i*a,n[1]=this.origin[1]-(i+1)*a}convertExtentToRadians(e,i){this._isWebMercator?(i[0]=q6(e[0]),i[1]=W6(e[1]),i[2]=q6(e[2]),i[3]=W6(e[3])):this._isGCS&&(i[0]=Mv(e[0]),i[1]=Mv(e[1]),i[2]=Mv(e[2]),i[3]=Mv(e[3]))}getExtentGeometry(e,i,r,n=new ct){return this.getExtent(e,i,r,Ea),n.spatialReference=this.spatialReference,n.xmin=Ea[0],n.ymin=Ea[1],n.xmax=Ea[2],n.ymax=Ea[3],n.zmin=void 0,n.zmax=void 0,n}ensureMaxLod(e){if(e==null)return!1;let i=!1;for(;this.levels.length<=e;){const r=this.levels[this.levels.length-1],n=r.resolution/2;this.levels.push({resolution:n,scale:r.scale/2,tileSize:[n*this.pixelSize,n*this.pixelSize]}),i=!0}return i}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const i=this.levels[0].scale;return e>=i?0:Math.log(i/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof nn)){if(nn.checkUnsupported(e))return!1;e=new nn(e)}if(!e.spatialReference.equals(this.spatialReference)||e.pixelSize!==this.pixelSize)return!1;const i=Math.min(this.levels.length,e.levels.length)-1,r=this.levels[i].resolution;let n=.5*r;return!Dd(e.origin[0],this.origin[0],n)||!Dd(e.origin[1],this.origin[1],n)?!1:(n=.5*r/2**i/this.pixelSize*aFe,Dd(r,e.levels[i].resolution,n))}rootTilesInExtent(e,i=null,r=1/0){const n=new Array,s=this.levels[0].tileSize;if(e==null||s[0]===0||s[1]===0)return n;nn.computeRowColExtent(e,s,this.origin,Ea);let o=Ea[1],a=Ea[3],l=Ea[0],u=Ea[2];const p=u-l,h=a-o;if(p*h>r){const m=Math.floor(Math.sqrt(r));h>m&&(o=o+Math.floor(.5*h)-Math.floor(.5*m),a=o+m),p>m&&(l=l+Math.floor(.5*p)-Math.floor(.5*m),u=l+m)}for(let m=o;m<a;m++)for(let y=l;y<u;y++)n.push([0,m,y]);return i!=null&&(i[0]=this.origin[0]+l*s[0],i[1]=this.origin[1]-a*s[1],i[2]=this.origin[0]+u*s[0],i[3]=this.origin[1]-o*s[1]),n}static computeRowColExtent(e,i,r,n){const s=.001*(e[2]-e[0]+(e[3]-e[1]));n[0]=Math.max(0,Math.floor((e[0]+s-r[0])/i[0])),n[2]=Math.max(0,Math.ceil((e[2]-s-r[0])/i[0])),n[1]=Math.max(0,Math.floor((r[1]-e[3]+s)/i[1])),n[3]=Math.max(0,Math.ceil((r[1]-e[1]-s)/i[1]))}static isPowerOfTwo(e){const i=e.lods,r=i[0].resolution*2**i[0].level;return!i.some(n=>!Zve(n.resolution,r/2**n.level))}static hasGapInLevels(e){const i=e.lods.map(r=>r.level);i.sort((r,n)=>r-n);for(let r=1;r<i.length;r++)if(i[r]!==i[0]+r)return!0;return!1}static tileSizeSupported(e){const i=e.size[1];return i===e.size[0]&&(i&i-1)==0&&i>=128&&i<=512}static hasOriginPerLODs(e){const i=e.origin;return e.lods.some(r=>r.origin!=null&&(r.origin[0]!==i.x||r.origin[1]!==i.y))}static getMissingTileInfoError(){return new j("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return e==null?x4():e.lods.length<1?new j("tilingscheme:generic","Tiling scheme must have at least one level"):nn.isPowerOfTwo(e)?nn.hasGapInLevels(e)?new j("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):nn.tileSizeSupported(e)?nn.hasOriginPerLODs(e)?new j("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new j("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new j("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,i){const r=e[2]-e[0],n=e[3]-e[1],s=Cl(i),o=1.2*Math.max(r,n),a=256,l=96,u=.0254,p=new nn(new fw({size:[a,a],origin:new Me({x:e[0]-.5*(o-r),y:e[3]+.5*(o-n)}),lods:[new eo({level:0,resolution:o/a,scale:1/(a/l*u/(o*s))})],spatialReference:i}));return p.ensureMaxLod(20),p}static makeWebMercatorAuxiliarySphere(e){const i=new nn(nn.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(e),i}static makeGCSWithTileSize(e,i=256,r=16){const n=256/i,s=new nn(new fw({size:[i,i],origin:new Me({x:-180,y:90,spatialReference:e}),spatialReference:e,lods:[new eo({level:0,resolution:.703125*n,scale:295497598570834e-6*n})]}));return s.ensureMaxLod(r),s}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}};function x4(){return new j("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}Oc.WebMercatorAuxiliarySphereTileInfo=new fw({size:[256,256],origin:new Me({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Ee.WebMercator}),spatialReference:Ee.WebMercator,lods:[new eo({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),Oc.WebMercatorAuxiliarySphere=Oc.makeWebMercatorAuxiliarySphere(19);const Ea=Bn(),kB=64;Yve(pA/10);const lFe=Bn();Oc.WebMercatorAuxiliarySphere.getExtent(0,0,0,lFe);Bn([-180,-90,180,90]);const gm=mo(),cFe=mo(),jl=mo(),zl=mo();function uFe(t,e,i=0){const r=t.extent;if(r==null)return!1;if(i===0)return Gwe(r,e);const n=Math.min(r[2]-r[0],r[3]-r[1]);return qwe(r,e,i*n)}function T$(t,e,i,r){UE(gm,i),gm[r]=e[r];const n=Xb(gm,gm,e),s=Xb(cFe,t,e),o=BE(s,n),a=BE(n,n);let l;l=o<=0?e:a<=o?i:_Z(gm,e,O5(n,n,o/a));const u=Xb(gm,t,l);return Math.PI/2-Math.atan(u[2]/Math.sqrt(u[0]*u[0]+u[1]*u[1]))}function dFe(t,e,i){const r=t.extent;if(r==null)return 0;jl[0]=r[0],jl[1]=r[1],jl[2]=i,zl[0]=r[2],zl[1]=r[3],zl[2]=i;let n=1/0,s=1/0;return e[0]<jl[0]?n=T$(e,jl,zl,0):e[0]>zl[0]&&(n=T$(e,zl,jl,0)),e[1]<jl[1]?s=T$(e,jl,zl,1):e[1]>zl[1]&&(s=T$(e,zl,jl,1)),Math.min(n,s)}function pFe(t,e,i){if(t==null)return x4();if(t.spatialReference.isGeographic&&!gI(t.spatialReference))return new j("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const r=Oc.checkUnsupported(t);if(r!=null)return r;if(i==null)return new j("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const n=hFe(t,i);if(n)return n;const s=t.spatialReference;return e==null||s.equals(e)||e.isWGS84&&s.isWebMercator?null:new j("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene")}function hFe(t,e){const i=t.lods,r=i[0].resolution*2**i[0].level,n=[r*t.size[0],r*t.size[1]],s=[t.origin.x,t.origin.y],o=Vwe(e),a=Bn();Oc.computeRowColExtent(o,n,s,a);const l=(a[2]-a[0])*(a[3]-a[1]);if(l>kB){const u=i[0].scale*2**i[0].level;let p=Math.max((o[3]-o[1])/t.size[1],(o[2]-o[0])/t.size[0])*u/r;const h=Math.floor(Math.log(p)/Math.log(10));return p=Math.ceil(p/10**h)*10**h,new j("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(u).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+p.toLocaleString()+".",{level0Scale:u,suggestedLevel0Scale:p,requiredNumRootTiles:l,allowedNumRootTiles:kB})}return null}const fFe=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:pFe,isInsideExtent:uFe,tiltToExtentEdge:dFe},Symbol.toStringTag,{value:"Module"}));function mFe(){return!0}function yFe(){return 0}function gFe(t,e){if(t==null)return x4();const i=t.lods.length-1,r=t.spatialReference,n=gI(r)||t_(r)||i_(r);if(r.isWebMercator){if(!Oc.makeWebMercatorAuxiliarySphere(i).compatibleWith(t))return new j("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!n)return new j("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!Oc.makeGCSWithTileSize(t.spatialReference,t.size[0],i).compatibleWith(t))return t.spatialReference.isWGS84?new j("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new j("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return e==null||t.spatialReference.equals(e)?void 0:new j("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}const vFe=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:gFe,isInsideExtent:mFe,tiltToExtentEdge:yFe},Symbol.toStringTag,{value:"Module"})),bFe={[Bc.Global]:vFe,[Bc.Local]:fFe};function dN(t,e,i,r){return bFe[r].checkIfTileInfoSupportedForViewSR(t,i,e)}function wFe(t,e,i){const r=c0e(t);if(r!=null){if(!ce.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{const n=r.find(s=>dN(s.tileInfo,s.fullExtent,e,i)==null);if(n)return{tileInfo:n.tileInfo,fullExtent:n.fullExtent}}}return{tileInfo:null,fullExtent:null}}ul.NORTH,ul.EAST,ul.SOUTH,ul.WEST;ul.NORTH_EAST,ul.SOUTH_EAST,ul.SOUTH_WEST,ul.NORTH_WEST;function _Fe(t,e){return t!=null&&(e==null||(e===Bc.Local?!t.isGeographic||t.isWGS84||t.wkid===to.CGCS2000:t.isWebMercator||t.isWGS84||t.wkid===to.CGCS2000||t.wkid===to.GCSMARS2000||t.wkid===to.GCSMARS2000_SPHERE||t.wkid===to.GCSMOON2000))}async function SFe(t,e={}){const{basemap:i,view:r}=t;await i.load(e),xFe(i),await TFe(i,r,e),kt(e)}async function $Fe(t,e={}){var o;const{basemap:i,view:r}=t;if(kt(e),!r||"spatialReferenceLocked"in r&&!r.spatialReferenceLocked||(await i.load(e),kt(e),i.baseLayers.length===0))return;const n=i.baseLayers.at(0);if(!l0e(n))return;if(i.spatialReference){if(r.spatialReference.equals(i.spatialReference))return;IB()}await n.load(e),kt(e);const s=(("supportedSpatialReferences"in n?n.supportedSpatialReferences:null)||["tileInfo"in n?(o=n.tileInfo)==null?void 0:o.spatialReference:null]).filter(An);s.length!==0&&s.every(a=>!r.spatialReference.equals(a))&&IB()}function IB(){throw new j("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}function xFe(t){if(t.baseLayers.length===0&&t.referenceLayers.length===0)return;const e=t.baseLayers.concat(t.referenceLayers).toArray().filter(i=>!s0e(i)).map(i=>EFe(i));if(e.length)throw e[0]}function EFe(t){return new j("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:t,operationalLayerType:t.operationalLayerType||"unknown"})}async function TFe(t,e,i){if(t.baseLayers.length===0)return;const r=t.baseLayers.at(0);if(cZ(r)){try{await r.load(i)}catch(n){const s="basemap-compatibility:unknown-error",o="Unknown basemap compatibility error",{name:a=s,message:l=o,details:u}=n;throw new j(a,l,u)}kFe(r,e)}}function kFe(t,e){var l;const i=e.state.viewingMode;if(!i)return;let r,n;if((t==null?void 0:t.type)==="wmts"){const u=wFe(t,e.spatialReference,i);if(u.tileInfo==null)throw new j("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");r=u.tileInfo,n=u.fullExtent}else r=t.tileInfo,n=t.fullExtent;if(r==null)return;if(!_Fe(r.spatialReference,i))throw new j(`basemapgalleryitem:spatial-reference-unsupported-${h9(i)}`,`Basemap spatial reference is unsupported in ${h9(i)} mode`);const s=r.spatialReference.isGeographic,o=(t==null?void 0:t.type)==="vector-tile"?r.getOrCreateCompatible(256,s?1:2):null;if(i===Bc.Global){let u=dN(r,n,null,i);if(u&&(t==null?void 0:t.type)==="vector-tile"&&n!=null&&o&&!dN(o,n,null,i)&&(u=null),u){const p=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new j(`basemapgalleryitem:tiling-scheme-unsupported-${p}-global`,"Basemap tiling scheme is unsupported in global mode",{error:u})}}else if(Oc.checkUnsupported(r))throw new j("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const a=(l=e.basemapTerrain)==null?void 0:l.tilingScheme;if(a&&!a.compatibleWith(r)&&((t==null?void 0:t.type)!=="vector-tile"||!o||!a.compatibleWith(o)))throw new j("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let Ja=class extends Jf(de){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.addHandles([Y(()=>{var i;return(i=this.basemap)==null?void 0:i.loadStatus},e),Y(()=>this.compatibilityFunction,e),Y(()=>{var i;return this.view&&"basemapTerrain"in this.view&&((i=this.view.basemapTerrain)==null?void 0:i.tilingScheme)},e),Y(()=>{var i;return(i=this.view)==null?void 0:i.ready},e),Y(()=>{var i;return(i=this.view)==null?void 0:i.spatialReference},e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return gwe(this.view,this.basemap)}set basemap(e){e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var n;this._cancelRefresh(),this._set("state","loading");const e=(n=this.basemap)==null?void 0:n.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const i=new AbortController,{signal:r}=i;this.compatibilityFunction(this,{signal:r}).then(()=>Zf(()=>!this._spatialReferenceTask.updating,r)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(s=>{hr(s)||(this._set("state","error"),this._set("error",s))}),this._refreshController=i}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};c([d({readOnly:!0})],Ja.prototype,"_spatialReferenceTask",null),c([d()],Ja.prototype,"basemap",null),c([d()],Ja.prototype,"compatibilityFunction",void 0),c([d({readOnly:!0})],Ja.prototype,"error",void 0),c([d({readOnly:!0})],Ja.prototype,"spatialReference",null),c([d({readOnly:!0})],Ja.prototype,"state",void 0),c([d()],Ja.prototype,"view",void 0),Ja=c([k("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],Ja);const Qre=Ja,Xre=ce.ofType(Nd);let Mb=class extends de{constructor(e){super(e),this.basemaps=new Xre}destroy(){this.basemaps.forEach(e=>e.destroy())}get state(){return"ready"}refresh(){}};c([d({type:Xre})],Mb.prototype,"basemaps",void 0),c([d({readOnly:!0})],Mb.prototype,"state",null),Mb=c([k("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],Mb);const ene=Mb,tne=ce.ofType(Nd);let Za=class extends Jr.LoadableMixin(S0(ene)){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new tne,this.filterFunction=null,this.portal=gi.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles([Y(()=>{var e,i,r;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(i=this.portal)==null?void 0:i.basemapGalleryGroupQuery3D,(r=this.portal)==null?void 0:r.user,this.query,this.updateBasemapsCallback]},()=>this.refresh(),Le)])}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach(e=>e.destroy())}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if(this.loadStatus!=="loaded")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,i=new AbortController;this._lastPortalBasemapFetchController=i,this.notifyChange("state");try{const r=await e.fetchBasemaps(this._toQueryString(this.query),{signal:i.signal,include3d:this.viewType==="3d"||void 0});await this._updateBasemaps(r)}catch(r){if(hr(r))throw r;q.getLogger(this).warn(new j("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:r})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(i=>`${i}:${e[i]}`).join(" AND "):e}async _updateBasemaps(e=[]){let i=await this._filterBasemaps(e);i=this.updateBasemapsCallback?this.updateBasemapsCallback(i):i,this.basemaps.removeAll(),this.basemaps.addMany(i)}async _filterBasemaps(e){if(!this.filterFunction)return e;const i=e.map(this.filterFunction),r=await Promise.all(i);return e.filter((n,s)=>r[s])}};c([d({readOnly:!0,type:tne})],Za.prototype,"basemaps",void 0),c([d()],Za.prototype,"filterFunction",void 0),c([d({type:gi})],Za.prototype,"portal",void 0),c([d()],Za.prototype,"query",void 0),c([d({readOnly:!0})],Za.prototype,"state",null),c([d()],Za.prototype,"updateBasemapsCallback",void 0),c([d()],Za.prototype,"viewType",void 0),Za=c([k("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],Za);const Lb=Za,ine=ce.ofType(Qre);function IFe(t){return t&&t.declaredClass==="esri.portal.Portal"}function CFe(t){return t&&!(t instanceof Lb)&&(!!t.portal||!!t.query)}function MFe(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}let sn=class extends Jr{constructor(e){super(e),this._loadingProjectionEngine=!1,this._originalActiveBasemap=null,this.includeCurrentBasemap=!1,this.items=new ine,this.source=new Lb,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([Y(()=>{var i;return[this.view,(i=this.view)==null?void 0:i.ready]},()=>{var i;(i=this.view)!=null&&i.ready&&(this._originalActiveBasemap=this.activeBasemap)},{initial:!0}),Y(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),Y(()=>[this._effectiveIncludeCurrentBasemap,this._originalActiveBasemap],e),bs(()=>{var i;return(i=this.source)==null?void 0:i.basemaps},"change",e,{onListenerAdd:e}),Gn(()=>this.view,()=>{var i;this.source instanceof Lb&&(this.source.viewType=(i=this.view)==null?void 0:i.type)},{once:!0})])}destroy(){var i;const e=this.source.basemaps.find(r=>r===this.activeBasemap);e&&this.source.basemaps.remove(e),(i=this.source)==null||i.destroy()}get _effectiveIncludeCurrentBasemap(){var e;return this.includeCurrentBasemap&&((e=this.source)==null?void 0:e.basemaps.every(i=>i.loadStatus!=="loading"))}get activeBasemap(){var e,i;return((i=(e=this.view)==null?void 0:e.map)==null?void 0:i.basemap)??null}set activeBasemap(e){var s,o;const i=this.view;if(!(i!=null&&i.map))return;const r=typeof e=="string"?Nd.fromId(e):e;if(!r||!i.ready)return i.map.basemap=r,void this._clearOverride("activeBasemap");const n=r.spatialReference||((o=(s=this.items)==null?void 0:s.find(a=>this.basemapEquals(r,a.basemap)))==null?void 0:o.spatialReference);if(n&&"spatialReferenceLocked"in i&&!i.spatialReferenceLocked){const a=i.spatialReference;if(n!=null&&!ti(a,n)&&!El(i.spatialReference,n)&&!fp())return this._override("activeBasemap",r),this._loadingProjectionEngine=!0,void Uc().then(()=>{this._get("activeBasemap")===e&&(i.map.basemap=e,i.spatialReference=n,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});i.map.basemap=r,this._clearOverride("activeBasemap"),n==null||ti(i.spatialReference,n)||(i.spatialReference=n)}else i.map.basemap=r,this._clearOverride("activeBasemap")}get activeBasemapIndex(){const{state:e,activeBasemap:i}=this;return e!=="ready"?-1:this._findBasemapIndex(i)}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?SFe:$Fe}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||ce.isCollection(e)?new ene({basemaps:e}):IFe(e)?new Lb({portal:e}):CFe(e)?new Lb(e):MFe(e)?e:null}get state(){var e;return(e=this.view)!=null&&e.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,i){return mwe(e,i)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(Jr.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:i}=this,r=i.findIndex(n=>n.basemap===e);return r===-1?i.findIndex(n=>this.basemapEquals(n.basemap,e)):r}_recreateItems(){var a;const e=(a=this.source)==null?void 0:a.basemaps,{view:i,compatibilityFunction:r}=this,n=new Map(this.items.map(l=>[l.basemap,l]));function s(l){const u=n.get(l);return u?(n.delete(l),u):new Qre({basemap:l,compatibilityFunction:r,view:i})}this.items.removeAll(),e&&this.items.addMany(e.map(s));const o=this._findBasemapIndex(this._originalActiveBasemap)!==-1;this._effectiveIncludeCurrentBasemap&&!o&&this._originalActiveBasemap!=null&&this.items.unshift(s(this._originalActiveBasemap)),n.forEach(l=>l.destroy())}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};c([d()],sn.prototype,"_effectiveIncludeCurrentBasemap",null),c([d()],sn.prototype,"_loadingProjectionEngine",void 0),c([d()],sn.prototype,"_originalActiveBasemap",void 0),c([d()],sn.prototype,"activeBasemap",null),c([d({readOnly:!0})],sn.prototype,"activeBasemapIndex",null),c([d()],sn.prototype,"compatibilityFunction",null),c([d()],sn.prototype,"includeCurrentBasemap",void 0),c([d({readOnly:!0,type:ine})],sn.prototype,"items",void 0),c([d()],sn.prototype,"source",void 0),c([qe("source")],sn.prototype,"castSource",null),c([d({readOnly:!0})],sn.prototype,"state",null),c([d()],sn.prototype,"view",void 0),sn=c([k("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],sn);const LFe=sn,Zn="esri-basemap-gallery",wn={base:Zn,widgetIcon:Re.basemap,sourceLoading:`${Zn}--source-loading`,layoutGrid:`${Zn}--grid`,narrowItems:`${Zn}--narrow-items`,loader:`${Zn}__loader`,item:`${Zn}__item`,itemContainer:`${Zn}__item-container`,itemContent:`${Zn}__item-content`,itemTitle:`${Zn}__item-title`,itemTagsContainer:`${Zn}__item-tags-container`,itemThumbnail:`${Zn}__item-thumbnail`,selectedItem:`${Zn}__item--selected`,itemError:`${Zn}__item--error`},dL={small:200,default:280,wide:420};let gr=class extends yn{constructor(e,i){super(e,i),this.disabled=!1,this.headingLevel=2,this.iconClass=wn.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new LFe,this._focusBasemapItemEnabled=!1,this._container=null,this._width=0,this._onContainerCreated=r=>{this._container=r}}initialize(){this.addHandles([gOe(()=>this._container,({contentRect:e})=>{this._width=e.width}),Gn(()=>this.source,()=>this.viewModel.load(),{sync:!0,initial:!0,once:!0})])}loadDependencies(){return I_({scrim:()=>Z(()=>import("./calcite-scrim-_Sd30jQr.js"),__vite__mapDeps([230,231,213,214,215,218,219])),chip:()=>Z(()=>import("./calcite-chip-x07UbXSQ.js"),__vite__mapDeps([232,233,215,212,213,214,210,216,217]))})}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(e){this.viewModel.activeBasemap=e}get includeCurrentBasemap(){return this.viewModel.includeCurrentBasemap}set includeCurrentBasemap(e){this.viewModel.includeCurrentBasemap=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get source(){return this.viewModel.source}set source(e){this.viewModel.source=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.source.state==="loading",i=this.disabled||this.viewModel.state==="disabled",r=this.viewModel.items,n={[wn.sourceLoading]:e,[oe.disabled]:i},s=this._width;s<=dL.small||s>=dL.wide?n[wn.layoutGrid]=!0:s<dL.default&&(n[wn.narrowItems]=!0);const o=e?x("div",{class:wn.loader,key:"loader"}):null,a=e?null:r.length>0?x("ul",{"aria-disabled":this.disabled,"aria-label":this.label,bind:this,class:wn.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},r.map((l,u)=>this._renderBasemapGalleryItem(l,u)).toArray()):x("div",{class:oe.empty,key:"empty-message"},x(Vd,{level:this.headingLevel},this.messages.noBasemaps));return x("div",{afterCreate:this._onContainerCreated,class:this.classes(wn.base,oe.widget,oe.panelHeightOnly,n),key:"container"},this._width===0?null:[o,a])}_getRoundRobinIndex(e,i){return(e+i)%i}_handleKeyDown(e){const{key:i}=e;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;e.preventDefault();const{items:r,activeBasemapIndex:n}=this.viewModel,s=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(n-1,-1),r.length):this._getRoundRobinIndex(n+1,r.length),o=r.at(s);(o==null?void 0:o.state)==="ready"&&(this.viewModel.activeBasemap=o.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(e){this._focusBasemapItemEnabled&&e.tabIndex===0&&(e.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(e){const i=e.currentTarget["data-item"];i.state==="ready"&&(this.viewModel.activeBasemap=i.basemap)}_renderBasemapGalleryItem(e,i){var v,w;const r=Swe(e.basemap)||it("esri/themes/base/images/basemap-toggle-64.svg"),n=e.basemap.title,s=(v=e.basemap.portalItem)==null?void 0:v.snippet,o=((w=e.error)==null?void 0:w.message)||s||n,{viewModel:{state:a,activeBasemapIndex:l}}=this,u=this.disabled||a==="disabled",p=l===i,h=p||l===-1&&i===0?0:-1,m=a==="loading",y={[wn.selectedItem]:p,[wn.itemError]:e.state==="error"},g=`basemapgallery-item-${e.uid}`;return x("li",{afterUpdate:this._focusBasemapItem,"aria-checked":p.toString(),"aria-disabled":u.toString(),"aria-labelledby":g,bind:this,class:this.classes(wn.item,y),"data-item":e,key:e.uid,onclick:this._handleClick,onkeydown:this._handleClick,role:"radio",tabIndex:h,title:o},x("img",{alt:"",class:wn.itemThumbnail,src:r}),x("div",{class:wn.itemContent,key:"content"},x("div",{class:wn.itemTitle,key:"title"},x("span",{id:g},n)),pwe(e.basemap)?this._renderTags(e.basemap):null),e.state==="loading"||p&&m?x("calcite-scrim",null,x("span",{"aria-hidden":"true",class:oe.loaderAnimation,key:"loader",role:"presentation"})):null)}_renderTags(e){return x("div",{class:wn.itemTagsContainer,key:"tag"},this._render3DTag(),hwe(e)?this._renderBetaTag():null)}_render3DTag(){const{messages:e}=this;return x("calcite-chip",{key:"tag-3d",scale:"s",value:e.tag3D},this.messages.tag3D)}_renderBetaTag(){const{messages:e}=this;return x("calcite-chip",{appearance:"outline-fill",key:"tag-beta",scale:"s",value:e.tagBeta},this.messages.tagBeta)}};c([d()],gr.prototype,"activeBasemap",null),c([d()],gr.prototype,"disabled",void 0),c([d()],gr.prototype,"headingLevel",void 0),c([d()],gr.prototype,"iconClass",void 0),c([d()],gr.prototype,"icon",void 0),c([d()],gr.prototype,"label",null),c([d(),hn("esri/widgets/BasemapGallery/t9n/BasemapGallery")],gr.prototype,"messages",void 0),c([d()],gr.prototype,"source",null),c([d()],gr.prototype,"view",null),c([d()],gr.prototype,"viewModel",void 0),c([d()],gr.prototype,"_focusBasemapItemEnabled",void 0),c([d()],gr.prototype,"_container",void 0),c([d()],gr.prototype,"_width",void 0),c([ia()],gr.prototype,"_handleClick",null),gr=c([k("esri.widgets.BasemapGallery")],gr);const OFe=gr;var pN;let Wu=pN=class extends c_{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new pN({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};c([d()],Wu.prototype,"displayValueEnabled",void 0),c([d()],Wu.prototype,"max",void 0),c([d()],Wu.prototype,"min",void 0),c([d()],Wu.prototype,"step",void 0),c([d()],Wu.prototype,"value",void 0),Wu=pN=c([k("esri.support.Action.ActionSlider")],Wu);const AFe=Wu,rne={hide:"hide",hideChildren:"hide-children"};function FT(t){if(t)return t.listMode!=null?t.listMode:void 0}function PFe(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function RFe(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function NFe(t){if(!t)return"inherited";const e=UFe(E4(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function nne(t){if(t&&(!("type"in t)||t.type!=="wmts")&&t.listMode!==rne.hideChildren)return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function DFe(t){const e=(t!=null&&t.layer&&E4(t.layer)?t.layer.layer:void 0)??(t==null?void 0:t.layer);return!!e&&(BFe(e)??!0)}function FFe(t){return FT(t)!==rne.hide}function jFe(t,e){if(!t||e==null||isNaN(e))return!1;const i=PFe(t),r=RFe(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,s=r!=null&&!isNaN(r)&&r>0&&e<r;return n||s}function sne(t,e){t==null||t.sort((i,r)=>{const n="uid"in i?e.indexOf(i.uid):-1,s="uid"in r?e.indexOf(r.uid):-1;return n>s?-1:n<s?1:0})}function zFe(t,e){const i=t==null?void 0:t.layer;if(!i)return;const r=nne(i);if(!r)return;let n;r==="layers"&&"layers"in i?n=i.layers:r==="sublayers"&&"sublayers"in i&&(n=i.sublayers),sne(n,e)}function CB(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function pL(t,e){var r;const i=(r=t.layer)==null?void 0:r.uid;return i!=null?e.find(n=>{var s;return((s=n.layer)==null?void 0:s.uid)===i}):null}function VFe(t){const e=E4(t)?t:null,i=t==null?void 0:t.parent,r=i!=null&&"type"in i&&i.type==="map-image"?e==null?void 0:e.source:null,n="";return r&&i?{layer:i,title:n,sublayerIds:[r.mapLayerId]}:{layer:t,title:n}}function E4(t){return t!=null&&"layer"in t&&t.layer!=null}function UFe(t){const e=one(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function BFe(t){const e=one(t);return e!=null&&"supportsDynamicLayers"in e?e.supportsDynamicLayers:void 0}function one(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}function MB(t){return t&&typeof t.render=="function"}function AWe(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const ane="esri-layer-list-panel",vv=`${ane}__content`,Vl={base:ane,content:vv,contentLegend:`${vv}--legend`,contentString:`${vv}--string`,contentElement:`${vv}--html-element`,contentWidget:`${vv}--widget`},GFe="legends";let qs=class extends Jf(yn){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(Y(()=>this.content,e=>this._createLegend(e),Le))}destroy(){this._legend=wt(this._legend)}get className(){const{image:e}=this,i=this._getFirstWidget();return this._get("className")||(!e&&i?i.iconClass??"":"")}set className(e){this._override("className",e)}get disabled(){var n;const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((n=i.activeLayerInfos)!=null&&n.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||((e==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return x("div",{class:Vl.base},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r}=this;return!e||r?null:e==="legend"&&i?x("div",{class:this.classes(Vl.content,Vl.contentLegend),key:i},i.render()):typeof e=="string"?x("div",{class:this.classes(Vl.content,Vl.contentString),innerHTML:e,key:e}):MB(e)?x("div",{class:this.classes(Vl.content,Vl.contentWidget),key:e},e.render()):e instanceof HTMLElement?x("div",{afterCreate:this._attachToNode,bind:e,class:this.classes(Vl.content,Vl.contentElement),key:e}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:i,view:r}=e;return i&&r?{view:r,layerInfos:[VFe(i)]}:{}}async _createLegend(e){if(!this._hasLegend(e)||this._legend)return;const{default:i}=await Z(()=>Promise.resolve().then(()=>h6e),void 0),{listItem:r}=this,n=new i(this._getLegendOptions());this._legend=n,this.notifyChange("className"),this.notifyChange("title");const s=Y(()=>{var o,a;return[r==null?void 0:r.view,r==null?void 0:r.layer,(o=r==null?void 0:r.layer)==null?void 0:o.source,(a=r==null?void 0:r.layer)==null?void 0:a.parent]},()=>this._updateLegend(n),Le);this.addHandles(s,GFe),this.scheduleRender()}_hasLegend(e){const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:MB(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let i=null;return e.some(r=>{const n=this._getWidget(r);return n&&(i=n),!!n}),i}return this._getWidget(e)}};c([d()],qs.prototype,"_legend",void 0),c([d()],qs.prototype,"className",null),c([d()],qs.prototype,"content",void 0),c([d()],qs.prototype,"disabled",null),c([d()],qs.prototype,"image",void 0),c([d()],qs.prototype,"listItem",void 0),c([d()],qs.prototype,"title",null),c([d()],qs.prototype,"open",void 0),c([d()],qs.prototype,"visible",void 0),qs=c([k("esri.widgets.LayerList.ListItemPanel")],qs);const lne=qs;var Ob;const HFe=ce.ofType({key:"type",defaultKeyValue:"button",base:c_,typeMap:{button:pQ,toggle:hQ,slider:AFe}}),cne=ce.ofType(HFe),k$="layer",hL="child-list-mode",qFe="hide",WFe="esri.widgets.LayerList.ListItem";let It=Ob=class extends Jf(de){constructor(t){super(t),this.actionsSections=new cne,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(ce.ofType(Ob)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.addHandles([Y(()=>this.layer,t=>this._watchLayerProperties(t),Le),Y(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),Le),Y(()=>this.view,t=>this._updateChildrenView(t),Le),Y(()=>this.panel,t=>this._setListItemOnPanel(t),Le),Y(()=>[this.layer,this.view],()=>this._getLayerView(),Le)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}castPanel(t){var e;return(e=this.panel)!=null&&e.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new lne(t):null}get title(){const t=Hr(this,"layer.layer");return(!t||t&&Hr(this,"layer.layer.loaded"))&&Hr(this,"layer.title")||Hr(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){var t;return!jFe(this.layer,(t=this.view)==null?void 0:t.scale)}get visibilityMode(){return NFe(this.layer)}clone(){return new Ob({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_addChildren(t){if(this.removeHandles(hL),this.children.removeAll(),!t)return;t.forEach(i=>{this.addHandles(Y(()=>i.listMode,()=>this._addChildren(t)),hL)});const e=t.filter(i=>FT(i)!==qFe);this.children.addMany(this._makeChildren(e))}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>{this._addChildren(t)}),k$)}_initializeChildLayers(t){this._addChildren(t),this._watchSublayerChanges(t)}_makeChildren(t){return t.map(e=>FFe(e)?new Ob({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(An).reverse()}_watchLayerProperties(t){if(this.removeHandles(k$),this.removeHandles(hL),!t)return;if(this.addHandles(Y(()=>t.listMode,()=>this._watchLayerProperties(t)),k$),FT(t)==="hide-children")return void this.children.removeAll();const e=nne(t);e&&this.addHandles(Y(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},Le),k$)}async _getLayerView(){const{layer:t,view:e}=this;if(t&&e)try{const i=await e.whenLayerView(t);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};c([d({type:cne})],It.prototype,"actionsSections",void 0),c([d()],It.prototype,"actionsOpen",void 0),c([d()],It.prototype,"checkPublishStatusEnabled",void 0),c([d({type:ce})],It.prototype,"children",void 0),c([d()],It.prototype,"childrenSortable",void 0),c([d({readOnly:!0})],It.prototype,"connectionStatus",null),c([d({readOnly:!0})],It.prototype,"error",null),c([d()],It.prototype,"hidden",void 0),c([d({readOnly:!0})],It.prototype,"incompatible",null),c([d()],It.prototype,"layer",void 0),c([d({readOnly:!0})],It.prototype,"layerView",void 0),c([d()],It.prototype,"listItemCreatedFunction",void 0),c([d()],It.prototype,"open",void 0),c([d({type:lne})],It.prototype,"panel",void 0),c([qe("panel")],It.prototype,"castPanel",null),c([d()],It.prototype,"parent",void 0),c([d()],It.prototype,"sortable",void 0),c([d()],It.prototype,"title",null),c([d({readOnly:!0})],It.prototype,"publishing",null),c([d({readOnly:!0})],It.prototype,"updating",null),c([d()],It.prototype,"view",void 0),c([d()],It.prototype,"visible",null),c([d({readOnly:!0})],It.prototype,"visibleAtCurrentScale",null),c([d({readOnly:!0})],It.prototype,"visibilityMode",null),It=Ob=c([k(WFe)],It);const T4=It,Io={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},JFe="hide",une=ce.ofType(T4);let Ju=class extends Il.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new une,this.view=null}initialize(){this.addHandles([Y(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),Le),Y(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],Io.view)}destroy(){this.view=null,this.operationalItems.removeAll()}get state(){const{view:e}=this;return e!=null&&e.ready?"ready":e?"loading":"disabled"}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,r,n){var y,g;const s=e==null?void 0:e.layer;if(!s)return;const o=(g=(y=this.view)==null?void 0:y.map)==null?void 0:g.layers,a=i?CB(i):o,l=r?CB(r):o;if(!a||!l)return;const{operationalItems:u}=this,p=(i==null?void 0:i.children)||u,h=(r==null?void 0:r.children)||u,m=l.length-n;e.parent=r||null,p.includes(e)&&p.remove(e),a.includes(s)&&a.remove(s),h.includes(e)||h.add(e,m),l.includes(s)||l.add(s,m)}_createLayerViewHandles(e){this.removeHandles(Io.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Io.layerViews)}_createMapLayerHandles(e){this.removeHandles(Io.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Io.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:n}=this;return new T4({checkPublishStatusEnabled:n,layer:e,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter(i=>FT(i)!==JFe)}_watchLayersListMode(e){this.removeHandles(Io.layerListMode),e&&e.forEach(i=>{"listMode"in i&&this.addHandles(Y(()=>i.listMode,()=>this._compileList()),Io.layerListMode)})}_compileList(){var r,n;const e=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.layers;this._watchLayersListMode(e);const i=this._getViewableLayers(e);i!=null&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(r=>{i.find(n=>n.layer===r)||i.add(this._createListItem(r))})}_removeItems(e){const{operationalItems:i}=this,r=[];i.forEach(n=>{n&&e&&e.includes(n.layer)||r.push(n)}),i.removeMany(r)}_sortItems(e){const{operationalItems:i}=this;i.sort((r,n)=>{const s=e.indexOf(r.layer),o=e.indexOf(n.layer);return s>o?-1:s<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([Io.mapLayers,Io.layerViews,Io.viewLayers]),this._recompileList(),e&&e.ready&&this.addHandles([Y(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),Le),Y(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),Le)],Io.viewLayers)}};c([d()],Ju.prototype,"checkPublishStatusEnabled",void 0),c([d()],Ju.prototype,"listItemCreatedFunction",void 0),c([d({type:une})],Ju.prototype,"operationalItems",void 0),c([d({readOnly:!0})],Ju.prototype,"state",null),c([d()],Ju.prototype,"view",void 0),Ju=c([k("esri.widgets.LayerList.LayerListViewModel")],Ju);const dne=Ju;function LB(t,e,i){t.splice(i,0,t.splice(e,1)[0])}const ZFe=ce.ofType(T4),OB="data-sort-filter",AB="data-layer-uid",YFe="layerUid",Ut="esri-layer-list",Wt=`${Ut}__item`,_e={base:Ut,widgetIcon:Re.layers,newUI:`${Ut}--new-ui`,noItems:`${Ut}__no-items`,list:`${Ut}__list`,listRoot:`${Ut}__list--root`,listExclusive:`${Ut}__list--exclusive`,listEmpty:`${Ut}__list--empty`,listEmptyState:`${Ut}__list-empty-state`,listEmptyStateDragEnabled:`${Ut}__list-empty-state--drag-enabled`,listInherited:`${Ut}__list--inherited`,listIndependent:`${Ut}__list--independent`,item:Wt,itemContent:`${Wt}-content`,itemMessage:`${Wt}--has-message`,itemInvisible:`${Wt}--invisible`,itemInvisibleAtScale:`${Wt}--invisible-at-scale`,itemChildren:`${Wt}--has-children`,itemSelectable:`${Wt}--selectable`,itemContainer:`${Wt}-container`,actionsMenu:`${Wt}-actions-menu`,actionsMenuItem:`${Wt}-actions-menu-item`,actionsMenuItemActive:`${Wt}-actions-menu-item--active`,actions:`${Wt}-actions`,actionsList:`${Wt}-actions-list`,action:`${Wt}-action`,actionIcon:`${Wt}-action-icon`,actionImage:`${Wt}-action-image`,actionTitle:`${Wt}-action-title`,actionToggle:`${Ut}__action-toggle`,actionToggleOn:`${Ut}__action-toggle--on`,label:`${Wt}-label`,message:`${Wt}-message`,title:`${Wt}-title`,statusIndicator:`${Ut}__status-indicator`,publishing:`${Ut}__publishing`,updating:`${Ut}__updating`,connectionStatus:`${Ut}__connection-status`,connectionStatusConnected:`${Ut}__connection-status--connected`,toggleVisible:`${Wt}-toggle`,toggleVisibleIcon:`${Wt}-toggle-icon`,toggleIcon:`${Wt}-toggle-icon`,radioIcon:`${Wt}-radio-icon`,childToggle:`${Ut}__child-toggle`,childToggleOpen:`${Ut}__child-toggle--open`,childOpened:`${Ut}__child-toggle-icon--opened`,childClosed:`${Ut}__child-toggle-icon--closed`,childClosed_RTL:`${Ut}__child-toggle-icon--closed-rtl`,sortableChosen:`${Ut}--chosen`},fu={actions:"actions",actionSection:"action-section",items:"items"},bv={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function pne(t){const{actionsOpen:e,children:i}=t;e&&(t.actionsOpen=!1),i.forEach(r=>pne(r))}const fL="root",PB={statusIndicators:!0,errors:!1};let Ct=class extends yn{constructor(e,i){super(e,i),this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._tooltipReferenceMap=new Map,this.visibleItems=null,this.iconClass=_e.widgetIcon,this.icon=null,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.selectionEnabled=!1,this.selectedItems=new ZFe,this.style="classic",this.viewModel=new dne,this.visibleElements={...PB},this._onSortableSort=({to:r,from:n,item:s,newIndex:o})=>{n&&r&&(n===r?this._sortLayers(this._sortableMap.get(n.dataset.group)):this._moveLayerFromChildList({to:r,from:n,item:s,newIndex:o}))},this._sortableCanSort=(r,n)=>!(!r.el.dataset.group||!n.el.dataset.group),this._sortableCanPull=(r,n,s)=>{const{listItemCanGiveFunction:o}=this,a={selected:tr(s),from:tr(n.el),to:tr(r.el)};return!this._sortableCanSort(r,n)||typeof o!="function"||o.call(null,a)},this._sortableCanPut=(r,n,s)=>{const{listItemCanReceiveFunction:o}=this,a={selected:tr(s),from:tr(n.el),to:tr(r.el)};return!this._sortableCanSort(r,n)||typeof o!="function"||o.call(null,a)},this._onSortableEnd=({oldIndex:r,from:n,to:s,item:o})=>{n!==s&&n.insertBefore(o,n.children[r])}}initialize(){const e=this.operationalItems;this._setVisibleItems(e),this.addHandles([bs(()=>this.operationalItems,"change",()=>this._itemsChanged(e)),Y(()=>this.visibleElements,()=>this._itemsChanged(e)),Y(()=>this.selectionEnabled,()=>this._toggleAllSorting(),Le)])}loadDependencies(){return I_({icon:()=>Z(()=>import("./calcite-icon-CWBBFVdI.js"),__vite__mapDeps([220,217,215])),tooltip:()=>Z(()=>import("./calcite-tooltip-DBUo9Rpf.js"),__vite__mapDeps([229,223,224,219,225]))})}destroy(){this._destroySortables(),this._tooltipReferenceMap.clear()}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...PB,...e}}triggerAction(e,i){return this.viewModel.triggerAction(e,i)}render(){var a;const{visibleItems:e,style:i}=this,r=(a=this.viewModel)==null?void 0:a.state,n={[_e.newUI]:i==="modern",[oe.hidden]:r==="loading",[oe.disabled]:r==="disabled"},s=this._renderItemTooltips(),o=this._renderItems();return x("div",{class:this.classes(_e.base,oe.widget,oe.panel,n)},e.length?[s,o]:this._renderNoItems())}_renderItemTooltip(e){const{_tooltipReferenceMap:i,messages:r}=this;return e?x("calcite-tooltip",{referenceElement:i.get(e.uid)},r.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){const{incompatible:i,children:r}=e;return[i?this._renderItemTooltip(e):null,...!i&&r?r.toArray().map(n=>this._renderItemTooltipNodes(n)):[]]}_renderItemTooltips(){return this.visibleItems.toArray().map(e=>this._renderItemTooltipNodes(e))??[]}_renderNoItems(){return x("div",{class:_e.noItems},this.messages.noItemsToDisplay)}_renderItems(){const{visibleItems:e,selectionEnabled:i,messages:r}=this;return x("ul",{afterCreate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,afterUpdate:this._sortNodeCreated,"aria-label":r.widgetLabel,bind:this,class:this.classes(_e.list,_e.listRoot,_e.listIndependent),"data-group":fL,role:i?"listbox":void 0},e.map(n=>this._renderItem(n,null)).toArray())}_renderActionsMenuIcon(e,i){const{messagesCommon:r}=this,n={[_e.actionsMenuItemActive]:e.actionsOpen};return x("div",{"aria-controls":i,"aria-label":r.options,bind:this,class:this.classes(_e.actionsMenuItem,n),"data-item":e,key:"actions-menu-toggle",onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,role:"button",tabIndex:0,title:r.options},x("span",{"aria-hidden":"true",class:Re.handleHorizontal}))}_renderActionsMenu(e,i,r,n){const{panel:s}=e,o=s&&s.visible?this._renderPanelButton(s):null,a=r===1&&this._getSingleActionButton(i),l=a?this._renderAction({item:e,action:a,singleAction:!0}):null,u=!a&&r?this._renderActionsMenuIcon(e,n):null;return u||o||a?x("div",{class:_e.actionsMenu,key:"actions-menu"},o,l,u):null}_renderChildList(e,i){var m;const{selectionEnabled:r}=this,{visibilityMode:n,children:s}=e,o=this._hasChildren(e),a=!o&&r&&((m=e.layer)==null?void 0:m.type)==="group",{exclusive:l,inherited:u}=bv,p={[_e.listEmpty]:!o,[_e.listExclusive]:n===l,[_e.listInherited]:n===u,[_e.listIndependent]:n!==u&&n!==l},h={[_e.listEmptyState]:!0,[_e.listEmptyStateDragEnabled]:r};return o||a?o?x("ul",{afterCreate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,afterUpdate:this._sortNodeCreated,"aria-expanded":e.open?"true":"false",bind:this,class:this.classes(_e.list,p),"data-group":e.uid,"data-item":e,hidden:!e.open&&!a||null,id:i,key:"list-items",role:r?"listbox":n===l?"radiogroup":"group"},s==null?void 0:s.map(y=>this._renderItem(y,e)).toArray()):x("div",{afterCreate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,afterUpdate:this._sortNodeCreated,bind:this,class:this.classes(h),"data-group":e.uid,"data-item":e,id:i,key:"list-items"},this.messages.noItemsToDisplay):null}_renderChildrenToggle(e,i){const{messagesCommon:r}=this,n=this._hasChildren(e),s={[_e.childToggleOpen]:e.open},o=e.open?r.collapse:r.expand;return n?x("span",{"aria-controls":i,"aria-label":o,class:this.classes(_e.childToggle,s),"data-item":e,key:"toggle-children",onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,role:"button",tabIndex:0,title:o},x("span",{"aria-hidden":"true",class:this.classes(_e.childClosed,Re.rightTriangleArrow)}),x("span",{"aria-hidden":"true",class:this.classes(_e.childOpened,Re.downArrow)}),x("span",{"aria-hidden":"true",class:this.classes(_e.childClosed_RTL,Re.leftTriangleArrow)})):null}_renderItemMessage(e){return e.error?x("div",{class:_e.message,key:"esri-layer-list__error",role:"alert"},x("span",{"aria-hidden":"true",class:Re.noticeTriangle}),this.messages.layerError):e.incompatible?x("div",{class:_e.message,key:"esri-layer-list__incompatible",role:"alert"},x("span",{afterCreate:i=>this._setTooltipReference(i,e),"aria-hidden":"true",bind:this,class:Re.noticeTriangle,tabIndex:0}),this.messages.layerIncompatible):null}_renderItemContent(e,i,r){const{id:n}=this,s=`${n}_${e.uid}`,o=`${s}_actions`,a=`${s}__list`,{panel:l}=e,u=this._filterActions(e.actionsSections),p=this._countActions(u);return[x("div",{class:_e.itemContainer,key:"list-item-container"},this._renderChildrenToggle(e,a),this._renderLabel(e,i,r),this._renderActionsMenu(e,u,p,o)),this._renderItemMessage(e),p?this._renderActionsSections(e,u,o):null,l&&l.open&&!l.disabled?l.render():null,this._renderChildList(e,a)]}_renderItem(e,i){var h;const{style:r,id:n,selectionEnabled:s,selectedItems:o}=this,a=`${`${n}_${e.uid}`}__title`,l=this._hasMessage(e),u=this._hasChildren(e),p={[_e.itemChildren]:u,[_e.itemMessage]:!!l,[_e.itemInvisible]:r==="modern"&&!e.visible,[_e.itemInvisibleAtScale]:!e.visibleAtCurrentScale,[_e.itemSelectable]:s};if(s){const m={[AB]:(h=e.layer)==null?void 0:h.uid,[OB]:(!e.sortable).toString()};return x("li",{afterCreate:this._focusListItem,afterUpdate:this._focusListItem,"aria-labelledby":a,"aria-selected":pL(e,o)?"true":"false",bind:this,class:this.classes(_e.item,p),"data-group":i?i.uid:fL,"data-item":e,key:`item-with-selection-${e.uid}`,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,role:"option",tabIndex:0,...m},this._renderItemContent(e,i,a))}return x("li",{afterCreate:this._focusListItem,afterUpdate:this._focusListItem,"aria-labelledby":a,bind:this,class:this.classes(_e.item,p),key:`item-no-selection-${e.uid}`},this._renderItemContent(e,i,a))}_renderConnectionIcon(e){const{connectionStatus:i}=e;return i!=null?x("calcite-icon",{icon:i==="connected"?"beacon":"offline",scale:"s"}):null}_renderItemStatus(e,i){const{visibleElements:r}=this;if(!r.statusIndicators)return null;const{connectionStatus:n,publishing:s,updating:o}=e,a=o&&!i,l=!!n;return x("span",{class:this.classes({[_e.statusIndicator]:!0,[_e.publishing]:s,[_e.updating]:a,[_e.connectionStatus]:l,[_e.connectionStatusConnected]:l&&n==="connected"}),key:"layer-item-status"},this._renderConnectionIcon(e))}_renderItemTitle(e,i){const{messages:r}=this;if(!e)return null;const n=e.title||r.untitledLayer,s=e.visibleAtCurrentScale?n:`${n} (${r.layerInvisibleAtScale})`;return x("span",{"aria-label":s,class:_e.title,id:i,key:"layer-title-container",title:s},n)}_renderItemToggleIcon({visible:e},i){const{style:r}=this,{exclusive:n}=bv,s=i==null?void 0:i.visibilityMode,o=r==="modern",a=s===n,l={[_e.toggleVisibleIcon]:o,[_e.toggleIcon]:o&&!a,[_e.radioIcon]:o&&a,[Re.radioChecked]:a&&e,[Re.radioUnchecked]:a&&!e,[Re.visible]:!a&&e,[Re.nonVisible]:!a&&!e};return x("span",{"aria-hidden":"true",class:this.classes(l),key:"item-toggle-icon"})}_renderItemToggle(e,i,r){const{selectionEnabled:n,messages:s}=this,{exclusive:o}=bv,a=i==null?void 0:i.visibilityMode,l=a===o?"radio":"switch";return x("span",n?{"aria-checked":e.visible?"true":"false","aria-labelledby":r,bind:this,class:_e.toggleVisible,"data-item":e,"data-parent-visibility":a,key:"item-toggle-selection-enabled",onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,role:l,tabIndex:0,title:s.layerVisibility}:{class:_e.toggleVisible,key:"item-toggle"},this._renderItemToggleIcon(e,i))}_renderLabel(e,i,r){const{selectionEnabled:n,style:s,messages:o}=this,{inherited:a,exclusive:l}=bv,u=i==null?void 0:i.visibilityMode,p=u===l?"radio":"switch",h=this._renderItemTitle(e,r),m=this._renderItemStatus(e,i),y=this._renderItemToggle(e,i,r),g=s==="modern"?[h,m,y]:[y,h,m],v=x("div",n?{class:_e.label,key:`item-label-no-selection-${e.uid}`}:{"aria-checked":e.visible?"true":"false","aria-labelledby":r,bind:this,class:_e.label,"data-item":e,"data-parent-visibility":u,key:`item-label-with-selection-${e.uid}`,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,role:p,tabIndex:0,title:o.layerVisibility},g);return u===a||e.error?x("div",{class:_e.label,key:`item-label-container-${e.uid}`},this._renderItemTitle(e,r),this._renderItemStatus(e,i)):v}_renderPanelButton(e){const{className:i,open:r,title:n,image:s,disabled:o}=e,a=s||i?i:Re.defaultAction,l=this._getIconImageStyles(e),u={[_e.actionsMenuItemActive]:r&&!o},p={[_e.actionImage]:!!l["background-image"],[oe.disabledElement]:e.disabled};return a&&(p[a]=!!a),x("div",{"aria-disabled":e.disabled.toString(),"aria-label":n,bind:this,class:this.classes(_e.actionsMenuItem,u),"data-panel":e,key:`panel-${e.uid}`,onclick:this._triggerPanel,onkeydown:this._triggerPanel,role:"button",tabIndex:e.disabled?void 0:0,title:n},x("span",{class:this.classes(p),styles:l}))}_renderActionsSections(e,i,r){const n=i.toArray().map((s,o)=>x("ul",{class:_e.actionsList,key:`${e}-action-section-${o}`},this._renderActionSection(e,s)));return x("div",{"aria-expanded":e.actionsOpen?"true":"false",class:_e.actions,hidden:!e.actionsOpen||null,id:r,key:"actions-section",role:"group"},n)}_renderActionSection(e,i){return(i&&i.toArray()).map(r=>this._renderAction({item:e,action:r}))}_renderActionIcon(e){const{active:i,className:r}=e,n=this._getIconImageStyles(e),s=e.type!=="button"||e.image||r?r:Re.defaultAction,o={[_e.actionImage]:!i&&!!n["background-image"],[Re.loadingIndicator]:i,[oe.rotating]:i};return s&&!i&&(o[s]=!0),x("span",{"aria-hidden":"true",class:this.classes(_e.actionIcon,o),key:"action-icon",styles:n})}_renderActionTitle(e,i){return i?null:x("span",{class:_e.actionTitle,key:"action-title"},e)}_renderAction(e){const{item:i,action:r,singleAction:n}=e,{active:s,disabled:o,title:a}=r,l={[_e.actionsMenuItem]:n&&r.type==="button",[_e.action]:s||!n&&r.type!=="toggle",[_e.actionToggle]:!s&&r.type==="toggle",[_e.actionToggleOn]:!s&&r.type==="toggle"&&r.value,[oe.disabledElement]:o},u=[this._renderActionIcon(r),this._renderActionTitle(a,n)];return n?x("div",{"aria-label":a??void 0,bind:this,classes:l,"data-action":r,"data-item":i,key:`single-action-${r.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:0,title:a??void 0},u):x("li",{"aria-label":a??void 0,bind:this,classes:l,"data-action":r,"data-item":i,key:`action-${r.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:0,title:a??void 0},u)}_setTooltipReference(e,i){this._tooltipReferenceMap.set(i.uid,e),this.scheduleRender()}_hasMessage(e){return!!e.error||e.incompatible}_hasChildren(e){return!!e.children.length&&!this._hasMessage(e)}_sortNodeRemoved(e){const{_sortableMap:i}=this,r=e.dataset.group,n=i.get(r);n&&n.destroy(),i.delete(r)}_destroySortables(){const{_sortableMap:e,_sortableNodes:i}=this;e.forEach(r=>r&&r.destroy()),e.clear(),i.clear()}_moveLayerFromChildList({to:e,from:i,item:r,newIndex:n}){const s=tr(r),o=tr(e),a=tr(i);this.viewModel.moveListItem(s,a,o,n)}_sortLayers(e){var n,s;if(!e)return;const i=tr(e.el),r=e.toArray();i?zFe(i,r):sne((s=(n=this.view)==null?void 0:n.map)==null?void 0:s.layers,r)}_toggleSorting(e,i){const{_sortableMap:r,selectionEnabled:n}=this,s=r.get(i),o=tr(e),a=(i===fL||(o==null?void 0:o.childrenSortable)&&DFe(o))&&n;if(s)s.option("disabled",!a);else if(a){const l=Ce.create(e,{dataIdAttr:AB,group:{name:i,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${OB}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!a,chosenClass:_e.sortableChosen});r.set(i,l)}}_toggleAllSorting(){this._sortableNodes.forEach((e,i)=>this._toggleSorting(e,i))}_sortNodeCreated(e){const i=e.dataset.group;i&&(this._sortableNodes.set(i,e),this._toggleSorting(e,i))}_setVisibleItems(e){this.visibleItems=e.filter(i=>!i.hidden&&(this.visibleElements.errors||!i.error))}_getSingleActionButton(e){return e.reduce(i=>i).filter(i=>i&&i.type==="button").at(0)}_focusListItem(e){var n;const{_focusSortUid:i}=this;if(!e||!i)return;const r=tr(e);((n=r==null?void 0:r.layer)==null?void 0:n.uid)===i&&(e.focus(),this._focusSortUid=null)}_watchActionSectionChanges(e){this.addHandles(e.on("change",this.scheduleRender.bind(this)),fu.actionSection),e.forEach(i=>this._renderOnActionChanges(i))}_renderOnActionChanges(e){e.type!=="toggle"?e.type!=="slider"?this.addHandles(Y(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible],()=>this.scheduleRender(),Le),fu.actions):this.addHandles(Y(()=>[e==null?void 0:e.className,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value,e==null?void 0:e.displayValueEnabled,e==null?void 0:e.max,e==null?void 0:e.min,e==null?void 0:e.step],()=>this.scheduleRender(),Le),fu.actions):this.addHandles(Y(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value],()=>this.scheduleRender(),Le),fu.actions)}_renderOnItemChanges(e){this.addHandles([Y(()=>{var i,r,n;return[e==null?void 0:e.actionsOpen,e==null?void 0:e.visible,e==null?void 0:e.open,e==null?void 0:e.updating,e==null?void 0:e.connectionStatus,e==null?void 0:e.publishing,e==null?void 0:e.title,e==null?void 0:e.visibleAtCurrentScale,e==null?void 0:e.error,e==null?void 0:e.visibilityMode,e==null?void 0:e.panel,(i=e==null?void 0:e.panel)==null?void 0:i.title,(r=e==null?void 0:e.panel)==null?void 0:r.content,(n=e==null?void 0:e.panel)==null?void 0:n.className,e==null?void 0:e.sortable,e==null?void 0:e.childrenSortable]},()=>this.scheduleRender(),ol),Y(()=>[e==null?void 0:e.hidden,e==null?void 0:e.error],()=>this._setVisibleItems(this.operationalItems)),e.actionsSections.on("change",()=>this.scheduleRender()),e.children.on("change",()=>this.scheduleRender())],fu.items),e.children.forEach(i=>this._renderOnItemChanges(i)),e.actionsSections.forEach(i=>this._watchActionSectionChanges(i))}_itemsChanged(e){this.removeHandles(fu.items),this.removeHandles(fu.actions),this.removeHandles(fu.actionSection),e.forEach(i=>this._renderOnItemChanges(i)),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}_filterActions(e){return e.map(i=>i.filter(r=>r.visible))}_countActions(e){return e.reduce((i,r)=>i+r.length,0)}_getIconImageStyles(e){const i=e.declaredClass==="esri.widgets.LayerList.ListItemPanel"||e.declaredClass==="esri.support.Action.ActionButton"||e.declaredClass==="esri.support.Action.ActionToggle"?e.image:null;return{"background-image":i?`url("${i}")`:void 0}}_selectionKeydown(e){var g,v,w,b;const i=["ArrowDown","ArrowUp"],r=K1(e);if(!i.includes(r))return void this._toggleSelection(e);e.stopPropagation();const n=e.currentTarget,s=tr(n),{_sortableMap:o,selectedItems:a}=this,l=n.dataset.group,u=o.get(l);if(!u||!s)return;const p=pL(s,a),h=u.toArray(),m=e.target,y=h.indexOf(m.dataset[YFe]);if(y!==-1){if(r==="ArrowDown"){const _=y+1;if(_>=h.length)return;p?(LB(h,y,_),u.sort(h),this._sortLayers(u),this._focusSortUid=(g=s.layer)==null?void 0:g.uid):(this._focusSortUid=(v=s.layer)==null?void 0:v.uid,this.scheduleRender())}if(r==="ArrowUp"){const _=y-1;if(_<=-1)return;p?(LB(h,y,_),u.sort(h),this._sortLayers(u),this._focusSortUid=(w=s.layer)==null?void 0:w.uid):(this._focusSortUid=(b=s.layer)==null?void 0:b.uid,this.scheduleRender())}}}_toggleActionsOpen(e){const i=tr(e.currentTarget);if(!i)return;const{actionsOpen:r}=i,n=!r;n&&this.operationalItems.forEach(s=>pne(s)),i.actionsOpen=n,e.stopPropagation()}_triggerPanel(e){const i=KFe(e.currentTarget);e.stopPropagation(),i&&!i.disabled&&(i.open=!i.open)}_triggerAction(e){const i=e.currentTarget,r=QFe(i),n=tr(i);r&&n&&(r.type==="toggle"&&(r.value=!r.value),this.triggerAction(r,n),e.stopPropagation())}_toggleVisibility(e){const i=e.currentTarget,r=i.getAttribute("data-parent-visibility"),n=tr(i);n&&(r===bv.exclusive&&n.visible||(n.visible=!n.visible),e.stopPropagation())}_toggleChildrenClick(e){const i=tr(e.currentTarget);i&&(i.open=!i.open,e.stopPropagation())}_toggleSelection(e){var a,l;e.stopPropagation();const{multipleSelectionEnabled:i,selectedItems:r}=this,n=tr(e.currentTarget);if(!n)return;const s=pL(n,r),{length:o}=r;if(!i)return o&&!(s&&o===1)?(r.removeAll(),void r.add(n)):void(s?(a=r.remove)==null?void 0:a.call(r,s):r.add(n));s?(l=r.remove)==null||l.call(r,s):r.add(n)}get test(){return{visibleItems:this.visibleItems}}};function tr(t){return t==null?void 0:t["data-item"]}function KFe(t){return t==null?void 0:t["data-panel"]}function QFe(t){return t==null?void 0:t["data-action"]}c([d()],Ct.prototype,"visibleItems",void 0),c([d()],Ct.prototype,"iconClass",void 0),c([d()],Ct.prototype,"icon",void 0),c([d()],Ct.prototype,"label",null),c([d()],Ct.prototype,"listItemCanGiveFunction",void 0),c([d()],Ct.prototype,"listItemCanReceiveFunction",void 0),c([d()],Ct.prototype,"listItemCreatedFunction",null),c([d(),hn("esri/widgets/LayerList/t9n/LayerList")],Ct.prototype,"messages",void 0),c([d(),hn("esri/t9n/common")],Ct.prototype,"messagesCommon",void 0),c([d()],Ct.prototype,"multipleSelectionEnabled",void 0),c([d()],Ct.prototype,"operationalItems",null),c([d()],Ct.prototype,"selectionEnabled",void 0),c([d()],Ct.prototype,"selectedItems",void 0),c([d()],Ct.prototype,"style",void 0),c([d()],Ct.prototype,"view",null),c([Nre("trigger-action"),d({type:dne})],Ct.prototype,"viewModel",void 0),c([d()],Ct.prototype,"visibleElements",void 0),c([qe("visibleElements")],Ct.prototype,"castVisibleElements",null),c([ia()],Ct.prototype,"_toggleActionsOpen",null),c([ia()],Ct.prototype,"_triggerPanel",null),c([ia()],Ct.prototype,"_triggerAction",null),c([ia()],Ct.prototype,"_toggleVisibility",null),c([ia()],Ct.prototype,"_toggleChildrenClick",null),c([ia()],Ct.prototype,"_toggleSelection",null),Ct=c([k("esri.widgets.LayerList")],Ct);const XFe=Ct,C1=-1;let Ya=class extends de{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=G("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(RB(e))}catch(i){this._transitionTo([]),q.getLogger(this).warn("Invalid Effect",{effect:e,error:i})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&NB(this._current,RB(e),this.scale)}catch{return!1}}transitionStep(e,i){this._applyTimeTransition(e),this._updateForScale(i)}endTransitions(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&NB(this._current,e,this.scale)?(this._final=e,this._to=D(e),e4e(this._current,this._to,this.scale),this._from=D(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?D(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const n=this._current[r],s=this._from[r],o=this._to[r];n.scale=t4e(s.scale,o.scale,i);for(let a=0;a<n.effects.length;a++){const l=n.effects[a],u=s.effects[a],p=o.effects[a];l.interpolate(u,p,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?D(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const i=this._current,r=this._current.length-1;let n,s,o=1;if(i.length===1||e>=i[0].scale)s=n=i[0].effects;else if(e<=i[r].scale)s=n=i[r].effects;else for(let a=0;a<r;a++){const l=i[a],u=i[a+1];if(l.scale>=e&&u.scale<=e){o=(e-l.scale)/(u.scale-l.scale),n=l.effects,s=u.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(n[a],s[a],o)}};function RB(t){const e=LF(t)||[];return i4e(e)?[{scale:C1,effects:e}]:e}function NB(t,e,i){var r,n,s,o;return!((r=t[0])!=null&&r.effects)||!((n=e[0])!=null&&n.effects)?!0:!((((s=t[0])==null?void 0:s.scale)===C1||((o=e[0])==null?void 0:o.scale)===C1)&&(t.length>1||e.length>1)&&i<=0)&&nY(t[0].effects,e[0].effects)}function e4e(t,e,i){const r=t.length>e.length?t:e,n=t.length>e.length?e:t,s=n[n.length-1],o=(s==null?void 0:s.scale)??i,a=(s==null?void 0:s.effects)??[];for(let l=n.length;l<r.length;l++)n.push({scale:o,effects:[...a]});for(let l=0;l<r.length;l++)n[l].scale=n[l].scale===C1?i:n[l].scale,r[l].scale=r[l].scale===C1?i:r[l].scale,sY(n[l].effects,r[l].effects)}function t4e(t,e,i){return t+(e-t)*i}function i4e(t){const e=t[0];return!!e&&"type"in e}c([d()],Ya.prototype,"_to",void 0),c([d()],Ya.prototype,"duration",void 0),c([d({value:""})],Ya.prototype,"effect",null),c([d({readOnly:!0})],Ya.prototype,"effects",void 0),c([d({readOnly:!0})],Ya.prototype,"hasEffects",null),c([d({value:0})],Ya.prototype,"scale",null),c([d({readOnly:!0})],Ya.prototype,"transitioning",null),Ya=c([k("esri.layers.effects.EffectView")],Ya);const hne=96;function FWe(t,e){const i=e||t.extent,r=t.width,n=Cl(i==null?void 0:i.spatialReference);return i&&r?i.width/r*n*WJ*hne:0}function jWe(t,e){return t/(Cl(e)*WJ*hne)}function r4e(t,e,i){return n4e(t,e)&&s4e(t,i)}function n4e(t,e){return e===0||Dd(t,e)||t<e}function s4e(t,e){return e===0||Dd(t,e)||t>e}function o4e(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?fne(t.view.floors,e.floorInfo.floorField):null}function DB(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?fne(t,e.floorInfo.floorField):null}function fne(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function zWe(t,e,i){return e.flatten(({sublayers:n})=>n).length!==t.length?!0:!!t.some(n=>n.originIdOf("minScale")>i||n.originIdOf("maxScale")>i||n.originIdOf("renderer")>i||n.originIdOf("labelingInfo")>i||n.originIdOf("opacity")>i||n.originIdOf("labelsVisible")>i||n.originIdOf("source")>i)||!mne(t,e)}function a4e(t,e,i){return!!t.some(r=>{const n=r.source;return!(!n||n.type==="map-layer"&&n.mapLayerId===r.id&&(n.gdbVersion==null||n.gdbVersion===i))||r.originIdOf("renderer")>Ie.SERVICE||r.originIdOf("labelingInfo")>Ie.SERVICE||r.originIdOf("opacity")>Ie.SERVICE||r.originIdOf("labelsVisible")>Ie.SERVICE})||!mne(t,e)}function mne(t,e){if(!(t!=null&&t.length)||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(t.length>i.length)return!1;let r=0;const n=i.length;for(const{id:s}of t){for(;r<n&&i[r]!==s;)r++;if(r>=n)return!1}return!0}function VWe(t){return!!t&&t.some(e=>{var i;return e.minScale!=null||((i=e.layerDefinition)==null?void 0:i.minScale)!=null})}const l4e={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let ns=class extends de{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=DB(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&a4e(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(l4e[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(n=>n.definitionExpression!=null||e&&n.floorInfo!=null);return i.length?JSON.stringify(i.reduce((n,s)=>{const o=DB(this.floors,s),a=jY(o,s.definitionExpression);return a!=null&&(n[s.id]=a),n},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=this.scale,n=o=>{o.visible&&(r===0||r4e(r,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(n):e.unshift(o))};i&&i.forEach(n);const s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some((o,a)=>e[a]!==o)?e:s}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};c([d({readOnly:!0})],ns.prototype,"dynamicLayers",null),c([d()],ns.prototype,"floors",void 0),c([d({readOnly:!0})],ns.prototype,"hasDynamicLayers",null),c([d()],ns.prototype,"layer",null),c([d({readOnly:!0})],ns.prototype,"layers",null),c([d({readOnly:!0})],ns.prototype,"layerDefs",null),c([d({type:Number})],ns.prototype,"scale",void 0),c([d(Eke)],ns.prototype,"timeExtent",void 0),c([d({readOnly:!0})],ns.prototype,"version",null),c([d({readOnly:!0})],ns.prototype,"visibleSublayers",null),ns=c([k("esri.layers.mixins.ExportImageParameters")],ns);const c4e=9999999e31,u4e=2e-7,d4e={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function hN(t){return d4e[t]??[-34028234663852886e22,34028234663852886e22]}function BWe(t,e,i){var m,y;if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:n,pixelType:s}=t,o=r[0].length,a=t.bandMasks??[],l=t.mask??new Uint8Array(o).fill(255),u=s==="f32"||s==="f64",p=hN(s);let h=!1;for(let g=0;g<r.length;g++){const v=typeof e=="number"?e:e[g];if(v==null)continue;const w=((m=n==null?void 0:n[g])==null?void 0:m.minValue)??p[0],b=((y=n==null?void 0:n[g])==null?void 0:y.maxValue)??p[1];if(w>v+Number.EPSILON||b<v-Number.EPSILON)continue;const _=a[g]||l.slice(),S=r[g],$=i==null?void 0:i.customFloatTolerance;if(u&&$!==0){let T=$;T||(T=Math.abs(v)>=c4e?u4e*Math.abs(v):s==="f32"?2**-23:Number.EPSILON);for(let I=0;I<S.length;I++)_[I]&&Math.abs(S[I]-v)<T&&(S[I]=0,_[I]=0,l[I]=0,h=!0)}else for(let T=0;T<S.length;T++)_[T]&&S[T]===v&&(S[T]=0,_[T]=0,l[T]=0,h=!0);a[g]=_}h&&(t.bandMasks=t.bandMasks||t.pixels.length>1?a:null,t.mask=l),h&&"updateStatistics"in t&&t.updateStatistics()}function p4e(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function h4e(t){return rQ(t)||T$e(t)||k$e(t)}function f4e(t,e){const{format:i,timeZoneOptions:r,fieldType:n}=e??{};let s,o;if(r&&({timeZone:s,timeZoneName:o}=SSe(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,cd(i||"short-date-short-time"),n)),typeof t=="string"&&isNaN(Date.parse(n==="time-only"?`1970-01-01T${t}Z`:t)))return t;switch(n){case"date-only":{const a=cd(i||"short-date");return typeof t=="string"?kSe(t,{...a}):Pn(t,{...a,timeZone:Sl})}case"time-only":{const a=cd(i||"short-time");return typeof t=="string"?ISe(t,a):Pn(t,{...a,timeZone:Sl})}case"timestamp-offset":{if(!s&&typeof t=="string"&&new Date(t).toISOString()!==t)return t;const a=i||r?cd(i||"short-date-short-time"):void 0,l=a?{...a,timeZone:s,timeZoneName:o}:void 0;return typeof t=="string"?CSe(t,l):Pn(t,l)}default:{const a=i||r?cd(i||"short-date-short-time"):void 0;return Pn(typeof t=="string"?new Date(t):t,a?{...a,timeZone:s,timeZoneName:o}:void 0)}}}function m4e(t){return typeof t=="function"}function GWe(t,e,i,r){return m4e(t)?t(e,i,r):t}function HWe(t){return[t.r,t.g,t.b,t.a]}const y4e=` /-,
`;function FB(t){let e=t.length;for(;e--;)if(!y4e.includes(t.charAt(e)))return!1;return!0}function g4e(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const s=t.substr(r,n-r);i.push([s,null,FB(s)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const s=e[t.substr(r,n-r)];s&&i.push([null,s,!1])}r=n+1}}while(n!==-1);if(r<t.length-1){const s=t.substr(r);i.push([s,null,FB(s)])}return i}function v4e(t,e,i){let r="",n=null;for(const s of e){const[o,a,l]=s;if(o)l?n=o:(n&&(r+=n,n=null),r+=o);else{const u=t.attributes[a];u&&(n&&(r+=n,n=null),r+=u)}}return b4e(r,i)}function qWe(t,e,i){const r=g4e(e,t);return n=>v4e(n,r,i)}function b4e(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function WWe(t,e,i,r,n,s,o=!0){const a=e/n,l=i/s,u=Math.ceil(a/2),p=Math.ceil(l/2);for(let h=0;h<s;h++)for(let m=0;m<n;m++){const y=4*(m+(o?s-h-1:h)*n);let g=0,v=0,w=0,b=0,_=0,S=0,$=0;const T=(h+.5)*l;for(let I=Math.floor(h*l);I<(h+1)*l;I++){const C=Math.abs(T-(I+.5))/p,M=(m+.5)*a,R=C*C;for(let O=Math.floor(m*a);O<(m+1)*a;O++){let F=Math.abs(M-(O+.5))/u;const A=Math.sqrt(R+F*F);A>=-1&&A<=1&&(g=2*A*A*A-3*A*A+1,g>0&&(F=4*(O+I*e),$+=g*t[F+3],w+=g,t[F+3]<255&&(g=g*t[F+3]/250),b+=g*t[F],_+=g*t[F+1],S+=g*t[F+2],v+=g))}}r[y]=b/v,r[y+1]=_/v,r[y+2]=S/v,r[y+3]=$/w}}function yne(t){return t?{r:t[0],g:t[1],b:t[2],a:t[3]/255}:{r:0,g:0,b:0,a:0}}function gne(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function fN(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function mN(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function w4e(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function jT(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const JWe=(t,e=0)=>t==null||isNaN(t)?e:t,ZWe=t=>t.tintColor?yne(t.tintColor):{r:255,g:255,b:255,a:1},YWe=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function KWe(){return Z(()=>import("./geometryEngineJSON-Jns6dvac.js").then(t=>t.g),__vite__mapDeps([24,25,26]))}function QWe(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function XWe(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function eJe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function tJe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function jB(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=jB(e);if(i!=null)return i}break;case"CIMTextSymbol":return jB(t.symbol);case"CIMSolidFill":return t.color}}function zB(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=zB(i);if(r!=null)return r}break}case"CIMTextSymbol":return zB(t.symbol);case"CIMSolidStroke":return t.color}}function VB(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=VB(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return VB(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function iJe(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function rJe(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function nJe(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const sJe=t=>t.includes("data:image/svg+xml");function oJe(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function vne(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(i&&t.effects)for(const n of t.effects)$4e(n,e);if(t.symbolLayers)for(const n of t.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":_4e(n,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!(r!=null&&r.preserveOutlineWidth)&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":vne(n.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}}else t.height!=null&&(t.height*=e)}function _4e(t,e,i){if(t&&(t.markerPlacement&&S4e(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||vne(r.symbol,e,!0,i)}function S4e(t,e){switch(jT(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function $4e(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(r=>r*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function bne(t){const e=[];return yN(gne(t),e),e.length?new le(yne(e[0])):null}function yN(t,e){var n;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(mN(s)||fN(s)&&s.markerPlacement&&jT(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&UB(e,s.tintColor);break;case"CIMVectorMarker":(n=s.markerGraphics)==null||n.forEach(o=>{yN(o.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":UB(e,s.color);break;case"CIMHatchFill":yN(s.lineSymbol,e)}}}function UB(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function wne(t,e,i){e instanceof le||(e=new le(e));const r=gne(t);r&&gN(r,e,i)}function gN(t,e,i){var s;if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const n=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked)continue;if(n){if(i){const{layersToColor:l}=i;if((mN(o)||fN(o)&&o.markerPlacement&&jT(o.markerPlacement))&&l==="fill"||w4e(o)&&l==="outline")continue}else if(mN(o)||fN(o)&&o.markerPlacement&&jT(o.markerPlacement))continue}const a=e.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(s=o.markerGraphics)==null||s.forEach(l=>{gN(l.symbol,e,i)});break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMHatchFill":gN(o.lineSymbol,e,i)}}}var Ri;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(Ri||(Ri={}));const xw={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function x4e(t,e,i){const r=Ri.size;let n=r,s=r;t<1?n*=.75:t>1&&(s*=1.25);const o=0,a=0;let l=r,u=r;return e&&i&&(n=s=l=u=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[i?l:.875*l,o]},{command:"L",values:[i?n-.5*l:a,s-.5*u]},{command:"L",values:[n-.5*l,s-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,e?o:.125*u]},{command:"L",values:[n-.5*l,e?s-.5*u:u]},{command:"L",values:[n-.5*l,s-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*l,s-.5*u]},{command:"L",values:[i?n-.5*l:a,s-.5*u]},{command:"L",values:[i?n-.5*l:a,e?s-.5*u:u]},{command:"L",values:[n-.5*l,e?s-.5*u:u]},{command:"Z",values:[]}]}]}function E4e(t){const e=Ri.size,i=.5*t,r=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[n,.7*e+i-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[e,i]},{command:"L",values:[e,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,r]},{command:"L",values:[e,r]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[n,.7*e*.5]},{command:"Z",values:[]}]}]}function T4e(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function k4e(t,e){let i=e?Ri.tallSymbolWidth:t;const r=t,n=e?4:6;i<=Ri.size?i-=.5*n:i-=n;const s=0,o=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,s]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[o,r-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function I4e(t,e){let i=e?Ri.tallSymbolWidth:t;const r=t,n=e?4:6;i<=Ri.size?i-=.5*n:i-=n;const s=.5*i,o=.15*i,a=0,l=r-o;return[{type:"ellipse",cx:.5*i,cy:l,rx:s,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[i,l]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:o,rx:s,ry:o}]}function C4e(t,e){let i=e?Ri.tallSymbolWidth:t;const r=t,n=e?4:6;i<=Ri.size?i-=.5*n:i-=n;const s=.15*i,o=r-s;return[{type:"ellipse",cx:.5*i,cy:o,rx:.5*i,ry:s},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function M4e(t){let e=t;const i=t,r=6;e<Ri.size?e-=.5*r:e-=r;const n=.15*e,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[e,s]},{command:"L",values:[.5*e,i-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:s,rx:.5*e,ry:n}]}function L4e(t){let e=t;const i=t,r=4;e<Ri.size?e-=.5*r:e-=r;const n=0,s=0,o=e,a=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[s,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function O4e(t){const e=t,i=2;let r=t;r<Ri.size?r-=.5*i:r-=i;const n=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[e,r]},{command:"L",values:[.45*e,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,n]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[s,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,r]},{command:"L",values:[.45*e,.6*r]},{command:"L",values:[e,r]},{command:"Z",values:[]}]}]}function Ud(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function aJe(t,e){if(t==null)return new le;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new le(t);return new le([Ud(i.r,e),Ud(i.g,e),Ud(i.b,e),i.a])}function A4e(t){return"r"in t&&"g"in t&&"b"in t}function _ne(t){return"h"in t&&"s"in t&&"v"in t}function Sne(t){return"l"in t&&"a"in t&&"b"in t}function $ne(t){return"l"in t&&"c"in t&&"h"in t}function P4e(t){return"x"in t&&"y"in t&&"z"in t}const R4e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],N4e=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function xne(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,o=t[0].length;let a=0;for(r=0;r<s;r++){for(a=0,n=0;n<o;n++)a+=t[r][n]*e[n];i.push(a)}return i}function Ene(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=xne(R4e,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function k4(t){const e=xne(N4e,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function Tne(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function kne(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function D4e(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:e,c:n,h:s}}function F4e(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function j4e(t){return Tne(Ene(t))}function z4e(t){return k4(kne(t))}function V4e(t){return D4e(Tne(Ene(t)))}function U4e(t){return k4(kne(F4e(t)))}function B4e(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),s=n-Math.min(e,i,r);let o=n,a=s===0?0:n===e?(i-r)/s%6:n===i?(r-e)/s+2:(e-i)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function G4e(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,s=n*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-n),o.g=Math.round(o.g+r-n),o.b=Math.round(o.b+r-n),o}function L_(t){return A4e(t)?t:$ne(t)?U4e(t):Sne(t)?z4e(t):P4e(t)?k4(t):_ne(t)?G4e(t):t}function I4(t){return _ne(t)?t:B4e(L_(t))}function lJe(t){return Sne(t)?t:j4e(L_(t))}function cJe(t){return $ne(t)?t:V4e(L_(t))}function H4e(t){let{r:e,g:i,b:r,a:n}=t;return n<1&&(e=Math.round(n*e+255*(1-n)),i=Math.round(n*i+255*(1-n)),r=Math.round(n*r+255*(1-n))),new le({r:e,g:i,b:r})}function uJe(t,e){const{r:i,g:r,b:n}=e!=null&&e.ignoreAlpha?t:H4e(t);return .2126*i+.7152*r+.0722*n}var BB;(function(t){t[t.Low=160]="Low",t[t.High=225]="High"})(BB||(BB={}));const q4e="http://www.w3.org/2000/svg";let W4e=0,J4e=0;const GB=G("android"),Z4e=G("chrome")||GB&&GB>=4?"auto":"optimizeLegibility",Y4e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},K4e=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Kt={},ot={};const HB={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},Q4e=Math.PI;let X4e=1;function Qy(t,e){const i=t*(Q4e/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function Ine(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function C4(t,e,i,r){if(t){if(t.type==="circle")return x("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return x("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return x("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return x("image",{height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const n=typeof t.path!="string"?Ine(t.path):t.path;return x("path",{d:n,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return W1(r),x("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":Z4e,x:t.x,y:t.y},t.text)}return null}function M4(t){const e={fill:"none",pattern:null,linearGradient:null};if(t){if("type"in t&&t.type==="pattern"){const i="patternId-"+ ++W4e;e.fill=`url(#${i})`,e.pattern={id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}}}else if("type"in t&&t.type==="linear"){const i="linearGradientId-"+ ++J4e;e.fill=`url(#${i})`,e.linearGradient={id:i,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(r=>({offset:r.offset,color:r.color&&new le(r.color).toString()}))}}else if(t){const i=new le(t);e.fill=i.toString()}}return e}function L4(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new le(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashArray&&(e.dashOffset=t.dashoffset),t.style)){let i=null;if(t.style in HB&&(i=HB[t.style]),Array.isArray(i)){i=i.slice(0);const r=t.width??0;for(let n=0;n<i.length;++n)i[n]*=r;if(t.cap!=="butt"){for(let n=0;n<i.length;n+=2)i[n]-=r,i[n]<1&&(i[n]=1);for(let n=1;n<i.length;n+=2)i[n]+=r}i=i.join(",")}e.dashArray=i}return e}function Cne(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",W1(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function Mne(t){const{pattern:e,linearGradient:i}=t;if(e)return x("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},x("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const r=i.stops.map((n,s)=>x("stop",{key:`${s}-stop`,offset:n.offset,"stop-color":n.color}));return x("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function eje(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:n,fill:s,stroke:o,font:a}=r,l=M4(s),u=L4(o),p=n.type==="text"?Cne(n,a):null,h=C4(n,l.fill,u,p);h&&i.push(h)}return x("mask",{id:e,maskUnits:"userSpaceOnUse"},x("g",null,i))}function qB(t,e,i){return Qg(t,xI(t),[e,i])}function WB(t,e,i,r,n){return EI(t,xI(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function tje(t,e,i,r){const n=e%360*Math.PI/180;S_(t,xI(t),n);const s=Math.cos(n),o=Math.sin(n),a=t[4],l=t[5];return t[4]=a*s-l*o+r*o-i*s+i,t[5]=l*s+a*o-i*o-r*s+r,t}function Kr(t,e){Kt&&"left"in Kt?(Kt.left!=null&&Kt.left>t&&(Kt.left=t),(Kt.right==null||Kt.right<t)&&(Kt.right=t),(Kt.top==null||Kt.top>e)&&(Kt.top=e),(Kt.bottom==null||Kt.bottom<e)&&(Kt.bottom=e)):Kt={left:t,bottom:e,right:t,top:e}}function JB(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)Kr(e[r],e[r+1]);ot.x=e[i-2],ot.y=e[i-1];break;case"H":for(r=0;r<i;++r)Kr(e[r],ot.y);ot.x=e[i-1];break;case"V":for(r=0;r<i;++r)Kr(ot.x,e[r]);ot.y=e[i-1];break;case"m":{let n=0;for(("x"in ot)||(Kr(ot.x=e[0],ot.y=e[1]),n=2),r=n;r<i;r+=2)Kr(ot.x+=e[r],ot.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)Kr(ot.x+=e[r],ot.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)Kr(ot.x+=e[r],ot.y);break;case"v":for(r=0;r<i;++r)Kr(ot.x,ot.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)Kr(ot.x+e[r],ot.y+e[r+1]),Kr(ot.x+e[r+2],ot.y+e[r+3]),Kr(ot.x+=e[r+4],ot.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)Kr(ot.x+e[r],ot.y+e[r+1]),Kr(ot.x+=e[r+2],ot.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)Kr(e[r+5],e[r+6]);ot.x=e[i-2],ot.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)Kr(ot.x+=e[r+5],ot.y+=e[r+6])}}function ZB(t,e,i){const r=Y4e[t.toLowerCase()];let n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),JB(n)):(n={action:t,args:[]},i.push(n),JB(n)))}function ije(t){const e=(typeof t.path!="string"?Ine(t.path):t.path).match(K4e),i=[];if(Kt={},ot={},!e)return null;let r="",n=[];const s=e.length;for(let a=0;a<s;++a){const l=e[a],u=parseFloat(l);isNaN(u)?(r&&ZB(r,n,i),n=[],r=l):n.push(u)}ZB(r,n,i);const o={x:0,y:0,width:0,height:0};return Kt&&"left"in Kt&&(o.x=Kt.left,o.y=Kt.top,o.width=Kt.right-Kt.left,o.height=Kt.bottom-Kt.top),o}function Lne(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=ije(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function One(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of t)i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),r=Math.max(r,s.x+s.width),n=Math.max(n,s.y+s.height)):(i=e,i.x=s.x,i.y=s.y,r=s.x+s.width,n=s.y+s.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function vN(t,e,i,r,n,s,o,a,l){let u=(o&&s?Qy(s,e):e)/2,p=(o&&s?Qy(s,i):i)/2;if(l){const _=l[0],S=l[1];u=(o&&s?Qy(s,_):_)/2,p=(o&&s?Qy(s,S):S)/2}const h=t.width+r,m=t.height+r,y=wT(),g=wT();let v=!1;if(n&&h!==0&&m!==0){const _=e!==i?e/i:h/m,S=e>i?e:i;let $=1,T=1;isNaN(S)||(_>1?($=S/h,T=S/_/m):(T=S/m,$=S*_/h)),Ph(g,g,WB(y,$,T,u,p)),v=!0}const w=t.x+(h-r)/2,b=t.y+(m-r)/2;if(Ph(g,g,qB(y,u-w,p-b)),!v&&(h>e||m>i)){const _=h/e>m/i,S=(_?e:i)/(_?h:m);Ph(g,g,WB(y,S,S,w,b))}return s&&Ph(g,g,tje(y,s,w,b)),a&&Ph(g,g,qB(y,a[0],a[1])),`matrix(${g[0]},${g[1]},${g[2]},${g[3]},${g[4]},${g[5]})`}function rje(t,e,i){const r=t==null?void 0:t.effects.find(u=>u.type==="bloom");if(!r)return null;const{strength:n,radius:s}=r,o=n>0?s:0,a=(n+o)*e,l=4*n+1;return x("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},x("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*o)*(5**(e/100)*(.4+e/100)),result:"dilate"}),x("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:a/25}),x("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:a/50}),x("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},x("feFuncR",{slope:l,type:"linear"}),x("feFuncG",{slope:l,type:"linear"}),x("feFuncB",{slope:l,type:"linear"})),x("feMerge",null,x("feMergeNode",{in:"intensityBlur"}),x("feMergeNode",{in:"intensityBrightness"}),x("feGaussianBlur",{stdDeviation:n/10})))}function Ane(t,e,i,r={}){var p;const n=[],s=[],o=++X4e,a=rje(r.effectView,e,o);let l=null;if(a){const h=(p=r.effectView)==null?void 0:p.effects.find(v=>v.type==="bloom"),m=(h.strength?h.strength+h.radius/2:0)/3,y=e+e*m,g=i+i*m;l=[Math.max(y,10),Math.max(g,10)]}for(let h=0;h<t.length;h++){const m=t[h],y=[],g=[];let v=0,w=0,b=0;for(const $ of m){const{shape:T,fill:I,stroke:C,font:M,offset:R}=$;r.ignoreStrokeWidth||T.type==="text"||(v+=(C==null?void 0:C.width)||0);const O=M4(I),F=L4(C),A=T.type==="text"?Cne(T,M):null;n.push(Mne(O)),y.push(C4(T,O.fill,F,A)),g.push(Lne(T)),R&&(w+=R[0],b+=R[1])}const _=vN(One(g),e,i,v,r.scale??!1,r.rotation,r.useRotationSize??!1,[w,b],l);let S=null;if(r.masking){const $=`mask-${h}`,T=r.masking[h];n.push(eje(T,$)),S=`url(#${$})`}s.push(S?x("g",{mask:S},x("g",{transform:_},y)):x("g",{transform:_},y))}r.useRotationSize&&r.rotation&&(e=Qy(r.rotation,e),i=Qy(r.rotation,i)),a&&(W1(l),e=l[0],i=l[1]);const u="display: block;";return x("svg",{"aria-labelledby":r.ariaLabel,focusable:!1,height:i,role:"img",style:u,width:e,xmlns:q4e},a,x("defs",null,n),a?x("g",{filter:`url(#bloom${o})`},s):s)}const Pne="picture-fill",Rne="simple-fill",nje="simple-line",Nne="simple-marker",sje="text",oje="cim",mL=new cX(1e3);function aje(t){const e=t.style;let i=null;if(t)switch(t.type){case Nne:e!=="cross"&&e!=="x"&&(i=t.color);break;case Rne:e==="solid"?i=t.color:e!=="none"&&(i={type:"pattern",x:0,y:0,src:it(`esri/symbols/patterns/${e}.png`),width:5,height:5});break;case Pne:i={type:"pattern",src:t.url,width:_t(t.width)*t.xscale,height:_t(t.height)*t.yscale,x:_t(t.xoffset),y:_t(t.yoffset)};break;case sje:i=t.color;break;case oje:i=bne(t)}return i}function lje(t,e){const i=t+"-"+e;return mL.get(i)!==void 0?Promise.resolve(mL.get(i)):Ve(t,{responseType:"image"}).then(r=>{const n=r.data,s=n.naturalWidth,o=n.naturalHeight,a=document.createElement("canvas");a.width=s,a.height=o;const l=a.getContext("2d");l.fillStyle=e,l.fillRect(0,0,s,o),l.globalCompositeOperation="destination-in",l.drawImage(n,0,0);const u=a.toDataURL();return mL.put(i,u),u})}function M1(t){if(!t)return null;let e=null;switch(t.type){case Rne:case Pne:case Nne:e=M1(t.outline);break;case nje:{const i=_t(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:O4(t.style),width:i,cap:t.cap,join:t.join==="miter"?_t(t.miterLimit):t.join});break}default:e=null}return e}const O4=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),cje=new le([128,128,128]),uje=new le("white");function dje(t){var i,r;const e=(i=t.symbolLayers)==null?void 0:i.at(-1);if(e&&"outline"in e)return(r=e==null?void 0:e.outline)==null?void 0:r.size}function pje(t){var e;if(!t)return 0;if(xl(t)){const i=dje(t);return i??0}return lr((e=M1(t))==null?void 0:e.width)}function LI(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function hje(t){var e;return((e=t.resource)==null?void 0:e.href)??""}function vm(t,e){if(!t)return null;let i=null;return xl(t)?i=fje(t):nI(t)&&(i=t.type==="cim"?bne(t):t.color?new le(t.color):null),i?L1(i,e):null}function fje(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{var n;r.type==="object"&&((n=r.resource)!=null&&n.href)||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new le(i):null}function L1(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new le(i)}function mje(t,e,i){const r=t.symbolLayers;if(!r)return;const n=s=>L1(e=e??s??(i!=null?uje:null),i);r.forEach(s=>{var o,a;if(s.type!=="object"||!((o=s.resource)!=null&&o.href)||e)if(s.type==="water")s.color=n(s.color);else{const l=s.material!=null?s.material.color:null,u=n(l);s.material==null?s.material=new Ss({color:u}):s.material.color=u,i!=null&&"outline"in s&&((a=s.outline)==null?void 0:a.color)!=null&&(s.outline.color=L1(s.outline.color,i))}})}function yje(t,e,i){var r;(e=e??t.color)&&(t.color=L1(e,i)),i!=null&&"outline"in t&&((r=t.outline)!=null&&r.color)&&(t.outline.color=L1(t.outline.color,i))}function yL(t,e,i){t&&(e||i!=null)&&(e&&(e=new le(e)),xl(t)?mje(t,e,i):nI(t)&&yje(t,e,i))}async function gje(t,e){const i=t.symbolLayers;i&&await Dye(i,async r=>vje(r,e))}async function vje(t,e){switch(t.type){case"extrude":wje(t,e);break;case"icon":case"line":case"text":bje(t,e);break;case"path":Sje(t,e);break;case"object":await _je(t,e)}}function bje(t,e){const i=Dne(e);i!=null&&(t.size=i)}function Dne(t){for(const e of t)if(typeof e=="number")return e;return null}function wje(t,e){t.size=typeof e[2]=="number"?e[2]:0}async function _je(t,e){const{resourceSize:i,symbolSize:r}=await $je(t),n=Fne(e,i,r);t.width=Ew(e[0],r[0],i[0],n),t.depth=Ew(e[1],r[1],i[1],n),t.height=Ew(e[2],r[2],i[2],n)}function Sje(t,e){const i=Fne(e,bZ,[t.width,void 0,t.height]);t.width=Ew(e[0],t.width,1,i),t.height=Ew(e[2],t.height,1,i)}function Fne(t,e,i){for(let r=0;r<3;r++){const n=t[r];switch(n){case"symbol-value":{const s=i[r];return s!=null?s/e[r]:1}case"proportional":break;default:if(n&&e[r])return n/e[r]}}return 1}async function $je(t){const{computeObjectLayerResourceSize:e}=await Z(()=>import("./symbolLayerUtils-58N1WeQA.js"),__vite__mapDeps([])),i=await e(t,10),{width:r,height:n,depth:s}=t,o=[r,s,n];let a=1;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function Ew(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function xje(t,e){const i=Dne(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function Eje(t,e){if(t&&e)return xl(t)?gje(t,e):void(nI(t)&&xje(t,e))}function Tje(t,e,i){if(t&&e!=null)if(xl(t)){const r=t.symbolLayers;r&&r.forEach(n=>{if(n&&n.type==="object")switch(i){case"tilt":n.tilt=e;break;case"roll":n.roll=e;break;default:n.heading=e}})}else nI(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle=e))}function O1(t){if(!t)return null;const e=t.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return lT(e)}async function kje(t,e){return await t.fetchSymbol(e)||t.fetchCIMSymbol(e)}const YB=yT();function Ije(t,e){YB.append(t,e),YB.detach(e)}function O_(t,e,i){const r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some(o=>!!o.length))return null;const s=(i==null?void 0:i.node)||document.createElement("div");return i.opacity!=null&&(s.style.opacity=i.opacity.toString()),i.effectView!=null&&(s.style.filter=O1(i.effectView)),Ije(s,()=>Ane(t,r,n,i)),s}function Cje(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function Mje(t,e,i){return t?Ve(t,{responseType:"image"}).then(r=>{const n=r.data,s=n.width,o=n.height,a=s/o;let l=e;if(i){const u=Math.max(s,o);l=Math.min(l,u)}return{image:n,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}}):Promise.reject(new j("renderUtils: imageDataSize","href not provided."))}function Lje(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function Oje(t,e,i,r,n){switch(n){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const s=I4({r:t[e],g:t[e+1],b:t[e+2]});s.h=r.h,s.s=r.s,s.v=s.v/100*r.v;const o=L_(s);t[e]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]*=i[3];break}}}function Aje(t,e,i,r,n){return Mje(t,e,n).then(s=>{const o=s.width??e,a=s.height??e;if(s.image&&Lje(i,r)){let l=s.image.width,u=s.image.height;G("edge")&&/\.svg$/i.test(t)&&(l-=1,u-=1);const p=Cje(o,a);p.drawImage(s.image,0,0,l,u,0,0,o,a);const h=p.getImageData(0,0,o,a),m=[i.r/255,i.g/255,i.b/255,i.a],y=I4(i);for(let g=0;g<h.data.length;g+=4)Oje(h.data,g,m,y,r);p.putImageData(h,0,0),t=p.canvas.toDataURL("image/png")}else{const l=Ne==null?void 0:Ne.findCredential(t);if(l!=null&&l.token){const u=t.includes("?")?"&":"?";t=`${t}${u}token=${l.token}`}}return{url:t,width:o,height:a}}).catch(()=>({url:t,width:e,height:e}))}const jne="esri-relationship-ramp",bm=`${jne}--diamond`,mu=`${jne}--square`,Pje="http://www.w3.org/2000/svg",xt={diamondContainer:`${bm}__container`,diamondLeftCol:`${bm}__left-column`,diamondRightCol:`${bm}__right-column`,diamondMidCol:`${bm}__middle-column`,diamondMidColLabel:`${bm}__middle-column--label`,diamondMidColRamp:`${bm}__middle-column--ramp`,squareTable:`${mu}__table`,squareTableRow:`${mu}__table-row`,squareTableCell:`${mu}__table-cell`,squareTableLabel:`${mu}__table-label`,squareTableLabelLeftBottom:`${mu}__table-label--left-bottom`,squareTableLabelRightBottom:`${mu}__table-label--right-bottom`,squareTableLabelLeftTop:`${mu}__table-label--left-top`,squareTableLabelRightTop:`${mu}__table-label--right-top`};function zne(t,e,i={}){const{focus:r,labels:n}=t,s=!!r,o=Rje(t,e,i),a={justifyContent:"center"},l=w1();return s?x("div",{class:xt.diamondContainer,styles:a},x("div",{class:xt.diamondLeftCol},l?n.right:n.left),x("div",{class:xt.diamondMidCol},x("div",{class:xt.diamondMidColLabel},n.top),o,x("div",{class:xt.diamondMidColLabel},n.bottom)),x("div",{class:xt.diamondRightCol},l?n.left:n.right)):x("div",{class:xt.squareTable},x("div",{class:xt.squareTableRow},x("div",{class:Jy(xt.squareTableCell,xt.squareTableLabel,xt.squareTableLabelRightBottom)},l?n.top:n.left),x("div",{class:xt.squareTableCell}),x("div",{class:Jy(xt.squareTableCell,xt.squareTableLabel,xt.squareTableLabelLeftBottom)},l?n.left:n.top)),x("div",{class:xt.squareTableRow},x("div",{class:xt.squareTableCell}),o,x("div",{class:xt.squareTableCell})),x("div",{class:xt.squareTableRow},x("div",{class:Jy(xt.squareTableCell,xt.squareTableLabel,xt.squareTableLabelRightTop)},l?n.right:n.bottom),x("div",{class:xt.squareTableCell}),x("div",{class:Jy(xt.squareTableCell,xt.squareTableLabel,xt.squareTableLabelLeftTop)},l?n.bottom:n.right)))}function KB(t,e,i){const r=`${i}_arrowStart`,n=`${i}_arrowEnd`,s=t==="left",o={markerStart:null,markerEnd:null};switch(e){case"HL":s?o.markerStart=`url(#${n})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${n})`;break;case"LH":s?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${n})`;break;default:o.markerEnd=`url(#${r})`}return o}function Rje(t,e,i={}){const{focus:r,numClasses:n,colors:s,rotation:o}=t,{opacity:a,effectList:l,ariaLabel:u}=i,p=i.size??60,h=!!r,m=Math.sqrt(p**2+p**2)+(h?0:5),y=[],g=[],v=[],w=(p||75)/n;for(let A=0;A<n;A++){const P=A*w;for(let V=0;V<n;V++){const te=V*w,re=M4(s[A][V]),Q=L4(null),H={type:"rect",x:te,y:P,width:w,height:w},ne=Mne(re);ne&&y.push(ne);const fe=C4(H,re.fill,Q,null);fe&&g.push(fe),v.push(Lne(H))}}const b=10,_=15,S=15,$=10;let T=null;h||(T="margin: -15px -15px -18px -15px");const I=KB("left",r,e),C=KB("right",r,e),M=One(v),R=vN(M,m,m,0,!1,o,!1),O=vN(M,m,m,0,!1,h?-45:null,!1),F={filter:O1(l)??void 0,opacity:a==null?"":`${a}`};return x("div",{class:h?xt.diamondMidColRamp:xt.squareTableCell,styles:F},x("svg",{"aria-labelledBy":u,focusable:!1,height:m,role:"image",style:T,width:m,xmlns:Pje},x("defs",null,x("marker",{id:`${e}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},x("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),x("marker",{id:`${e}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},x("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),y),x("g",{transform:R},g),x("g",{transform:O},x("line",{fill:"none","marker-end":I.markerEnd,"marker-start":I.markerStart,stroke:"#555555","stroke-width":"1",x1:-b,x2:-b,y1:p-_,y2:_}),x("line",{fill:"none","marker-end":C.markerEnd,"marker-start":C.markerStart,stroke:"#555555","stroke-width":"1",x1:S,x2:p-S,y1:p+$,y2:p+$}))))}function Nje(t){return t=t||globalThis.location.hostname,Dje.some(e=>(t==null?void 0:t.match(e))!=null)}function QB(t,e){return t&&(e=e||globalThis.location.hostname)?e.match(Vne)!=null||e.match(Bne)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(Une)!=null||e.match(Gne)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t}const Vne=/^devext.arcgis.com$/,Une=/^qaext.arcgis.com$/,Bne=/^[\w-]*\.mapsdevext.arcgis.com$/,Gne=/^[\w-]*\.mapsqa.arcgis.com$/,Dje=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,Vne,Une,/^jsapps.esri.com$/,Bne,Gne];function Hne(t,e,i,r){const n=t.name;return n==null?Promise.reject(new j("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName&&t.styleName==="Esri2DPointSymbolsStyle"?Fje(n,e,r):xX(t,e,r).then(s=>Wne(s,n,e,i,uEe,r))}function qne(t,e){return e.items.find(i=>i.name===t)}function Wne(t,e,i,r,n,s){var y,g;const o=(i==null?void 0:i.portal)!=null?i.portal:gi.getDefault(),a={portal:o,url:mi(t.baseUrl),origin:"portal-item"},l=qne(e,t.data);if(!l){const v=`The symbol name '${e}' could not be found`;return Promise.reject(new j("symbolstyleutils:symbol-name-not-found",v,{symbolName:e}))}let u=Yd(n(l,r),a),p=((y=l.thumbnail)==null?void 0:y.href)??null;const h=(g=l.thumbnail)==null?void 0:g.imageData;Nje()&&(u=QB(u)??"",p=QB(p));const m={portal:o,url:mi(l5(u)),origin:"portal-item"};return EF(u,s).then(v=>{const w=r==="cimRef"?EX(v.data):v.data,b=sX(w,m);if(b&&xl(b)){if(p){const _=Yd(p,a);b.thumbnail=new nf({url:_})}else h&&(b.thumbnail=new nf({url:`data:image/png;base64,${h}`}));t.styleUrl?b.styleOrigin=new u1({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(b.styleOrigin=new u1({portal:i.portal,styleName:t.styleName,name:e}))}return b})}function Fje(t,e,i){const r=dEe.replaceAll(/\{SymbolName\}/gi,t),n=e.portal!=null?e.portal:gi.getDefault();return EF(r,i).then(s=>{const o=EX(s.data);return sX(o,{portal:n,url:mi(l5(r)),origin:"portal-item"})})}const jje=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:Wne,getStyleItemFromStyle:qne,resolveWebStyleSymbol:Hne},Symbol.toStringTag,{value:"Module"})),Nh=Ri.size,m2=Ri.maxSize,A4=Ri.maxOutlineSize,XB=Ri.lineWidth,bN=Ri.tallSymbolWidth;function Xy(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=_t(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(n,A4),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?O4(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function zje(t,e){var r,n,s;if((r=t.thumbnail)!=null&&r.url)return t.thumbnail.url;if(e.type==="icon"&&((n=e==null?void 0:e.resource)==null?void 0:n.href))return hje(e);const i=it("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const o=await Hne(t.styleOrigin,{portal:t.styleOrigin.portal},"webRef").catch(()=>null);if(o&&"thumbnail"in o&&((s=o.thumbnail)!=null&&s.url))return o.thumbnail.url}return i}function gL(t,e=1){const i=t.a,r=I4(t),n=r.h,s=r.s/e,o=100-(100-r.v)/e,{r:a,g:l,b:u}=L_({h:n,s,v:o});return[a,l,u,i]}function zT(t){var e;return t.type==="water"?t.color==null?null:t.color:((e=t.material)==null?void 0:e.color)==null?null:t.material.color}function rt(t,e=0){const i=zT(t);if(!i){if(t.type==="fill")return null;const n=cje.r,s=Ud(n,e);return[s,s,s,100]}const r=i.toRgba();for(let n=0;n<3;n++)r[n]=Ud(r[n],e);return r}async function Jne(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await lje(it(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function e7(t){return t.outline?Xy(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function P4(t,e){const i=zT(t);if(!i)return null;let r="rgba(";return r+=Ud(i.r,e)+",",r+=Ud(i.g,e)+",",r+=Ud(i.b,e)+",",r+i.a+");"}function wN(t,e){const i=P4(t,e);return i?"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:i,width:Math.min(t.size?_t(t.size):.75,A4),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?O4(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?_t(2):t.join:null}:{}}function I$(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function Vje(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function Uje(t,e,i){const r=[];if(!t)return r;switch(t.type){case"icon":{const o=e,a=e;switch(t.resource&&t.resource.primitive||Cxe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:rt(t,0),stroke:Xy(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:rt(t,0),stroke:Xy(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:rt(t,0),stroke:Xy(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*o,0]},{command:"L",values:[.5*o,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[o,.5*a]}]},stroke:e7(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[o,a]},{command:"M",values:[o,0]},{command:"L",values:[0,a]}]},stroke:e7(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,.5*a]},{command:"L",values:[.5*o,a]},{command:"Z",values:[]}]},fill:rt(t,0),stroke:Xy(t)})}break}case"object":switch(t.resource&&t.resource.primitive||Axe){case"cone":{const n=I$(rt(t,0),rt(t,-.6),i?bN:e),s=C4e(e,i);r.push({shape:s[0],fill:n},{shape:s[1],fill:n});break}case"inverted-cone":{const n=rt(t,0),s=I$(n,rt(t,-.6),e),o=M4e(e);r.push({shape:o[0],fill:s},{shape:o[1],fill:n});break}case"cube":{const n=k4e(e,i);r.push({shape:n[0],fill:rt(t,0)},{shape:n[1],fill:rt(t,-.3)},{shape:n[2],fill:rt(t,-.5)});break}case"cylinder":{const n=I$(rt(t,0),rt(t,-.6),i?bN:e),s=I4e(e,i);r.push({shape:s[0],fill:n},{shape:s[1],fill:n},{shape:s[2],fill:rt(t,0)});break}case"diamond":{const n=L4e(e);r.push({shape:n[0],fill:rt(t,-.3)},{shape:n[1],fill:rt(t,0)},{shape:n[2],fill:rt(t,-.3)},{shape:n[3],fill:rt(t,-.7)});break}case"sphere":{const n=I$(rt(t,0),rt(t,-.6));n.x1=0,n.y1=0,n.x2=.25*e,n.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:n});break}case"tetrahedron":{const n=O4e(e);r.push({shape:n[0],fill:rt(t,-.3)},{shape:n[1],fill:rt(t,0)},{shape:n[2],fill:rt(t,-.6)});break}}break}return r}function OI(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?_t(e):null}function Bje(t){return t.type==="icon"?"multiply":"tint"}async function Gje(t,e){const i=OI(e),r=e!=null&&e.maxSize?_t(e.maxSize):null,n=(e==null?void 0:e.disableUpsampling)??!1,s=t.symbolLayers,o=[];let a=0,l=0;const u=s.at(-1);let p;u&&u.type==="icon"&&(p=u.size&&_t(u.size)),s.forEach(y=>{var w,b;if(y.type!=="icon"&&y.type!=="object")return;const g=y.type==="icon"?y.size&&_t(y.size):0,v=i||g?Math.ceil(Math.min(i||g,r||m2)):Nh;if((w=y==null?void 0:y.resource)!=null&&w.href){const _=zje(t,y).then(S=>{var I;const $=(I=y==null?void 0:y.material)==null?void 0:I.color,T=Bje(y);return Aje(S,v,$,T,n)}).then(S=>{const $=S.width,T=S.height;return a=Math.max(a,$),l=Math.max(l,T),[{shape:{type:"image",x:0,y:0,width:$,height:T,src:S.url},fill:null,stroke:null}]});o.push(_)}else{let _=v;y.type==="icon"&&p&&i&&(_=v*(g/p));const S=(e==null?void 0:e.symbolConfig)==="tall"||((b=e==null?void 0:e.symbolConfig)==null?void 0:b.isTall)||y.type==="object"&&Vje(y);a=Math.max(a,S?bN:_),l=Math.max(l,_),o.push(Promise.resolve(Uje(y,_,S)))}});const h=await Promise.allSettled(o),m=[];return h.forEach(y=>{y.status==="fulfilled"?m.push(y.value):y.reason&&q.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",y.reason)}),O_(m,[a,l],{node:e==null?void 0:e.node,scale:!1,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function Hje(t,e){const i=t.symbolLayers,r=[],n=LI(t),s=OI(e),o=(e!=null&&e.maxSize?_t(e.maxSize):null)||A4;let a,l=0,u=0;return i.forEach((p,h)=>{if(!p||p.type!=="line"&&p.type!=="path")return;const m=[];switch(p.type){case"line":{const y=wN(p,0);if(y==null)break;const g=(y==null?void 0:y.width)||0;h===0&&(a=g);const v=Math.min(s||g,o),w=h===0?v:s?v*(g/a):v,b=w>XB/2?2*w:XB;u=Math.max(u,w),l=Math.max(l,b),y.width=w,m.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[l,.5*u]}]},stroke:y});break}case"path":{const y=Math.min(s||Nh,o),g=rt(p,0),v=rt(p,-.2),w=P4(p,-.4),b=w?{color:w,width:1}:{};if(p.profile==="quad"){const _=p.width,S=p.height,$=x4e(_&&S?_/S:1,S===0,_===0),T={...b,join:"bevel"};m.push({shape:$[0],fill:v,stroke:T},{shape:$[1],fill:v,stroke:T},{shape:$[2],fill:g,stroke:T})}else m.push({shape:xw.pathSymbol3DLayer[0],fill:v,stroke:b},{shape:xw.pathSymbol3DLayer[1],fill:g,stroke:b});u=Math.max(u,y),l=u}}r.push(m)}),Promise.resolve(O_(r,[l,u],{node:e==null?void 0:e.node,scale:n,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel}))}async function qje(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,n=OI(e),s=e!=null&&e.maxSize?_t(e.maxSize):null,o=n||Nh,a=[];let l=0,u=0,p=!1;for(let h=0;h<r.length;h++){const m=r.at(h),y=[];if(!i||m.type==="fill"){switch(m.type){case"fill":{const g=Math.min(o,s||m2);if(l=Math.max(l,g),u=Math.max(u,g),p=!0,i){const v=xw.meshSymbol3DFill,w=P4(m,-.4),b=w?{color:w,width:1,join:"round"}:{};y.push({shape:v[0],fill:rt(m,0),stroke:b},{shape:v[1],fill:rt(m,-.2),stroke:b},{shape:v[2],fill:rt(m,-.6),stroke:b})}else{let v=rt(m,0);const w="pattern"in m?m.pattern:null,b=Xy(m),_=zT(m);w!=null&&w.type==="style"&&w.style!=="solid"&&_&&(v=await Jne(w,_)),y.push({shape:xw.fill[0],fill:v,stroke:b})}break}case"line":{const g=wN(m,0);if(g==null)break;const v={stroke:g,shape:xw.fill[0]};l=Math.max(l,Nh),u=Math.max(u,Nh),y.push(v);break}case"extrude":{const g={join:"round",width:1,...wN(m,-.4)},v=rt(m,0),w=rt(m,-.2),b=Math.min(o,s||m2),_=E4e(b);g.width=1,y.push({shape:_[0],fill:w,stroke:g},{shape:_[1],fill:w,stroke:g},{shape:_[2],fill:v,stroke:g});const S=Nh,$=.7*Nh+.5*b;l=Math.max(l,S),u=Math.max(u,$);break}case"water":{const g=zT(m),v=gL(g),w=gL(g,2),b=gL(g,3),_=T4e();p=!0,y.push({shape:_[0],fill:v},{shape:_[1],fill:w},{shape:_[2],fill:b});const S=Math.min(o,s||m2);l=Math.max(l,S),u=Math.max(u,S);break}}a.push(y)}}return O_(a,[l,u],{node:e==null?void 0:e.node,scale:p,opacity:e==null?void 0:e.opacity,ariaLabel:e==null?void 0:e.ariaLabel})}function Wje(t,e){if(t.symbolLayers.length===0)return Promise.reject(new j("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return Gje(t,e);case"line-3d":return Hje(t,e);case"polygon-3d":case"mesh-3d":return qje(t,e)}return Promise.reject(new j("symbolPreview: swatchInfo3D","symbol not supported."))}const Jje=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:Jne,getSizeFromOptions:OI,getSymbolLayerFill:rt,previewSymbol3D:Wje},Symbol.toStringTag,{value:"Module"})),t7={HH:315,HL:45,LL:135,LH:225},Zje={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function Yje(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return rt(t.symbolLayers.at(0));if(e==="simple-line"){const i=M1(t);return i&&i.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const i=M1(t);return i&&i.color}return aje(t)}function Kje(t,e){const i=e.HH.label,r=e.LL.label,n=e.HL.label,s=e.LH.label;switch(t){case"HH":default:return{top:i,bottom:r,left:n,right:s};case"HL":return{top:n,bottom:s,left:r,right:i};case"LL":return{top:r,bottom:i,left:s,right:n};case"LH":return{top:s,bottom:n,left:i,right:r}}}function Qje(t){const{focus:e,infos:i,numClasses:r}=t,n=Zje[r],s={};i.forEach(a=>{s[a.value]={label:a.label,fill:Yje(a.symbol)}});const o=[];for(let a=0;a<r;a++){const l=[];for(let u=0;u<r;u++){const p=s[n[a][u]];l.push(p.fill)}o.push(l)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:o,labels:Kje(e,s),rotation:Zne(e)}}function Zne(t){let e=t7[t];return t&&e==null&&(e=t7.HH),e||0}let wm=null;const i7=[255,255,255];function r7(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function Xje(t,e,i){const{backgroundColor:r,outline:n,dotSize:s}=t,o=(i==null?void 0:i.swatchSize)||Ri.size,a=.8,l=Math.round(o*o/s**2*a),u=window.devicePixelRatio,p=document.createElement("canvas"),h=o*u;p.width=h,p.height=h,p.style.width=p.width/u+"px",p.style.height=p.height/u+"px";const m=p.getContext("2d");if(r&&(m.fillStyle=r.toCss(!0),m.fillRect(0,0,h,h),m.fill()),m.fillStyle=(e==null?void 0:e.toCss(!0))??"",wm&&wm.length/2===l)for(let g=0;g<2*l;g+=2){const v=wm[g],w=wm[g+1];m.fillRect(v,w,s*u,s*u),m.fill()}else{wm=[];for(let g=0;g<2*l;g+=2){const v=r7(0,h),w=r7(0,h);wm.push(v,w),m.fillRect(v,w,s*u,s*u),m.fill()}}n&&(n.color&&(m.strokeStyle=n.color.toCss(!0)),m.lineWidth=n.width,m.strokeRect(0,0,h,h));const y=new Image(o,o);return y.src=p.toDataURL(),y.ariaLabel=(i==null?void 0:i.ariaLabel)??null,y.alt=(i==null?void 0:i.ariaLabel)??"",y}function eze(t,e={}){const i=e.radius||40,r=2*Math.PI*i,n=t.length,s=r/n,o=[],a=M1(e.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||e.backgroundColor)&&o.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:a,offset:[0,0]});const l=e.values,u=l&&l.length===n&&l.reduce((g,v)=>g+v,0)===100,p=[0];for(let g=0;g<n;g++){let v=null;u&&(v=l[g]*r/100,p.push(v+p[g])),o.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(v??s)/2} ${r}`,dashoffset:"-"+(u?p[g]/2:g*(s/2)),color:t[g]},offset:[0,0]})}let h=null;const m=2*i+((a==null?void 0:a.width)||0),y=e.holePercentage;if(y){a&&o.push({shape:{type:"circle",cx:i,cy:i,r:i*y},fill:null,stroke:a,offset:[0,0]});const g=m/2;h=[[{shape:{type:"circle",cx:g,cy:g,r:g},fill:i7,stroke:a?{...a,color:i7}:null,offset:[0,0]},{shape:{type:"circle",cx:g,cy:g,r:i*y},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return O_([o],[m,m],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:h,rotation:-90,ariaLabel:e.ariaLabel})}function $h(t,e={}){const n=e.align==="horizontal",s=n?75:24,o=n?24:75,a=e.width??s,l=e.height??o,u=e.gradient??!0,p=window.devicePixelRatio,h=a*p,m=l*p,y=document.createElement("canvas");y.width=h,y.height=m,y.ariaLabel=e.ariaLabel??null,y.style.width=`${a}px`,y.style.height=`${l}px`;const g=y.getContext("2d"),v=n?h:0,w=n?0:m;if(u){const _=g.createLinearGradient(0,0,v,w),S=t.length,$=S===1?0:1/(S-1);t.forEach((T,I)=>_.addColorStop(I*$,T.toString())),g.fillStyle=_,g.fillRect(0,0,h,m)}else{const _=n?h/t.length:h,S=n?m:m/t.length;let $=0,T=0;for(const I of t)g.fillStyle=I.toString(),g.fillRect($,T,_,S),$=n?$+_:0,T=n?0:T+S}const b=document.createElement("div");return b.style.width=`${a}px`,b.style.height=`${l}px`,tze(b,e==null?void 0:e.effectList),b.appendChild(y),b}function tze(t,e){if(!e)return;t.style.filter=O1(e);const i=e.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?t.style.marginLeft=`${Math.abs(r.offsetX)}px`:t.style.marginRight=`${r.offsetX}px`;break}}}async function Yne(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await Z(()=>import("./previewWebStyleSymbol-ZQAk3Cmb.js"),__vite__mapDeps([]));return i(t,Yne,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await Z(()=>Promise.resolve().then(()=>Jje),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await Z(()=>import("./previewSymbol2D-sAnHR1p-.js"),__vite__mapDeps([234,137]));return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await Z(()=>import("./previewCIMSymbol-OgaOUbxf.js"),__vite__mapDeps([235,146,137,106,71,18,99,75,145,72,76,100,21,147,136,138,151,152]));return i(t,e)}default:return}}function Kne(t){return t&&"opacity"in t?t.opacity*Kne(t.parent):1}async function dJe(t,e){var S;if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,n=Kne(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const $=t.symbol.type==="web-style"?await kje(t.symbol,{...e,cache:e!=null?e.webStyleCache:null}):t.symbol.clone();return yL($,null,n),$}const s=(e!=null?e.renderer:null)??(r&&"renderer"in r?r.renderer:null);let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(t,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,cache:e!=null?e.webStyleCache:null}):o.clone(),!s||!("visualVariables"in s)||!((S=s.visualVariables)!=null&&S.length))return yL(o,null,n),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const $={...e};$.arcade=await Zd(),e=$}const{getColor:a,getOpacity:l,getAllSizes:u,getRotationAngle:p}=await Z(()=>Promise.resolve().then(()=>Xf),void 0),h=[],m=[],y=[],g=[];for(const $ of s.visualVariables)switch($.type){case"color":h.push($);break;case"opacity":m.push($);break;case"rotation":g.push($);break;case"size":$.target||y.push($)}const v=!!h.length&&h[h.length-1],w=v?a(v,t,e):null,b=!!m.length&&m[m.length-1];let _=b?l(b,t,e):null;if(n!=null&&(_=_!=null?_*n:n),yL(o,w,_),y.length){const $=u(y,t,e);await Eje(o,$)}for(const $ of g)Tje(o,p($,t,e),$.axis);return o}const ize=(t,e)=>{const i=t.featuresTilingScheme.getClosestInfoForScale(t.scale).level;return e!=null&&e.levels?e.levels[i]:null};function rze(t,e){if(!t||!("visualVariables"in t)||!t.visualVariables)return null;const i=t.visualVariables.find(n=>n.type==="size"),r=ize(e,i);return r?new v_({field:i.field,minSize:r[2].size,minDataValue:r[2].value,maxSize:r[3].size,maxDataValue:r[3].value}):null}const nze=/^-?(\d+)(\.(\d+))?$/i;function sze(t,e){return t-e}function oze(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function aze(t,e,i,r,n){const s=y2(t,e,i,r),o=s.previous==null||s.previous<=n,a=s.next==null||s.next<=n;return o&&a||s.previous+s.next<=2*n}function VT(t){const e=String(t),i=e.match(nze);if(i&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),n=r[0],s=r[1];if(n&&s){const o=Number(n);let a=Number(s);const l=a>0;l||(a=Math.abs(a));const u=VT(o);return l?(u.integer+=a,a>u.fractional?u.fractional=0:u.fractional-=a):(u.fractional+=a,a>u.integer?u.integer=1:u.integer-=a),u}}return{integer:0,fractional:0}}function y2(t,e,i,r){const n={previous:null,next:null};if(i!=null){const s=t-i,o=e-i-s;n.previous=Math.floor(Math.abs(100*o/s))}if(r!=null){const s=r-t,o=r-e-s;n.next=Math.floor(Math.abs(100*o/s))}return n}function UT(t,e={}){const i=t.slice(0),{tolerance:r=2,strictBounds:n=!1,indexes:s=i.map((o,a)=>a)}=e;s.sort(sze);for(let o=0;o<s.length;o++){const a=s[o],l=i[a],u=a===0?null:i[a-1],p=a===i.length-1?null:i[a+1],h=VT(l).fractional;if(h){let m,y=0,g=!1;for(;y<=h&&!g;){const v=oze(l,y);m=n&&o===0?v[1]:v[0],g=aze(l,m,u,p,r),y++}g&&(i[a]=m)}}return i}const lze={maximumFractionDigits:20};function cze(t){return Cf(t,lze)}const Qne="<",Xne=">";function ese(t,e,i,r){let n="";return e===0?n=`${Qne} `:e===i&&(n=`${Xne} `),n+(r?f4e(t,r):cze(t))}const uze=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function _N(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(o=>o.type==="color");if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const n=i!=null&&r!=null?i+(r-i)/2:0,{getColor:s}=await Z(()=>Promise.resolve().then(()=>Xf),void 0);return s(e,n)??null}async function tse(t,e){const i=t.trailCap,r=t.trailWidth||1,n=e||await _N(t)||t.color;return new qn({cap:i,color:n,width:r})}function n7(t){return t!=null&&typeof t=="object"&&"min"in t&&"max"in t}const dze=new le([64,64,64]);function ise(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((n,s)=>i.includes(s)?ese(n,s,r,e):null)}async function SN(t,e,i){let r=!1,n=[],s=[];if(t.stops){const u=t.stops;n=u.map(p=>p.value),r=u.some(p=>!!p.label),r&&(s=u.map(p=>p.label))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const l=r?null:ise(n,i);return(await Promise.all(n.map(async(u,p)=>({value:u,color:t.type==="opacity"?await pze(u,t,e):(await Z(()=>Promise.resolve().then(()=>Xf),void 0)).getColor(t,u),label:r?s[p]:(l==null?void 0:l[p])??""})))).reverse()}async function pze(t,e,i){const r=new le(i??dze),n=(await Z(()=>Promise.resolve().then(()=>Xf),void 0)).getOpacity(e,t);return n!=null&&(r.a=n),r}function hze(t){let e=!1,i=[],r=[];i=t.map(a=>a.value),e=t.some(a=>!!a.label),e&&(r=t.map(a=>a.label??""));const n=i[0],s=i[i.length-1];if(n==null&&s==null)return null;const o=e?null:ise(i);return i.map((a,l)=>({value:a,color:rse(a,t),label:e?r[l]:(o==null?void 0:o[l])??""})).reverse()}function rse(t,e){const{startIndex:i,endIndex:r,weight:n}=fze(t,e);if(i===r)return e[i].color;const s=le.blendColors(e[i].color,e[r].color,n);return new le(s)}function fze(t,e){let i=0,r=e.length-1;return e.some((n,s)=>t<n.value?(r=s,!0):(i=s,!1)),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function mze(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((r,n)=>{n===0?i.push({value:e.max,color:new le(r.toColor),label:"high"}):i.push({value:null,color:new le(r.toColor),label:""}),n===t.colorRamps.length-1?i.push({value:e.min,color:new le(r.fromColor),label:"low"}):i.push({value:null,color:new le(r.fromColor),label:""})});else{let r,n;t&&t.type==="algorithmic"?(r=t.fromColor,n=t.toColor):(r=[0,0,0,1],n=[255,255,255,1]),i=[{value:e.max,color:new le(n),label:"high"},{value:e.min,color:new le(r),label:"low"}]}return i}function nse(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>{var n;return((n=r.color)==null?void 0:n.a)>0});let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new ow({ratio:1,color:r.color})),i++)}return e.map((r,n)=>{var o,a;let s="";return n===0?s=((o=t.legendOptions)==null?void 0:o.minLabel)||"low":n===i&&(s=((a=t.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:r.color,label:s,ratio:r.ratio}}).reverse()}const $N=30,xN=12,sse=[255,255,255],ose=[200,200,200],eg=[128,128,128],yze=20,gze=5;function vze(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function bze(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function wze(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function _ze(t){return t.declaredClass==="esri.symbols.TextSymbol"}function Sze(t,e){const i=t.length-1;return t.map((r,n)=>ese(r,n,i,e))}async function $ze(t,e,i,r,n,s,o){const a=e.legendOptions,l=a==null?void 0:a.customValues,u=o||await Tze(t,i),p=e.stops,h=!!u,m=!!l,y=e.minSize!=null&&e.maxSize!=null,g=p&&p.length>1,v=!!e.target;if(!h||!m&&!(y||g&&!v))return;const w=LI(u);let b=!1,_=null,S=null;_=w&&!g?UT([e.minDataValue,e.maxDataValue]):l??await Ize(e,u,r,n==null?void 0:n.type);const $=t==null?void 0:t.authoringInfo,T=($==null?void 0:$.type)==="univariate-color-size",I=T&&($==null?void 0:$.univariateTheme)==="above-and-below";if(!_&&g&&(_=p.map(O=>O.value),b=p.some(O=>!!O.label),t.type==="flow"&&(_=UT(_)),b&&(S=p.map(O=>O.label))),w&&_!=null&&(_==null?void 0:_.length)>2&&!I&&(_=[_[0],_[_.length-1]]),!_)return null;T&&(_==null?void 0:_.length)!==5&&(_=cse({minSize:_[0],maxSize:_[_.length-1]}));const C=w?xze(t,_):null,M=pje(u),R=b?null:Sze(_,s);return(await Promise.all(_.map(async(O,F)=>{const A=w?C[F]:await Ty(e,u,O,r,n==null?void 0:n.type);return{value:O,symbol:Lze(I&&t.type==="class-breaks"?Eze(t,F):u,A),label:b?S[F]:R[F],size:A,outlineSize:M}}))).reverse()}function xze(t,e){const i=t==null?void 0:t.authoringInfo,r=(i==null?void 0:i.type)==="univariate-color-size";let n=[xN,$N];if(r){const s=e[0],o=e[e.length-1],a=xN,l=$N;n=e.map(u=>a+(u-s)/(o-s)*(l-a))}return r&&(i==null?void 0:i.univariateTheme)==="below"&&n.reverse(),n}function Eze(t,e){const i=t.classBreakInfos,r=i.length,n=r<2||!(e>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return t.visualVariables.some(s=>s.type==="color")&&(n.type.includes("3d")?ase(n):lse(n)),n}async function Tze(t,e){var n,s;if(t.type==="flow")return tse(t,e);if(t.type==="pie-chart")return new jn({color:null,outline:(n=t.outline)!=null&&n.width?t.outline:new qn});let i=null,r=null;if(t.type==="simple")i=t.symbol;else if(t.type==="class-breaks"){const o=t.classBreakInfos;i=o&&o[0]&&o[0].symbol,r=o.length>1}else if(t.type==="unique-value"){const o=t.uniqueValueInfos;i=(s=o==null?void 0:o[0])==null?void 0:s.symbol,r=o!=null&&o.length>1}return!i||kze(i)?null:(i=i.clone(),(e||r)&&(i.type.includes("3d")?ase(i):lse(i)),i)}function kze(t){return t?xl(t)?!!t.symbolLayers&&t.symbolLayers.some(e=>e&&e.type==="fill"):t.type.includes("fill"):!1}function ase(t){t.type==="line-3d"?t.symbolLayers.forEach(e=>{e.material={color:eg}}):t.symbolLayers.forEach(e=>{var i;e.type!=="icon"||(i=e.resource)!=null&&i.href?e.material={color:ose}:(e.material={color:sse},e.outline={color:eg,size:1.5})})}function lse(t){var i,r;const e=Nie();t.type==="cim"?wne(t,new le(ose)):t.type.includes("line")?t.color=eg:(t.color=e?eg:sse,t.type==="simple-marker"&&(t.outline?((r=(i=t.outline)==null?void 0:i.color)==null?void 0:r.toHex())==="#ffffff"&&(t.outline.color=eg):t.outline={color:eg,width:1.5}))}async function Ize(t,e,i,r){const n=(await Z(()=>Promise.resolve().then(()=>Xf),void 0)).getSizeRangeAtScale(t,i,r),s=n&&cse(n);if(!n||!s)return;let o=s.map(a=>Cze(a,t,n));o=UT(o);for(let a=1;a<o.length-1;a++){const l=await Mze(t,e,o[a],o[a-1],i,r);l&&(o[a]=l[0],s[a]=l[1])}return o}function cse(t){const e=t.minSize,i=t.maxSize,r=gze,n=(i-e)/(r-1),s=[];for(let o=0;o<r;o++)s.push(e+n*o);return s}function Cze(t,e,i){const r=i.minSize,n=i.maxSize,s=e.minDataValue,o=e.maxDataValue;let a;return t<=r?a=s:t>=n?a=o:a=(t-r)/(n-r)*(o-s)+s,a}async function Mze(t,e,i,r,n,s){const o=await Ty(t,e,i,n,s),a=await Ty(t,e,r,n,s),l=VT(i),u=l.fractional,p=yze;let h=l.integer,m=null,y=null;i>0&&i<1&&(m=10**u,h=VT(i*=m).integer);for(let g=h-1;g>=0;g--){const v=10**g;let w=Math.floor(i/v)*v,b=Math.ceil(i/v)*v;m!=null&&(w/=m,b/=m);let _=(w+b)/2;[,_]=UT([w,_,b],{indexes:[1]});const S=await Ty(t,e,w,n,s),$=await Ty(t,e,b,n,s),T=await Ty(t,e,_,n,s),I=y2(o,S,a,null),C=y2(o,$,a,null),M=y2(o,T,a,null);let R=I.previous<=p,O=C.previous<=p;if(R&&O&&(I.previous<=C.previous?(R=!0,O=!1):(O=!0,R=!1)),R?y=[w,S]:O?y=[b,$]:M.previous<=p&&(y=[_,T]),y)break}return y}async function Ty(t,e,i,r,n){const{getSize:s}=await Z(()=>Promise.resolve().then(()=>Xf),void 0);return s(t,i,{scale:r,view:n,shape:e.type==="simple-marker"?e.style:null})}function Lze(t,e){const i=t.clone();if(xl(i))LI(i)||i.symbolLayers.forEach(r=>{r.type!=="fill"&&(r.size=e)});else if(vze(i))i.size=e;else if(bze(i)){const r=i.width,n=i.height;i.height=e,i.width=e*(r/n)}else wze(i)?i.width=e:_ze(i)&&i.font&&(i.font.size=e);return i}q.getLogger("esri.renderers.support.utils");async function Yn(t,e,i){ZD(t,e,()=>[]).push(...i)}async function pJe(t){var i,r;const e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){const n=t.visualVariables.filter(s=>s.type==="color");for(const s of n){const o=(await SN(s)??[]).map(a=>a.color);await Yn(e,s.field||s.valueExpression,o)}}if(t.type==="heatmap"){const n=nse(t).map(s=>s.color);await Yn(e,t.field||t.valueExpression,n)}else if(t.type==="pie-chart"){for(const n of t.attributes)await Yn(e,n.field||n.valueExpression,[n.color]);await Yn(e,"default",[(i=t==null?void 0:t.othersCategory)==null?void 0:i.color,vm(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(const n of t.attributes)await Yn(e,n.field||n.valueExpression,[n.color]);await Yn(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(((r=t.authoringInfo)==null?void 0:r.type)==="predominance")for(const n of t.uniqueValueInfos??[])await Yn(e,n.value.toString(),[vm(n.symbol,null)]);else{const n=(t.uniqueValueInfos??[]).map(u=>vm(u.symbol,null)),{field:s,field2:o,field3:a,valueExpression:l}=t;(s||l)&&await Yn(e,s||l,n),o&&await Yn(e,o,n),a&&await Yn(e,a,n)}else if(t.type==="class-breaks"){const n=t.classBreakInfos.map(a=>vm(a.symbol,null)),{field:s,valueExpression:o}=t;await Yn(e,s??o,n)}else t.type==="simple"&&await Yn(e,"default",[vm(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await Yn(e,"default",[vm(t.defaultSymbol,null)]),e.forEach((n,s)=>{const o=The(n.filter(Boolean),(a,l)=>JSON.stringify(a)===JSON.stringify(l));e.set(s,o)}),e}function Oze(t){const i=Math.floor(Math.log10(Math.abs(t)))+1,r=i<4||i>6?4:i,n=1e6,s=Math.abs(t)>=n?"compact":"standard";return Cf(t,{notation:s,minimumSignificantDigits:2,maximumSignificantDigits:r})}const Aze="https://utility.arcgis.com/sharing/tools/legend",Pze="esri.layers.ImageryLayer",Rze="esri.layers.ImageryTileLayer",Nze="esri.layers.WCSLayer",C$=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Dze=new $e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),M$=new jn({size:6,outline:{color:[128,128,128,.5],width:.5}}),Fze=new Yc({style:"solid"});function EN(t){return t.type==="flow"}function use(t){return t.type==="vector-field"}function dse(t){return t.type==="raster-colormap"}function pse(t){return t.type==="raster-stretch"}function hse(t){return t.type==="raster-shaded-relief"}function ky(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function Iy(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function g2(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function fse(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function jze(t){return R4(t)||N4(t)||D4(t)||zze(t)}function zze(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function R4(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function N4(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function D4(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function mse(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function yse(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function Vze(t,e){return ky(t)||Iy(t)||g2(t)||fse(t)||mse(t)||yse(t)?e.type==="2d"||p4e(t):pse(t)||dse(t)||hse(t)||R4(t)||N4(t)||D4(t)||use(t)||EN(t)}function Uze(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function vL(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function Bze(t){return t.declaredClass==="esri.layers.VoxelLayer"}function Gze(t){return t.declaredClass==="esri.layers.WMSLayer"}function Hze(t){return t.declaredClass==="esri.layers.WMTSLayer"}function bL(t){return t.declaredClass==="esri.layers.MapImageLayer"}function s7(t){return t.declaredClass==="esri.layers.TileLayer"}function _m(t){return t.declaredClass===Pze}function L$(t){return t.declaredClass===Rze}function qze(t){return t.declaredClass===Nze}function Wze(t){return t.type==="stretch-ramp"}function Jze(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"}function Zze(t){const e="authoringInfo"in t?t==null?void 0:t.authoringInfo:null;return(e==null?void 0:e.type)==="univariate-color-size"&&(e==null?void 0:e.univariateTheme)==="above-and-below"}function o7(t){return"sublayers"in t}async function Ul(t,e){const i=await Fk("esri/widgets/Legend/t9n/Legend");return t!=="previewTemplateAriaLabel"||e||(t="previewAriaLabel"),QE(i[t],{label:e})}const Yze=new jn({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Sm={},Ci=class extends de{constructor(t){super(t),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new ce,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this.addHandles([bs(()=>this.children,"change",e=>{const{added:i,removed:r}=e;i.forEach(n=>{const s=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles(Y(()=>n.ready,t,Le),s)}),r.forEach(n=>this.removeHandles(n.layer.uid)),t()})]),this.keepCacheOnDestroy||(Sm={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Sm=null)}get effectList(){const t=this.layer;let e=null;return"effect"in t&&t.effect&&(e=new Ya,e.effect=t.effect,e.endTransitions(),e.scale=this.scale),e}get opacity(){var n;const t=this.layer.opacity,e=(n=this.parent)==null?void 0:n.opacity,i=this.layer.parent,r=i&&"uid"in i?this._getParentLayerOpacity(i):null;return e!=null?e*t:r!=null?r*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){var t;return((t=this.view)==null?void 0:t.scale)??0}get isScaleDriven(){const t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const e=Array.from(t,i=>{var r;if(o0e(i))return this._getRendererLegendElements(i.renderer,{title:i.title});if((r=i.featureSet)!=null&&r.features.length){const n=i.layerDefinition,s=n==null?void 0:n.drawingInfo,o=s&&wEe(s.renderer),a=Dze.read(n.geometryType);return o?this._getRendererLegendElements(o,{title:i.name,geometryType:a}):(q.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const i=[],r=await Promise.allSettled(e);for(const n of r)if(n.status==="fulfilled")for(const s of n.value??[])i.push(s);this.legendElements=i,this.notifyChange("ready")}catch(i){q.getLogger(this).warn("error while building legend for layer!",i)}}async buildLegendElementsForRenderer(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[],this.notifyChange("ready")}catch(e){q.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForFeatureReduction(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getLegendElementsForFeatureReduction(t):[],this.notifyChange("ready")}catch(e){q.getLogger(this).warn("error while building legend for layer!",e)}}async buildLegendElementsForTools(){var e,i;const t=this.layer;if(Bze(t))this._constructLegendElementsForVoxellayer();else if(Hze(t))this._constructLegendElementsForWMTSlayer();else if(Gze(t))await this._constructLegendElementsForWMSSublayers();else if(Uze(t))await this._constructLegendElementsForBuildingSceneLayer();else if(bL(t)||s7(t)||vL(t))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let r="default";if(_m(t)){const n=t;r=(((e=n==null?void 0:n.rasterFunction)==null?void 0:e.functionName)||"default")+"_"+((i=t.bandIds)!=null&&i.length?t.bandIds.join(""):"###")}await this._getLegendLayers(`${t.uid}-${r}`).then(async n=>{this.legendElements=[],this.notifyChange("ready");const s=n.map(async o=>{if(_m(t)||L$(t)){const l=Y(()=>["renderingRule"in t&&t.rasterFunction,t.bandIds],()=>Q1(async()=>{Sm.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()})());this.addHandles(l,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(o);a&&a.infos.length&&(_m(t)&&(a.title=t.title),this.legendElements.push(a)),this.notifyChange("ready")});await Promise.allSettled(s)}).catch(n=>{q.getLogger(this).warn("Request to server for legend has failed!",n)})}}async _isLayerInCurrentView(){const t=this.layer,e=this.layerView,i=e&&"createQuery"in e&&"queryFeatureCount"in e;if(!i&&!(e&&"createQuery"in t&&"queryFeatureCount"in t))return!0;await Zf(()=>!e.updating);const r=i?"createQuery"in e&&e.createQuery():"createQuery"in t&&t.createQuery();return r?(r.geometry=this.view.extent,(i?"queryFeatureCount"in e&&await e.queryFeatureCount(r):"queryFeatureCount"in t&&await t.queryFeatureCount(r))!==0):!0}_getParentLayerOpacity(t){let e=1;const i=t.parent;return i&&"uid"in i&&(e=this._getParentLayerOpacity(i)),t.opacity*e}_isGroupActive(){const t=this.children;return!!t.length&&t.some(e=>e.ready)}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;const e="valueExpression"in t?t.valueExpression:null;if(C$.test(e))return!0;const i="visualVariables"in t?t.visualVariables:null;return!!(i!=null&&i.some(r=>this._isScaleDrivenSizeVariable(r)))||this._hasScaleDrivenSymbols(t)}_hasScaleDrivenSymbols(t){var e;switch(t.type){case"simple":return this._isScaleDrivenSymbol(t.symbol);case"class-breaks":return this._isScaleDrivenSymbol(t.defaultSymbol)||t.classBreakInfos.some(i=>this._isScaleDrivenSymbol(i.symbol));case"unique-value":return this._isScaleDrivenSymbol(t.defaultSymbol)||!!((e=t.uniqueValueInfos)!=null&&e.some(i=>this._isScaleDrivenSymbol(i.symbol)))}return!1}_isScaleDrivenSymbol(t){if((t==null?void 0:t.type)==="cim"){const{primitiveOverrides:e,minScale:i,maxScale:r}=t.data,n=(e==null?void 0:e.some(s=>{var o;return/\$view\.scale/.test(((o=s.valueExpressionInfo)==null?void 0:o.expression)||"")}))??!1;return i!=null||r!=null||n}return!1}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;const e=t,i=e.minSize,r=e.maxSize;return!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||!!e.expression||C$.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some(i=>this._isLayerScaleDriven(i));const e=t.parent;if(t.loaded===!1&&e&&bL(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(const i of e.sourceJSON.layers??[])if(i.id===t.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxellayer(){var s;this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const t=this.layer;this.addHandles(Y(()=>t.currentVariableId,()=>this._constructLegendElementsForVoxellayer()),"voxel-current-variable"),this.addHandles(Y(()=>t.getVariableStyles(),()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");const e=t.getVariableStyle(null),i=[];if(e){if((s=e.uniqueValues)!=null&&s.length){const o=[];e.uniqueValues.forEach(a=>{a.enabled&&o.push({label:a.label||`${a.value}`,value:a.value,symbol:new Yc({color:a.color,outline:null})})}),o.length&&i.push({type:"symbol-table",title:e.label,infos:o})}else if(e.transferFunction){const{colorStops:o,stretchRange:a}=e.transferFunction,l=o.toArray().reverse(),u=a.map((h,m)=>`${m===0?Qne:Xne} ${Oze(h)}`).reverse(),p=l.map(h=>({color:h.color,value:null,label:null}));p[0].label=u[0],p[p.length-1].label=u[1],i.push({type:"color-ramp",title:e.label,infos:p,preview:$h(l.map(h=>h.color),{ariaLabel:await Ul("previewColorRampAriaLabel")})})}}const r=t.opacity,n=i.reduce((o,a)=>[...o,...this._getAllInfos(a)],[]).filter(o=>!!(o!=null&&o.symbol)).map(o=>this._getSymbolPreview(o,r));await Promise.allSettled(n),this.legendElements=i,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const t=this.layer.activeLayer;if(this.addHandles(Y(()=>{const{layer:e}=this;return e&&"activeLayer"in e&&e.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher"),t.styleId&&t.styles){let e=null;t.styles.some(i=>t.styleId===i.id&&(e=i.legendUrl,!0)),e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}])}this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this.addHandles(Y(()=>{const{layer:i}=this;return i&&"sublayers"in i&&i.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){const i=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const r=t.toArray();for(const n of r){const s=Y(()=>[n.title,n.visible,n.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(s,"wms-sublayers-watcher"),!this.respectLayerVisibility||n.visible&&n.legendEnabled){const o=await this._generateSymbolTableElementForWMSSublayer(n,e);o!=null&&o.infos.length&&i.unshift(o)}}return i}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter(r=>r);return{type:"symbol-table",title:t.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){var o;let i=t.legendUrl;if(!i)return;const r={type:"symbol-table",title:t.title||t.name||String(t.id??""),infos:[]};e&&(i=K$(i,e));let n=null;const s=(o=t.layer)==null?void 0:o.opacity;try{n=(await Ve(i,{responseType:"image"})).data,n&&(n.style.opacity=s)}catch{}return r.infos.push({src:i,preview:n,opacity:s}),r}_getLegendLayers(t,e){const i=Sm&&Sm[t];return i?Promise.resolve(i):this._legendRequest(e).then(r=>{const n=r.layers;return Sm[t]=n,n})}_legendRequest(t){var n;const e=this.layer;let i={f:"json",dynamicLayers:t};if(_m(e)){const s=e.exportImageServiceParameters.rasterFunction;if(s&&(i.renderingRule=JSON.stringify(((n=s.functionDefinition)==null?void 0:n.toJSON())||s.toJSON())),e.bandIds&&(i.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:o,viewId:a,customParameters:l}=e;i={raster:o,viewId:a,...i,...l}}}let r=e.url.replace(/(\/)+$/,"");if("version"in e&&+e.version>=10.01){const s=r.indexOf("?");s>-1?r=r.substring(0,s)+"/legend"+r.substring(s):r+="/legend"}else{const s=r.toLowerCase().indexOf("/rest/"),o=r.substring(0,s)+r.substring(s+5,r.length);r=Aze+"?soapUrl="+encodeURI(o)+"&returnbytes=true"}return Ve(r,{query:i}).then(s=>s.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;this.addHandles(Y(()=>t.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){q.getLogger(this).warn("Request to server for legend has failed!",e)}}async _generateLegendElementsForBuildingSublayers(t,e){let i=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const r=t.toArray();for(const n of r){const s=Y(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(s,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const o=(n==null?void 0:n.opacity)!=null?n.opacity:null,a=o!=null?o*e:e;if(n.type==="building-group"){const l={type:"symbol-table",title:n.title,infos:[]},u=await this._generateLegendElementsForBuildingSublayers(n.sublayers,a);l.infos.push(...u),i=[l,...i]}else n.renderer&&(i=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:a,sublayer:n}),...i])}}return i.filter(n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles("sublayers-watcher");const t=this.layer;if(bL(t)||s7(t)||vL(t)){this.addHandles(Y(()=>t.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){q.getLogger(this).warn("Request to server for legend has failed!",e)}}}async _generateLegendElementsForSublayers(t,e,i){const r=this.layer;let n=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let s=t.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(s=vL(r)?this.sublayerIds.map(o=>r.findSublayerForSubtypeCode(o)).filter(An):this.sublayerIds.map(o=>r.findSublayerById(o)).filter(An));for(const o of s){const a=Y(()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this.addHandles(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const l=(o==null?void 0:o.opacity)!=null?o.opacity:null,u=l!=null?l*e:e,p=!o7(o)||o.originIdOf("renderer")>Ie.SERVICE&&!o.sublayers;if(o.renderer&&p)await o.load(),n=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:u,sublayer:o}),...n];else if(o7(o)){const h=await this._generateSymbolTableElementForSublayer(o,u,i);h&&n.unshift(h)}}}return n.filter(o=>!!o&&(!("infos"in o)||!o.infos||o.infos.length>0))}async _generateSymbolTableElementForSublayer(t,e,i){if(!i){i=new Map;const n=this.layer,s=t.source;let o=null;if(!(!s||s.type==="map-layer"&&s.mapLayerId===t.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||t.originIdOf("renderer")>Ie.SERVICE||t.originIdOf("labelingInfo")>Ie.SERVICE||t.originIdOf("labelsVisible")>Ie.SERVICE){const l=new ns({layer:this.layer});o=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const a=o||`${n.uid}-default`;(await this._getLegendLayers(a,o)).forEach(l=>i.set(l.layerId,l))}const r=i.get(t.id);if((!r||r!=null&&r.subLayerIds&&r.defaultVisibility)&&t.sublayers){const n=await this._generateLegendElementsForSublayers(t.sublayers,e,i);return{type:"symbol-table",title:t.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(r,t,e)}_generateSymbolTableElementForLegendLayer(t,e,i){if(!(t!=null&&t.legend)||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const r=e==null?void 0:e.renderer;let n=(e==null?void 0:e.title)||t.layerName;if(r&&(!e||(e==null?void 0:e.originIdOf("renderer"))>Ie.SERVICE)){const a=(e==null?void 0:e.title)||this._getRendererTitle(r,e);a&&(n&&typeof a!="string"&&"title"in a&&(a.title=n),n=a)}const s={type:"symbol-table",title:n,legendType:t.legendType||null,infos:[]},o=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return t.legendGroups&&t.legendGroups.length>0?t.legendGroups.forEach(a=>{var u;const l={type:"symbol-table",title:a.heading,legendType:t.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter(p=>p.groupId===a.id),t.layerId,i)};((u=l.infos)==null?void 0:u.length)>0&&s.infos.push(l)}):s.infos=this._generateSymbolTableElementInfosForLegendLayer(o,t.layerId,i),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(t,e,i){return t.map(r=>{let n=r.url;if(r.imageData&&r.imageData.length>0)n=`data:image/png;base64,${r.imageData}`;else{if(n.indexOf("http")===0)return null;n=cye(`${this.layer.url}/${e}/images/${n}`)}return{label:r.label,src:n,opacity:i??this.opacity,width:r.width,height:r.height}}).filter(An)}_isSublayerInScale(t){const e=t.minScale||0,i=t.maxScale||0;return!(e>0&&e<this.scale||i>this.scale)}_isLegendLayerInScale(t,e){const i=e||this.layer;let r=null,n=null,s=!0;return!i.minScale&&i.minScale!==0||!i.maxScale&&i.maxScale!==0?(t.minScale===0&&i.tileInfo&&(r=i.tileInfo.lods[0].scale),t.maxScale===0&&i.tileInfo&&(n=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(r=Math.min(i.minScale,t.minScale)||i.minScale||t.minScale,n=Math.max(i.maxScale,t.maxScale)),(r>0&&r<this.scale||n>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(t,e){if("version"in this.layer&&+this.layer.version<10.1||t.length===0)return t;const i=e.renderer,r=t.some(o=>o.values);let n=0,s=null;return r&&t.some((o,a)=>(o.values||(n=a,s=o,s.label||(s.label="others")),s!=null)),i?i.type==="unique-value"?s&&(t.splice(n,1),t.push(s)):i.type==="class-breaks"&&(s&&t.splice(n,1),t.reverse(),s&&t.push(s)):s&&(t.splice(n,1),t.push(s)),t}async _getRendererLegendElements(t,e={}){if(!Vze(t,this.view))return q.getLogger(this).warn(`Renderer of type '${t.type}' not supported!`),[];if(jze(t))return this._constructPointCloudRendererLegendElements(t,e);if(mse(t))return this._constructDotDensityRendererLegendElements(t);const i=await this._loadRenderer(t);return yse(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,e)}async _getLegendElementsForFeatureReduction(t){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e):[]}_getPointCloudRendererTitle(t){var e;return(((e=t.legendOptions)==null?void 0:e.title)||t.field)??""}async _constructPointCloudRendererLegendElements(t,e={}){var a;const i=e.title,r=[];let n=null,s=null;if(R4(t))n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach(l=>{n.infos.unshift({label:l.label||l.minValue+" - "+l.maxValue,value:[l.minValue,l.maxValue],symbol:this._getAppliedCloneSymbol(M$,l.color)})});else if(N4(t)){const l=t.stops;let u=null;if(l!=null&&l.length&&(l.length===1&&(u=l[0].color),!u)){const h=l[0].value,m=l[l.length-1].value;h!=null&&m!=null&&(u=rse(h+(m-h)/2,l))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(M$,u||M$.color)}]};const p=hze(t.stops??[])??[];s={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:p,preview:$h(p.map(h=>h.color),{ariaLabel:await Ul("previewColorRampAriaLabel")})}}else D4(t)&&(n={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},(a=t.colorUniqueValueInfos)==null||a.forEach(l=>{n.infos.push({label:l.label||l.values.join(", "),value:l.values.join(", "),symbol:this._getAppliedCloneSymbol(M$,l.color)})}));n&&n.infos.length&&r.push(n),s&&s.infos.length&&r.push(s);const o=r.reduce((l,u)=>[...l,...u.infos??[]],[]).filter(l=>!!l.symbol).map(l=>this._getSymbolPreview(l,this.opacity,{symbolConfig:{applyColorModulation:!!t.colorModulation}}));return await Promise.allSettled(o),r}async _getElementInfoForDotDensity(t,e){const{color:i,label:r,valueExpressionTitle:n}=e,{backgroundColor:s,outline:o,dotSize:a}=t,l=this.effectList,u=l==null?void 0:l.effects.map(b=>b.toJSON()),p=lT(u),h=await Ul("previewTemplateAriaLabel",r||n),m=a+"-"+i+"-"+s+"-"+(o&&JSON.stringify(o.toJSON()))+"-"+p,y=this._dotDensityUrlCache,g=y.has(m)?y.get(m):Xje(t,i,{ariaLabel:h});y.set(m,g);const v={shape:{type:"image",x:0,y:0,width:g.width,height:g.height,src:g.src},fill:null,stroke:null,offset:[0,0]},w=O_([[v]],[g.width,g.height],{effectView:this.effectList,ariaLabel:h});return{opacity:1,src:g.src,preview:w,width:g.width,height:g.height}}async _constructDotDensityRendererLegendElements(t){var n;const e=t.calculateDotValue(this.view.scale),i=(n=t.legendOptions)==null?void 0:n.unit,r={type:"symbol-table",title:{value:e&&Math.round(e),unit:i||""},infos:[]};for(const s of t.attributes){const o=await this._getElementInfoForDotDensity(t,s);o.label=s.label||s.valueExpressionTitle||s.field,r.infos.push(o)}return[r]}async _constructPieChartRendererLegendElements(t){var l,u,p,h;const e=this.layer.opacity,i=[];let r=null;const n=t.outline;t.attributes.forEach(m=>{const y=new jn({color:m.color,outline:n}),g=m.label||m.valueExpressionTitle||m.field;i.push({label:g,symbol:y})});const s=i.length?[...i]:[];if((l=t.othersCategory)!=null&&l.color&&((u=t.othersCategory)==null?void 0:u.threshold)!==0){const m=new jn({color:t.othersCategory.color,outline:n});r=t.othersCategory.label||"Other",i.push({label:r,symbol:m})}if((p=t.defaultColor)!=null&&p.a){const m=new jn({color:t.defaultColor,outline:n});i.push({label:t.defaultLabel,symbol:m})}const o=await this._getVisualVariableLegendElements(t,this.layer)||[];if(i.length){o.unshift({type:"symbol-table",title:null,infos:i});const m=s.filter(g=>g.label!==r).map(g=>g.symbol.color).filter(Boolean),y=eze(m,{holePercentage:t.holePercentage,backgroundColor:(h=t.backgroundFillSymbol)==null?void 0:h.color,effectList:this.effectList,outline:n,ariaLabel:await Ul("previewPieChartAriaLabel")});o.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:i,preview:y})}const a=o.reduce((m,y)=>[...m,...this._getAllInfos(y)],[]).filter(m=>!!(m!=null&&m.symbol)&&!(m!=null&&m.preview)).map(m=>this._getSymbolPreview(m,e,{effectList:this.effectList}));return await Promise.allSettled(a),o}async _constructRendererLegendElements(t,e={}){var v,w,b,_,S;const{title:i,sublayer:r}=e,n=r||this.layer;this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const s=await this._getVisualVariableLegendElements(t,n)||[],o={type:"symbol-table",title:i||this._getRendererTitle(t,n),infos:[]};let a=null,l=!1;const u=new Set;if(EN(t)&&!this._hasSizeRamp){const $=await tse(t);o.infos.push({label:null,symbol:$})}else if(Jze(t)){let $=i;const T=Zze(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",I=s.findIndex(F=>F.type==="color-ramp"),C=I!==-1?s.splice(I,1)[0]:null,M=s.findIndex(F=>F.type==="size-ramp"),R=M!==-1?s.splice(M,1)[0]:null,O=[];C&&($=C.title,O.push(C)),R&&($=R.title,O.push(R)),O.length>0&&s.push({type:T,title:$,infos:O})}else if(fse(t)){const $=nse(t);s.push({type:"heatmap-ramp",title:i||this._getRendererTitle(t,n),infos:$,preview:$h($.map(T=>T.color),{effectList:this.effectList,ariaLabel:await Ul("previewColorRampAriaLabel")})})}else if(g2(t)){const $=t&&t.authoringInfo;if($&&$.type==="relationship"){const{numClasses:T,field1:I,field2:C}=$,M=$.focus;if(T&&I&&C){const R=[I,C];let O=Zne(M)||0;for(const A of R){const{field:P,normalizationField:V,label:te}=A,re=te||{field:this._getFieldAlias(P,n),normField:V&&this._getFieldAlias(V,n)},Q=Yze.clone();Q.angle=O,o.infos.push({label:re,symbol:Q}),u.add(Q),O+=90}const F=Qje({focus:M,numClasses:T,infos:t.uniqueValueInfos??[]});s.unshift(F)}}else if(_m(this.layer)||L$(this.layer))(v=t.uniqueValueInfos)==null||v.forEach(T=>{T.symbol&&o.infos.push({label:T.label||T.value,value:T.value,symbol:T.symbol})});else{const{field:T,field2:I,field3:C,fieldDelimiter:M,valueExpression:R,defaultSymbol:O}=t,F=!(!T&&!R||!I&&!C),A=[];if((w=t.uniqueValueGroups)==null||w.forEach(P=>{var te;const V={type:"symbol-table",title:P.heading,infos:[]};(te=P.classes)==null||te.forEach(re=>{const{symbol:Q,values:H}=re;if(Q){const ne=[],fe=[];for(const yt of H??[]){const{value:$t,value2:ii,value3:Nt}=yt,Dt=[],mr=[];(T||R)&&(Dt.push($t),mr.push(this._getDomainName(T,$t,n))),I&&(Dt.push(ii),mr.push(this._getDomainName(I,ii,n))),C&&(Dt.push(Nt),mr.push(this._getDomainName(C,Nt,n))),ne.push(F?Dt.join(M||""):Dt[0]),fe.push(mr.join(" - "))}const Fe=ne.join(", ");let Be=re.label;if(!Be){const yt=fe.filter(Boolean);Be=yt.length?yt.join(", "):Fe}V.infos.push({label:Be,value:Fe,symbol:Q})}}),V.infos.length&&A.push(V)}),A.length){const P=A[0];A.length===1&&"title"in P&&!P.title?o.infos.push(...P.infos??[]):(O&&(A.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:O}]}),l=!0),o.infos.push(...A)),i||(b=t.legendOptions)!=null&&b.title||t.valueExpressionTitle||(o.title=null)}}t.defaultSymbol&&!l&&(o.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),l=!0)}else if(Iy(t))a=this._isUnclassedRenderer(t),(!a||!this._hasSizeRamp)&&(t.classBreakInfos.forEach($=>{$.symbol&&o.infos.unshift({label:$.label||(a?null:$.minValue+" - "+$.maxValue),value:[$.minValue,$.maxValue],symbol:$.symbol})}),a&&(o.title=null),this._updateInfosforClassedSizeRenderer(t,o.infos)),t.defaultSymbol&&!a&&(o.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),l=!0);else if(pse(t))if(L$(this.layer)||qze(this.layer)){const $=await this._constructTileImageryStretchRendererElements(t);Wze($)?s.push($):o.infos=$}else{const $=this.layer;let T,I;if((_=t.statistics)!=null&&_.length){const O=t.statistics[0];n7(O)?(T=O.min,I=O.max):[T,I]=O}let C=[],M=$.serviceRasterInfo;if($.rasterFunction)try{M=await $.generateRasterInfo($.rasterFunction)}catch{}const R=hN(M.pixelType);if(M.bandCount===1){const O=((S=$.bandIds)==null?void 0:S[0])||0;T=T??(M.statistics?M.statistics[O].min:R[0]),I=I??(M.statistics?M.statistics[O].max:R[1]),T||I?s.push(await this._getStretchLegendElements(t,{min:T,max:I})):this._getServerSideLegend()}else if($.bandIds&&$.bandIds.length===1)T=T??(M.statistics?M.statistics[$.bandIds[0]].min:R[0]),I=I??(M.statistics?M.statistics[$.bandIds[0]].max:R[1]),T||I?s.push(await this._getStretchLegendElements(t,{min:T,max:I})):this._getServerSideLegend();else if(M.bandCount>=3){const{bandInfos:O}=M,{bandIds:F}=$;O.length>=M.bandCount?(F==null?void 0:F.length)===3?(C=F.map(A=>O[A].name),o.infos=this._createSymbolTableElementMultiBand(C)):$.format==="lerc"?(C=[0,1,2].map(A=>O[A].name),o.infos=this._createSymbolTableElementMultiBand(C)):this._getServerSideLegend():$.format==="lerc"?(C=["band1","band2","band3"],o.infos=this._createSymbolTableElementMultiBand(C)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(dse(t))t.colormapInfos.forEach($=>{o.infos.push({label:$.label,value:$.value,symbol:this._getAppliedCloneSymbol(Fze,$.color)})});else if(ky(t)){let $=t.symbol;switch(e.geometryType){case"point":$="pointSymbol"in n?n.pointSymbol:null;break;case"polyline":$="lineSymbol"in n?n.lineSymbol:null;break;case"polygon":$="polygonSymbol"in n?n.polygonSymbol:null}const T=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&T&&o.infos.push({label:t.label,symbol:$})}else if(use(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),o.title=t.attributeField;const $=t.getClassBreakInfos();$!=null&&$.length?$.forEach(T=>{o.infos.push({label:T.minValue+" - "+T.maxValue,symbol:T.symbol})}):o.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else hse(t)&&s.push(await this._getStretchLegendElements(t,{min:0,max:255}));const p=t.defaultSymbol;!p||l||ky(t)||a&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||s.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:p}]}),o.infos.length&&s.unshift(o);const h=e.opacity==null?this.opacity:e.opacity,m=this._isTallSymbol("visualVariables"in t?t.visualVariables:null),y=_m(this.layer)||L$(this.layer),g=s.reduce(($,T)=>[...$,...this._getAllInfos(T)],[]).filter($=>!!($!=null&&$.symbol)).filter($=>{if($.symbol.type==="cim"){const{minScale:T,maxScale:I}=$.symbol.data;if(T&&T<this.scale||I&&I>this.scale)return!1}return!0}).map($=>this._getSymbolPreview($,h,{isDefault:$.symbol===p,applyScaleDrivenSize:!u.has($.symbol),symbolConfig:{isTall:m,isSquareFill:y},effectList:u.has($.symbol)?null:this.effectList}));return t=null,await Promise.allSettled(g),s}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(t){const e=t==null?void 0:t.infos;return e?e.reduce((i,r)=>i.concat(this._getAllInfos(r)),[]):[t]}async _constructTileImageryStretchRendererElements(t){var a,l,u;const e=this.layer,i=e.symbolizer.rasterInfo??e.raster.rasterInfo;let r,n;const s=(a=t==null?void 0:t.statistics)!=null&&a.length?t.statistics:i==null?void 0:i.statistics;if(s){const p=s[0];n7(p)?(r=p.min,n=p.max):[r,n]=p}else{const p=hN(i.pixelType);r=p[0],n=p[1]}if(e.hasStandardTime()&&(r=e.getStandardTimeValue(r),n=e.getStandardTimeValue(n)),i.bandCount===1||((l=e.bandIds)==null?void 0:l.length)===1)return this._getStretchLegendElements(t,{min:r,max:n});const o=((u=e==null?void 0:e.bandIds)!=null&&u.length?e.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(p=>i.bandInfos[p].name);return o.length<3?o.push(o[1]):o.length>3&&o.splice(3),this._createSymbolTableElementMultiBand(o)}async _getStretchLegendElements(t,e){const i=t.colorRamp,r=mze(i,e);return{type:"stretch-ramp",title:"",infos:r,preview:$h(r.map(n=>n.color),{ariaLabel:await Ul("previewColorRampAriaLabel")})}}_getClusterSymbol(){var r;const t=this.layer,e="featureReduction"in t&&t.featureReduction,i=e&&"symbol"in e&&e.renderer;return i&&((r=i==null?void 0:i.authoringInfo)==null?void 0:r.isAutoGenerated)!==!0?null:e&&"symbol"in e?e.symbol:null}async _getSizeLegendElement(t,e,i,r){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(e):t,infos:await $ze(i,e,await _N(i),this.scale,this.view,r,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(t){const e=[],i=["red","green","blue"];return t.forEach((r,n)=>{e.push({label:{colorName:i[n],bandName:r},src:uze[n],opacity:this.opacity??1})}),e}_updateInfosforClassedSizeRenderer(t,e){const i=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",r=t.classBreakInfos.some(n=>LI(n.symbol));if(i&&r){const n=$N,s=xN,o=t.classBreakInfos.length,a=(n-s)/(o>1?o-1:o);e.forEach((l,u)=>{l.size=n-a*u})}}_isTallSymbol(t){let e=!1,i=!1;if(t)for(let r=0;r<t.length&&(!e||!i);r++){const n=t[r];n.type==="size"&&(n.axis==="height"&&(e=!0),n.axis==="width-and-depth"&&(i=!0))}return e&&i}async _getSymbolPreview(t,e,i){var s,o,a;let r=!(i!=null&&i.isDefault)&&t.size==null&&this._hasSizeRamp?lr(Ri.size):t.size;if(this._scaleDrivenSizeVariable&&(i!=null&&i.applyScaleDrivenSize)){const{getSize:l}=await Z(()=>Promise.resolve().then(()=>Xf),void 0);r=l(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}const n=!(i!=null&&i.isDefault)&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!(i!=null&&i.applyScaleDrivenSize));return Yne(t.symbol,{size:r,opacity:e,scale:!1,symbolConfig:i==null?void 0:i.symbolConfig,effectView:i==null?void 0:i.effectList,style:"legend",cimOptions:{allowScalingUp:n,viewParams:this.isScaleDriven?{viewingMode:((s=this.view)==null?void 0:s.type)==="2d"?"map":(o=this.view)==null?void 0:o.viewingMode,scale:(a=this.view)==null?void 0:a.scale}:null},ariaLabel:t.label&&typeof t.label!="string"?null:await Ul("previewTemplateAriaLabel",t.label)}).then(l=>(t.preview=l,t)).catch(()=>(t.preview=null,t))}_getClusterRenderer(t){var n,s;this._hasClusterSizeVariable=!1;const e="renderer"in this.layer?this.layer.renderer:null,i=((n=t.renderer)==null?void 0:n.clone())||(e==null?void 0:e.clone()),r=rze(this.layerView._effectiveRenderer,this.view);if(r&&i!=null&&"visualVariables"in i&&!((s=i.visualVariables)==null?void 0:s.some(a=>a.type==="size"&&a.target!=="outline"&&!C$.test(a.valueExpression)))){if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:l,clusterMaxSize:u}=t;r.legendOptions=new QQ({showLegend:l!==u})}const a=i.visualVariables||[];i.visualVariables=a.concat([r]),this._hasClusterSizeVariable=!0}return i}async _loadRenderer(t){const e=[],i=t.clone(),r=await _N(i);if(Iy(i)||g2(i)){const n=(i.classBreakInfos||i.uniqueValueInfos).map(s=>this._fetchSymbol(s.symbol,r).then(o=>{s.symbol=o}).catch(()=>{s.symbol=null}));Array.prototype.push.apply(e,n)}return e.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:r).then(n=>{this._applySymbolToRenderer(i,n,ky(i))}).catch(()=>{this._applySymbolToRenderer(i,null,ky(i))})),await Promise.allSettled(e),i}_applySymbolToRenderer(t,e,i){i?t.symbol=e:t.defaultSymbol=e}async _fetchSymbol(t,e){if(!t)throw new Error;if(t.type==="web-style"){const i=this._webStyleSymbolCache;try{const r=await(this.view.type==="2d"?t.fetchCIMSymbol({cache:i}):t.fetchSymbol({cache:i}));return this._getAppliedCloneSymbol(r,e)}catch{throw q.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const i=t.clone(),r=e&&e.toRgba();return i.type.includes("3d")?this._applyColorTo3dSymbol(i,r):i.type==="cim"?wne(i,e):i.color&&(i.color=new le(r||i.color)),i}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach(i=>{i&&(i.material||(i.material={}),i.material.color=new le(e))})}async _getVisualVariableLegendElements(t,e){var p;if(!("visualVariables"in t)||!t.visualVariables||t.type==="vector-field")return null;const i=t.visualVariables,r=[],n=[],s=[];for(const h of i)h.type==="color"?r.push(h):h.type==="size"?n.push(h):h.type==="opacity"&&s.push(h);const o=[...r,...n,...s];let a,l;if(r.length===0&&Iy(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){const h=t.classBreakInfos[0];a=h&&h.symbol}if(r.length===0&&ky(t)&&(a=t.symbol),a)if(a.type.includes("3d")){const h=a.symbolLayers.at(0);h.type==="water"?h.color!=null&&(l=h.color):((p=h.material)==null?void 0:p.color)!=null&&(l=h.material.color)}else a.url||(l=a.color);const u=this.effectList;return(await Promise.all(o.map(async h=>{if(!h.legendOptions||h.legendOptions.showLegend!==!1){const m=EN(t)?h.field:this._getRampTitle(h,e);let y=null;const g=this._getDateFormatOptions(e,h);if(h.type==="color"){const v=await SN(h,null,g)??[];y={type:"color-ramp",title:m,infos:v,preview:$h(v.map(w=>w.color),{effectList:u,ariaLabel:await Ul("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=v.length>0)}else if(h.type==="size"&&h.target!=="outline")C$.test(h.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=h):(y=await this._getSizeLegendElement(m,h,t,g),this._hasSizeRamp||(this._hasSizeRamp=!(y.infos==null||!y.infos.length)));else if(h.type==="opacity"){const v=await SN(h,l,g)??[];y={type:"opacity-ramp",title:m,infos:v,preview:$h(v.map(w=>w.color),{effectList:u,ariaLabel:await Ul("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=v.length>0)}return y&&y.infos?y:null}}))).filter(An)}_getFieldInfo(t,e){var i,r;if(!e.field)return null;if("featureReduction"in t)switch((i=t.featureReduction)==null?void 0:i.type){case"cluster":case"binning":{const n=t.featureReduction.fields.find(({name:s})=>s.toLowerCase()===e.field.toLowerCase());return n&&"getField"in t?t.getField(n.onStatisticField):null}}return"getField"in t?(r=t.getField)==null?void 0:r.call(t,e.field):null}_getDateFormat(t,e){var r,n,s;const i="popupTemplate"in t?(r=t.popupTemplate)==null?void 0:r.fieldInfos:null;if(i!=null&&i.length&&e)return(s=(n=i.find(o=>{var a;return((a=o.fieldName)==null?void 0:a.toLowerCase())===e.toLowerCase()}))==null?void 0:n.format)==null?void 0:s.dateFormat}_getDateFormatOptions(t,e){var n,s,o,a;const i=this._getFieldInfo(t,e);if(!i||!h4e(i)&&!nQ(i))return null;let r=this._getDateFormat(t,i.name);if(!r&&i.type==="date"){let l=0,u=0;e.stops?(l=((s=(n=e.stops)==null?void 0:n.at(0))==null?void 0:s.value)??l,u=((a=(o=e.stops)==null?void 0:o.at(-1))==null?void 0:a.value)??u):"minDataValue"in e&&"maxDataValue"in e&&(l=e.minDataValue??l,u=e.maxDataValue??u),r=u-l>2*FP.days?"short-date":"short-date-short-time"}return{fieldType:i.type,format:r,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:this.view.timeZone,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}}}_getDomainName(t,e,i){var r;if(t&&typeof t!="function"){const n="getField"in i&&((r=i.getField)==null?void 0:r.call(i,t)),s=n&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(n.name):null;return(s==null?void 0:s.type)==="coded-value"?s.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,i=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){const r=e.featureReduction,n="popupTemplate"in r&&r.popupTemplate,s=n&&n.fieldInfos;if(s){for(const o of s)if(o.fieldName===i)return i==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(t,e){var u,p;let i=t.field,r=t.normalizationField,n=!1,s=!1,o=!1,a=null;i=typeof i=="function"?null:i,r=typeof r=="function"?null:r;const l=(u=t.legendOptions)==null?void 0:u.title;if(l!=null)a=l;else if(t.valueExpressionTitle)a=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&((p=e.renderer.authoringInfo)!=null&&p.visualVariables)){const h=e.renderer.authoringInfo.visualVariables;for(let m=0;m<h.length;m++){const y=h[m];if(y.type==="color"){if(y.style==="ratio"){n=!0;break}if(y.style==="percent"){s=!0;break}if(y.style==="percent-of-total"){o=!0;break}}}}a={field:i&&this._getFieldAlias(i,e),normField:r&&this._getFieldAlias(r,e),ratio:n,ratioPercent:s,ratioPercentTotal:o}}return a}_getRendererTitle(t,e){var a;const i=t;if((a=i.legendOptions)!=null&&a.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let r=i.field,n=null,s=null;if(Iy(i)&&(n=i.normalizationField,s=i.normalizationType==="percent-of-total"),r=typeof r=="function"?null:r,n=typeof n=="function"?null:n,g2(i)){const{field2:l,field3:u,fieldDelimiter:p}=i;let h=r&&this._getFieldAlias(r,e);return l&&(h=`<${h}>${p}<${this._getFieldAlias(l,e)}>`,u&&(h=`${h}${p}<${this._getFieldAlias(u,e)}>`)),h}let o=null;return(r||n)&&(o={field:r&&this._getFieldAlias(r,e),normField:n&&this._getFieldAlias(n,e),normByPct:s}),o}_getFieldAlias(t,e){var p;const i="popupTemplate"in e?e.popupTemplate:null,r=i==null?void 0:i.fieldInfos;let n;r&&r.some(h=>t===h.fieldName&&(n=h,!0));let s=null;"getField"in e&&e.getField?s=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(s=e.fieldsIndex.get(t));let o=null;const a="featureReduction"in e&&e.featureReduction;a&&(!n&&"popupTemplate"in a&&((p=a.popupTemplate)!=null&&p.fieldInfos)&&a.popupTemplate.fieldInfos.some(h=>{var m;return(t==null?void 0:t.toLowerCase())===((m=h.fieldName)==null?void 0:m.toLowerCase())&&(n=h,!0)}),"fields"in a&&a.fields&&(o=a.fields.find(h=>{var m;return((m=h.name)==null?void 0:m.toLowerCase())===(t==null?void 0:t.toLowerCase())})));const l=n||s||o;let u=null;return l&&(u=(n==null?void 0:n.label)||(s==null?void 0:s.alias)||(o==null?void 0:o.alias)||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),u}_isUnclassedRenderer(t){const e=t.visualVariables;let i=!1;return Iy(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(i=t.field?e.some(r=>!(!r||t.field!==r.field||(t.normalizationField||r.normalizationField)&&t.normalizationField!==r.normalizationField)):!!e.length),i}};c([d()],Ci.prototype,"children",void 0),c([d({readOnly:!0})],Ci.prototype,"effectList",null),c([d()],Ci.prototype,"layerView",void 0),c([d()],Ci.prototype,"layer",void 0),c([d()],Ci.prototype,"legendElements",void 0),c([d({readOnly:!0})],Ci.prototype,"opacity",null),c([d()],Ci.prototype,"parent",void 0),c([d({readOnly:!0,dependsOn:[]})],Ci.prototype,"ready",null),c([d()],Ci.prototype,"hideLayersNotInCurrentView",void 0),c([d()],Ci.prototype,"keepCacheOnDestroy",void 0),c([d()],Ci.prototype,"respectLayerVisibility",void 0),c([d({readOnly:!0})],Ci.prototype,"scale",null),c([d()],Ci.prototype,"sublayerIds",void 0),c([d({readOnly:!0})],Ci.prototype,"isScaleDriven",null),c([d()],Ci.prototype,"title",void 0),c([d({readOnly:!0,dependsOn:["ready"],value:0})],Ci.prototype,"version",null),c([d()],Ci.prototype,"view",void 0),Ci=c([k("esri.widgets.Legend.support.ActiveLayerInfo")],Ci);const gse=Ci,Lp={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},vse=ce.ofType(gse),Kze=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer"]),bse="view.basemapView.baseLayerViews",wse="view.groundView.layerViews",_se="view.basemapView.referenceLayerViews",Qze=[bse,wse,"view.layerViews",_se];let Ws=class extends de{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new ce,this.activeLayerInfos=new vse,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(Y(()=>this.view,()=>this._viewHandles(),Le),Lp.view),this.addHandles(Dk(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(Lp.state),this.view&&this.addHandles(Y(()=>this.state,()=>this._stateHandles(),Le),Lp.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([Lp.allLayerViews,Lp.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i!=null&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on("change",r=>this._allLayerViewsChangeHandle(r)),Lp.allLayerViews),this.addHandles(Y(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),Lp.legendProperties)}_allLayerViewsChangeHandle(e){e.removed.forEach(i=>this._destroyViewActiveLayerInfo(i.uid)),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach(s=>{if(!s.parent){const o=s.layer.parent,a=o&&"uid"in o&&this._layerViewByLayerId[o.uid],l=a&&this._activeLayerInfosByLayerViewId[a.uid];l&&e.includes(l)&&(r.push(s),s.parent=l,l.children.add(s),this._sortActiveLayerInfos(l.children))}}),e.removeMany(r);const n={};i.allLayerViews.forEach((s,o)=>n[s.layer.uid]=o),e.sort((s,o)=>{const a=n[s.layer.uid]||0;return(n[o.layer.uid]||0)-a})}_generateLayerViews(){const e=[];return Qze.filter(this._filterLayerViews,this).map(i=>Hr(this,i)).filter(i=>i!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===bse||e===_se),r=!this.groundLegendVisible&&e===wse;return!i&&!r}_collectLayerViews(e,i){const r=n=>(n&&n.forEach(s=>{i.push(s),r(s[e])}),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some(r=>this._hasLayerInfo(r,e))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some(r=>this._isLayerUIDMatching(r,i))}_isLayerViewSupported(e){return!!Kze.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(Y(()=>{var i;return[e.legendEnabled,(i=e.layer)==null?void 0:i.legendEnabled]},()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){var i;return!this.respectLayerVisibility||e.legendEnabled&&((i=e.layer)==null?void 0:i.legendEnabled)}_buildActiveLayerInfo(e){var a;const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let s=this._activeLayerInfosByLayerViewId[r];if(!s){const l=(n==null?void 0:n.title)!==void 0&&n.layer.uid===i.uid;s=new gse({layer:i,layerView:e,title:l?n.title:i.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:(n==null?void 0:n.sublayerIds)||[]}),this._activeLayerInfosByLayerViewId[r]=s}const o=i.parent&&"uid"in i.parent?this._layerViewByLayerId[(a=i.parent)==null?void 0:a.uid]:null;if(s.parent=this._activeLayerInfosByLayerViewId[o==null?void 0:o.uid],!this.hasHandles(r)){const l=[Y(()=>i.title,u=>this._titleHandle(u,s)),Y(()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol],()=>this._constructLegendElements(s)),Gn(()=>{var u;return((u=this.view)==null?void 0:u.stationary)===!0},()=>this._scaleHandle(s),Le),Y(()=>e._effectiveRenderer,()=>this._constructLegendElements(s)),Y(()=>"effect"in i&&i.effect,()=>this._constructLegendElements(s)),Gn(()=>{var u;return(u=this.view)==null?void 0:u.timeZone},()=>this._constructLegendElements(s),Le)];if(this.respectLayerVisibility){const u=Y(()=>e.legendEnabled,h=>this._legendEnabledHandle(h,s)),p=Y(()=>i.legendEnabled,h=>this._legendEnabledHandle(h,s));l.push(u,p)}this.addHandles(l,r)}s.isScaleDriven||this._constructLegendElements(s),this._addActiveLayerInfo(s)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var n;const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const s=e.parent;if(s)s.children.includes(e)||s.children.push(e),this._sortActiveLayerInfos(s.children);else{const o=(n=this.layerInfos)==null?void 0:n.some(a=>a.layer.uid===r.uid);r.parent&&"uid"in r.parent&&!o?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const o=[];this._activeLayerInfosWithNoParent.forEach(a=>{const l=a.layer.parent,u=l&&"uid"in l?this._layerViewByLayerId[l==null?void 0:l.uid]:null,p=this._activeLayerInfosByLayerViewId[u==null?void 0:u.uid];p&&(o.push(a),a.parent=p)}),o.length&&(this._activeLayerInfosWithNoParent.removeMany(o),o.forEach(a=>this._addActiveLayerInfo(a)))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;"featureCollections"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):"featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")?e.buildLegendElementsForFeatureReduction(i.featureReduction):"renderer"in i&&i.renderer&&!("sublayers"in i)?e.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url?e.buildLegendElementsForTools():e.children.forEach(r=>this._constructLegendElements(r))}};c([d({type:vse})],Ws.prototype,"activeLayerInfos",void 0),c([d()],Ws.prototype,"basemapLegendVisible",void 0),c([d()],Ws.prototype,"groundLegendVisible",void 0),c([d()],Ws.prototype,"hideLayersNotInCurrentView",void 0),c([d()],Ws.prototype,"keepCacheOnDestroy",void 0),c([d()],Ws.prototype,"respectLayerVisibility",void 0),c([d()],Ws.prototype,"layerInfos",void 0),c([d({readOnly:!0})],Ws.prototype,"state",null),c([d()],Ws.prototype,"view",void 0),Ws=c([k("esri.widgets.Legend.LegendViewModel")],Ws);const Xze=Ws,Qe="esri-legend--card",$m="esri-legend",ve={activated:`${Qe}__carousel-indicator--activated`,base:Qe,stacked:`${$m}--stacked`,carouselTitle:`${Qe}__carousel-title`,indicator:`${Qe}__carousel-indicator`,intervalSeparator:`${Qe}__interval-separator`,imageryLayerStretchedImage:`${Qe}__imagery-layer-image--stretched`,imageLabel:`${Qe}__image-label`,layerCaption:`${Qe}__layer-caption`,labelElement:`${Qe}__label-element`,layerRow:`${Qe}__layer-row`,labelCell:`${Qe}__label-cell`,message:`${Qe}__message`,rampLabel:`${Qe}__ramp-label`,section:`${Qe}__section`,relationshipSection:`${Qe}__relationship-section`,serviceCaptionText:`${Qe}__service-caption-text`,serviceContent:`${Qe}__service-content`,service:`${Qe}__service`,groupLayer:`${Qe}__group-layer`,groupLayerChild:`${Qe}__group-layer-child`,symbol:`${Qe}__symbol`,sizeRampRow:`${Qe}__size-ramp-row`,symbolRow:`${Qe}__symbol-row`,symbolCell:`${Qe}__symbol-cell`,indicatorContainer:`${Qe}__carousel-indicator-container`,intervalSeparatorsContainer:`${Qe}__interval-separators-container`,relationshipLabelContainer:`${Qe}__relationship-label-container`,labelContainer:`${Qe}__label-container`,serviceCaptionContainer:`${Qe}__service-caption-container`,symbolContainer:`${Qe}__symbol-container`,sizeRampContainer:`${Qe}__size-ramp-container`,sizeRampPreview:`${Qe}__size-ramp-preview`,pieChartRampPreview:`${Qe}__pie-chart-ramp-preview`,rampContainer:`${$m}__ramps`,sizeRampHorizontal:`${$m}__size-ramp--horizontal`,rampLabelsContainer:`${$m}__ramp-labels`,layerInfo:`${$m}__layer-cell ${$m}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"},e6e=yT(),Sse=10,F4=20,AI=10,j4=20,z4={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function t6e(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?x("svg",{height:"4",width:"10"},x("line",{style:e,x1:"0",x2:"10",y1:"2",y2:"2"})):x("svg",{height:"10",width:"10"},x("line",{style:e,x1:"5",x2:"5",y1:"0",y2:"10"}))}function i6e(t,e="vertical"){const i=document.createElement("div");return i.style.height=`${F4}px`,i.className=z4.univariateAboveAndBelowSymbol,t!=null&&(i.style.opacity=t.toString()),e6e.append(i,t6e.bind(null,e)),i}function $se(t,e,i="vertical",r){t.infos.forEach((n,s)=>{if(r&&s===2)n.preview=i6e(e,i);else{const o=_t(n.size)+(i==="horizontal"?j4:AI),a=n.preview,l=(a==null?void 0:a.tagName.toLowerCase())==="div",u=l?a:document.createElement("div");u.className=z4.univariateAboveAndBelowSymbol,i==="horizontal"?u.style.width=`${o}px`:u.style.height=`${o}px`,!l&&a&&u.appendChild(a),n.preview=u}})}function BT(t,e="classic"){const i=t.infos;return e==="classic"?(_t(i[0].size)+AI)/2:(_t(i[0].size)-_t(i[i.length-1].size))/2}function Eg(t,e){if(!t)return null;const i=t.infos.map(n=>n.color),r=$h(e.type==="full"?i:e.type==="above"?i.slice(0,3):i.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,effectList:e.effectList,ariaLabel:e.ariaLabel});return r.className=z4.colorRamp,e.opacity!=null&&(r.style.opacity=e.opacity.toString()),r}function TN(t,e,i,r="vertical"){let n=0;const s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o;for(let u=a;u<=l;u++)i&&u===o?n+=r==="horizontal"?Sse:F4:n+=_t(s[u].size)+(r==="horizontal"?j4:AI);return Math.round(n)}function Tg(t,e,i,r="vertical"){const n=TN(t,e,i,r),s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o,u=e==="full"?s[a].size+s[l].size:e==="above"?s[a].size:s[l].size,p=i?r==="vertical"?F4:Sse:0,h=r==="vertical"?AI*(e==="full"?2:1):j4*(e==="full"?2:1);return Math.round(n-(_t(u)/2+p/2+h/2))}function xse(t,e,i="vertical"){const r=t.infos;let n=r.find(({type:o})=>o==="size-ramp"),s=r.find(({type:o})=>o==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],$se(n,e,i,!0)),s&&(s={...s},s.infos=[...s.infos]),i==="horizontal"&&(n==null||n.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:n,colorRampElement:s}}function Ese(t,e="vertical"){const i=t.infos;let r=i.find(({type:s})=>s==="size-ramp"),n=i.find(({type:s})=>s==="color-ramp");return r&&(r={...r},r.infos=[...r.infos],$se(r,null,e,!1)),n&&(n={...n},n.infos=[...n.infos]),e==="horizontal"&&(r==null||r.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:r,colorRampElement:n}}function r6e(t,e){return e}function Bi(t){const e=this;t.appendChild(e)}function xd(t,e,i){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return jhe(e);if("value"in e||"unit"in e)return QE(t.dotValue,e);if("colorName"in e&&"bandName"in e)return t[e.colorName]+": "+(t[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let r=null;return r6e(e,i)?r=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:Tse(e,i)&&(r=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),r?QE(r==="showField"?"{field}":t[r],{field:e.field,normField:e.normField}):void 0}function Tse(t,e){return!e}function kse(t,e){return!!(e&&e==="Stretched"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function Ise(t,e){var i;return t.label?e[t.label]+": "+(typeof t.value=="string"?t.value:Cf(t.value??0,{style:"decimal",notation:(i=t.value)!=null&&i.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}const n6e=25,s6e=25,o6e=768,a6e=100;var Tw;(function(t){t.Auto="auto",t.Stack="stack",t.SideBySide="side-by-side"})(Tw||(Tw={}));const l6e="#ddd",xm=window.devicePixelRatio;function c6e(t){var e,i;if(t){if(t.type.includes("3d")){const r=(e=t.symbolLayers)==null?void 0:e.length;if(!r)return;const n=t.symbolLayers.at(r-1),s=(i=n.resource)==null?void 0:i.primitive;return s==="circle"||s==="cross"||s==="kite"||s==="sphere"||s==="cube"||s==="diamond"}{const r=t.style;return r==="circle"||r==="diamond"||r==="cross"}}}function u6e(t){var e;if(t){if(t.type.includes("3d")){const i=(e=t.symbolLayers)==null?void 0:e.length;if(!i)return;const r=t.symbolLayers.at(i-1).get("resource.primitive");return r==="triangle"||r==="cone"||r==="tetrahedron"}return t.style==="triangle"}}let Go=class extends yn{constructor(e,i){super(e,i),this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=Tw.Stack,this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.addHandles(Y(()=>this.activeLayerInfos,e=>{this.removeAllHandles(),this._watchForSectionChanges(e)}))}render(){const{view:e}=this;this._hasIndicators=this.layout===Tw.Auto&&e&&e.container.clientWidth<=o6e||this.layout===Tw.Stack;const i=this.activeLayerInfos,r=i&&i.toArray().map(u=>this._renderLegendForLayer(u)).filter(u=>!!u);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const n=this._sectionNames.length,s=this._sectionNames.map((u,p)=>{const h=QE(this.messagesCommon.pagination.pageText,{index:p+1,total:n});return x("div",{"aria-controls":`${u}-panel`,"aria-label":h,"aria-selected":(this._selectedSectionName===u).toString(),bind:this,class:this.classes(ve.indicator,{[ve.activated]:this._selectedSectionName===u}),"data-section-name":u,id:u,key:u,onclick:this._selectSection,onkeydown:this._focusSection,role:"tab",tabIndex:this._selectedSectionName===u?0:-1,title:h})}),o=this._hasIndicators&&n>1?x("div",{class:ve.indicatorContainer,key:"carousel-navigation",role:"tablist"},s):null,a=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):r&&r.length?r:null,l={[ve.stacked]:this._hasIndicators};return x("div",{class:this.classes(ve.base,l)},a||x("div",{class:ve.message},this.messages.noLegend),o)}_selectSection(e){const i=e.target.getAttribute("data-section-name");i&&(this._selectedSectionName=i)}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e)}}_switchSectionOnArrowPress(e){const i=e.key,r=i==="ArrowLeft"?-1:1,n=e.target.getAttribute("data-section-name"),s=this._sectionNames.indexOf(n),o=this._sectionNames;let a=null;s!==-1&&(o[s+r]?a=document.getElementById(o[s+r]):i==="ArrowLeft"?a=document.getElementById(o[o.length-1]):i==="ArrowRight"&&(a=document.getElementById(o[0])),a==null||a.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach(r=>{const n=`activeLayerInfo-${r.layer.uid}-version-change`;this.removeHandles(n),this._watchForSectionChanges(r.children),this.addHandles(Y(()=>r.version,()=>this._generateSectionNames()),n)});const i="activeLayerInfos-collection-change";this.removeHandles(i),this.addHandles(e.on("change",()=>this._watchForSectionChanges(e)),i)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,i,r){return`${this.id}${e.uid}-type-${i.type}-${r}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach((i,r)=>{this._sectionNames.push(this._getSectionName(e.layer,i,r))})}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const i=e.children.map(r=>this._renderLegendForLayer(r)).toArray();return x("div",{class:this.classes(ve.service,ve.groupLayer),key:e.layer.uid},x("div",{class:ve.serviceCaptionContainer},e.title),i)}{const i=e.legendElements;if(i&&!i.length)return null;const r=i.some(o=>o.type==="relationship-ramp"),n=i.map((o,a)=>this._renderLegendForElement(o,e,a,r)).filter(o=>!!o);if(!n.length)return null;const s={[ve.groupLayerChild]:!!e.parent};return x("div",{class:this.classes(ve.service,s),key:e.layer.uid},x("div",{class:ve.serviceCaptionContainer},x("div",{class:ve.serviceCaptionText},e.title)),x("div",{class:ve.serviceContent},n))}}_renderLegendForElement(e,i,r,n=!1,s=!1){var v;const o=e.type==="color-ramp",a=e.type==="opacity-ramp",l=i.layer;let u=null;if(typeof e.title=="string")u=e.title;else if(e.title){const w=e.title,b=xd(this.messages,w,o||a);u=w.title?`${w.title} (${b})`:b}const p=this._getSectionName(l,e,r),h=this._hasIndicators&&!s?x("div",null,x(Vd,{class:ve.carouselTitle,level:this.headingLevel},i.title),x(Vd,{class:ve.layerCaption,level:m5e(this.headingLevel)},u)):u?x(Vd,{class:ve.layerCaption,level:this.headingLevel},u):null,m=i.effectList;let y=null;switch(e.type){case"symbol-table":{const w=e.infos.map((b,_)=>this._renderLegendForElementInfo(b,i,e.legendType,_)).filter(b=>!!b);if(w.length){const b=(v=w[0].properties.classes)==null?void 0:v[ve.symbolRow],_={[ve.labelContainer]:!b&&!n,[ve.relationshipLabelContainer]:n};y=x("div",{class:this.classes(_)},w)}break}case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":y=this._renderLegendForRamp(e,l.opacity,m);break;case"size-ramp":y=this._renderSizeRamp(e,l.opacity);break;case"pie-chart-ramp":y=this._renderPieChartRamp(e);break;case"relationship-ramp":y=zne(e,this.id,{opacity:l.opacity,effectList:m,ariaLabel:this.messages.previewRelationshipRampAriaLabel});break;case"univariate-above-and-below-ramp":y=this._renderUnivariateAboveAndBelowRamp(e,l.opacity,m);break;case"univariate-color-size-ramp":y=this._renderUnivariateColorSizeRamp(e,l.opacity,m)}if(!y)return null;const g=x("div",{"aria-labelledby":p,class:ve.section,id:`${p}-panel`,key:p,role:"tabpanel",tabIndex:0},[h,y]);return s||this._sectionMap.set(p,g),g}_renderPieChartRamp(e){return x("div",{afterCreate:Bi,bind:e.preview,class:ve.pieChartRampPreview})}_renderUnivariateAboveAndBelowRamp(e,i,r){var T;const{sizeRampElement:n,colorRampElement:s}=xse(e,i,"horizontal");if(!n)return null;const o=TN(n,"full",!0,"horizontal"),a=Tg(n,"above",!0,"horizontal"),l=Tg(n,"below",!0,"horizontal"),u=12,p=(T=this.messages)==null?void 0:T.previewColorRampAriaLabel,h=Eg(s,{width:a,height:u,rampAlignment:"horizontal",opacity:i,type:"above",effectList:r,ariaLabel:p}),m=Eg(s,{width:l,height:u,rampAlignment:"horizontal",opacity:i,type:"below",effectList:r,ariaLabel:p}),y=BT(n,"card"),g=n.infos.map(I=>I.label),v=g.length-1,w=g.map((I,C)=>C===0||C===v?x("div",{key:C},I):null),b={display:"flex",flexDirection:"column"},_={display:"flex",flexDirection:"row"},S={marginTop:"3px",display:"flex"};w1(this.container)?S.marginRight=`${y}px`:S.marginLeft=`${y}px`;const $={width:`${o}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return x("div",{class:ve.layerRow,key:"size-ramp-preview",styles:b},x("div",{class:this.classes(ve.symbolContainer,ve.sizeRampHorizontal),styles:_},n.infos.map((I,C)=>x("div",{afterCreate:Bi,bind:I.preview,class:ve.symbol,key:C}))),h?x("div",{class:ve.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:S},x("div",{afterCreate:Bi,bind:h}),x("div",{afterCreate:Bi,bind:m})):null,x("div",{class:ve.layerInfo},x("div",{class:ve.rampLabelsContainer,styles:$},w)))}_renderUnivariateColorSizeRamp(e,i,r){var w;const{sizeRampElement:n,colorRampElement:s}=Ese(e,"horizontal");if(!n)return null;const o=TN(n,"full",!1,"horizontal"),a=Tg(n,"full",!1,"horizontal"),l=Eg(s,{width:a,height:12,rampAlignment:"horizontal",opacity:i,type:"full",effectList:r,ariaLabel:(w=this.messages)==null?void 0:w.previewColorRampAriaLabel}),u=BT(n,"card"),p=n.infos.length-1,h=n.infos.map((b,_)=>_===0||_===p?x("div",{key:_},b.label):null),m={display:"flex",flexDirection:"column"},y={display:"flex",flexDirection:"row"},g={marginTop:"3px",display:"flex"};w1(this.container)?g.marginRight=`${u}px`:g.marginLeft=`${u}px`;const v={width:`${o}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return x("div",{class:ve.layerRow,key:"size-ramp-preview",styles:m},x("div",{class:this.classes(ve.symbolContainer,ve.sizeRampHorizontal),styles:y},n.infos.map((b,_)=>x("div",{afterCreate:Bi,bind:b.preview,class:ve.symbol,key:_}))),x("div",{class:ve.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:g},x("div",{afterCreate:Bi,bind:l})),x("div",{class:ve.layerInfo},x("div",{class:ve.rampLabelsContainer,styles:v},h)))}_renderLegendForElementInfo(e,i,r,n){var l,u,p,h,m;const s=i.layer;if(e.type)return this._renderLegendForElement(e,i,n,!1,!0);const o=kse(s,r),a=xd(this.messages,e.label,!1)??"";if(e.preview){if(!((l=e.symbol)!=null&&l.type.includes("simple-fill"))){if(!e.label)return x("div",{afterCreate:Bi,bind:e.preview,key:n});const O={[ve.symbolCell]:this._hasIndicators};return x("div",{class:this.classes(ve.layerRow,{[ve.symbolRow]:this._hasIndicators}),key:n},x("div",{afterCreate:Bi,bind:e.preview,class:this.classes(O)}),x("div",{class:this.classes(ve.imageLabel,{[ve.labelCell]:this._hasIndicators})},a))}let y=255,g=255,v=255,w=0,b=255,_=255,S=255,$=0;const T=(u=e.symbol.color)==null?void 0:u.a,I=(h=(p=e.symbol.outline)==null?void 0:p.color)==null?void 0:h.a;T&&(y=e.symbol.color.r,g=e.symbol.color.g,v=e.symbol.color.b,w=e.symbol.color.a*s.opacity),I&&(b=e.symbol.outline.color.r,_=e.symbol.outline.color.g,S=e.symbol.outline.color.b,$=e.symbol.outline.color.a*s.opacity);const C=((m=e.symbol.color)==null?void 0:m.isBright)??!0,M=C?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",R={background:T?`rgba(${y}, ${g}, ${v}, ${w})`:"none",color:C?"black":"white",textShadow:`-1px -1px 0 ${M},
                                              1px -1px 0 ${M},
                                              -1px 1px 0 ${M},
                                              1px 1px 0 ${M}`,border:I?`1px solid rgba(${b}, ${_}, ${S}, ${$})`:"none",filter:O1(i.effectList)??void 0};return x("div",{class:ve.layerRow,key:n},x("div",{class:ve.labelElement,styles:R},a))}if(e.src){const y=this._renderImage(e,s,o);return x("div",{class:ve.layerRow,key:n},y,x("div",{class:ve.imageLabel},a))}}_renderImage(e,i,r){const{label:n,src:s,opacity:o}=e,a={[ve.imageryLayerStretchedImage]:r,[ve.symbol]:!r},l={opacity:`${o??i.opacity}`};return x("img",{alt:xd(this.messages,n,!1),"aria-label":xd(this.messages,n,!1),border:0,class:this.classes(a),height:e.height,src:s,styles:l,width:e.width})}_renderSizeRampLines(e){const i=e.infos,r=i[0],n=i[i.length-1],s=r.symbol,o=this._hasIndicators,a=_t(r.size+r.outlineSize)*xm,l=_t(n.size+n.outlineSize)*xm,u=o?a:a+50*xm,p=o?a/2+50*xm:a,h=u6e(s),m=c6e(s),y=document.createElement("canvas");y.width=u,y.height=p,y.style.width=y.width/xm+"px",y.style.height=y.height/xm+"px";const g=y.getContext("2d");if(o){g.beginPath();const v=0,w=0,b=u/2-l/2,_=p;g.moveTo(v,w),g.lineTo(b,_);const S=u,$=0,T=u/2+l/2,I=p;g.moveTo(S,$),g.lineTo(T,I)}else{g.beginPath();const v=0,w=p/2-l/2,b=u,_=0;g.moveTo(v,w),g.lineTo(b,_);const S=0,$=p/2+l/2,T=u,I=p;g.moveTo(S,$),g.lineTo(T,I)}return g.strokeStyle=l6e,g.stroke(),x("div",{afterCreate:Bi,bind:y,styles:o?{display:"flex",marginTop:`-${h?0:m?a/2:0}px`,marginBottom:`-${h?l:m?l/2:0}px`}:{display:"flex",marginRight:`-${h?0:m?a/2:0}px`,marginLeft:`-${h?0:m?l/2:0}px`}})}_renderSizeRamp(e,i){const r=e.infos,n=r[0].label,s=r[r.length-1].label;let o=r[0].preview,a=r[r.length-1].preview;const l=this._hasIndicators,u={"flex-direction":l?"column":"row-reverse"};o&&(o=o.cloneNode(!0),o.style.display="flex"),a&&(a=a.cloneNode(!0),a.style.display="flex");const p={opacity:i!=null?`${i}`:""};return x("div",{class:this.classes(ve.layerRow,{[ve.sizeRampRow]:l})},x("div",{class:ve.rampLabel},l?n:s),x("div",{class:ve.sizeRampContainer,styles:u},x("div",{afterCreate:Bi,bind:o,class:ve.sizeRampPreview,styles:p}),this._renderSizeRampLines(e),x("div",{afterCreate:Bi,bind:a,class:ve.sizeRampContainer,styles:p})),x("div",{class:ve.rampLabel},l?s:n))}_getRampStopLabel(e,i){switch(i){case"heatmap-ramp":return this.messages[e.label];case"stretch-ramp":return Ise(e,this.messages);default:return e.label}}_renderLegendForRamp(e,i,r){const n=e.infos,s=e.type,o=s==="heatmap-ramp",a=n.length-1,l=s6e,u=a>2&&!o?n6e*a:a6e,p=u+20,h=10,m=n.slice(0).reverse(),y=m.length-1,g=m.length%2!=0?m[m.length/2|0]:null,v=g&&x("div",{class:ve.intervalSeparatorsContainer},x("div",{class:ve.intervalSeparator},"|"),x("div",{class:ve.rampLabel},this._getRampStopLabel(g,s))),w=[[{shape:{type:"path",path:`M0 ${l/2} L${h} 0 L${h} ${l} Z`},fill:m[0].color,stroke:{width:0}},{shape:{type:"rect",x:h,y:0,width:u,height:l},fill:{type:"linear",x1:h,y1:0,x2:u+h,y2:0,colors:m.map(($,T)=>({color:$.color,offset:o&&"ratio"in $?$.ratio:T/a}))},stroke:{width:0}},{shape:{type:"path",path:`M${u+h} 0 L${p} ${l/2} L${u+h} ${l} Z`},fill:m[y].color,stroke:{width:0}}]],b=Ane(w,p,l),_={filter:O1(r)??void 0,opacity:i==null?void 0:`${i}`},S={justifyContent:"center"};return x("div",{class:ve.layerRow,styles:S},x("div",{class:ve.rampLabel},this._getRampStopLabel(m[0],s)),x("div",{class:ve.symbolContainer},x("div",{styles:_},b),v),x("div",{class:ve.rampLabel},this._getRampStopLabel(m[y],s)))}};c([d()],Go.prototype,"activeLayerInfos",void 0),c([d()],Go.prototype,"headingLevel",void 0),c([d()],Go.prototype,"layout",void 0),c([d(),hn("esri/widgets/Legend/t9n/Legend")],Go.prototype,"messages",void 0),c([d(),hn("esri/t9n/common")],Go.prototype,"messagesCommon",void 0),c([d({readOnly:!0})],Go.prototype,"type",void 0),c([d()],Go.prototype,"view",void 0),c([ia()],Go.prototype,"_selectSection",null),Go=c([k("esri.widgets.Legend.styles.Card")],Go);const wL=Go,at="esri-legend",ke={service:`${at}__service`,label:`${at}__service-label`,layer:`${at}__layer`,groupLayer:`${at}__group-layer`,groupLayerChild:`${at}__group-layer-child`,layerTable:`${at}__layer-table`,layerTableSizeRamp:`${at}__layer-table--size-ramp`,layerChildTable:`${at}__layer-child-table`,layerCaption:`${at}__layer-caption`,layerBody:`${at}__layer-body`,layerRow:`${at}__layer-row`,layerCell:`${at}__layer-cell`,layerInfo:`${at}__layer-cell ${at}__layer-cell--info`,imageryLayerStretchedImage:`${at}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${at}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${at}__imagery-layer-info--stretched`,symbolContainer:`${at}__layer-cell ${at}__layer-cell--symbols`,symbol:`${at}__symbol`,rampContainer:`${at}__ramps`,sizeRamp:`${at}__size-ramp`,colorRamp:`${at}__color-ramp`,opacityRamp:`${at}__opacity-ramp`,borderlessRamp:`${at}__borderless-ramp`,rampTick:`${at}__ramp-tick`,rampFirstTick:`${at}__ramp-tick-first`,rampLastTick:`${at}__ramp-tick-last`,rampLabelsContainer:`${at}__ramp-labels`,rampLabel:`${at}__ramp-label`,message:`${at}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"},d6e=`${at}__`,p6e=24,a7={display:"flex",alignItems:"flex-start"},_L={marginLeft:"3px"},Em={display:"table-cell",verticalAlign:"middle"};let xh=class extends yn{constructor(e,i){super(e,i),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,i=e&&e.toArray().map(r=>this._renderLegendForLayer(r)).filter(r=>!!r);return x("div",null,i&&i.length?i:x("div",{class:ke.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const i=!!e.children.length,r=`${d6e}${e.layer.uid}-version-${e.version}`,n=e.title?Vd({level:this.headingLevel,class:this.classes(oe.heading,ke.label)},e.title):null;if(i){const s=e.children.map(o=>this._renderLegendForLayer(o)).toArray();return x("div",{class:this.classes(ke.service,ke.groupLayer),key:r},n,s)}{const s=e.legendElements;if(s&&!s.length)return null;const o=s.map(l=>this._renderLegendForElement(l,e.layer,e.effectList)).filter(l=>!!l);if(!o.length)return null;const a={[ke.groupLayerChild]:!!e.parent};return x("div",{class:this.classes(ke.service,a),key:r},n,x("div",{class:ke.layer},o))}}_renderLegendForElement(e,i,r,n){const s=e.type==="color-ramp",o=e.type==="opacity-ramp",a=e.type==="size-ramp";let l=null;if(e.type==="symbol-table"||a){const g=e.infos.map(v=>this._renderLegendForElementInfo(v,i,r,a,e.legendType)).filter(v=>!!v);g.length&&(l=x("div",{class:ke.layerBody},g))}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"||e.type==="stretch-ramp"?l=this._renderLegendForRamp(e,i.opacity):e.type==="relationship-ramp"?l=zne(e,this.id,{opacity:i.opacity,effectList:r,ariaLabel:this.messages.previewRelationshipRampAriaLabel}):e.type==="pie-chart-ramp"?l=this._renderPieChartRamp(e):e.type==="univariate-above-and-below-ramp"?l=this._renderUnivariateAboveAndBelowRamp(e,i.opacity,r):e.type==="univariate-color-size-ramp"&&(l=this._renderUnivariateColorSizeRamp(e,i.opacity,r));if(!l)return null;const u=e.title;let p=null;if(typeof u=="string")p=u;else if(u){const g=xd(this.messages,u,s||o);p=Tse(u,s||o)&&u.title?`${u.title} (${g})`:g}const h=n?ke.layerChildTable:ke.layerTable,m=p?x("div",{class:ke.layerCaption},p):null,y={[ke.layerTableSizeRamp]:a||!n};return x("div",{class:this.classes(h,y)},m,l)}_renderPieChartRamp(e){return x("div",{afterCreate:Bi,bind:e.preview})}_renderUnivariateAboveAndBelowRamp(e,i,r){var I;const{sizeRampElement:n,colorRampElement:s}=xse(e,i);if(!n)return null;const o=(I=this.messages)==null?void 0:I.previewColorRampAriaLabel,a=Tg(n,"above",!0),l=Tg(n,"below",!0),u=12,p=Eg(s,{width:u,height:a,rampAlignment:"vertical",opacity:i,type:"above",effectList:r,ariaLabel:o}),h=Eg(s,{width:u,height:l,rampAlignment:"vertical",opacity:i,type:"below",effectList:r,ariaLabel:o}),m=BT(n),y=n.infos.map(C=>C.label),g=y.map((C,M)=>M===0?x("div",{class:C?p?ke.univariateAboveAndBelowLabel:ke.rampLabel:void 0,key:M},C):M===2?x("div",null):null),v=y.length-1,w=Math.floor(y.length/2),b=y.map((C,M)=>M===w||M===v?x("div",{class:C?p?ke.univariateAboveAndBelowLabel:ke.rampLabel:void 0,key:M},C):null),_={display:"table-cell",verticalAlign:"middle"},S={marginTop:`${m}px`},$={height:`${a}px`},T={height:`${l}px`};return x("div",{key:"univariate-above-and-below-ramp-preview",styles:a7},x("div",{class:ke.layerBody},n.infos.map((C,M)=>x("div",{class:this.classes(ke.layerRow,ke.sizeRamp)},x("div",{afterCreate:Bi,bind:C.preview,class:ke.symbol,styles:_}),p||M%2!=0?null:x("div",{class:ke.layerInfo},y[M])))),p?x("div",{key:"color-ramp-preview",styles:S},x("div",{styles:_L},x("div",{styles:Em},x("div",{afterCreate:Bi,bind:p,class:ke.rampContainer})),x("div",{styles:Em},x("div",{class:ke.rampLabelsContainer,styles:$},g))),x("div",{styles:_L},x("div",{styles:Em},x("div",{afterCreate:Bi,bind:h,class:ke.rampContainer})),x("div",{styles:Em},x("div",{class:ke.rampLabelsContainer,styles:T},b)))):null)}_renderUnivariateColorSizeRamp(e,i,r){var v;const{sizeRampElement:n,colorRampElement:s}=Ese(e);if(!n)return null;const o=BT(n),a=12,l=Tg(n,"full",!1),u=Eg(s,{width:a,height:l,rampAlignment:"vertical",opacity:i,type:"full",effectList:r,ariaLabel:(v=this.messages)==null?void 0:v.previewColorRampAriaLabel}),p=n.infos.length-1,h=n.infos.map((w,b)=>b===0||b===p?x("div",{class:w.label?s?ke.univariateAboveAndBelowLabel:ke.rampLabel:void 0,key:b},w.label):null),m={display:"table-cell",verticalAlign:"middle"},y={marginTop:`${o}px`},g={height:`${l}px`};return x("div",{key:"univariate-above-and-below-ramp-preview",styles:a7},x("div",{class:ke.layerBody},n.infos.map(w=>x("div",{class:this.classes(ke.layerRow,ke.sizeRamp)},x("div",{afterCreate:Bi,bind:w.preview,class:ke.symbol,styles:m})))),x("div",{key:"color-ramp-preview",styles:y},x("div",{styles:_L},x("div",{styles:Em},x("div",{afterCreate:Bi,bind:u,class:ke.rampContainer})),x("div",{styles:Em},x("div",{class:ke.rampLabelsContainer,styles:g},h)))))}_renderLegendForRamp(e,i){const r=e.infos,n=e.type==="opacity-ramp",s=e.type==="heatmap-ramp",o=e.type==="stretch-ramp",a=e.preview,l=n?ke.opacityRamp:"";a.className=`${ke.colorRamp} ${l}`,i!=null&&(a.style.opacity=i.toString());const u=r.map(m=>x("div",{class:m.label?ke.rampLabel:void 0},s?this.messages[m.label]||m.label:o?Ise(m,this.messages):m.label)),p={width:`${p6e}px`},h={height:a.style.height};return x("div",{class:ke.layerRow},x("div",{class:ke.symbolContainer,styles:p},x("div",{afterCreate:Bi,bind:a,class:ke.rampContainer})),x("div",{class:ke.layerInfo},x("div",{class:ke.rampLabelsContainer,styles:h},u)))}_renderLegendForElementInfo(e,i,r,n,s){if(e.type)return this._renderLegendForElement(e,i,r,!0);let o=null;const a=kse(i,s);if(e.preview?o=x("div",{afterCreate:Bi,bind:e.preview,class:ke.symbol}):e.src&&(o=this._renderImage(e,i,a)),!o)return null;const l={[ke.imageryLayerInfoStretched]:a},u={[ke.imageryLayerInfoStretched]:a,[ke.sizeRamp]:!a&&n};return x("div",{class:ke.layerRow},x("div",{class:this.classes(ke.symbolContainer,u)},o),x("div",{class:this.classes(ke.layerInfo,l)},xd(this.messages,e.label,!1)||""))}_renderImage(e,i,r){const{label:n,src:s,opacity:o}=e,a={[ke.imageryLayerStretchedImage]:r,[ke.symbol]:!r},l={opacity:`${o??i.opacity}`};return x("img",{alt:xd(this.messages,n,!1),"aria-label":xd(this.messages,n,!1),border:0,class:this.classes(a),height:e.height,src:s,styles:l,width:e.width})}};c([d()],xh.prototype,"activeLayerInfos",void 0),c([d()],xh.prototype,"headingLevel",void 0),c([d(),hn("esri/widgets/Legend/t9n/Legend")],xh.prototype,"messages",void 0),c([d({readOnly:!0})],xh.prototype,"type",void 0),xh=c([k("esri.widgets.Legend.styles.Classic")],xh);const Tm=xh,l7={base:"esri-legend",widgetIcon:Re.layerList};let Vi=class extends yn{constructor(e,i){super(e,i),this.headingLevel=3,this.iconClass=l7.widgetIcon,this.icon=null,this.messages=null,this.style=new Tm,this.viewModel=new Xze}initialize(){this.addHandles([bs(()=>this.view,"resize",()=>this.scheduleRender()),bs(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),Y(()=>this.headingLevel,e=>{const{style:i}=this;i&&(i.headingLevel=e)}),Y(()=>this.style,(e,i)=>{i&&e!==i&&i.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},Le)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}castStyle(e){if(e instanceof wL||e instanceof Tm)return e;if(typeof e=="string")return e==="card"?new wL:new Tm;if(e&&typeof e.type=="string"){const i={...e};return delete i.type,new(e.type==="card"?wL:Tm)(i)}return new Tm}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return x("div",{class:this.classes(l7.base,oe.widget,this.style instanceof Tm?oe.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(i=>{this.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const i=Y(()=>e.version,()=>this.scheduleRender());this.addHandles(i,`version_${e.layer.uid}`);const r=bs(()=>e.children,"change",()=>e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n)),Le);this.addHandles(r,`version_${e.layer.uid}`),e.children.forEach(n=>this._renderOnActiveLayerInfoChange(n))}};c([d()],Vi.prototype,"activeLayerInfos",null),c([d()],Vi.prototype,"basemapLegendVisible",null),c([d()],Vi.prototype,"groundLegendVisible",null),c([d()],Vi.prototype,"headingLevel",void 0),c([d()],Vi.prototype,"hideLayersNotInCurrentView",null),c([d()],Vi.prototype,"keepCacheOnDestroy",null),c([d()],Vi.prototype,"respectLayerVisibility",null),c([d()],Vi.prototype,"iconClass",void 0),c([d()],Vi.prototype,"icon",void 0),c([d()],Vi.prototype,"label",null),c([d()],Vi.prototype,"layerInfos",null),c([d(),hn("esri/widgets/Legend/t9n/Legend")],Vi.prototype,"messages",void 0),c([d()],Vi.prototype,"style",void 0),c([qe("style")],Vi.prototype,"castStyle",null),c([d()],Vi.prototype,"view",null),c([d()],Vi.prototype,"viewModel",void 0),Vi=c([k("esri.widgets.Legend")],Vi);const Cse=Vi,h6e=Object.freeze(Object.defineProperty({__proto__:null,default:Cse},Symbol.toStringTag,{value:"Module"}));let Ka=class extends de{constructor(e){super(e),this.state="pending",this.url=""}initialize(){this.addHandles([Y(()=>[this.extension,this.name],()=>this._setFormattedFileName(),Le)])}_setFormattedFileName(){if(!this.name||!this.extension)return;let e=this.name+"."+this.extension;this.count&&(e=this.name+"("+this.count+")."+this.extension),this.formattedName=e}};c([d()],Ka.prototype,"count",void 0),c([d()],Ka.prototype,"error",void 0),c([d()],Ka.prototype,"extension",void 0),c([d()],Ka.prototype,"formattedName",void 0),c([d()],Ka.prototype,"name",void 0),c([d()],Ka.prototype,"state",void 0),c([d()],Ka.prototype,"url",void 0),Ka=c([k("esri.widgets.print.FileLink")],Ka);const Mse=Ka;let Ho=class extends de{constructor(){super(...arguments),this.outSpatialReference=null,this.processExtent=null,this.processSpatialReference=null,this.returnFeatureCollection=!1,this.returnM=!1,this.returnZ=!1}};c([d({type:Ee})],Ho.prototype,"outSpatialReference",void 0),c([d({type:ct})],Ho.prototype,"processExtent",void 0),c([d({type:Ee})],Ho.prototype,"processSpatialReference",void 0),c([d({nonNullable:!0})],Ho.prototype,"returnFeatureCollection",void 0),c([d({nonNullable:!0})],Ho.prototype,"returnM",void 0),c([d({nonNullable:!0})],Ho.prototype,"returnZ",void 0),Ho=c([k("esri.rest.geoprocessor.GPOptions")],Ho),Ho.from=ei(Ho);const V4=Ho;let qo=class extends B{constructor(){super(...arguments),this.extent=null,this.height=null,this.href=null,this.opacity=1,this.rotation=0,this.scale=null,this.visible=!0,this.width=null}};c([d({type:ct})],qo.prototype,"extent",void 0),c([d()],qo.prototype,"height",void 0),c([d()],qo.prototype,"href",void 0),c([d()],qo.prototype,"opacity",void 0),c([d()],qo.prototype,"rotation",void 0),c([d()],qo.prototype,"scale",void 0),c([d()],qo.prototype,"visible",void 0),c([d()],qo.prototype,"width",void 0),qo=c([k("esri.layer.support.MapImage")],qo);const c7=qo;let Ab=class extends B{constructor(e){super(e),this.itemId=null,this.url=null}};c([d({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],Ab.prototype,"itemId",void 0),c([d({type:String,json:{write:!0}})],Ab.prototype,"url",void 0),Ab=c([k("esri.rest.support.DataFile")],Ab);const SL=Ab,u7=new $e({esriMeters:"meters",esriFeet:"feet",esriKilometers:"kilometers",esriMiles:"miles",esriNauticalMiles:"nautical-miles",esriYards:"yards"},{ignoreUnknown:!1});let Pb=class extends B{constructor(e){super(e),this.distance=0,this.units=null}};c([d({json:{write:!0}})],Pb.prototype,"distance",void 0),c([d({json:{read:u7.read,write:u7.write}})],Pb.prototype,"units",void 0),Pb=c([k("esri.rest.support.LinearUnit")],Pb);const d7=Pb,f6e=new $e({GPBoolean:"boolean",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",GPField:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string","GPMultiValue:GPBoolean":"multi-value","GPMultiValue:GPDataFile":"multi-value","GPMultiValue:GPDate":"multi-value","GPMultiValue:GPDouble":"multi-value","GPMultiValue:GPFeatureRecordSetLayer":"multi-value","GPMultiValue:GPField":"multi-value","GPMultiValue:GPLinearUnit":"multi-value","GPMultiValue:GPLong":"multi-value","GPMultiValue:GPRasterData":"multi-value","GPMultiValue:GPRasterDataLayer":"multi-value","GPMultiValue:GPRecordSet":"multi-value","GPMultiValue:GPString":"multi-value"});let Cy=class extends B{constructor(e){super(e),this.dataType=null,this.paramName=null,this.value=null}};c([he(f6e,{ignoreUnknown:!1})],Cy.prototype,"dataType",void 0),c([d()],Cy.prototype,"paramName",void 0),c([d()],Cy.prototype,"value",void 0),Cy=c([k("esri.rest.support.ParameterValue")],Cy);const m6e=Cy;let My=class extends B{constructor(e){super(e),this.format=null,this.itemId=null,this.url=null}};c([d()],My.prototype,"format",void 0),c([d({json:{read:{source:"itemID"},write:{target:"itemID"}}})],My.prototype,"itemId",void 0),c([d()],My.prototype,"url",void 0),My=c([k("esri.rest.support.RasterData")],My);const p7=My;async function Lse(t,e,i,r,n){const s={},o={},a=[];return y6e(r,a,s),Yte(a).then(l=>{const{outSpatialReference:u,processExtent:p,processSpatialReference:h,returnFeatureCollection:m,returnM:y,returnZ:g}=i,{path:v}=ud(t);for(const T in s){const I=s[T];o[T]=l.slice(I[0],I[1])}const w=u?u.wkid||u:null,b=h?h.wkid||h:null,_=e==="execute"?{returnFeatureCollection:m||void 0,returnM:y||void 0,returnZ:g||void 0}:null,S=GT({...p?{context:{extent:p,outSR:w,processSR:b}}:{"env:outSR":w,"env:processSR":b},...r,..._,f:"json"},null,o),$={...n,query:S};return Ve(`${v}/${e}`,$)})}function y6e(t,e,i){for(const r in t){const n=t[r];if(n&&typeof n=="object"&&n instanceof y1){const{features:s}=n;i[r]=[e.length,e.length+s.length],s.forEach(o=>{e.push(o.geometry)})}}}function kN(t){const e=t.dataType,i=m6e.fromJSON(t);switch(e){case"GPBoolean":case"GPDouble":case"GPLong":case"GPString":case"GPMultiValue:GPBoolean":case"GPMultiValue:GPDouble":case"GPMultiValue:GPLong":case"GPMultiValue:GPString":return i;case"GPDate":i.value=new Date(i.value);break;case"GPDataFile":i.value=SL.fromJSON(i.value);break;case"GPLinearUnit":i.value=d7.fromJSON(i.value);break;case"GPFeatureRecordSetLayer":case"GPRecordSet":{const r=t.value.url;i.value=r?SL.fromJSON(i.value):y1.fromJSON(i.value);break}case"GPRasterData":case"GPRasterDataLayer":{const r=t.value.mapImage;i.value=r?c7.fromJSON(r):p7.fromJSON(i.value);break}case"GPField":i.value=m1.fromJSON(i.value);break;case"GPMultiValue:GPDate":{const r=i.value;i.value=r.map(n=>new Date(n));break}case"GPMultiValue:GPDataFile":i.value=i.value.map(r=>SL.fromJSON(r));break;case"GPMultiValue:GPLinearUnit":i.value=i.value.map(r=>d7.fromJSON(r));break;case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":i.value=i.value.map(r=>y1.fromJSON(r));break;case"GPMultiValue:GPRasterData":case"GPMultiValue:GPRasterDataLayer":i.value=i.value.map(r=>r?c7.fromJSON(r):p7.fromJSON(i.value));break;case"GPMultiValue:GPField":i.value=i.value.map(r=>m1.fromJSON(r))}return i}function GT(t,e,i){for(const r in t){const n=t[r];Array.isArray(n)?t[r]=JSON.stringify(n.map(s=>GT({item:s},!0).item)):n instanceof Date&&(t[r]=n.getTime())}return qee(t,e,i)}const h7=new $e({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let Rb=class extends B{constructor(e){super(e),this.description=null,this.type=null}};c([d({type:String,json:{write:!0}})],Rb.prototype,"description",void 0),c([d({type:String,json:{read:h7.read,write:h7.write}})],Rb.prototype,"type",void 0),Rb=c([k("esri.rest.support.GPMessage")],Rb);const Ose=Rb;async function Ase(t,e,i,r){return i=V4.from(i||{}),Lse(t,"execute",i,e??{},r).then(n=>{const s=n.data.results||[],o=n.data.messages||[];return{results:s.map(kN),messages:o.map(a=>Ose.fromJSON(a))}})}var v2;const g6e=Zi()({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"},{ignoreUnknown:!1});let hc=v2=class extends B{constructor(t){super(t),this.jobId=null,this.jobStatus=null,this.messages=null,this.progress=null,this.requestOptions=null,this.sourceUrl=null,this._timer=void 0}async cancelJob(t){const{jobId:e,sourceUrl:i}=this,{path:r}=ud(i),n={...this.requestOptions,...t,query:{f:"json"}};this._clearTimer();const s=`${r}/jobs/${e}/cancel`,{data:o}=await Ve(s,n),{messages:a,jobStatus:l,progress:u}=v2.fromJSON(o);return this.set({messages:a,jobStatus:l,progress:u}),this}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const{path:e}=ud(this.sourceUrl),i={...this.requestOptions,...t,query:{f:"json"}},r=`${e}/jobs/${this.jobId}`,{data:n}=await Ve(r,i),{messages:s,jobStatus:o,progress:a}=v2.fromJSON(n);return this.set({messages:s,jobStatus:o,progress:a}),this}async fetchResultData(t,e,i){e=V4.from(e||{});const{returnFeatureCollection:r,returnM:n,returnZ:s,outSpatialReference:o}=e,{path:a}=ud(this.sourceUrl),l=GT({returnFeatureCollection:r,returnM:n,returnZ:s,outSR:o,returnType:"data",f:"json"},null),u={...this.requestOptions,...i,query:l},p=`${a}/jobs/${this.jobId}/results/${t}`,{data:h}=await Ve(p,u);return kN(h)}async fetchResultImage(t,e,i){const{path:r}=ud(this.sourceUrl),n={...e.toJSON(),f:"json"},s=GT(n),o={...this.requestOptions,...i,query:s},a=`${r}/jobs/${this.jobId}/results/${t}`,{data:l}=await Ve(a,o);return kN(l)}async fetchResultMapImageLayer(){const{path:t}=ud(this.sourceUrl),e=t.indexOf("/GPServer/"),i=`${t.substring(0,e)}/MapServer/jobs/${this.jobId}`;return new(await Z(()=>import("./MapImageLayer-Wx7I5L-s.js"),__vite__mapDeps([236,237,117,118,60,58,59,18,16,17,119,120,15,238]))).default({url:i})}async waitForJobCompletion(t={}){const{interval:e=1e3,signal:i,statusCallback:r}=t;return new Promise((n,s)=>{ys(i,()=>{this._clearTimer(),s(mt())}),this._clearTimer();const o=setInterval(()=>{this._timer||s(mt()),this.checkJobStatus(this.requestOptions).then(a=>{const{jobStatus:l}=a;switch(this.jobStatus=l,l){case"job-succeeded":this._clearTimer(),n(this);break;case"job-submitted":case"job-executing":case"job-waiting":case"job-new":r&&r(this);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-timed-out":case"job-failed":this._clearTimer(),s(this)}})},e);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};c([d()],hc.prototype,"jobId",void 0),c([he(g6e,{ignoreUnknown:!1})],hc.prototype,"jobStatus",void 0),c([d({type:[Ose]})],hc.prototype,"messages",void 0),c([d()],hc.prototype,"progress",void 0),c([d()],hc.prototype,"requestOptions",void 0),c([d({json:{write:!0}})],hc.prototype,"sourceUrl",void 0),hc=v2=c([k("esri.rest.support.JobInfo")],hc);const v6e=hc;async function b6e(t,e,i,r){return i=V4.from(i||{}),Lse(t,"submitJob",i,e??{},r).then(n=>{const s=v6e.fromJSON(n.data);return s.sourceUrl=t,s})}const HT=new $e({PDF:"pdf",PNG32:"png32",PNG8:"png8",JPG:"jpg",GIF:"gif",EPS:"eps",SVG:"svg",SVGZ:"svgz"}),IN=HT.fromJSON.bind(HT),w6e=HT.toJSON.bind(HT),qT=new $e({MAP_ONLY:"map-only","A3 Landscape":"a3-landscape","A3 Portrait":"a3-portrait","A4 Landscape":"a4-landscape","A4 Portrait":"a4-portrait","Letter ANSI A Landscape":"letter-ansi-a-landscape","Letter ANSI A Portrait":"letter-ansi-a-portrait","Tabloid ANSI B Landscape":"tabloid-ansi-b-landscape","Tabloid ANSI B Portrait":"tabloid-ansi-b-portrait"}),b2=qT.fromJSON.bind(qT),_6e=qT.toJSON.bind(qT),$L="simple-marker",S6e="picture-marker",f7="simple-line",$6e="simple-fill",x6e="shield-label-symbol",E6e="text";function T6e(t,e){const{graphic:i,renderer:r,symbol:n}=e,s=n.type;if(s===E6e||s===x6e||!("visualVariables"in r)||!r.visualVariables)return;const o=r.getVisualVariablesForType("size"),a=r.getVisualVariablesForType("color"),l=r.getVisualVariablesForType("opacity"),u=r.getVisualVariablesForType("rotation"),p=o[0],h=a[0],m=l[0],y=u[0];if(p){const g=s===$L?n.style:null,v=g_(p,i,{shape:g});v!=null&&(s===$L?t.size=lr(v):s===S6e?(t.width=lr(v),t.height=lr(v)):s===f7?t.width=lr(v):t.outline&&(t.outline.width=lr(v)))}if(h){const g=vF(h,i);(g&&s===$L||s===f7||s===$6e)&&(t.color=g?g.toJSON():void 0)}if(m){const g=bF(m,i);g!=null&&t.color&&(t.color[3]=Math.round(255*g))}y&&(t.angle=-wF(r,i))}function k6e(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}}function I6e(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}}function m7(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}}function C6e(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}}function M6e(t,e=15){const i=t.canvas.width,r=t.canvas.height,n=t.getImageData(0,0,i,r).data;let s,o,a,l,u,p;e:for(o=r;o--;)for(s=i;s--;)if(n[4*(i*o+s)+3]>e){p=o;break e}if(!p)return null;e:for(s=i;s--;)for(o=p+1;o--;)if(n[4*(i*o+s)+3]>e){u=s;break e}e:for(s=0;s<=u;++s)for(o=p+1;o--;)if(n[4*(i*o+s)+3]>e){a=s;break e}e:for(o=0;o<=p;++o)for(s=a;s<=u;++s)if(n[4*(i*o+s)+3]>e){l=o;break e}return{x:a,y:l,width:u-a,height:p-l}}function L6e(t,e){const i=t.allLayerViews.items;if(e===t.scale)return i.filter(n=>!n.suspended);const r=new Array;for(const n of i)P6e(n.parent)&&!r.includes(n.parent)||!n.visible||e&&"isVisibleAtScale"in n&&!n.isVisibleAtScale(e)||r.push(n);return r}function O6e(t){return(t==null?void 0:t.type)==="bing-maps"}function Pse(t){return t&&"blendMode"in t&&"effect"in t}function A6e(t){return(t==null?void 0:t.type)==="csv"}function P6e(t){return(t==null?void 0:t.declaredClass)==="esri.views.2d.layers.GroupLayerView2D"}function R6e(t){const e=t.layer;if(Pse(e)){const i=e.blendMode;if((!i||i==="normal")&&(e.effect||"featureEffect"in t&&t.featureEffect))return!0}return!1}let Ui=class extends de{constructor(e){super(e),this.attributionVisible=!0,this.exportOptions={width:800,height:1100,dpi:96},this.forceFeatureAttributes=!1,this.format="png32",this.includeCharts=!1,this.includeTables=!1,this.label=null,this.layout="map-only",this.layoutItem=null,this.layoutOptions=null,this.outScale=0,this.report=null,this.reportItem=null,this.reportOptions=null,this.scalePreserved=!0,this.showLabels=!0}};c([d()],Ui.prototype,"attributionVisible",void 0),c([d()],Ui.prototype,"exportOptions",void 0),c([d()],Ui.prototype,"forceFeatureAttributes",void 0),c([d()],Ui.prototype,"format",void 0),c([d()],Ui.prototype,"includeCharts",void 0),c([d()],Ui.prototype,"includeTables",void 0),c([d()],Ui.prototype,"label",void 0),c([d()],Ui.prototype,"layout",void 0),c([d({type:ml})],Ui.prototype,"layoutItem",void 0),c([d()],Ui.prototype,"layoutOptions",void 0),c([d()],Ui.prototype,"outScale",void 0),c([d()],Ui.prototype,"report",void 0),c([d({type:ml})],Ui.prototype,"reportItem",void 0),c([d()],Ui.prototype,"reportOptions",void 0),c([d()],Ui.prototype,"scalePreserved",void 0),c([d()],Ui.prototype,"showLabels",void 0),Ui=c([k("esri.rest.support.PrintTemplate")],Ui);const Rse=Ui,WT=new $e({"Attribute List Letter ANSI A Landscape":"attribute-list-letter-ansi-a-landscape","Attribute List Letter ANSI A Portrait":"attribute-list-letter-ansi-a-portrait","Attribute List With Group Letter ANSI A Landscape":"attribute-list-with-group-letter-ansi-a-landscape","Attribute List With Group Letter ANSI A Portrait":"attribute-list-with-group-letter-ansi-a-portrait","Page per Feature Letter ANSI A Landscape":"page-per-feature-letter-ansi-a-landscape","Page per Feature Letter ANSI A Portrait":"page-per-feature-letter-ansi-a-portrait"});WT.fromJSON.bind(WT);const N6e=WT.toJSON.bind(WT),y7={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},g7=new $e({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",esriMiles:"Miles"}),D6e=new $e({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),CN=new Map;async function F6e(t,e,i){const r=V6e(t);let n=CN.get(r);return Promise.resolve().then(()=>n?{data:n.gpMetadata}:(n={gpServerUrl:r,is11xService:!1,legendLayerNameMap:{},legendLayers:[]},Ve(r,Hee({f:"json"},i)))).then(s=>(n.gpMetadata=s.data,n.cimVersion=n.gpMetadata.cimVersion,n.is11xService=!!n.cimVersion,CN.set(r,n),j6e(e,n))).then(s=>{const o=aVe(n);let a;const l=u=>{var p,h;return o==="sync"?(h=(p=u.results)==null?void 0:p[0])==null?void 0:h.value:a.fetchResultData("Output_File",null,i).then(m=>m.value)};return o==="async"?b6e(t,s,void 0,i).then(u=>(a=u,u.waitForJobCompletion({interval:e.updateDelay}).then(l))):Ase(t,s,void 0,i).then(l)})}async function j6e(t,e){e=e||{is11xService:!1,legendLayerNameMap:{},legendLayers:[]};const i=t.template||new Rse;i.showLabels==null&&(i.showLabels=!0);const r=i.exportOptions;let n;const s=_6e(i.layout);if(r&&(n={dpi:r.dpi},s.toLowerCase()==="map_only"||s==="")){const h=r.width,m=r.height;n.outputSize=h!=null&&m!=null?[h,m]:void 0}const o=i.layoutOptions;let a;if(o){let h,m;o.scalebarUnit==="Miles"||o.scalebarUnit==="Kilometers"?(h="Kilometers",m="Miles"):o.scalebarUnit!=="Meters"&&o.scalebarUnit!=="Feet"||(h="Meters",m="Feet"),a={titleText:o.titleText,authorText:o.authorText,copyrightText:o.copyrightText,customTextElements:o.customTextElements,elementOverrides:o.elementOverrides,scaleBarOptions:{metricUnit:g7.toJSON(h),metricLabel:h?y7[h]:void 0,nonMetricUnit:g7.toJSON(m),nonMetricLabel:m?y7[m]:void 0}}}let l=null;o!=null&&o.legendLayers&&(l=o.legendLayers.map(h=>{const m=h.layerId;e.legendLayerNameMap[m]=h.title;const y={id:m};return h.subLayerIds&&(y.subLayerIds=h.subLayerIds),y}));const u=await z6e(t,i,e);if(u.operationalLayers){const h=new RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),m=/[\u0600-\u06FF]/,y=v=>{var S;const w=v.text,b=v.font,_=(S=b==null?void 0:b.family)==null?void 0:S.toLowerCase();w&&b&&(_==="arial"||_==="arial unicode ms")&&(b.family=h.test(w)?"Arial Unicode MS":"Arial",b.style!=="normal"&&m.test(w)&&(b.family="Arial Unicode MS"))},g=()=>{throw new j("print:cim-symbol-unsupported","CIMSymbol is not supported by a print service published from ArcMap")};u.operationalLayers.forEach(v=>{var w,b,_;(w=v.featureCollection)!=null&&w.layers?v.featureCollection.layers.forEach(S=>{var $,T,I,C;if((I=(T=($=S.layerDefinition)==null?void 0:$.drawingInfo)==null?void 0:T.renderer)!=null&&I.symbol){const M=S.layerDefinition.drawingInfo.renderer;M.symbol.type==="esriTS"?y(M.symbol):M.symbol.type!=="CIMSymbolReference"||e.is11xService||g()}(C=S.featureSet)!=null&&C.features&&S.featureSet.features.forEach(M=>{M.symbol&&(M.symbol.type==="esriTS"?y(M.symbol):M.symbol.type!=="CIMSymbolReference"||e.is11xService||g())})}):!e.is11xService&&((_=(b=v.layerDefinition)==null?void 0:b.drawingInfo)!=null&&_.renderer)&&JSON.stringify(v.layerDefinition.drawingInfo.renderer).includes('"type":"CIMSymbolReference"')&&g()})}t.outSpatialReference&&(u.mapOptions.spatialReference=t.outSpatialReference.toJSON()),Object.assign(u,{exportOptions:n,layoutOptions:a||{}}),Object.assign(u.layoutOptions,{legendOptions:{operationalLayers:l??e.legendLayers.slice()}}),e.legendLayers.length=0,CN.set(e.gpServerUrl,e);const p={Web_Map_as_JSON:JSON.stringify(u),Format:w6e(i.format),Layout_Template:s,Layout_Item_ID:void 0,Report_Template:N6e(i.report),Report_Item_ID:void 0};if(i.layoutItem){delete p.Layout_Template;const h=i.layoutItem;await h.load(),h.access!=="public"&&Ne&&await Ne.getCredential(e.gpServerUrl),p.Layout_Item_ID=JSON.stringify({id:h.id})}if(i.reportItem){delete p.Report_Template;const h=i.reportItem;await h.load(),h.access!=="public"&&Ne&&await Ne.getCredential(e.gpServerUrl),p.Report_Item_ID=JSON.stringify({id:h.id})}return t.extraParameters&&Object.assign(p,t.extraParameters),p}async function z6e(t,e,i){const r=t.view;let n=r.spatialReference;const s={operationalLayers:await U6e(r,e,i)};e.includeTables&&(s.tables=await tVe(r));let o=i.ssExtent||t.extent||r.extent;if(n&&n.isWrappable&&(o=o.clone()._normalize(!0),n=o.spatialReference),s.mapOptions={extent:o&&o.toJSON(),spatialReference:n&&n.toJSON(),showAttribution:e.attributionVisible},i.ssExtent=null,r.background&&(s.background=r.background.toJSON()),r.rotation&&(s.mapOptions.rotation=-r.rotation),e.scalePreserved&&(s.mapOptions.scale=e.outScale||r.scale),r.timeExtent!=null){const a=r.timeExtent.start!=null?r.timeExtent.start.getTime():null,l=r.timeExtent.end!=null?r.timeExtent.end.getTime():null;s.mapOptions.time=[a,l]}return e.reportOptions&&(s.reportOptions=e.reportOptions),s}function V6e(t){let e=t;const i=e.lastIndexOf("/GPServer/");return i>0&&(e=e.slice(0,i+9)),e}async function U6e(t,e,i){const r=[],n={layerView:null,printTemplate:e,view:t};let s=0;e.scalePreserved&&(s=e.outScale||t.scale);const o=L6e(t,s);for(const a of o){const l=a.layer;if(!l.loaded||(l==null?void 0:l.type)==="group")continue;let u;n.layerView=a,u=R6e(a)?await t0(l,n,i):O6e(l)?B6e(l):A6e(l)?await G6e(l,n,i):(l==null?void 0:l.type)==="feature"?await H6e(l,n,i):(l==null?void 0:l.type)==="geojson"?await q6e(l,n,i):(l==null?void 0:l.type)==="graphics"?await W6e(l,n,i):(l==null?void 0:l.type)==="imagery"?J6e(l,i):(l==null?void 0:l.type)==="imagery-tile"?await Z6e(l,n,i):(l==null?void 0:l.type)==="kml"?await Y6e(l,n,i):(l==null?void 0:l.type)==="map-image"?K6e(l,n,i):(l==null?void 0:l.type)==="map-notes"?await Q6e(n,i):(l==null?void 0:l.type)==="open-street-map"?X6e():(l==null?void 0:l.type)==="stream"?await eVe(l,n,i):(l==null?void 0:l.type)==="tile"?iVe(l,i):(l==null?void 0:l.type)==="vector-tile"?await rVe(l,n,i):(l==null?void 0:l.type)==="web-tile"?nVe(l):(l==null?void 0:l.type)==="wms"?sVe(l,i):(l==null?void 0:l.type)==="wmts"?oVe(l):await t0(l,n,i),u&&(Array.isArray(u)?r.push(...u):(u.id=l.id,u.title=i.legendLayerNameMap[l.id]||l.title,u.opacity=l.opacity,u.minScale=l.minScale||0,u.maxScale=l.maxScale||0,Pse(l)&&l.blendMode&&l.blendMode!=="normal"&&(u.blendMode=l.blendMode),r.push(u)))}if(s&&r.forEach(a=>{a.minScale=0,a.maxScale=0}),t.graphics&&t.graphics.length){const a=await Hc(null,t.graphics,e,i);a&&r.push(a)}return r}function B6e(t){return{culture:t.culture,key:t.key,type:"BingMaps"+(t.style==="aerial"?"Aerial":t.style==="hybrid"?"Hybrid":"Road")}}async function G6e(t,e,i){t.legendEnabled&&i.legendLayers.push({id:t.id});const r=e.layerView,n=e.printTemplate;let s;return!i.is11xService||r.filter?Hc(t,await PI(r),n,i):(s={type:"CSV"},t.write(s,{origin:"web-map"}),delete s.popupInfo,delete s.layerType,s.showLabels=n.showLabels&&t.labelsVisible,s)}async function Hc(t,e,i,r){var w,b,_,S,$,T,I,C,M;let n;const s=I6e(),o=C6e(),a=m7(),l=k6e(),u=m7();if(u.layerDefinition.name="textLayer",delete u.layerDefinition.drawingInfo,t){if(t.declaredClass==="esri.layers.FeatureLayer"||t.declaredClass==="esri.layers.StreamLayer"?s.layerDefinition.name=o.layerDefinition.name=a.layerDefinition.name=l.layerDefinition.name=r.legendLayerNameMap[t.id]||t.get("arcgisProps.title")||t.title:t.declaredClass==="esri.layers.GraphicsLayer"&&(e=t.graphics.items),t.renderer){const R=t.renderer.toJSON(),O=s.layerDefinition.drawingInfo;O&&(O.renderer=R);const F=o.layerDefinition.drawingInfo;F&&(F.renderer=R);const A=a.layerDefinition.drawingInfo;A&&(A.renderer=R);const P=l.layerDefinition.drawingInfo;P&&(P.renderer=R)}if(i.showLabels&&t.labelsVisible&&typeof t.write=="function"){const R=t.write({},{origin:"web-map"}),O=(b=(w=R.layerDefinition)==null?void 0:w.drawingInfo)==null?void 0:b.labelingInfo;if(O){n=!0;const F=s.layerDefinition.drawingInfo;F&&(F.labelingInfo=O);const A=o.layerDefinition.drawingInfo;A&&(A.labelingInfo=O);const P=a.layerDefinition.drawingInfo;P&&(P.labelingInfo=O);const V=l.layerDefinition.drawingInfo;V&&(V.labelingInfo=O)}}}let p;t!=null&&t.renderer||n||(delete s.layerDefinition.drawingInfo,delete o.layerDefinition.drawingInfo,delete a.layerDefinition.drawingInfo,delete l.layerDefinition.drawingInfo);const h=t==null?void 0:t.fieldsIndex,m=t==null?void 0:t.renderer;if(h){const R=new Set;n&&await d$e(R,t),m&&typeof m.collectRequiredFields=="function"&&await m.collectRequiredFields(R,h),p=Array.from(R);const O=h.fields.map(F=>F.toJSON());s.layerDefinition.fields=O,o.layerDefinition.fields=O,a.layerDefinition.fields=O,l.layerDefinition.fields=O}const y=e==null?void 0:e.length;let g;for(let R=0;R<y;R++){const O=e[R]||e.at(R);if(O.visible===!1||!O.geometry||(g=O.toJSON(),g.hasOwnProperty("popupTemplate")&&delete g.popupTemplate,(_=g.geometry)!=null&&_.z&&delete g.geometry.z,((S=g.symbol)==null?void 0:S.outline)&&g.symbol.outline.type==="esriCLS"&&!r.is11xService))continue;!r.is11xService&&((I=(T=($=g.symbol)==null?void 0:$.outline)==null?void 0:T.color)!=null&&I[3])&&(g.symbol.outline.color[3]=255);const F=(t==null?void 0:t.renderer)&&("valueExpression"in t.renderer&&t.renderer.valueExpression||"hasVisualVariables"in t.renderer&&t.renderer.hasVisualVariables());if(!g.symbol&&(t!=null&&t.renderer)&&F&&!r.is11xService){const A=t.renderer,P=await A.getSymbolAsync(O);if(!P)continue;g.symbol=P.toJSON(),"hasVisualVariables"in A&&A.hasVisualVariables()&&T6e(g.symbol,{renderer:A,graphic:O,symbol:P})}if(g.symbol&&(g.symbol.angle||delete g.symbol.angle,_2(g.symbol)?g.symbol=await w2(g.symbol,r):g.symbol.text&&delete g.attributes),(!i||!i.forceFeatureAttributes)&&(p==null?void 0:p.length)){const A={};p.forEach(P=>{var V;(V=g.attributes)!=null&&V.hasOwnProperty(P)&&(A[P]=g.attributes[P])}),g.attributes=A}O.geometry.type==="polygon"?s.featureSet.features.push(g):O.geometry.type==="polyline"?o.featureSet.features.push(g):O.geometry.type==="point"?(C=g.symbol)!=null&&C.text?u.featureSet.features.push(g):a.featureSet.features.push(g):O.geometry.type==="multipoint"?l.featureSet.features.push(g):O.geometry.type==="extent"&&(g.geometry=ha.fromExtent(O.geometry).toJSON(),s.featureSet.features.push(g))}const v=[s,o,l,a,u].filter(R=>R.featureSet.features.length>0);for(const R of v){const O=R.featureSet.features.every(F=>F.symbol);!O||i&&i.forceFeatureAttributes||R.featureSet.features.forEach(F=>{delete F.attributes}),O&&delete R.layerDefinition.drawingInfo,(M=R.layerDefinition.drawingInfo)!=null&&M.renderer&&await Nse(R.layerDefinition.drawingInfo.renderer,r)}return v.length?{featureCollection:{layers:v},showLabels:n}:null}async function H6e(t,e,i){var m,y,g,v,w,b;let r;const n=t.renderer,s=parseFloat(i.cimVersion);if(((m=t.featureReduction)==null?void 0:m.type)==="binning"||((y=t.featureReduction)==null?void 0:y.type)==="cluster"&&(!i.is11xService||s<2.9)||(n==null?void 0:n.type)==="pie-chart"||(n==null?void 0:n.type)==="dot-density"&&(!i.is11xService||s<2.6))return t0(t,e,i);t.legendEnabled&&i.legendLayers.push({id:t.id});const o=e.layerView,{printTemplate:a,view:l}=e,u=n&&("valueExpression"in n&&n.valueExpression||"hasVisualVariables"in n&&n.hasVisualVariables()),p=((g=t.source)==null?void 0:g.type)!=="feature-layer"&&((v=t.source)==null?void 0:v.type)!=="ogc-feature";if(!i.is11xService&&u||o.filter||p||!n||"field"in n&&n.field!=null&&(typeof n.field!="string"||!t.getField(n.field))){const _=await PI(o);r=await Hc(t,_,a,i)}else{if(r={id:(h=t.write()).id,title:h.title,opacity:h.opacity,minScale:h.minScale,maxScale:h.maxScale,url:h.url,layerType:h.layerType,customParameters:h.customParameters,layerDefinition:h.layerDefinition,charts:a.includeCharts?h.charts:void 0},r.showLabels=a.showLabels&&t.labelsVisible,R0(r,t),((b=(w=r.layerDefinition)==null?void 0:w.drawingInfo)==null?void 0:b.renderer)&&(delete r.layerDefinition.minScale,delete r.layerDefinition.maxScale,await Nse(r.layerDefinition.drawingInfo.renderer,i),"visualVariables"in n&&n.visualVariables&&n.visualVariables[0])){const S=n.visualVariables[0];if(S.type==="size"&&S.maxSize&&typeof S.maxSize!="number"&&S.minSize&&typeof S.minSize!="number"){const $=rX(S,l.scale);r.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=$.minSize,r.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=$.maxSize}}const _=o4e(o);_&&(r.layerDefinition||(r.layerDefinition={}),r.layerDefinition.definitionExpression=r.layerDefinition.definitionExpression?`(${r.layerDefinition.definitionExpression}) AND (${_})`:_)}var h;return r}async function q6e(t,e,i){var r,n;return((r=t.featureReduction)==null?void 0:r.type)==="binning"||((n=t.featureReduction)==null?void 0:n.type)==="cluster"?t0(t,e,i):(t.legendEnabled&&i.legendLayers.push({id:t.id}),Hc(t,await PI(e.layerView),e.printTemplate,i))}async function W6e(t,{printTemplate:e},i){return Hc(t,null,e,i)}function J6e(t,e){t.legendEnabled&&e.legendLayers.push({id:t.id});const i={layerType:(r=t.write()).layerType,customParameters:r.customParameters};var r;if(i.bandIds=t.bandIds,i.compressionQuality=t.compressionQuality,i.format=t.format,i.interpolation=t.interpolation,(t.mosaicRule||t.definitionExpression)&&(i.mosaicRule=t.exportImageServiceParameters.mosaicRule.toJSON()),t.rasterFunction||t.renderer)if(e.is11xService)t.rasterFunction&&(i.renderingRule=t.rasterFunction.toJSON()),t.renderer&&(i.layerDefinition=i.layerDefinition||{},i.layerDefinition.drawingInfo=i.layerDefinition.drawingInfo||{},i.layerDefinition.drawingInfo.renderer=t.renderer.toJSON());else{const n=t.exportImageServiceParameters.combineRendererWithRenderingRule();n&&(i.renderingRule=n.toJSON())}return R0(i,t),i}async function Z6e(t,e,i){var s;if(((s=t.renderer)==null?void 0:s.type)==="flow")return t0(t,e,i);t.legendEnabled&&i.legendLayers.push({id:t.id});const r={bandIds:(n=t.write()||{}).bandIds,customParameters:n.customParameters,interpolation:n.interpolation,layerDefinition:n.layerDefinition};var n;return r.layerType="ArcGISImageServiceLayer",R0(r,t),r}async function Y6e(t,e,i){const r=e.printTemplate;if(i.is11xService){const n={type:"kml"};return t.write(n,{origin:"web-map"}),delete n.layerType,n.url=xr(t.url),n}{const n=[],s=e.layerView;s.allVisibleMapImages.forEach((l,u)=>{const p={id:`${t.id}_image${u}`,type:"image",title:t.id,minScale:t.minScale||0,maxScale:t.maxScale||0,opacity:t.opacity,extent:l.extent};l.href.substr(0,22)==="data:image/png;base64,"?p.imageData=l.href.substr(22):p.url=l.href,n.push(p)});const o=[...s.allVisiblePoints.items,...s.allVisiblePolylines.items,...s.allVisiblePolygons.items],a={id:t.id,...await Hc(null,o,r,i)};return n.push(a),n}}function K6e(t,{view:e},i){var u,p;let r;const n={id:t.id,subLayerIds:[]};let s=[];const o=e.scale,a=h=>{const m=o===0,y=h.minScale===0||o<=h.minScale,g=h.maxScale===0||o>=h.maxScale;if(h.visible&&(m||y&&g))if(h.sublayers)h.sublayers.forEach(a);else{const v=h.toExportImageJSON(),w={id:h.id,name:h.title,layerDefinition:{drawingInfo:v.drawingInfo,definitionExpression:v.definitionExpression,source:v.source}};s.unshift(w),n.subLayerIds.push(h.id)}};var l;return t.sublayers&&t.sublayers.forEach(a),s.length&&(s=s.map(({id:h,name:m,layerDefinition:y})=>({id:h,name:m,layerDefinition:y})),r={layerType:(l=t.write()).layerType,customParameters:l.customParameters},r.layers=s,r.visibleLayers=(p=(u=t.capabilities)==null?void 0:u.exportMap)!=null&&p.supportsDynamicLayers?void 0:n.subLayerIds,R0(r,t),t.legendEnabled&&i.legendLayers.push(n)),r}async function Q6e({layerView:t,printTemplate:e},i){const r=[],n=t.layer;if(n.featureCollections!=null)for(const s of n.featureCollections){const o=await Hc(s,s.source,e,i);o&&r.push(...o.featureCollection.layers)}else if(n.sublayers!=null)for(const s of n.sublayers){const o=await Hc(null,s.graphics,e,i);o&&r.push(...o.featureCollection.layers)}return{featureCollection:{layers:r}}}function X6e(){return{type:"OpenStreetMap"}}async function t0(t,{printTemplate:e,view:i},r){var h;const n={type:"image"},s={format:"png",ignoreBackground:!0,layers:[t],rotation:0},o=r.ssExtent||i.extent.clone();let a=96,l=!0,u=!0;if(e.exportOptions){const m=e.exportOptions;m.dpi!=null&&m.dpi>0&&(a=m.dpi),m.width!=null&&m.width>0&&(l=m.width%2==i.width%2),m.height!=null&&m.height>0&&(u=m.height%2==i.height%2)}if(e.layout==="map-only"&&e.scalePreserved&&(!e.outScale||e.outScale===i.scale)&&a===96&&(!l||!u)&&(s.area={x:0,y:0,width:i.width,height:i.height},l||(s.area.width-=1),u||(s.area.height-=1),!r.ssExtent)){const m=i.toMap(qr(s.area.width,s.area.height));o.ymin=m.y,o.xmax=m.x,r.ssExtent=o}n.extent=o.clone()._normalize(!0).toJSON();const p=await i.takeScreenshot(s);return n.imageData=(h=_f(p.dataUrl))==null?void 0:h.data,n}async function eVe(t,{layerView:e,printTemplate:i},r){return t.legendEnabled&&r.legendLayers.push({id:t.id}),Hc(t,await PI(e),i,r)}async function tVe(t){var n,s;const e=[],i=[];for(const o of t.map.allTables)o.type!=="feature"||o.loaded||i.push(o.load());i.length&&await Promise.allSettled(i);for(const o of t.map.allTables)if(o.type==="feature"&&o.loaded&&o.isTable&&((n=o.source)==null?void 0:n.type)==="feature-layer"){const a={id:(r=o.write()).id,title:r.title,customParameters:r.customParameters,layerDefinition:{definitionExpression:(s=r.layerDefinition)==null?void 0:s.definitionExpression},url:r.url};R0(a,o),e.push(a)}var r;return e.length?e:void 0}function iVe(t,e){t.legendEnabled&&e.legendLayers.push({id:t.id});const i={layerType:(r=t.write()).layerType,customParameters:r.customParameters};var r;return R0(i,t),i}async function rVe(t,e,i){if(i.is11xService&&t.serviceUrl&&t.styleUrl){const r=pT(t.styleUrl,t.apiKey),n=pT(t.serviceUrl,t.apiKey);if(!r&&!n||i.cimVersion!=="2.1.0"){const s={type:"VectorTileLayer"};return s.styleUrl=xr(t.styleUrl),s.token=r,n!==r&&(s.additionalTokens=[{url:t.serviceUrl,token:n}]),s}}return t0(t,e,i)}function nVe(t){var r;const e=(r=t.urlTemplate)==null?void 0:r.replace(/\${/g,"{"),i={type:"WebTiledLayer",urlTemplate:e,credits:t.copyright};return t.subDomains&&t.subDomains.length>0&&(i.subDomains=t.subDomains),i}function sVe(t,e){let i;const r=[],n=s=>{s.visible&&(s.sublayers?s.sublayers.forEach(n):s.name&&r.unshift(s.name))};return t.sublayers&&t.sublayers.forEach(n),r.length&&(t.legendEnabled&&e.legendLayers.push({id:t.id,subLayerIds:r}),i={type:"wms",customLayerParameters:t.customLayerParameters,customParameters:t.customParameters,transparentBackground:t.imageTransparency,visibleLayers:r,url:xr(t.url),version:t.version}),i}function oVe(t){const e=t.activeLayer;return{type:"wmts",customLayerParameters:t.customLayerParameters,customParameters:t.customParameters,format:e.imageFormat,layer:e.id,style:e.styleId,tileMatrixSet:e.tileMatrixSetId,url:xr(t.url)}}function R0(t,e){e.url&&(t.url=xr(t.url||e.url),t.token=pT(t.url,e.apiKey))}async function w2(t,e){var o;e.canvas||(e.canvas=document.createElement("canvas"));const i=1024;e.canvas.width=i,e.canvas.height=i;const r=e.canvas.getContext("2d");let n,s;if(t.path){const a=new Path2D(t.path);a.closePath(),r.fillStyle=Array.isArray(t.color)?`rgba(${t.color[0]},${t.color[1]},${t.color[2]},${t.color[3]/255})`:"rgb(0,0,0)",r.fill(a);const l=M6e(r);if(!l)return null;r.clearRect(0,0,i,i);const u=_t(t.size)/Math.max(l.width,l.height);r.scale(u,u);const p=i/u,h=p/2-l.width/2-l.x,m=p/2-l.height/2-l.y;if(r.translate(h,m),Array.isArray(t.color)&&r.fill(a),((o=t.outline)==null?void 0:o.width)&&Array.isArray(t.outline.color)){const g=t.outline;r.lineWidth=_t(g.width)/u,r.lineJoin="round",r.strokeStyle=`rgba(${g.color[0]},${g.color[1]},${g.color[2]},${g.color[3]/255})`,r.stroke(a),l.width+=r.lineWidth,l.height+=r.lineWidth}l.width*=u,l.height*=u;const y=r.getImageData(i/2-l.width/2,i/2-l.height/2,Math.ceil(l.width),Math.ceil(l.height));n=y.width,s=y.height,r.canvas.width=n,r.canvas.height=s,r.putImageData(y,0,0)}else{const a=t.contentType==="image/svg+xml"?"data:image/svg+xml;base64,"+t.imageData:t.url,l=(await Ve(a,{responseType:"image"})).data;n=_t(t.width),s=_t(t.height),r.canvas.width=n,r.canvas.height=s,r.drawImage(l,0,0,r.canvas.width,r.canvas.height)}return{type:"esriPMS",imageData:r.canvas.toDataURL("image/png").substr(22),angle:t.angle,contentType:"image/png",height:lr(s),width:lr(n),xoffset:t.xoffset,yoffset:t.yoffset}}async function Nse(t,e){const i=t.type;if(i==="simple"&&_2(t.symbol))t.symbol=await w2(t.symbol,e);else if(i==="uniqueValue"||i==="classBreaks"){_2(t.defaultSymbol)&&(t.defaultSymbol=await w2(t.defaultSymbol,e));const r=t[i==="uniqueValue"?"uniqueValueInfos":"classBreakInfos"];if(r)for(const n of r)_2(n.symbol)&&(n.symbol=await w2(n.symbol,e))}}async function PI(t){return t.queryFeatures(t.createQuery()).then(e=>e.features)}function aVe(t){var e;return(e=t.gpMetadata)!=null&&e.executionType?D6e.fromJSON(t.gpMetadata.executionType):"sync"}function _2(t){var e;return t&&(t.path||t.contentType==="image/svg+xml"||((e=t.url)==null?void 0:e.endsWith(".svg")))}let fc=class extends de{constructor(e){super(e),this.extent=null,this.extraParameters=null,this.outSpatialReference=null,this.template=null,this.updateDelay=1e3,this.view=null}};c([d()],fc.prototype,"extent",void 0),c([d()],fc.prototype,"extraParameters",void 0),c([d()],fc.prototype,"outSpatialReference",void 0),c([d()],fc.prototype,"template",void 0),c([d()],fc.prototype,"updateDelay",void 0),c([d()],fc.prototype,"view",void 0),fc=c([k("esri.rest.support.PrintParameters")],fc);const lVe=fc;let Zu=class extends B{constructor(e){super(e),this.description=null,this.format=null,this.label=null,this.layout=null,this.layoutOptions=null}};c([d()],Zu.prototype,"description",void 0),c([d({json:{read:IN}})],Zu.prototype,"format",void 0),c([d()],Zu.prototype,"label",void 0),c([d({json:{read:b2}})],Zu.prototype,"layout",void 0),c([d()],Zu.prototype,"layoutOptions",void 0),Zu=c([k("esri.widgets.Print.CustomTemplate")],Zu);const Dse=Zu,Fse=ce.ofType(Dse);function cVe(t){var i;t.layoutOptions??(t.layoutOptions={}),(i=t.layoutOptions).customTextElements??(i.customTextElements=[]);const e="date";if(!t.layoutOptions.customTextElements.find(r=>e in r)){const{customTextElements:r}=t.layoutOptions;let n=Pn(Date.now(),cd("short-date"));oZ()==="ar"&&(n="‏"+n),r.push({date:n})}}let bi=class extends Jr{constructor(t){super(t),this._serviceTemplateCustomTextElements=null,this.allowedFormats="all",this.allowedLayouts="all",this.defaultTemplates=new Fse,this.extraParameters=null,this.includeDefaultTemplates=!0,this.error=null,this.portal=gi.getDefault(),this.printServiceUrl=null,this.printTimeout=12e4,this.templatesInfo=null,this.updateDelay=1e3,this.view=null,this.templateCustomTextElements=null,this.print=this.print.bind(this)}destroy(){this.view=null}get effectivePrintServiceUrl(){return this.printServiceUrl??null}get effectiveTemplateCustomTextElements(){if(!this._serviceTemplateCustomTextElements)return{};const t=D(this._serviceTemplateCustomTextElements);return this.templateCustomTextElements&&Object.keys(this.templateCustomTextElements).forEach(e=>{var r;const i=t[e];if(i){const n=(r=this.templateCustomTextElements)==null?void 0:r[e];i.forEach(s=>{const[o]=Object.entries(s)[0];n==null||n.forEach(a=>{const[l,u]=Object.entries(a)[0];o===l&&(s[o]=u)})})}}),Object.freeze(t)}get state(){var t;return this.loadStatus==="loading"?"initializing":this.error||this.loadStatus==="failed"?"error":(t=this.view)!=null&&t.ready&&this.loadStatus==="loaded"?"ready":"disabled"}async load(t){return this.addResolvingPromise(this._loadResources(t).catch(e=>this.error=e)),this}async print(t){const{view:e,extraParameters:i,updateDelay:r}=this;if(!e)throw new j("print:view-required","view is not set");cVe(t);const n=new lVe({view:e,template:t,extraParameters:i,updateDelay:r});try{return await F6e(this.effectivePrintServiceUrl,n,{timeout:this.printTimeout})}catch(s){throw new j("print:export-error","An error occurred while exporting the web map.",{error:s})}}toPrintTemplate({attributionEnabled:t,author:e,copyright:i,customTextElements:r,dpi:n,forceFeatureAttributes:s,format:o,height:a,includeTables:l,layout:u,legendEnabled:p,northArrowEnabled:h,scale:m,scaleEnabled:y,title:g,width:v}){const w=new Rse({attributionVisible:t,forceFeatureAttributes:s,format:o,includeTables:l,layout:u,layoutOptions:{authorText:e||"",copyrightText:i||"",customTextElements:r,titleText:g||""},outScale:m??0,scalePreserved:y});v&&(w.exportOptions.width=v),a&&(w.exportOptions.height=a),n&&(w.exportOptions.dpi=n),!p&&w.layoutOptions&&(w.layoutOptions.legendLayers=[]);const b=this.templateToNorthArrowInfo[u];return b&&b.visible!==h&&w.layoutOptions&&(w.layoutOptions.elementOverrides={[b.name]:{visible:h}}),w}async _loadResources(t){var n,s;let e=[];const{printServiceUrl:i}=this;if(!i){if(this.destroyed)return;const{portal:o}=this;try{await o.load(t)}catch{throw new j("print:could-not-load-portal","Cannot load print resource information from portal",{url:this.effectivePrintServiceUrl})}const a=(n=o.helperServices)==null?void 0:n.printTask;a&&(this._set("effectivePrintServiceUrl",a.url),e=((a==null?void 0:a.templates)??[]).map(l=>Dse.fromJSON(l)))}e.length>0&&this.defaultTemplates.addMany(e);const r=(s=this.effectivePrintServiceUrl)==null?void 0:s.toLowerCase().split("/");if(((r==null?void 0:r.indexOf("gpserver"))??-1)===-1)throw new j("print:invalid-print-service-url","Can't fetch print templates information from provided URL",{url:this.effectivePrintServiceUrl});this._processLayoutTemplateInfos(await this._getLayoutTemplatesInfo(t)),await this._loadServiceDescription(t)}async _loadServiceDescription(t){const e=await this._getPrintTemplatesFromService(t);this._set("templatesInfo",e)}async _getLayoutTemplatesInfo(t){let e=[];const i=async r=>{const n=this.effectivePrintServiceUrl.replace(/(\/GPServer\/).+/i,`$1${encodeURI(r)}`);return(await Ase(n,null,null,t)).results[0].value};try{e=await i("Get Layout Templates Info Task")}catch{}if(!e||e.length<1)try{e=await i("Get Layout Templates Info")}catch{}return e}_processLayoutTemplateInfos(t){const e={},i={};t.forEach(({layoutTemplate:r,layoutOptions:{customTextElements:n,mapSurroundInfos:s}})=>{const o=b2(r);e[o]=n,s&&(i[o]=s.find(a=>a.type==="CIMMarkerNorthArrow"))}),this._serviceTemplateCustomTextElements=Object.freeze(e),this.templateToNorthArrowInfo=i}async _getPrintTemplatesFromService(t){return Ve(this.effectivePrintServiceUrl,{...t,query:{f:"json"},timeout:this.printTimeout}).then(e=>{const i=e==null?void 0:e.data,r=i==null?void 0:i.parameters;let n=null,s=null;return r.forEach(o=>{var p;let a=(p=o.choiceList)==null?void 0:p.slice(),l=-1;a!=null&&a.length&&o.defaultValue&&(l=a.indexOf(o.defaultValue)),l>-1&&(a.splice(l,1),a.unshift(o.defaultValue));const u=(h,m)=>{const y=m==="all"?h:h.filter(g=>m.includes(g));return y.length===0?h:y};if(o.name==="Format"){const h=u(a.map(IN),this.allowedFormats),m=IN(o.defaultValue);n={defaultValue:h.includes(m)?m:h[0],choiceList:h}}else if(o.name==="Layout_Template"){a=a.filter(v=>v.toLowerCase()!=="map_only");let h,m=-1;a.some((v,w)=>{const b=v.toLowerCase();return b.includes("letter")&&b.includes("landscape")?(m=w,!0):!(!b.includes("a4")||!b.includes("landscape"))&&(m=w,!1)}),m>0&&(h=a[m],a.splice(m,1),a.unshift(h));const y=u(a.map(b2),this.allowedLayouts),g=b2(o.defaultValue);s={defaultValue:y.includes(g)?g:y[0],choiceList:y}}}),this.error=null,{format:n,layout:s}}).catch(e=>{throw new j("print:unavailable-service-info","Can't fetch templates info from service",{error:e})})}};c([d()],bi.prototype,"_serviceTemplateCustomTextElements",void 0),c([d()],bi.prototype,"allowedFormats",void 0),c([d()],bi.prototype,"allowedLayouts",void 0),c([d({type:Fse})],bi.prototype,"defaultTemplates",void 0),c([d()],bi.prototype,"extraParameters",void 0),c([d()],bi.prototype,"includeDefaultTemplates",void 0),c([d({readOnly:!0})],bi.prototype,"effectivePrintServiceUrl",null),c([d()],bi.prototype,"effectiveTemplateCustomTextElements",null),c([d()],bi.prototype,"error",void 0),c([d({type:gi})],bi.prototype,"portal",void 0),c([d()],bi.prototype,"printServiceUrl",void 0),c([d()],bi.prototype,"printTimeout",void 0),c([d({readOnly:!0})],bi.prototype,"state",null),c([d({readOnly:!0})],bi.prototype,"templatesInfo",void 0),c([d()],bi.prototype,"updateDelay",void 0),c([d()],bi.prototype,"view",void 0),c([d()],bi.prototype,"templateCustomTextElements",void 0),c([d()],bi.prototype,"templateToNorthArrowInfo",void 0),bi=c([k("esri.widgets.Print.PrintViewModel")],bi);const jse=bi;let Mi=class extends de{constructor(t){super(t),this.attributionEnabled=!0,this.author=null,this.copyright=null,this.customTextElements=null,this.dpi=96,this.fileName=null,this.forceFeatureAttributes=!1,this.format="pdf",this.height=null,this.includeTables=!0,this.layout="letter-ansi-a-landscape",this.legendEnabled=!0,this.northArrowEnabled=!1,this.scale=null,this.scaleEnabled=!1,this.title=null,this.width=null}};c([d()],Mi.prototype,"attributionEnabled",void 0),c([d()],Mi.prototype,"author",void 0),c([d()],Mi.prototype,"copyright",void 0),c([d()],Mi.prototype,"customTextElements",void 0),c([d()],Mi.prototype,"dpi",void 0),c([d()],Mi.prototype,"fileName",void 0),c([d()],Mi.prototype,"forceFeatureAttributes",void 0),c([d()],Mi.prototype,"format",void 0),c([d()],Mi.prototype,"height",void 0),c([d()],Mi.prototype,"includeTables",void 0),c([d()],Mi.prototype,"layout",void 0),c([d()],Mi.prototype,"legendEnabled",void 0),c([d()],Mi.prototype,"northArrowEnabled",void 0),c([d()],Mi.prototype,"scale",void 0),c([d()],Mi.prototype,"scaleEnabled",void 0),c([d()],Mi.prototype,"title",void 0),c([d()],Mi.prototype,"width",void 0),Mi=c([k("esri.widgets.Print.TemplateOptions")],Mi);const zse=Mi;var Vn="top",ho="bottom",fo="right",Un="left",U4="auto",A_=[Vn,ho,fo,Un],i0="start",A1="end",uVe="clippingParents",Vse="viewport",wv="popper",dVe="reference",v7=A_.reduce(function(t,e){return t.concat([e+"-"+i0,e+"-"+A1])},[]),Use=[].concat(A_,[U4]).reduce(function(t,e){return t.concat([e,e+"-"+i0,e+"-"+A1])},[]),pVe="beforeRead",hVe="read",fVe="afterRead",mVe="beforeMain",yVe="main",gVe="afterMain",vVe="beforeWrite",bVe="write",wVe="afterWrite",_Ve=[pVe,hVe,fVe,mVe,yVe,gVe,vVe,bVe,wVe];function kl(t){return t?(t.nodeName||"").toLowerCase():null}function Is(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Rf(t){var e=Is(t).Element;return t instanceof e||t instanceof Element}function ao(t){var e=Is(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function B4(t){if(typeof ShadowRoot>"u")return!1;var e=Is(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function SVe(t){var e=t.state;Object.keys(e.elements).forEach(function(i){var r=e.styles[i]||{},n=e.attributes[i]||{},s=e.elements[i];!ao(s)||!kl(s)||(Object.assign(s.style,r),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function $Ve(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(r){var n=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:i[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!ao(n)||!kl(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}const xVe={name:"applyStyles",enabled:!0,phase:"write",fn:SVe,effect:$Ve,requires:["computeStyles"]};function gl(t){return t.split("-")[0]}var cf=Math.max,JT=Math.min,r0=Math.round;function MN(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Bse(){return!/^((?!chrome|android).)*safari/i.test(MN())}function n0(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var r=t.getBoundingClientRect(),n=1,s=1;e&&ao(t)&&(n=t.offsetWidth>0&&r0(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&r0(r.height)/t.offsetHeight||1);var o=Rf(t)?Is(t):window,a=o.visualViewport,l=!Bse()&&i,u=(r.left+(l&&a?a.offsetLeft:0))/n,p=(r.top+(l&&a?a.offsetTop:0))/s,h=r.width/n,m=r.height/s;return{width:h,height:m,top:p,right:u+h,bottom:p+m,left:u,x:u,y:p}}function G4(t){var e=n0(t),i=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:r}}function Gse(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&B4(i)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function qc(t){return Is(t).getComputedStyle(t)}function EVe(t){return["table","td","th"].indexOf(kl(t))>=0}function yp(t){return((Rf(t)?t.ownerDocument:t.document)||window.document).documentElement}function RI(t){return kl(t)==="html"?t:t.assignedSlot||t.parentNode||(B4(t)?t.host:null)||yp(t)}function b7(t){return!ao(t)||qc(t).position==="fixed"?null:t.offsetParent}function TVe(t){var e=/firefox/i.test(MN()),i=/Trident/i.test(MN());if(i&&ao(t)){var r=qc(t);if(r.position==="fixed")return null}var n=RI(t);for(B4(n)&&(n=n.host);ao(n)&&["html","body"].indexOf(kl(n))<0;){var s=qc(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function P_(t){for(var e=Is(t),i=b7(t);i&&EVe(i)&&qc(i).position==="static";)i=b7(i);return i&&(kl(i)==="html"||kl(i)==="body"&&qc(i).position==="static")?e:i||TVe(t)||e}function H4(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function kw(t,e,i){return cf(t,JT(e,i))}function kVe(t,e,i){var r=kw(t,e,i);return r>i?i:r}function Hse(){return{top:0,right:0,bottom:0,left:0}}function qse(t){return Object.assign({},Hse(),t)}function Wse(t,e){return e.reduce(function(i,r){return i[r]=t,i},{})}var IVe=function(e,i){return e=typeof e=="function"?e(Object.assign({},i.rects,{placement:i.placement})):e,qse(typeof e!="number"?e:Wse(e,A_))};function CVe(t){var e,i=t.state,r=t.name,n=t.options,s=i.elements.arrow,o=i.modifiersData.popperOffsets,a=gl(i.placement),l=H4(a),u=[Un,fo].indexOf(a)>=0,p=u?"height":"width";if(!(!s||!o)){var h=IVe(n.padding,i),m=G4(s),y=l==="y"?Vn:Un,g=l==="y"?ho:fo,v=i.rects.reference[p]+i.rects.reference[l]-o[l]-i.rects.popper[p],w=o[l]-i.rects.reference[l],b=P_(s),_=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,S=v/2-w/2,$=h[y],T=_-m[p]-h[g],I=_/2-m[p]/2+S,C=kw($,I,T),M=l;i.modifiersData[r]=(e={},e[M]=C,e.centerOffset=C-I,e)}}function MVe(t){var e=t.state,i=t.options,r=i.element,n=r===void 0?"[data-popper-arrow]":r;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||Gse(e.elements.popper,n)&&(e.elements.arrow=n))}const LVe={name:"arrow",enabled:!0,phase:"main",fn:CVe,effect:MVe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function s0(t){return t.split("-")[1]}var OVe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function AVe(t,e){var i=t.x,r=t.y,n=e.devicePixelRatio||1;return{x:r0(i*n)/n||0,y:r0(r*n)/n||0}}function w7(t){var e,i=t.popper,r=t.popperRect,n=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,p=t.roundOffsets,h=t.isFixed,m=o.x,y=m===void 0?0:m,g=o.y,v=g===void 0?0:g,w=typeof p=="function"?p({x:y,y:v}):{x:y,y:v};y=w.x,v=w.y;var b=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),S=Un,$=Vn,T=window;if(u){var I=P_(i),C="clientHeight",M="clientWidth";if(I===Is(i)&&(I=yp(i),qc(I).position!=="static"&&a==="absolute"&&(C="scrollHeight",M="scrollWidth")),I=I,n===Vn||(n===Un||n===fo)&&s===A1){$=ho;var R=h&&I===T&&T.visualViewport?T.visualViewport.height:I[C];v-=R-r.height,v*=l?1:-1}if(n===Un||(n===Vn||n===ho)&&s===A1){S=fo;var O=h&&I===T&&T.visualViewport?T.visualViewport.width:I[M];y-=O-r.width,y*=l?1:-1}}var F=Object.assign({position:a},u&&OVe),A=p===!0?AVe({x:y,y:v},Is(i)):{x:y,y:v};if(y=A.x,v=A.y,l){var P;return Object.assign({},F,(P={},P[$]=_?"0":"",P[S]=b?"0":"",P.transform=(T.devicePixelRatio||1)<=1?"translate("+y+"px, "+v+"px)":"translate3d("+y+"px, "+v+"px, 0)",P))}return Object.assign({},F,(e={},e[$]=_?v+"px":"",e[S]=b?y+"px":"",e.transform="",e))}function PVe(t){var e=t.state,i=t.options,r=i.gpuAcceleration,n=r===void 0?!0:r,s=i.adaptive,o=s===void 0?!0:s,a=i.roundOffsets,l=a===void 0?!0:a,u={placement:gl(e.placement),variation:s0(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,w7(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,w7(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const RVe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:PVe,data:{}};var O$={passive:!0};function NVe(t){var e=t.state,i=t.instance,r=t.options,n=r.scroll,s=n===void 0?!0:n,o=r.resize,a=o===void 0?!0:o,l=Is(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(p){p.addEventListener("scroll",i.update,O$)}),a&&l.addEventListener("resize",i.update,O$),function(){s&&u.forEach(function(p){p.removeEventListener("scroll",i.update,O$)}),a&&l.removeEventListener("resize",i.update,O$)}}const DVe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:NVe,data:{}};var FVe={left:"right",right:"left",bottom:"top",top:"bottom"};function S2(t){return t.replace(/left|right|bottom|top/g,function(e){return FVe[e]})}var jVe={start:"end",end:"start"};function _7(t){return t.replace(/start|end/g,function(e){return jVe[e]})}function q4(t){var e=Is(t),i=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:i,scrollTop:r}}function W4(t){return n0(yp(t)).left+q4(t).scrollLeft}function zVe(t,e){var i=Is(t),r=yp(t),n=i.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;var u=Bse();(u||!u&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:s,height:o,x:a+W4(t),y:l}}function VVe(t){var e,i=yp(t),r=q4(t),n=(e=t.ownerDocument)==null?void 0:e.body,s=cf(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=cf(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-r.scrollLeft+W4(t),l=-r.scrollTop;return qc(n||i).direction==="rtl"&&(a+=cf(i.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function J4(t){var e=qc(t),i=e.overflow,r=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+r)}function Jse(t){return["html","body","#document"].indexOf(kl(t))>=0?t.ownerDocument.body:ao(t)&&J4(t)?t:Jse(RI(t))}function Iw(t,e){var i;e===void 0&&(e=[]);var r=Jse(t),n=r===((i=t.ownerDocument)==null?void 0:i.body),s=Is(r),o=n?[s].concat(s.visualViewport||[],J4(r)?r:[]):r,a=e.concat(o);return n?a:a.concat(Iw(RI(o)))}function LN(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function UVe(t,e){var i=n0(t,!1,e==="fixed");return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}function S7(t,e,i){return e===Vse?LN(zVe(t,i)):Rf(e)?UVe(e,i):LN(VVe(yp(t)))}function BVe(t){var e=Iw(RI(t)),i=["absolute","fixed"].indexOf(qc(t).position)>=0,r=i&&ao(t)?P_(t):t;return Rf(r)?e.filter(function(n){return Rf(n)&&Gse(n,r)&&kl(n)!=="body"}):[]}function GVe(t,e,i,r){var n=e==="clippingParents"?BVe(t):[].concat(e),s=[].concat(n,[i]),o=s[0],a=s.reduce(function(l,u){var p=S7(t,u,r);return l.top=cf(p.top,l.top),l.right=JT(p.right,l.right),l.bottom=JT(p.bottom,l.bottom),l.left=cf(p.left,l.left),l},S7(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Zse(t){var e=t.reference,i=t.element,r=t.placement,n=r?gl(r):null,s=r?s0(r):null,o=e.x+e.width/2-i.width/2,a=e.y+e.height/2-i.height/2,l;switch(n){case Vn:l={x:o,y:e.y-i.height};break;case ho:l={x:o,y:e.y+e.height};break;case fo:l={x:e.x+e.width,y:a};break;case Un:l={x:e.x-i.width,y:a};break;default:l={x:e.x,y:e.y}}var u=n?H4(n):null;if(u!=null){var p=u==="y"?"height":"width";switch(s){case i0:l[u]=l[u]-(e[p]/2-i[p]/2);break;case A1:l[u]=l[u]+(e[p]/2-i[p]/2);break}}return l}function P1(t,e){e===void 0&&(e={});var i=e,r=i.placement,n=r===void 0?t.placement:r,s=i.strategy,o=s===void 0?t.strategy:s,a=i.boundary,l=a===void 0?uVe:a,u=i.rootBoundary,p=u===void 0?Vse:u,h=i.elementContext,m=h===void 0?wv:h,y=i.altBoundary,g=y===void 0?!1:y,v=i.padding,w=v===void 0?0:v,b=qse(typeof w!="number"?w:Wse(w,A_)),_=m===wv?dVe:wv,S=t.rects.popper,$=t.elements[g?_:m],T=GVe(Rf($)?$:$.contextElement||yp(t.elements.popper),l,p,o),I=n0(t.elements.reference),C=Zse({reference:I,element:S,strategy:"absolute",placement:n}),M=LN(Object.assign({},S,C)),R=m===wv?M:I,O={top:T.top-R.top+b.top,bottom:R.bottom-T.bottom+b.bottom,left:T.left-R.left+b.left,right:R.right-T.right+b.right},F=t.modifiersData.offset;if(m===wv&&F){var A=F[n];Object.keys(O).forEach(function(P){var V=[fo,ho].indexOf(P)>=0?1:-1,te=[Vn,ho].indexOf(P)>=0?"y":"x";O[P]+=A[te]*V})}return O}function HVe(t,e){e===void 0&&(e={});var i=e,r=i.placement,n=i.boundary,s=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,u=l===void 0?Use:l,p=s0(r),h=p?a?v7:v7.filter(function(g){return s0(g)===p}):A_,m=h.filter(function(g){return u.indexOf(g)>=0});m.length===0&&(m=h);var y=m.reduce(function(g,v){return g[v]=P1(t,{placement:v,boundary:n,rootBoundary:s,padding:o})[gl(v)],g},{});return Object.keys(y).sort(function(g,v){return y[g]-y[v]})}function qVe(t){if(gl(t)===U4)return[];var e=S2(t);return[_7(t),e,_7(e)]}function WVe(t){var e=t.state,i=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var n=i.mainAxis,s=n===void 0?!0:n,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,u=i.padding,p=i.boundary,h=i.rootBoundary,m=i.altBoundary,y=i.flipVariations,g=y===void 0?!0:y,v=i.allowedAutoPlacements,w=e.options.placement,b=gl(w),_=b===w,S=l||(_||!g?[S2(w)]:qVe(w)),$=[w].concat(S).reduce(function($t,ii){return $t.concat(gl(ii)===U4?HVe(e,{placement:ii,boundary:p,rootBoundary:h,padding:u,flipVariations:g,allowedAutoPlacements:v}):ii)},[]),T=e.rects.reference,I=e.rects.popper,C=new Map,M=!0,R=$[0],O=0;O<$.length;O++){var F=$[O],A=gl(F),P=s0(F)===i0,V=[Vn,ho].indexOf(A)>=0,te=V?"width":"height",re=P1(e,{placement:F,boundary:p,rootBoundary:h,altBoundary:m,padding:u}),Q=V?P?fo:Un:P?ho:Vn;T[te]>I[te]&&(Q=S2(Q));var H=S2(Q),ne=[];if(s&&ne.push(re[A]<=0),a&&ne.push(re[Q]<=0,re[H]<=0),ne.every(function($t){return $t})){R=F,M=!1;break}C.set(F,ne)}if(M)for(var fe=g?3:1,Fe=function(ii){var Nt=$.find(function(Dt){var mr=C.get(Dt);if(mr)return mr.slice(0,ii).every(function(Tr){return Tr})});if(Nt)return R=Nt,"break"},Be=fe;Be>0;Be--){var yt=Fe(Be);if(yt==="break")break}e.placement!==R&&(e.modifiersData[r]._skip=!0,e.placement=R,e.reset=!0)}}const JVe={name:"flip",enabled:!0,phase:"main",fn:WVe,requiresIfExists:["offset"],data:{_skip:!1}};function $7(t,e,i){return i===void 0&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function x7(t){return[Vn,fo,ho,Un].some(function(e){return t[e]>=0})}function ZVe(t){var e=t.state,i=t.name,r=e.rects.reference,n=e.rects.popper,s=e.modifiersData.preventOverflow,o=P1(e,{elementContext:"reference"}),a=P1(e,{altBoundary:!0}),l=$7(o,r),u=$7(a,n,s),p=x7(l),h=x7(u);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:p,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":h})}const YVe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ZVe};function KVe(t,e,i){var r=gl(t),n=[Un,Vn].indexOf(r)>=0?-1:1,s=typeof i=="function"?i(Object.assign({},e,{placement:t})):i,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[Un,fo].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function QVe(t){var e=t.state,i=t.options,r=t.name,n=i.offset,s=n===void 0?[0,0]:n,o=Use.reduce(function(p,h){return p[h]=KVe(h,e.rects,s),p},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const XVe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:QVe};function e8e(t){var e=t.state,i=t.name;e.modifiersData[i]=Zse({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const t8e={name:"popperOffsets",enabled:!0,phase:"read",fn:e8e,data:{}};function i8e(t){return t==="x"?"y":"x"}function r8e(t){var e=t.state,i=t.options,r=t.name,n=i.mainAxis,s=n===void 0?!0:n,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,u=i.rootBoundary,p=i.altBoundary,h=i.padding,m=i.tether,y=m===void 0?!0:m,g=i.tetherOffset,v=g===void 0?0:g,w=P1(e,{boundary:l,rootBoundary:u,padding:h,altBoundary:p}),b=gl(e.placement),_=s0(e.placement),S=!_,$=H4(b),T=i8e($),I=e.modifiersData.popperOffsets,C=e.rects.reference,M=e.rects.popper,R=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,O=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),F=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(I){if(s){var P,V=$==="y"?Vn:Un,te=$==="y"?ho:fo,re=$==="y"?"height":"width",Q=I[$],H=Q+w[V],ne=Q-w[te],fe=y?-M[re]/2:0,Fe=_===i0?C[re]:M[re],Be=_===i0?-M[re]:-C[re],yt=e.elements.arrow,$t=y&&yt?G4(yt):{width:0,height:0},ii=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Hse(),Nt=ii[V],Dt=ii[te],mr=kw(0,C[re],$t[re]),Tr=S?C[re]/2-fe-mr-Nt-O.mainAxis:Fe-mr-Nt-O.mainAxis,NI=S?-C[re]/2+fe+mr+Dt+O.mainAxis:Be+mr+Dt+O.mainAxis,N0=e.elements.arrow&&P_(e.elements.arrow),DI=N0?$==="y"?N0.clientTop||0:N0.clientLeft||0:0,R_=(P=F==null?void 0:F[$])!=null?P:0,FI=Q+Tr-R_-DI,jI=Q+NI-R_,N_=kw(y?JT(H,FI):H,Q,y?cf(ne,jI):ne);I[$]=N_,A[$]=N_-Q}if(a){var D_,zI=$==="x"?Vn:Un,VI=$==="x"?ho:fo,Ll=I[T],tm=T==="y"?"height":"width",F_=Ll+w[zI],j_=Ll-w[VI],D0=[Vn,Un].indexOf(b)!==-1,F0=(D_=F==null?void 0:F[T])!=null?D_:0,j0=D0?F_:Ll-C[tm]-M[tm]-F0+O.altAxis,go=D0?Ll+C[tm]+M[tm]-F0-O.altAxis:j_,z_=y&&D0?kVe(j0,Ll,go):kw(y?j0:F_,Ll,y?go:j_);I[T]=z_,A[T]=z_-Ll}e.modifiersData[r]=A}}const n8e={name:"preventOverflow",enabled:!0,phase:"main",fn:r8e,requiresIfExists:["offset"]};function s8e(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function o8e(t){return t===Is(t)||!ao(t)?q4(t):s8e(t)}function a8e(t){var e=t.getBoundingClientRect(),i=r0(e.width)/t.offsetWidth||1,r=r0(e.height)/t.offsetHeight||1;return i!==1||r!==1}function l8e(t,e,i){i===void 0&&(i=!1);var r=ao(e),n=ao(e)&&a8e(e),s=yp(e),o=n0(t,n,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((kl(e)!=="body"||J4(s))&&(a=o8e(e)),ao(e)?(l=n0(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=W4(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function c8e(t){var e=new Map,i=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function n(s){i.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=e.get(a);l&&n(l)}}),r.push(s)}return t.forEach(function(s){i.has(s.name)||n(s)}),r}function u8e(t){var e=c8e(t);return _Ve.reduce(function(i,r){return i.concat(e.filter(function(n){return n.phase===r}))},[])}function d8e(t){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(t())})})),e}}function p8e(t){var e=t.reduce(function(i,r){var n=i[r.name];return i[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,i},{});return Object.keys(e).map(function(i){return e[i]})}var E7={placement:"bottom",modifiers:[],strategy:"absolute"};function T7(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function h8e(t){t===void 0&&(t={});var e=t,i=e.defaultModifiers,r=i===void 0?[]:i,n=e.defaultOptions,s=n===void 0?E7:n;return function(a,l,u){u===void 0&&(u=s);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},E7,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],m=!1,y={state:p,setOptions:function(b){var _=typeof b=="function"?b(p.options):b;v(),p.options=Object.assign({},s,p.options,_),p.scrollParents={reference:Rf(a)?Iw(a):a.contextElement?Iw(a.contextElement):[],popper:Iw(l)};var S=u8e(p8e([].concat(r,p.options.modifiers)));return p.orderedModifiers=S.filter(function($){return $.enabled}),g(),y.update()},forceUpdate:function(){if(!m){var b=p.elements,_=b.reference,S=b.popper;if(T7(_,S)){p.rects={reference:l8e(_,P_(S),p.options.strategy==="fixed"),popper:G4(S)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(O){return p.modifiersData[O.name]=Object.assign({},O.data)});for(var $=0;$<p.orderedModifiers.length;$++){if(p.reset===!0){p.reset=!1,$=-1;continue}var T=p.orderedModifiers[$],I=T.fn,C=T.options,M=C===void 0?{}:C,R=T.name;typeof I=="function"&&(p=I({state:p,options:M,name:R,instance:y})||p)}}}},update:d8e(function(){return new Promise(function(w){y.forceUpdate(),w(p)})}),destroy:function(){v(),m=!0}};if(!T7(a,l))return y;y.setOptions(u).then(function(w){!m&&u.onFirstUpdate&&u.onFirstUpdate(w)});function g(){p.orderedModifiers.forEach(function(w){var b=w.name,_=w.options,S=_===void 0?{}:_,$=w.effect;if(typeof $=="function"){var T=$({state:p,name:b,instance:y,options:S}),I=function(){};h.push(T||I)}})}function v(){h.forEach(function(w){return w()}),h=[]}return y}}var f8e=[DVe,t8e,RVe,xVe,XVe,JVe,n8e,LVe,YVe],m8e=h8e({defaultModifiers:f8e});const y8e=new Set(["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"]),k7="esri-popover",I7={base:k7,open:`${k7}--open`},g8e={position:"fixed","z-index":"1000"};let Qa=class extends yn{constructor(t,e){super(t,e),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=i=>{this._rootNode=i},this._afterContentCreate=i=>{this._contentNode=i},this._updatePosition=()=>{this._popper!=null&&this._popper.update()}}initialize(){this.when(()=>{this.destroyed||(this._projector.append(document.body,this.render),this._renderAttached=!0)}),this.addHandles([Y(()=>[this.open,this.anchorElement],()=>this._buildPopper(),Le),Y(()=>[this.placement,this.offset],()=>this._setPopperOptions(),Le)])}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),this._rootNode!=null&&(_Le(this._rootNode),this._rootNode=null),this._contentNode=null,this._popper!=null&&(this._popper.destroy(),this._popper=null)}set container(t){}set owner(t){this._set("owner",t)}get placement(){return"top"}set placement(t){y8e.has(t)?this._override("placement",t):this._clearOverride("placement")}get test(){return{rootNode:this._rootNode}}render(){var r;const{open:t,owner:e,renderContentFunction:i}=this;return x("div",{afterCreate:this._afterRootCreate,class:this.classes(I7.base,t?I7.open:null),lang:Fn(),styles:g8e},x("div",{afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition,dir:vOe((r=this.owner)==null?void 0:r.container)},t?i==null?void 0:i.call(e):null))}_buildPopper(){this._popper!=null&&(this._popper.destroy(),this._popper=null);const t=this._contentNode;if(t==null||!this.open||!this.renderContentFunction)return;const e=this._getAnchor();e&&(this._popper=m8e(e,t),this._setPopperOptions())}_setPopperOptions(){const{placement:t,offset:e,_popper:i}=this;i!=null&&(i.setOptions({placement:t,modifiers:[{name:"offset",options:{offset:e}}]}),i.forceUpdate())}_getAnchor(){const{anchorElement:t}=this;return bI(typeof t=="function"?t():t)}};c([d()],Qa.prototype,"anchorElement",void 0),c([d()],Qa.prototype,"container",null),c([d()],Qa.prototype,"offset",void 0),c([d()],Qa.prototype,"open",void 0),c([d()],Qa.prototype,"owner",null),c([d()],Qa.prototype,"placement",null),c([d()],Qa.prototype,"renderContentFunction",void 0),Qa=c([k("esri.widgets.support.Popover")],Qa);const v8e=Qa,Yse=ce.ofType(Mse),Kse="MAP_ONLY";var il;(function(t){t.layout="layoutTab",t.mapOnly="mapOnlyTab"})(il||(il={}));const We="esri-print",km=`${We}__advanced-options-button`,ue={base:We,widgetIcon:Re.printer,headerTitle:`${We}__header-title`,inputText:`${We}__input-text`,layoutTabList:`${We}__layout-tab-list`,layoutTab:`${We}__layout-tab`,layoutSection:`${We}__layout-section`,mapOnlySection:`${We}__map-only-section`,scaleInput:`${We}__scale-input`,templateList:`${We}__template-list`,templateListScroller:`${We}__template-list-scroller`,templateListFooter:`${We}__template-list-footer`,loader:`${We}__loader`,advancedOptionsButton:km,advancedOptionsButtonContainer:`${km}-container`,advancedOptionsButtonTitle:`${km}-title`,advancedOptionsButtonIconOpened:`${km}-icon--opened`,advancedOptionsButtonIconClosed:`${km}-icon--closed`,advancedOptionsButtonIconClosed_RTL:`${km}-icon--closed-rtl`,refreshButton:`${We}__refresh-button`,swapButton:`${We}__swap-button`,linkButton:`${We}__link-button`,printButton:`${We}__export-button`,templateButton:`${We}__template-button`,formSectionContainer:`${We}__form-section-container`,advancedOptionsSection:`${We}__advanced-options-section`,advancedOptionsContainer:`${We}__advanced-options-container`,authorInfoContainer:`${We}__author-info-container`,copyrightInfoContainer:`${We}__copyright-info-container`,exportedFilesContainer:`${We}__export-panel-container`,exportedFilesTitle:`${We}__export-title`,exportedFile:`${We}__exported-file`,exportedFileLink:`${We}__exported-file-link`,exportedFileLinkTitle:`${We}__exported-file-link-title`,heightContainer:`${We}__height-container`,legendInfoContainer:`${We}__legend-info-container`,printWidgetContainer:`${We}__container`,panelContainer:`${We}__panel-container`,scaleInfoContainer:`${We}__scale-info-container`,scaleInputContainer:`${We}__scale-input-container`,sizeContainer:`${We}__size-container`,widthContainer:`${We}__width-container`,panelError:`${We}__panel--error`,exportedFileError:`${We}__exported-file--error`},C7="User sets an invalid layout, resetting it to the default valid one...",M7="User sets an invalid format, resetting it to the default valid one...";function b8e(t){return{width:Math.round(t*8.3333),height:Math.round(t*11.4583)}}function w8e(t){return!isNaN(t)&&t>0}function A$(t){return(t==null?void 0:t.toUpperCase())===Kse}let wi=class extends yn{constructor(t,e){super(t,e),this._activeTabFocusRequested=!1,this._advancedOptionsVisibleForLayout=!1,this._advancedOptionsVisibleForMapOnly=!1,this._awaitingServerResponse=!1,this._exportedFileNameMap={},this._focusedTemplateIndex=0,this._layoutTabSelected=!0,this._pendingExportScroll=!1,this._rootNode=null,this._selectTemplateNode=null,this._templateListPopover=new v8e({owner:this,placement:"top",offset:[0,-100],anchorElement:()=>this._selectTemplateNode,renderContentFunction:this._renderTemplateList}),this.exportedLinks=new Yse,this.headingLevel=3,this.iconClass=ue.widgetIcon,this.icon=null,this.templateOptions=new zse,this.viewModel=new jse,this._handleTemplateListCreation=i=>i.focus(),this._handleTemplateChildBlur=i=>{var n;((n=i.relatedTarget)==null?void 0:n.closest(`.${ue.templateList}`))||this._handleCloseTemplateSelection()},this._handleCloseTemplateSelection=()=>{var i;this._focusedTemplateIndex=0,this._templateListPopover.open=!1,(i=this._selectTemplateNode)==null||i.focus()},this._handleSelectTemplateClick=()=>{this._focusedTemplateIndex=0,this._templateListPopover.open=!0},this._handleTemplateListClick=i=>{const r=_8e(i.target);r&&this._applyTemplate(r)},this._handleTemplateListKeyDown=i=>{if(this._focusedTemplateIndex){if(_1(i.key))return this._applyTemplate(this.viewModel.defaultTemplates.at(this._focusedTemplateIndex)),void i.preventDefault();if(i.key==="ArrowDown"||i.key==="ArrowUp"){const{defaultTemplates:r}=this.viewModel,n=i.key==="ArrowDown"?1:-1,s=(this._focusedTemplateIndex+n)%r.length;this._focusedTemplateIndex=s<0?r.length-1:s;const o=i.currentTarget;$Oe(o.querySelectorAll(`.${oe.menuItem}`)[this._focusedTemplateIndex],o.parentElement),i.preventDefault()}i.key==="Escape"&&this._handleCloseTemplateSelection()}},this._removeLink=i=>{const r=i.currentTarget["data-item"];r&&r.state==="error"&&this.exportedLinks.remove(r)},this._handleLinkClick=i=>{const r=i.currentTarget,{href:n}=r,s=pT(this.viewModel.effectivePrintServiceUrl);if(!s)return;if(!i.isTrusted)return void i.stopPropagation();i.preventDefault();const o=new URL(n);o.searchParams.set("token",s),r.href=o.href,r.click(),r.href=n},this._focusOnTabChange=this._focusOnTabChange.bind(this)}initialize(){this.addHandles([Y(()=>{var r;return(r=this.viewModel)==null?void 0:r.templatesInfo},r=>{const{format:n,layout:s}=this.templateOptions;if(r){const o=s===r.layout.defaultValue||A$(s)||r.layout.choiceList&&s&&r.layout.choiceList.includes(s),a=n===r.format.defaultValue||r.format.choiceList&&n&&r.format.choiceList.includes(n);o||(s&&q.getLogger(this).warn(C7),this.templateOptions.layout=r.layout.defaultValue),a||(n&&q.getLogger(this).warn(M7),this.templateOptions.format=r.format.defaultValue),A$(s)&&(this._layoutTabSelected=!1)}},Le),Y(()=>{var r;return(r=this.templateOptions)==null?void 0:r.format},r=>{const{viewModel:{templatesInfo:n}}=this;if(n&&r){let s=!1;n.format.choiceList&&n.format.choiceList.forEach(o=>{o.toUpperCase()===r.toUpperCase()&&(this.templateOptions.format=o,s=!0)}),s||(this.templateOptions.format=n.format.defaultValue,q.getLogger(this).warn(M7)),this.scheduleRender()}},Le),Y(()=>{var r;return(r=this.templateOptions)==null?void 0:r.layout},r=>{const{viewModel:{templatesInfo:n}}=this;if(n&&r){this._layoutTabSelected=!A$(r);let s=!this._layoutTabSelected;s||n.layout.choiceList&&n.layout.choiceList.forEach(a=>{a.toUpperCase()===r.toUpperCase()&&(this.templateOptions.layout=a,s=!0)}),s||(this.templateOptions.layout=n.layout.defaultValue,q.getLogger(this).warn(C7));const o=this.viewModel.effectiveTemplateCustomTextElements[this.templateOptions.layout];this.templateOptions.customTextElements=o?D(o):null,this.scheduleRender()}},Le),Y(()=>{var r;return(r=this.templateOptions)==null?void 0:r.dpi},r=>{r<=0?this.templateOptions.dpi=1:this.scheduleRender()},Le),Y(()=>{var r,n;return(n=(r=this.viewModel)==null?void 0:r.view)==null?void 0:n.scale},r=>{const{scale:n,scaleEnabled:s}=this.templateOptions;s&&n||(this.templateOptions.scale=r)},Le)]);const{height:t,width:e}=this.templateOptions;this.templateOptions.width=e||800,this.templateOptions.height=t||1100;const i=setTimeout(()=>{this._awaitingServerResponse=!0,this.scheduleRender()},500);this.viewModel.load().then(()=>clearTimeout(i))}get allowedFormats(){return this.viewModel.allowedFormats}set allowedFormats(t){this.viewModel.allowedFormats=t}get allowedLayouts(){return this.viewModel.allowedLayouts}set allowedLayouts(t){this.viewModel.allowedLayouts=t}get error(){return this.viewModel.error}get extraParameters(){return this.viewModel.extraParameters}set extraParameters(t){this.viewModel.extraParameters=t}get includeDefaultTemplates(){return this.viewModel.includeDefaultTemplates}set includeDefaultTemplates(t){this.viewModel.includeDefaultTemplates=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get portal(){return this.viewModel.portal}set portal(t){this.viewModel.portal=t}get printServiceUrl(){return this.viewModel.printServiceUrl}set printServiceUrl(t){this.viewModel.printServiceUrl=t}get templateCustomTextElements(){return this.viewModel.templateCustomTextElements}set templateCustomTextElements(t){this.viewModel.templateCustomTextElements=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var Fe,Be,yt,$t,ii,Nt,Dt,mr;const{attributionEnabled:t,author:e,copyright:i,dpi:r,format:n,height:s,layout:o,legendEnabled:a,northArrowEnabled:l,scaleEnabled:u,scale:p,width:h}=this.templateOptions,m=((Fe=this.viewModel)==null?void 0:Fe.state)!=="ready",y=this._renderTitleOrFileNameSection(),{includeDefaultTemplates:g,messages:v,viewModel:w}=this,b=(($t=(yt=(Be=this.viewModel)==null?void 0:Be.templatesInfo)==null?void 0:yt.format)==null?void 0:$t.choiceList)||[],_=b.length>0?b.map(Tr=>x("option",{key:Tr,selected:Tr===n,value:Tr},Tr.toUpperCase())):x("option",{key:"format-default-option"},v.formatDefaultOption),S=x("div",{class:ue.formSectionContainer},x("label",null,v.fileFormatTitle,x("select",{bind:this,class:oe.select,"data-target-property":"format",onchange:this._updateFromOption},_))),$=(Dt=(Nt=(ii=this.viewModel)==null?void 0:ii.templatesInfo)==null?void 0:Nt.layout)==null?void 0:Dt.choiceList,T=$!=null&&$.length?$.map(Tr=>x("option",{key:Tr,selected:Tr===o,value:Tr},v[Tr]||Tr)):x("option",{key:"layout-default-option"},v.layoutDefaultOption),I=x("div",{class:ue.formSectionContainer},x("label",null,v.layoutTitle,x("select",{bind:this,class:oe.select,"data-target-property":"layout",onchange:this._updateFromOption},T))),C=x("div",{class:ue.formSectionContainer},x("label",null,v.dpi,x("input",{bind:this,class:this.classes(ue.inputText,oe.input),"data-input-name":"dpi",min:"1",onchange:this._handleDPIChange,tabIndex:0,type:"number",value:`${r}`}))),M=x("div",{class:this.classes(ue.scaleInfoContainer,ue.formSectionContainer)},x("label",null,x("input",{bind:this,checked:u,"data-option-name":"scaleEnabled",onchange:this._toggleInputValue,tabIndex:0,type:"checkbox"}),v.scale),x("div",{class:ue.scaleInputContainer},x("input",{"aria-label":v.scaleLabel,"aria-valuenow":`${p}`,bind:this,class:this.classes(ue.inputText,oe.input,ue.scaleInput),"data-input-name":"scale",disabled:!u,onchange:this._updateInputValue,role:"spinbutton",tabIndex:0,type:"number",value:`${p}`}),x("button",{"aria-label":v.reset,bind:this,class:this.classes(oe.widgetButton,ue.refreshButton,Re.refresh),onclick:this._resetToCurrentScale,tabIndex:0,type:"button"}))),R=this._advancedOptionsVisibleForLayout?x("div",{"aria-labelledby":`${this.id}__advancedOptionsForLayout`,class:ue.advancedOptionsContainer},M,x("div",{class:this.classes(ue.authorInfoContainer,ue.formSectionContainer)},x("label",null,v.author,x("input",{bind:this,class:this.classes(ue.inputText,oe.input),"data-input-name":"author",onchange:this._updateInputValue,tabIndex:0,type:"text",value:e??""}))),x("div",{class:this.classes(ue.copyrightInfoContainer,ue.formSectionContainer)},x("label",null,v.copyright,x("input",{bind:this,class:this.classes(ue.inputText,oe.input),"data-input-name":"copyright",onchange:this._updateInputValue,tabIndex:0,type:"text",value:i??""}))),C,x("div",{class:this.classes(ue.legendInfoContainer,ue.formSectionContainer)},x("label",null,x("input",{bind:this,checked:a,"data-option-name":"legendEnabled",onchange:this._toggleInputValue,tabIndex:0,type:"checkbox"}),v.legend)),this.viewModel.templateToNorthArrowInfo[o]?x("div",{class:this.classes(ue.legendInfoContainer,ue.formSectionContainer),key:"north-arrow"},x("label",null,x("input",{bind:this,checked:l,"data-option-name":"northArrowEnabled",onchange:this._toggleInputValue,tabIndex:0,type:"checkbox"}),v.northArrow)):null,this._renderCustomTextElementSection()):null,O=this._advancedOptionsVisibleForMapOnly?x("div",{"aria-labelledby":`${this.id}__advancedOptionsForMapOnly`,class:ue.advancedOptionsContainer},M,C,x("div",{class:ue.formSectionContainer},x("label",null,x("input",{bind:this,checked:t,"data-option-name":"attributionEnabled",onchange:this._toggleInputValue,tabIndex:0,type:"checkbox"}),v.attribution)),this._renderCustomTextElementSection()):null,F=this._layoutTabSelected?x("section",{"aria-labelledby":`${this.id}__layoutTab`,class:ue.layoutSection,id:`${this.id}__layoutContent`,key:"esri-print__layoutContent",role:"tabpanel"},x("div",{class:ue.panelContainer},y,I,this._layoutTabSelected?S:null),x("div",{class:this.classes(ue.panelContainer,ue.advancedOptionsSection)},x("button",{"aria-expanded":this._advancedOptionsVisibleForLayout?"true":"false","aria-label":v.advancedOptions,bind:this,class:ue.advancedOptionsButton,onclick:this._showAdvancedOptions,type:"button"},x("div",{class:ue.advancedOptionsButtonContainer},x("span",{"aria-hidden":"true",class:this.classes(Re.rightTriangleArrow,ue.advancedOptionsButtonIconClosed)}),x("span",{"aria-hidden":"true",class:this.classes(Re.leftTriangleArrow,ue.advancedOptionsButtonIconClosed_RTL)}),x("span",{"aria-hidden":"true",class:this.classes(Re.downArrow,ue.advancedOptionsButtonIconOpened)}),x("span",{class:ue.advancedOptionsButtonTitle},v.advancedOptions))),R)):x("section",{"aria-labelledby":`${this.id}__mapOnlyTab`,class:ue.mapOnlySection,id:`${this.id}__mapOnlyContent`,key:"esri-print__mapOnlyContent",role:"tabpanel"},x("div",{class:ue.panelContainer},y,this._layoutTabSelected?null:S,x("div",{class:this.classes(ue.sizeContainer,ue.formSectionContainer)},x("div",{class:ue.widthContainer},x("label",null,v.width,x("input",{bind:this,class:this.classes(ue.inputText,oe.input),"data-input-name":"width",onchange:this._updateInputValue,tabIndex:0,type:"number",value:`${h}`}))),x("div",{class:ue.heightContainer},x("label",null,v.height,x("input",{bind:this,class:this.classes(ue.inputText,oe.input),"data-input-name":"height",onchange:this._updateInputValue,tabIndex:0,type:"number",value:`${s}`}))),x("button",{"aria-label":v.swap,bind:this,class:this.classes(oe.widgetButton,ue.swapButton,Re.swap),onclick:this._switchInput,tabIndex:0,type:"button"})),x("div",{class:this.classes(ue.panelContainer,ue.advancedOptionsSection)},x("button",{"aria-expanded":this._advancedOptionsVisibleForMapOnly?"true":"false","aria-label":v.advancedOptions,bind:this,class:ue.advancedOptionsButton,onclick:this._showAdvancedOptions,type:"button"},x("div",{class:ue.advancedOptionsButtonContainer},x("span",{"aria-hidden":"true",class:this.classes(Re.rightTriangleArrow,ue.advancedOptionsButtonIconClosed)}),x("span",{"aria-hidden":"true",class:this.classes(Re.leftTriangleArrow,ue.advancedOptionsButtonIconClosed_RTL)}),x("span",{"aria-hidden":"true",class:this.classes(Re.downArrow,ue.advancedOptionsButtonIconOpened)}),x("span",{class:ue.advancedOptionsButtonTitle},v.advancedOptions))),O))),A=this.exportedLinks.toArray(),P=this._renderExportedLink(A),V={[oe.buttonDisabled]:m||!o&&!n},{view:te}=this,re=!te||te.type!=="2d",Q=x("div",{class:ue.panelError},re?v.sceneViewError:v.serviceError),H=x("div",null,x("ul",{bind:this,class:ue.layoutTabList,onclick:this._toggleLayoutPanel,onkeydown:this._handleLayoutPanelKeyDown,role:"tablist"},x("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,"aria-selected":`${this._layoutTabSelected}`,class:ue.layoutTab,"data-tab-id":il.layout,id:`${this.id}__layoutTab`,role:"tab",tabIndex:0},v.layoutTab),x("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,"aria-selected":`${!this._layoutTabSelected}`,class:ue.layoutTab,"data-tab-id":il.mapOnly,id:`${this.id}__mapOnlyTab`,role:"tab",tabIndex:0},v.mapOnlyTab)),F,x("button",{"aria-label":v.exportDescription,bind:this,class:this.classes(ue.printButton,oe.button,V),disabled:m,onclick:this._handlePrintMap,tabIndex:0,type:"button"},v.export),g&&w.defaultTemplates.length>0?this._renderTemplateSectionTrigger():null,x("div",{afterUpdate:this._scrollExportIntoView,bind:this,class:ue.exportedFilesContainer},x(Vd,{class:ue.exportedFilesTitle,level:this.headingLevel},v.exportText),A.length>0?null:x("div",null,x("div",null,v.exportHint)),P)),ne=x("div",{class:ue.printWidgetContainer},x("header",{class:ue.headerTitle},v.export),this.error||re||!this.view?Q:H),fe=((mr=this.viewModel)==null?void 0:mr.state)==="initializing"?this._renderLoader():ne;return x("div",{afterCreate:this._handleRootAfterCreate,bind:this,class:this.classes(ue.base,oe.widget,oe.panel)},fe)}_renderTemplateSectionTrigger(){const{messages:t,_templateListPopover:e}=this,i=e.open;return x("button",{afterCreate:r=>this._selectTemplateNode=r,"aria-controls":i?`${this.id}__template-selection`:"","aria-label":t.selectTemplateDescription,"aria-pressed":i.toString(),class:this.classes(oe.button,oe.buttonTertiary,ue.templateButton),onclick:this._handleSelectTemplateClick,title:t.selectTemplateDescription,type:"button"},t.selectTemplate)}_renderCustomTextElementSection(){const{templateOptions:{customTextElements:t}}=this;return t?x("div",{class:ue.formSectionContainer,key:"custom-text-elements"},t.map(e=>{const[i,r]=Object.entries(e)[0];return i==="date"?null:x("label",{key:i},i,x("input",{bind:this,class:this.classes(ue.inputText,oe.input),"data-input-custom":!0,"data-input-name":i,onchange:this._updateInputValue,type:"text",value:r}))})):null}_renderTemplateList(){const{messages:t,messagesCommon:e,viewModel:i}=this,{defaultTemplates:r}=i,n=t.selectTemplateDescription,s=`${this.id}__template-selection`;return x("div",{class:this.classes(ue.templateList,oe.widget,oe.panel),id:s},x(Vd,{class:oe.menuHeader,level:this.headingLevel},t.selectTemplate),x("div",{class:ue.templateListScroller},x("ul",{afterCreate:this._handleTemplateListCreation,"aria-activedescendant":`${this.id}__template-item--${this._focusedTemplateIndex}`,"aria-label":n,class:oe.menuList,key:"templates",onblur:this._handleTemplateChildBlur,onclick:this._handleTemplateListClick,onkeydown:this._handleTemplateListKeyDown,role:"listbox",tabIndex:0,title:n},r.toArray().map((o,a)=>{const l=a===this._focusedTemplateIndex,u=o.description??"",p=o.label??"";return x("li",{"aria-label":u,class:this.classes(oe.menuItem,{[oe.menuItemFocus]:l}),"data-template":o,id:`${this.id}__template-item--${a}`,key:p,title:u},A$(p)?t.mapOnlyTab:p)}))),x("div",{class:ue.templateListFooter},x("button",{class:this.classes(oe.button,oe.buttonSecondary),onblur:this._handleTemplateChildBlur,onclick:this._handleCloseTemplateSelection,type:"button"},e.done)))}_applyTemplate(t){const{format:e,layout:i,layoutOptions:r}=t,{templateOptions:n}=this;this._templateListPopover.open=!1,this._toggleTab(i==="map-only"?il.mapOnly:il.layout,!1),e&&(n.format=e),i&&(n.layout=i),this._focusedTemplateIndex=null,n.legendEnabled=(r==null?void 0:r.legend)??n.legendEnabled,this._handleCloseTemplateSelection()}_renderTitleOrFileNameSection(){const{templateOptions:t,messages:e}=this;let i,r,n,s;return this._layoutTabSelected?(i=e.title,r=e.titlePlaceHolder,n=t.title,s="title"):(i=e.fileName,r=e.fileNamePlaceHolder,n=t.fileName,s="fileName"),x("div",{class:ue.formSectionContainer,key:s},x("label",null,i,x("input",{bind:this,class:this.classes(ue.inputText,oe.input),"data-input-name":s,onchange:this._updateInputValue,placeholder:r,tabIndex:0,type:"text",value:n??""})))}_handleRootAfterCreate(t){this._rootNode=t,this.addHandles(g0(t,"scroll",()=>{this._templateListPopover.open&&this._handleCloseTemplateSelection()}))}_focusOnTabChange(t){if(!this._activeTabFocusRequested)return;const e=t.getAttribute("data-tab-id");(e==="layoutTab"&&this._layoutTabSelected||e==="mapOnlyTab"&&!this._layoutTabSelected)&&(t.focus(),this._activeTabFocusRequested=!1)}_renderLoader(){const t={[ue.loader]:this._awaitingServerResponse};return x("div",{class:this.classes(t),key:"loader"})}_createFileLink(t,e){const i=e||this.messages.untitled,r=t.format.toLowerCase(),n=r.includes("png")?"png":r,s=i+n;return this._exportedFileNameMap[s]!==void 0?this._exportedFileNameMap[s]++:this._exportedFileNameMap[s]=0,new Mse({name:i,extension:n,count:this._exportedFileNameMap[s]})}_resetToCurrentScale(){var t;this.templateOptions.scale=(t=this.viewModel.view)==null?void 0:t.scale}_updateCustomTextElementValue(t,e,i){t.find(r=>{const[n]=Object.entries(r)[0];return n===e})[e]=i}_updateInputValue(t){const e=t.target,i=e.getAttribute("data-input-name"),r=!!e["data-input-custom"],{templateOptions:n}=this;if(r)return void this._updateCustomTextElementValue(n.customTextElements,i,e.value);let s;if(e.type==="number"){if(!w8e(e.valueAsNumber)){const o=n[i];return void(e.value=`${o}`)}s=e.valueAsNumber}else s=e.value;n[i]=s}_handleDPIChange(t){this._updateInputValue(t);const e=t.currentTarget.valueAsNumber,{height:i,width:r}=b8e(e),{templateOptions:n}=this;n.height=i,n.width=r}_handlePrintMap(){var n;this._pendingExportScroll=!0;const{templateOptions:t}=this,e=this.viewModel.toPrintTemplate(t),i=this._layoutTabSelected?(n=e.layoutOptions)==null?void 0:n.titleText:t.fileName,r=this._createFileLink(e,i);this.exportedLinks.add(r),this.emit("submit",{link:r}),this.viewModel.print(e).then(s=>{r.set({url:s&&s.url,state:"ready"})}).catch(s=>{r.set({error:s,state:"error"})}).then(()=>{this.emit("complete",{link:r}),this.scheduleRender()})}_updateFromOption(t){var n;const e=t.target,i=e.selectedOptions?(n=e.selectedOptions.item(0))==null?void 0:n.value:e.options[e.selectedIndex].value,r=e.getAttribute("data-target-property");this.templateOptions[r]=i}_switchInput(){[this.templateOptions.width,this.templateOptions.height]=[this.templateOptions.height,this.templateOptions.width]}_showAdvancedOptions(){this._layoutTabSelected?this._advancedOptionsVisibleForLayout=!this._advancedOptionsVisibleForLayout:this._advancedOptionsVisibleForMapOnly=!this._advancedOptionsVisibleForMapOnly}_scrollExportIntoView(){if(!this._pendingExportScroll)return;this._pendingExportScroll=!1;const t=this._rootNode;if(!t)return;const{clientHeight:e,scrollHeight:i}=t,r=i-e;r>0&&(t.scrollTop=r)}_toggleInputValue(t){const e=t.target,i=e.getAttribute("data-option-name");this.templateOptions[i]=e.checked,i==="scaleEnabled"&&(this.templateOptions[i]||this._resetToCurrentScale())}_renderExportedLink(t){const e=this.messages;return t.map(i=>{const{error:r,url:n,state:s}=i,o=i.formattedName??"",a=s==="error",l=s==="pending",u=s==="ready",p={[oe.anchorDisabled]:l||a};let h=n||null;h&&(h=qme(h));const m=wf(n,location.href),y={[Re.loadingIndicator]:l,[oe.rotating]:l,[Re.download]:m&&u,[Re.launchLinkExternal]:!m&&u,[Re.error]:a,[ue.exportedFileError]:a},g={[ue.exportedFileError]:a};let v;v=l?e.pending:u?e.ready:e.errorMessage;const w=a?(r==null?void 0:r.name)==="print-task:cim-symbol-unsupported"?e.exportWebMapCIMError:e.exportWebMapError:"";return x("div",{"aria-label":v,class:ue.exportedFile,"data-item":i,key:o,onclick:this._removeLink,title:w},x("a",{"aria-label":`${o}. ${e.linkReady}`,class:this.classes(ue.exportedFileLink,oe.anchor,p),download:o,href:h??"",onclick:this._handleLinkClick,rel:"noreferrer",tabIndex:0,target:"_blank"},x("span",{class:this.classes(y)}),x("span",{class:this.classes(ue.exportedFileLinkTitle,g)},o)))})}_toggleLayoutPanel(t){const e=t.target;this._toggleTab(e.getAttribute("data-tab-id"))}_toggleTab(t,e=!0){var i,r,n;if(this._layoutTabSelected=t===il.layout,this._layoutTabSelected){const s=(n=(r=(i=this.viewModel)==null?void 0:i.templatesInfo)==null?void 0:r.layout)==null?void 0:n.choiceList;this.templateOptions.layout=s?s[0]:"letter-ansi-a-landscape"}else this.templateOptions.layout=Kse;e&&(this._activeTabFocusRequested=!0)}_handleLayoutPanelKeyDown(t){const e=K1(t),i=t.target.getAttribute("data-tab-id");if(_1(e))return this._toggleTab(i),t.preventDefault(),void t.stopPropagation();e!=="ArrowLeft"&&e!=="ArrowRight"||(this._toggleTab(i===il.layout?il.mapOnly:il.layout),t.preventDefault(),t.stopPropagation())}};function _8e(t){return t==null?void 0:t["data-template"]}c([d()],wi.prototype,"allowedFormats",null),c([d()],wi.prototype,"allowedLayouts",null),c([d()],wi.prototype,"error",null),c([d({type:Yse})],wi.prototype,"exportedLinks",void 0),c([d()],wi.prototype,"extraParameters",null),c([d()],wi.prototype,"headingLevel",void 0),c([d()],wi.prototype,"iconClass",void 0),c([d()],wi.prototype,"icon",void 0),c([d()],wi.prototype,"includeDefaultTemplates",null),c([d()],wi.prototype,"label",null),c([d(),hn("esri/widgets/Print/t9n/Print")],wi.prototype,"messages",void 0),c([d(),hn("esri/t9n/common")],wi.prototype,"messagesCommon",void 0),c([d()],wi.prototype,"portal",null),c([d()],wi.prototype,"printServiceUrl",null),c([d()],wi.prototype,"templateCustomTextElements",null),c([d({type:zse})],wi.prototype,"templateOptions",void 0),c([d()],wi.prototype,"view",null),c([d({type:jse})],wi.prototype,"viewModel",void 0),wi=c([k("esri.widgets.Print")],wi);const S8e=wi;uce("https://unpkg.com/@esri/calcite-components/dist/calcite/assets");Ze.apiKey="AAPKe6e512a89c5f46fcb137a3093825831bn11EaAo3IOaGQW0IREggmGRwFC0btmr9SnskvrnJCqizh-zE1y5IH-6vwNkHxoU-";function $8e(){const t=pd.useRef(),e=pd.useRef(),i=pd.useRef(),r=new URLSearchParams(window.location.search).get("webmap")??"baecd776cf124951b4df8ded7a643401",n=new gLe({portalItem:{id:r}});pd.useEffect(()=>{const o=new d5e({container:t.current,map:n,zoom:7,popupEnabled:!0});new OFe({view:o,container:e.current}),new q5e({view:o,container:"bookmarks-container"}),new XFe({view:o,selectionEnabled:!0,container:i.current}),new Cse({view:o,container:"legend-container"}),new S8e({view:o,container:"print-container"}),o.on("click",l=>{a(l)});const a=async l=>{const u=o.toMap(l),p=n.layers.find(m=>m.id==="18cabd5fe6d-layer-35");let h=await o.whenLayerView(p);h.visible=!0,console.log(h),console.log("PArt A clicked"),Gn(()=>h.dataUpdating,()=>{console.log("test")}),Gn(()=>!h.dataUpdating,async()=>{console.log(u),o.graphics.removeAll();const m=await h.queryObjectIds({outFields:["*"],returnGeometry:!0,geometry:u,spatialRelationship:"envelope-intersects"});console.log(m),h.filter={objectIds:m}})};return n.when(()=>{const{title:l,description:u,thumbnailUrl:p,avgRating:h}=n.portalItem;document.querySelector("#header-title").textContent=l;let m;const y=async({target:g})=>{if(g.tagName!=="CALCITE-ACTION")return;m&&(document.querySelector(`[data-action-id=${m}]`).active=!1,document.querySelector(`[data-panel-id=${m}]`).hidden=!0);const v=g.dataset.actionId;v!==m?(document.querySelector(`[data-action-id=${v}]`).active=!0,document.querySelector(`[data-panel-id=${v}]`).hidden=!1,m=v):m=null};document.querySelector("calcite-action-bar").addEventListener("click",y)}),()=>{o.removeHandles("click")}},[]);const s={width:"100%",height:"100%",padding:0,margin:0,position:"absolute",right:0};return Bt.jsx(Bt.Fragment,{children:Bt.jsxs(xhe,{"content-behind":!0,children:[Bt.jsx("h2",{id:"header-title",slot:"header"}),Bt.jsxs(Ehe,{slot:"panel-start","display-mode":"float",children:[Bt.jsxs(She,{slot:"action-bar",children:[Bt.jsx(_he,{"data-action-id":"layers",icon:"layers",text:"Layers"}),Bt.jsx("calcite-action",{"data-action-id":"basemaps",icon:"basemap",text:"Basemaps"}),Bt.jsx("calcite-action",{"data-action-id":"legend",icon:"legend",text:"Legend"}),Bt.jsx("calcite-action",{"data-action-id":"bookmarks",icon:"bookmark",text:"Bookmarks"}),Bt.jsx("calcite-action",{"data-action-id":"print",icon:"print",text:"Print"}),Bt.jsx("calcite-action",{"data-action-id":"information",icon:"information",text:"Information"})]}),Bt.jsx($he,{heading:"Layers","height-scale":"l","data-panel-id":"layers",hidden:!0,children:Bt.jsx("div",{ref:i})}),Bt.jsx("calcite-panel",{heading:"Basemaps","height-scale":"l","data-panel-id":"basemaps",hidden:!0,children:Bt.jsx("div",{ref:e})}),Bt.jsx("calcite-panel",{heading:"Legend","height-scale":"l","data-panel-id":"legend",hidden:!0,children:Bt.jsx("div",{id:"legend-container"})}),Bt.jsx("calcite-panel",{heading:"Bookmarks","height-scale":"l","data-panel-id":"bookmarks",hidden:!0,children:Bt.jsx("div",{id:"bookmarks-container"})}),Bt.jsx("calcite-panel",{heading:"Print","height-scale":"l","data-panel-id":"print",hidden:!0,children:Bt.jsx("div",{id:"print-container"})})]}),Bt.jsx("div",{className:"map-container",ref:t,style:s})]})})}xL.createRoot(document.getElementById("root")).render(Bt.jsx($2.StrictMode,{children:Bt.jsx($8e,{})}));export{Mt as $,d as A,xMe as B,gGe as C,k as D,B as E,Mk as F,K as G,Mqe as H,mi as I,ee as J,ro as K,ud as L,ct as M,Hee as N,qee as O,Ve as P,EMe as Q,Gy as R,ml as S,Ze as T,gwe as U,yw as V,Jme as W,Q3e as X,HHe as Y,WHe as Z,Z as _,RCe as a,TDe as a$,hr as a0,Of as a1,q as a2,Y as a3,Le as a4,y1 as a5,ce as a6,u_ as a7,wEe as a8,lI as a9,kY as aA,fg as aB,MY as aC,V9e as aD,Jte as aE,Owe as aF,Yh as aG,By as aH,Yb as aI,KF as aJ,cr as aK,X$ as aL,fR as aM,xs as aN,$e as aO,o8 as aP,RBe as aQ,A9e as aR,f9e as aS,WWe as aT,pie as aU,f4 as aV,Wf as aW,Es as aX,sp as aY,ITe as aZ,Wqe as a_,wt as aa,Vc as ab,An as ac,Ai as ad,d3e as ae,Sf as af,VJ as ag,d5 as ah,DF as ai,pUe as aj,kt as ak,kk as al,Pk as am,Vg as an,zUe as ao,G as ap,W1 as aq,_f as ar,Ame as as,Bn as at,vs as au,kE as av,$f as aw,u$ as ax,CY as ay,IY as az,Aee as b,vGe as b$,kqe as b0,Lqe as b1,Hqe as b2,Nqe as b3,bNe as b4,Xd as b5,sl as b6,Ne as b7,Me as b8,ha as b9,HCe as bA,bke as bB,n9 as bC,OY as bD,de as bE,F8e as bF,sGe as bG,nGe as bH,bk as bI,ebe as bJ,FZ as bK,jZ as bL,IIe as bM,CIe as bN,MIe as bO,Je as bP,mo as bQ,r_ as bR,he as bS,A7e as bT,iU as bU,h0e as bV,d0e as bW,L7e as bX,Yte as bY,uBe as bZ,pMe as b_,n_ as ba,pp as bb,bs as bc,lBe as bd,X5 as be,fp as bf,Uc as bg,mp as bh,Cl as bi,El as bj,YO as bk,Gt as bl,ZO as bm,QO as bn,NE as bo,Tee as bp,D as bq,K$ as br,oF as bs,a8 as bt,B9e as bu,IBe as bv,NBe as bw,n1 as bx,dke as by,KTe as bz,T9e as c,Qye as c$,fw as c0,S6 as c1,cX as c2,MBe as c3,DBe as c4,WCe as c5,kTe as c6,tCe as c7,NCe as c8,Gk as c9,Yre as cA,p9e as cB,Ahe as cC,q8e as cD,tge as cE,x5 as cF,E5 as cG,ige as cH,t_ as cI,i_ as cJ,yo as cK,vve as cL,bve as cM,wve as cN,Tve as cO,Lve as cP,PZ as cQ,OZ as cR,AZ as cS,Mve as cT,Nve as cU,Dve as cV,BE as cW,Z0e as cX,yve as cY,dA as cZ,zk as c_,GCe as ca,bTe as cb,QTe as cc,yd as cd,Ie as ce,zWe as cf,ns as cg,FWe as ch,DE as ci,pn as cj,g5 as ck,XCe as cl,KE as cm,_ke as cn,ft as co,STe as cp,FUe as cq,u9e as cr,eMe as cs,j9e as ct,Fn as cu,Y8e as cv,ef as cw,EO as cx,ERe as cy,pW as cz,ti as d,rI as d$,uX as d0,CF as d1,h$e as d2,cBe as d3,Sl as d4,y5 as d5,s_ as d6,t1 as d7,YSe as d8,iQ as d9,Ri as dA,aje as dB,M1 as dC,xw as dD,aJe as dE,O_ as dF,le as dG,uJe as dH,lje as dI,FBe as dJ,lr as dK,hUe as dL,xX as dM,dEe as dN,EF as dO,EX as dP,qne as dQ,Yd as dR,uEe as dS,Nje as dT,QB as dU,w0 as dV,Jf as dW,Tke as dX,Ske as dY,Hn as dZ,qn as d_,I$e as da,pBe as db,E$e as dc,rQ as dd,dBe as de,Yve as df,Rk as dg,dT as dh,k0e as di,UE as dj,Xb as dk,TZ as dl,O5 as dm,_Z as dn,lve as dp,X8e as dq,Xme as dr,wf as ds,a5 as dt,Uhe as du,m1 as dv,n1e as dw,k7e as dx,kje as dy,_t as dz,$A as e,hPe as e$,jn as e0,Yc as e1,oJ as e2,xk as e3,cF as e4,h_ as e5,c1 as e6,gs as e7,Txe as e8,Ak as e9,o7e as eA,WF as eB,tBe as eC,FY as eD,GSe as eE,Pn as eF,cd as eG,Cf as eH,lee as eI,op as eJ,_l as eK,lTe as eL,Zc as eM,M7e as eN,zqe as eO,vMe as eP,XS as eQ,Yf as eR,jg as eS,NJ as eT,i5 as eU,n2 as eV,eUe as eW,MHe as eX,hie as eY,WR as eZ,Xg as e_,kxe as ea,yee as eb,RUe as ec,jBe as ed,M0 as ee,Vee as ef,N9e as eg,$Ce as eh,z9e as ei,P9e as ej,Ji as ek,po as el,pV as em,eo as en,e1 as eo,GX as ep,Ln as eq,qe as er,v0 as es,PDe as et,R8e as eu,qme as ev,cye as ew,KS as ex,K8 as ey,eEe as ez,Ee as f,zF as f$,fie as f0,it as f1,YRe as f2,gF as f3,aT as f4,k9e as f5,U9e as f6,Zwe as f7,M9e as f8,Mwe as f9,G8e as fA,__ as fB,ive as fC,oJe as fD,qWe as fE,GWe as fF,qy as fG,_4e as fH,HWe as fI,vLe as fJ,Bc as fK,V0e as fL,B0e as fM,dve as fN,L5 as fO,q0e as fP,U0e as fQ,SZ as fR,Jr as fS,Mf as fT,nCe as fU,XIe as fV,hke as fW,e8 as fX,ZK as fY,iMe as fZ,$ke as f_,nA as fa,jqe as fb,JD as fc,fPe as fd,_6 as fe,Q1 as ff,IUe as fg,Eke as fh,Vwe as fi,wZ as fj,tve as fk,cPe as fl,sr as fm,dPe as fn,J1 as fo,Qo as fp,bfe as fq,zX as fr,bMe as fs,Kye as ft,FP as fu,nQ as fv,h4e as fw,Zd as fx,l7e as fy,W2e as fz,Pee as g,Uqe as g$,fI as g0,$M as g1,QP as g2,jF as g3,cI as g4,mEe as g5,wke as g6,QF as g7,jee as g8,JCe as g9,lX as gA,J7e as gB,W7e as gC,q7e as gD,fIe as gE,ike as gF,Zke as gG,Yke as gH,$Te as gI,Ake as gJ,Pke as gK,Rke as gL,Dke as gM,Fke as gN,jke as gO,zke as gP,Vke as gQ,Uke as gR,Bke as gS,Gke as gT,Hke as gU,Fee as gV,xke as gW,RDe as gX,Vqe as gY,Cqe as gZ,Bqe as g_,u1e as ga,c1e as gb,xwe as gc,uA as gd,cl as ge,un as gf,ol as gg,Il as gh,ei as gi,jhe as gj,fV as gk,Pd as gl,nye as gm,wl as gn,xr as go,Sk as gp,p1 as gq,BF as gr,Ike as gs,kke as gt,b0 as gu,qke as gv,jY as gw,DEe as gx,Kc as gy,TF as gz,d9e as h,$0 as h$,VF as h0,X2e as h1,jE as h2,yi as h3,Gn as h4,g0 as h5,h9e as h6,qr as h7,R3e as h8,iZ as h9,YD as hA,xl as hB,Jm as hC,Oke as hD,dGe as hE,eIe as hF,VWe as hG,fE as hH,PBe as hI,b9e as hJ,Jb as hK,hI as hL,MF as hM,ETe as hN,TTe as hO,LCe as hP,I7e as hQ,Ime as hR,Y0e as hS,EZ as hT,_W as hU,SW as hV,j8e as hW,Ya as hX,Ke as hY,Pe as hZ,oI as h_,ZD as ha,Rge as hb,EDe as hc,Rqe as hd,$De as he,Aqe as hf,Pqe as hg,ore as hh,Sbe as hi,t9e as hj,VUe as hk,cTe as hl,O7e as hm,Hx as hn,DP as ho,qW as hp,x9e as hq,H8e as hr,z8e as hs,ys as ht,bUe as hu,pa as hv,mt as hw,oT as hx,rGe as hy,aee as hz,PCe as i,eve as i$,Sr as i0,Ts as i1,Hwe as i2,Wwe as i3,Che as i4,tUe as i5,iBe as i6,ST as i7,O0 as i8,UD as i9,e9e as iA,q1 as iB,fUe as iC,mUe as iD,$9e as iE,ks as iF,If as iG,af as iH,Tie as iI,r4e as iJ,S0 as iK,G9e as iL,QJ as iM,w5 as iN,Oge as iO,jge as iP,Nk as iQ,n9e as iR,V8e as iS,y9e as iT,uve as iU,gE as iV,u3e as iW,C0e as iX,N2e as iY,aI as iZ,xbe as i_,BD as ia,y7e as ib,rBe as ic,Qke as id,Fd as ie,wU as ig,r1 as ih,_Pe as ii,v9e as ij,RZ as ik,hN as il,TC as im,Mv as io,yWe as ip,xZ as iq,yV as ir,d1e as is,Xs as it,Eee as iu,Bhe as iv,aF as iw,CBe as ix,kBe as iy,E as iz,gi as j,wUe as j$,qE as j0,g9e as j1,D8e as j2,Phe as j3,a4e as j4,DB as j5,cp as j6,jWe as j7,o1 as j8,T$e as j9,XUe as jA,MPe as jB,M0e as jC,Jbe as jD,GZ as jE,gbe as jF,Rs as jG,B$e as jH,hn as jI,yn as jJ,x as jK,QE as jL,bOe as jM,MB as jN,$W as jO,PUe as jP,Ome as jQ,Ok as jR,UUe as jS,R7e as jT,qD as jU,Vye as jV,F9e as jW,Cfe as jX,SUe as jY,_Ue as jZ,$Ue as j_,k$e as ja,EY as jb,Awe as jc,C9e as jd,S2e as je,ZBe as jf,Xt as jg,fxe as jh,Kre as ji,Oqe as jj,lp as jk,pR as jl,SCe as jm,X7e as jn,N as jo,wee as jp,Bk as jq,L0e as jr,O0e as js,A0e as jt,I0e as ju,Abe as jv,BZ as jw,Wbe as jx,aPe as jy,W6 as jz,ywe as k,OE as k$,B8e as k0,Ohe as k1,D9e as k2,uPe as k3,YAe as k4,HAe as k5,x_ as k6,m9e as k7,M5 as k8,F5 as k9,cJe as kA,L_ as kB,lJe as kC,Ah as kD,N7e as kE,Uye as kF,fQ as kG,D7e as kH,xTe as kI,BWe as kJ,QUe as kK,J8e as kL,Z8e as kM,W8e as kN,Yme as kO,Ebe as kP,ybe as kQ,vbe as kR,dUe as kS,bW as kT,ln as kU,T1 as kV,APe as kW,S1 as kX,a7e as kY,s7e as kZ,ePe as k_,NUe as ka,HW as kb,wW as kc,LJ as kd,l5 as ke,AUe as kf,Rd as kg,Xye as kh,A6 as ki,kQ as kj,wT as kk,xAe as kl,Ph as km,Q7e as kn,ZIe as ko,t7e as kp,x2e as kq,Zi as kr,sf as ks,gg as kt,Xxe as ku,bZ as kv,DUe as kw,lm as kx,lke as ky,mPe as kz,C7e as l,zg as l$,LO as l0,Hi as l1,pke as l2,o4e as l3,d$e as l4,nBe as l5,oBe as l6,sBe as l7,aBe as l8,_s as l9,qwe as lA,O9e as lB,Uwe as lC,Bwe as lD,I9e as lE,Y7e as lF,K7e as lG,Z7e as lH,D0e as lI,Hve as lJ,$Z as lK,dY as lL,s5 as lM,S9e as lN,_9e as lO,I4 as lP,bge as lQ,vge as lR,i9e as lS,eme as lT,wqe as lU,xI as lV,EI as lW,S_ as lX,Qg as lY,zd as lZ,Lie as l_,hBe as la,gee as lb,vee as lc,KIe as ld,L0 as le,yF as lf,qxe as lg,Wxe as lh,v_ as li,KQ as lj,Eje as lk,h2e as ll,Tje as lm,wF as ln,sT as lo,Yw as lp,WQ as lq,lw as lr,WEe as ls,p7e as lt,wfe as lu,Lt as lv,MRe as lw,Ose as lx,Hr as ly,N8e as lz,jk as m,j$e as m$,gqe as m0,$k as m1,jUe as m2,yie as m3,jd as m4,dr as m5,kI as m6,E9e as m7,iie as m8,Dte as m9,QWe as mA,XWe as mB,Xk as mC,jT as mD,YWe as mE,KWe as mF,R9e as mG,nJe as mH,g4e as mI,v4e as mJ,yne as mK,ZWe as mL,b4e as mM,Q5 as mN,iA as mO,SSe as mP,f4e as mQ,N$e as mR,X9e as mS,I_ as mT,oe as mU,KGe as mV,w1 as mW,Re as mX,Vd as mY,tF as mZ,The as m_,rie as ma,T3e as mb,LHe as mc,D3e as md,x1 as me,OHe as mf,Pte as mg,Xo as mh,m4e as mi,OIe as mj,AIe as mk,PIe as ml,Qd as mm,IJ as mn,kwe as mo,L9e as mp,oPe as mq,JWe as mr,sJe as ms,tJe as mt,eJe as mu,iJe as mv,rJe as mw,jB as mx,VB as my,zB as mz,HMe as n,pJe as n0,Nie as n1,K1 as n2,F$e as n3,tT as n4,rT as n5,l1 as n6,K8e as n7,s5e as n8,AWe as n9,eGe as nA,iGe as nB,hGe as nC,Yqe as na,e_ as nb,Se as nc,c_ as nd,pQ as ne,hQ as nf,wre as ng,dJe as nh,Nre as ni,pA as nj,XR as nk,fve as nl,FPe as nm,jPe as nn,PPe as no,dye as np,LBe as nq,OBe as nr,G0e as ns,Ybe as nt,Zbe as nu,Mhe as nv,ABe as nw,Xf as nx,r7e as ny,z7e as nz,Iqe as o,Jee as p,Tqe as q,zie as r,j as s,Gqe as t,ENe as u,Fqe as v,Zf as w,qqe as x,Dqe as y,c as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ElevationLayer-XotiXLux.js","assets/ArcGISCachedService-bHqBy6w_.js","assets/TileInfoTilemapCache-1taltENZ.js","assets/TilemapCache-0uH9ulgo.js","assets/ByteSizeUnit-UjtePjs8.js","assets/layersCreator-NYJ93n7K.js","assets/portalLayers-NbT0moLe.js","assets/associatedFeatureServiceUtils-3AIkVlGR.js","assets/lazyLayerLoader-VnlnrbWG.js","assets/arcgisLayers-gOy5Z2-M.js","assets/fetchService-D8nO-zwc.js","assets/WhereClause-C-EKvWWd.js","assets/TimeOnly-R83z88xM.js","assets/arcadeUtils-wc62o7Hx.js","assets/number-0wKY0E8l.js","assets/featureConversionUtils-6MTAsXLs.js","assets/OptimizedFeature-5RGb7-P9.js","assets/OptimizedFeatureSet-smVI1ez9.js","assets/OptimizedGeometry-CbNXANBG.js","assets/statsWorker-dvWkaqPz.js","assets/utils-qrc25nXd.js","assets/quantizationUtils-n7I1jEKI.js","assets/generateRendererUtils-sn_se3qN.js","assets/geometryEngineWorker-Lj1lDNuP.js","assets/geometryEngineJSON-Jns6dvac.js","assets/geometryEngineBase-ePaF6YfN.js","assets/json-v6EOeNTY.js","assets/CSVSourceWorker-OiLkkgMm.js","assets/date-be_IQzZd.js","assets/FeatureStore-oRlVK9zt.js","assets/BoundsStore-icdZfAHo.js","assets/PooledRBush-SKbZMPLg.js","assets/timeSupport-v2aXB5NK.js","assets/projectionSupport--YJUaBfm.js","assets/QueryEngine-IeSeqXj3.js","assets/QueryEngineCapabilities-PzVpW5yD.js","assets/clientSideDefaults-2mlzqtld.js","assets/EdgeProcessingWorker-Hf-D3IJ8.js","assets/InterleavedLayout-aJf6uYM1.js","assets/BufferView-_HugOlH0.js","assets/types-GBdbcYRa.js","assets/edgeProcessing-wzL1_vqb.js","assets/deduplicate-sedDPv0y.js","assets/Indices-U2EsGAZj.js","assets/VertexAttribute-BUG0xkjK.js","assets/enums-8pc8f5Ge.js","assets/VertexElementDescriptor-0hGjloLE.js","assets/ElevationSamplerWorker-RsQOVBre.js","assets/georeference-ChFyQjn3.js","assets/mat3f64-sunSSgMR.js","assets/mat4f64-aoQZ5j3f.js","assets/spatialReferenceEllipsoidUtils-MepAdIAa.js","assets/MeshLocalVertexSpace-X82BaJT8.js","assets/MeshGeoreferencedRelativeVertexSpace-1gPrBHoz.js","assets/quat-DPRPkpI4.js","assets/quatf64-5VCgza3C.js","assets/vec32-5DRmjwQy.js","assets/FeatureServiceSnappingSourceWorker-Wz5_d2Ip.js","assets/pbfQueryUtils-rDpJZjvc.js","assets/pbf-OnHO7G4F.js","assets/query-4KLhs2In.js","assets/GeoJSONSourceWorker-4bYgRlqB.js","assets/geojson-b8VQdf2B.js","assets/sourceUtils-HJHR5b06.js","assets/MemorySourceWorker-SDo09kPs.js","assets/objectIdUtils-GktMsX8e.js","assets/PBFDecoderWorker-I4s6oCQy.js","assets/Pipeline-96Fa9qpB.js","assets/FeatureStore2D-xTjWnlsZ.js","assets/CircularArray-1_thnT0U.js","assets/ComputedAttributeStorage-sO7ul2G7.js","assets/labelPoint-3rLs0OQi.js","assets/definitions-t6EJN9lX.js","assets/visualVariablesUtils-usph7ynk.js","assets/color-fkODQCEp.js","assets/enums--FbEXJ87.js","assets/number-sTjsTbdA.js","assets/ogcFeatureUtils-p4vj_BAu.js","assets/createConnection-ZUQ8ozYy.js","assets/geohashUtils-U0jvYCSY.js","assets/PointCloudWorker-em_i7MGz.js","assets/vec3f32-6rWBPTzX.js","assets/PointCloudUniqueValueRenderer-OS-uh3Fe.js","assets/I3SBinaryReader-Iv4cU9mA.js","assets/RasterWorker-IgdA9yPo.js","assets/dataUtils-J8sk_KTi.js","assets/RasterSymbolizer-3QwI11E_.js","assets/utils-Lm-YQEEW.js","assets/rasterProjectionHelper-ZJnnznDj.js","assets/SceneLayerSnappingSourceWorker-g9E4dF6t.js","assets/lineSegment-h69rJ5SY.js","assets/sphere-N5A7XRsD.js","assets/plane-1pFzn2or.js","assets/SceneLayerWorker-D1cBN2EP.js","assets/WFSSourceWorker-J9DCpEhp.js","assets/wfsUtils-qZ0HwXEF.js","assets/xmlUtils-Q_9cB30b.js","assets/WorkerTileHandler-99Lm0jqf.js","assets/enums-W_WZ2jKy.js","assets/GeometryUtils-CEMOhUyj.js","assets/Rect-pT1ASav_.js","assets/config-z2KFXUcx.js","assets/StyleDefinition-ohiNeWtS.js","assets/TurboLine-LeY1t2-E.js","assets/StyleRepository-rQnWOxV8.js","assets/earcut-cCK3zwoX.js","assets/BidiEngine-8z8MVveq.js","assets/layersLoader-Trd-DdwV.js","assets/jsonContext-VOnM_z9i.js","assets/featureLayerUtils-41gKs5Y2.js","assets/originUtils-1w5HeAJR.js","assets/multiOriginJSONSupportUtils-R5XHSAtL.js","assets/utils-RTexA_EI.js","assets/saveAPIKeyUtils-FKmOm4AP.js","assets/FeatureLayerSource-ATlmWKlx.js","assets/External-fidZFFAZ.js","assets/editingSupport-ZLOmiRNr.js","assets/QueryTask-FNAuRpsP.js","assets/executeForIds-canfoXwW.js","assets/executeQueryJSON-dAIfYaYH.js","assets/executeQueryPBF-7Q_4UNw9.js","assets/queryAssociations-_8KmtyoE.js","assets/Association-sQyd7aZx.js","assets/synthesizeAssociationGeometries-8hBE1yOH.js","assets/webdocSaveUtils-YNFf_mwh.js","assets/saveUtils-3W-wjGHH.js","assets/resourceUtils-0deFedx4.js","assets/Popup-W2vCMybQ.js","assets/throttle-SZpAiZ7F.js","assets/AttachmentInfo-DO2do-FE.js","assets/webglDeps-flB-dAyJ.js","assets/FramebufferObject-YojrUa_N.js","assets/Texture--Zqu2G7p.js","assets/ProgramTemplate-gEAz8LDK.js","assets/NestedMap-9UouPomH.js","assets/mapViewDeps-FV7iZGZ-.js","assets/CIMResourceManager-MkpoMb1T.js","assets/fontUtils-flNZiNbu.js","assets/imageUtils-ITRvz4DA.js","assets/Container-3hREPjV1.js","assets/BufferPool-iRSuvpGZ.js","assets/AttributeStoreView-AA2hnaBe.js","assets/TiledDisplayObject-0foEm4-e.js","assets/WGLContainer-nb9pK_2B.js","assets/GeometryUtils-q-uRjIy3.js","assets/alignmentUtils-XT3TYmYW.js","assets/cimAnalyzer-IjUdWrru.js","assets/floatRGBA-iLUgH9u1.js","assets/ExpandedCIM-H4slnSfZ.js","assets/util-Nr5Du2Ty.js","assets/MagnifierPrograms-1ZFzaLey.js","assets/Rasterizer-0DDvPaiz.js","assets/rasterizingUtils-XhUE5aST.js","assets/imageutils-Xlrf8k1-.js","assets/Matcher-BpR8mfN3.js","assets/tileUtils-pcBJnprf.js","assets/testSVGPremultipliedAlpha-XuXJAw1F.js","assets/RenderingContext-2geDdC1F.js","assets/OrderIndependentTransparency-JGZ_PxZN.js","assets/basicInterfaces-IwaMq8O_.js","assets/doublePrecisionUtils-HJiLm-yC.js","assets/GraphicsView2D-eBK-qoaQ.js","assets/normalizeUtilsSync-7RRouG00.js","assets/GraphicContainer-2ugk_y_Z.js","assets/BaseGraphicContainer-pgbkvQD7.js","assets/FeatureContainer-1tG95iHH.js","assets/TileContainer-jCE_KyJs.js","assets/requestImageUtils-iPEYlJIS.js","assets/TileLayerView2D-kNTkB0TW.js","assets/imageUtils-WLtqEp2K.js","assets/BitmapTileContainer-ahLBgYOc.js","assets/Bitmap-1QWZHaQZ.js","assets/LayerView-ZngOj54l.js","assets/HighlightGraphicContainer-tOJ6y_HG.js","assets/RefreshableLayerView-PU_SHhO5.js","assets/drapedUtils-BavsmHAn.js","assets/popupUtils-43ADgUcb.js","assets/FeatureLayerView2D-IlI8C7q2.js","assets/BaseDynamicLayerView2D-koDJqo6u.js","assets/BitmapContainer-zxQrSlM0.js","assets/ExportStrategy-f8iyj6Uk.js","assets/GeoRSSLayerView2D-ytuwRnJb.js","assets/GraphicsLayerView2D-lnEQNsL8.js","assets/GroupLayerView2D-gAw5ejUd.js","assets/ImageryLayerView2D-6flWPNA0.js","assets/RasterVFDisplayObject-wDYlYrVC.js","assets/ImageryTileLayerView2D-Yfvkm1bN.js","assets/multidimensionalUtils-KZ58z5m4.js","assets/rasterUtils-0xffTUCk.js","assets/RawBlockCache-TBQ9PaWi.js","assets/KMLLayerView2D-uyuiTUpC.js","assets/kmlUtils-svwCAGg6.js","assets/KnowledgeGraphLayerView2D-qf2Q-YDj.js","assets/MapImageLayerView2D-kb_BjM5a.js","assets/MapNotesLayerView2D-Pz4S0oE2.js","assets/MediaLayerView2D-3MeXSRLp.js","assets/perspectiveUtils-YwNbd-Wg.js","assets/OGCFeatureLayerView2D-12UBoTI6.js","assets/RouteLayerView2D-kfQiB08P.js","assets/Stop-ccI4Lp77.js","assets/StreamLayerView2D-aBAYjGzJ.js","assets/SubtypeGroupLayerView2D-qMNY8rYd.js","assets/VectorTileLayerView2D-OhcTU5CY.js","assets/VideoLayerView2D-VpdgyixZ.js","assets/GraphicsLayer-x1frjo1_.js","assets/WMSLayerView2D-zZITza7H.js","assets/ExportWMSImageParameters-Y5-6-JnR.js","assets/WMTSLayerView2D-GS8jVX6a.js","assets/calcite-button-AgDMVj7S.js","assets/form-qGkpVk0t.js","assets/interactive-p7lttOK-.js","assets/label2-sX_ojA70.js","assets/loadable-Zh5WpE4a.js","assets/t9n-1-39yeuZ.js","assets/key-qdHumIlA.js","assets/observers-JFnOZr_E.js","assets/component-dtiBfYiX.js","assets/icon-SrnDVIcW.js","assets/loader-mFVAKQH2.js","assets/guid-6vN-YNJI.js","assets/calcite-icon-CWBBFVdI.js","assets/calcite-popover-o4wMeL5q.js","assets/popover-hDQiZnMd.js","assets/FloatingArrow-yDWtWMIM.js","assets/debounce-HnHf1UOZ.js","assets/openCloseComponent-KWYhUi8_.js","assets/action-V_Zp_6Yy.js","assets/calcite-label-h5HkNlYy.js","assets/calcite-switch-A7JQBShj.js","assets/calcite-tooltip-DBUo9Rpf.js","assets/calcite-scrim-_Sd30jQr.js","assets/scrim-vToXZWIS.js","assets/calcite-chip-x07UbXSQ.js","assets/conditionalSlot-1Y9d2rvq.js","assets/previewSymbol2D-sAnHR1p-.js","assets/previewCIMSymbol-OgaOUbxf.js","assets/MapImageLayer-Wx7I5L-s.js","assets/SublayersOwner-0POmnkD5.js","assets/imageBitmapUtils-L2HEgX1Y.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}